;/*FB_PKG_DELIM*/

__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("base64Binary").encode(new(d("XPlatReactTextEncoder").TextEncoder)().encode(a))}function b(a){return d("base64Binary").encode(new Uint8Array(a))}function c(a){return d("base64Binary").decode(a).buffer}g.encodeUnicode=a;g.fromArrayBuffer=b;g.toArrayBuffer=c}),98);
__d("BroadcastChannelFallback",["FBLogger","WAMapWithDefault"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAMapWithDefault").MapWithDefault)(function(){return new Set()});function a(a,b){h.get(a).add(b)}function b(a,b){h.get(a)["delete"](b)}function e(a,b){var d=h.get(a);d.forEach(function(a){return a(b)});d.size===0&&c("FBLogger")("BroadcastChannelFallback").warn("No listener for namespace",a)}g.registerBroadcastChannelFallbackListener=a;g.unregisterBroadcastChannelFallbackListener=b;g.handleBroadcastChannelFallbackMessage=e}),98);
__d("EBBase64Encode",["Base64Utils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("Base64Utils").fromArrayBuffer(a)}g["default"]=a}),98);
__d("EBDeps",["FBLogger","err"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(){if(h==null)throw c("err")("EBDeps is not initialized");return h}function b(a,b){if(h!=null)return;var d={},e=function(e){var f=a[e];f instanceof Function?d[e]=function(){c("FBLogger")("wmi_eb").info("EBDeps: function %s, reason %s",e,b);for(var d=arguments.length,g=new Array(d),h=0;h<d;h++)g[h]=arguments[h];return f.apply(a,g)}:(c("FBLogger")("wmi_eb").info("EBDeps: %s is not function",e),d[e]=f)};for(var f of Object.keys(a))e(f);h=d}g.getDeps=a;g.setDeps=b}),98);
__d("EBGating",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15195")}g.isEBSMv2Phase1Enabled=a}),98);
__d("LSEncryptedBackupsBackupTenancy",[],(function(a,b,c,d,e,f){a=Object.freeze({PRODUCTION:1,SHADOW:2,OPEN:3});f["default"]=a}),66);
__d("WAPubSub",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(){this.$1=new Set()}var b=a.prototype;b.publish=function(a){this.$1.forEach(function(b){return b(a)})};b.subscribe=function(a){var b=this;this.$1.add(a);return function(){b.$1["delete"](a)}};return a}();b=function(){function a(){this.$1=new Map()}var b=a.prototype;b.publish=function(a,b){a=this.$2(a);a.forEach(function(a){return a(b)})};b.$2=function(a){(!this.$1.has(a)||this.$1.get(a)==null)&&this.$1.set(a,new Set());a=this.$1.get(a);if(a==null)throw c("err")("Key space should not be null");return a};b.subscribe=function(a,b){var c=this.$2(a);c.add(b);return function(){c["delete"](b)}};return a}();function a(){return new h()}g.WAPubSub=h;g.WAKeyedPubSub=b;g.simplePubSub=a}),98);
__d("WAGenericStateManager",["Promise","WAPubSub"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$2=d("WAPubSub").simplePubSub(),this.$1=a}var c=a.prototype;c.onSet=function(a){return this.$2.subscribe(a)};c.set=function(a){this.$1=a;this.$2.publish(a);return this.$1};c.get=function(){return this.$1};c.waitForValue=function(a){var c=this;return this.$1===a?(h||(h=b("Promise"))).resolve():new(h||(h=b("Promise")))(function(b){var d=c.onSet(function(c){c===a&&(d(),b())})})};return a}();g.WAGenericStateManager=a}),98);
__d("MAWEBEnabledStateManager",["WAGenericStateManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.call(this,!1)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.isEnabled=function(){return this.get()};c.waitForEBEnabled=function(){return this.waitForValue(!0)};return b}(d("WAGenericStateManager").WAGenericStateManager);g.MAWEBEnabledStateManager=a}),98);
__d("MAWEBSwitch",["EBGating","ExecutionEnvironment","MAWEBEnabledStateManager","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;a=c("requireDeferred")("EBIsEbEnabledSubscriber").__setRef("MAWEBSwitch");var i=new(d("MAWEBEnabledStateManager").MAWEBEnabledStateManager)();((h||(h=c("ExecutionEnvironment"))).isInMainThread===!0||d("EBGating").isEBSMv2Phase1Enabled())&&void a.load().then(function(a){return a.subscribeToEbChanges(function(a){i.set(a)})});b=i;g["default"]=b}),98);
__d("LSDataTraceCheckPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CLIENT_DB_OUTBOUND:1,CLIENT_NETWORK_OUTBOUND:2,CLIENT_NETWORK_INBOUND:10,CLIENT_DB_INBOUND:11,CLIENT_EVALUATE_DASM:12,CLIENT_APP_STATE_CHANGE:13,CLIENT_CREATE_TASK:20,CLIENT_RECIPIENT_PRESENCE:21,CLIENT_EVALUATE_DASM_BEGIN:22,MQTT_PUBLISH:30,MQTT_PUBLISH_ACK:31,MQTT_DISCONNECTED:32,MQTT_CONNECTING:33,MQTT_CONNECTED:34,MQTT_CONNECTION_ACKED:35,TINCAN_RECEIVE_MESSAGE:36,TINCAN_RECEIVE_DECRYPTION_COMPLETE:37,TINCAN_RECEIVE_DECRYPTION_FAILED:38,TINCAN_RECEIVE_DR_QUEUED:39,TINCAN_RECEIVE_DR_SENT_TO_NETWORK:40,TINCAN_RECEIVE_DR_PUBLISH_TO_MQTT:41,TINCAN_RECEIVE_DRMQTT_PUBACK:42,TINCAN_RECEIVE_BOUNCE_TASK_QUEUED:43,TINCAN_RECEIVE_BOUNCE_TASK_SENT_TO_NETWORK:44,TINCAN_RECEIVE_BOUNCE_TASK_PUBLISH_TO_MQTT:45,RICH_MEDIA_DOWNLOAD_START:50,RICH_MEDIA_DOWNLOAD_END:51,RICH_MEDIA_DOWNLOAD_ERROR:52,RICH_MEDIA_UPLOAD_START:53,ARMADILLO_ACT:60,ARMADILLO_ACT_TASK_PICK:61,ARMADILLO_ACT_SERIALIZE:62,ARMADILLO_ACT_GROUP_SEND:63,ARMADILLO_ACT_SEND_FAILURE:64,ARMADILLO_ACT_MESSAGE_SEND:65,NETWORK_DISCONNECTED:70,NETWORK_CONNECTED:71,NETWORK_UNKNOWN:72,FLOW_CREAT:80,FLOW_END:81,FLOW_INTERRUPTED:82,FLOW_CONNECT_ID:83,FLOW_END_AND_FLUSH:84,FLOW_END_FOR_FAILURE:85,TRACE_CREATED:98,CLIENT_READY_TO_FLUSH:99,PENDING_DELTA:100,NO_PENDING_DELTA:101,INIT_SYNC:102,RESNAPSHOT:103,CATCH_UP:104,PERIODIC_SYNC:105,CATCH_UP_FROM_REVISION:106,RESNAPSHOT_CONTINUE:107,RESNAPSHOT_END:108,PERIODIC_SYNC_CONTINUE:109,PERIODIC_SYNC_END:110,CONTACT_SYNC_OPTIMISTIC:111,CONTACT_SYNC_FROM_OMNISTORE:112,CONTACT_SYNC_TAM_OPTIMISTC:113,CONTACT_SYNC_TAM_FROM_OMNISTORE:114,CONTACT_SYNC_TAM_ERROR:115,VERIFY_USER_FOR_SYNC:116,SNAPSHOT_START:117,SNAPSHOT_CONTINUE:118,SNAPSHOT_END:119,FETCH_DELTA:120,DELTA_SUMMARY:130,RECEIVE_DELIVERY_RECEIPT:200,TASK_DESERIALIZATION_ERROR:201,OPTIMISIC_MESSAGE_FAILED:202,SEND_SERVER_AUTHORITATIVE:203,THREAD_RANGE_QUERY_COMPLETE:204,THREAD_RANGE_QUERY_FAILURE:205,THREAD_POINT_QUERY_COMPLETE:206,SEND_SERVER_PARTIAL:207,MARK_AS_OPTIMISTIC_SENT:208,XMS_TRANSPORT_MESSAGE_SEND_START:300,XMS_TRANSPORT_MESSAGE_SEND_FAIL:301,SKIP_TASK_DISPATCH:900,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_START:1200,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_COMPLETE:1201,ADVANCED_CRYPTO_MEM_WA_PUBLISH:1202,ADVANCED_CRYPTO_MEM_PUBLISH_ACK:1203,ADVANCED_CRYPTO_MEM_SEND_TASK_COMPLETE:1204,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED:1205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING:1206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED:1207,ADVANCED_CRYPTO_MEM_FAILURE:1208,ADVANCED_CRYPTO_MEM_SEND_SUCCESS_WITH_RETRY:1209,ADVANCED_CRYPTO_MEM_DELIVERY_RECEIPT_RECEIVED:1210,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_START:1211,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_END:1212,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_START:1213,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_RETRYSTART:1214,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_END:1215,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_START:1216,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_END:1217,ADVANCED_CRYPTO_REGISTRATION_WCR_REGISTER:1218,ADVANCED_CRYPTO_REGISTRATION_SAVE_WA_DEVICE_ID_ERROR:1219,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_START:1220,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_END:1221,ADVANCED_CRYPTO_MEM_ENCRYPTION_BEGIN:1222,ADVANCED_CRYPTO_MEM_ENCRYPTION_END:1223,ADVANCED_CRYPTO_MEM_ENCRYPTION_DEVICE_COUNT:1224,ADVANCED_CRYPTO_DUAL_SEND:1225,ADVANCED_CRYPTO_REGISTRATION_SERVER_SUCCESS:1226,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER:1227,ADVANCED_CRYPTO_REGISTRATION_CAT_NULL:1228,ADVANCED_CRYPTO_REGISTRATION_WCR_MANAGER_NULL:1229,ADVANCED_CRYPTO_REGISTRATION_RESPONSE_NULL:1230,ADVANCED_CRYPTO_REGISTRATION_SELF_NULL:1231,ADVANCED_CRYPTO_REGISTRATION_EMPTY_DEVICE_ID:1232,ADVANCED_CRYPTO_REGISTRATIONRETRY_REGISTER_FAILURE:1233,ADVANCED_CRYPTO_GROUP_DUAL_SEND:1234,RAVEN_IMAGE_MESSAGE:1235,RAVEN_VIDEO_MESSAGE:1236,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_CAT:1237,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_NETWORK:1238,ADVANCED_CRYPTO_CAT_DISK_FETCH_CAT_INVALID:1239,ADVANCED_CRYPTO_RECONNECT_GENERIC_ERROR:1240,ADVANCED_CRYPTO_RECONNECT_CAT_INVALID:1241,ADVANCED_CRYPTO_RECONNECT_CAT_EXPIRED:1242,ADVANCED_CRYPTO_CAT_MEMORY_FETCH_NULL:1243,ADVANCED_CRYPTO_FIRST_CONNECTION_START:1244,LABYRINTH_INITIALIZE_BACKUP_SPROC:1400,LABYRINTH_INITIALIZE_BACKUP_SUCCESS_SPROC:1401,LABYRINTH_INITIALIZE_BACKUP_FAILURE:1402,LABYRINTH_CREATE_BACKUP_MAILBOX_SPROC:1403,LABYRINTH_HANDLE_CREATE_BACKUP_MAILBOX_SUCCESS_SPROC:1404,LABYRINTH_OPEN_EPOCH_SPROC:1405,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC:1406,LABYRINTH_HANDLER_OPEN_EPOCH_FAILURE_SPROC:1407,LABYRINTH_CREATE_VIRTUAL_DEVICE_SPROC:1410,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_SUCCESS_SPROC:1411,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_FAILURE_SPROC:1412,LABYRINTH_ADD_DEVICE_SPROC:1413,LABYRINTH_ADD_DEVICE_FROM_VIRTUAL_SPROC:1414,LABYRINTH_HANDOLE_WRONG_RECOVERY_CODE_SPROC:1415,LABYRINTH_HANDLE_ADD_DEVICE_SUCCESS_SPROC:1416,LABYRINTH_HANDLE_ADD_DEVICE_FAILURE_SPROC:1417,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_ALREADY_PENDING:1600,LABYRINTH_ADD_DEVICE_SPROC_UPDATE_RECOVERY_DATA_TABLE_START:1601,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_NO_VD_TABLE:1602,LABYRINTH_ADD_DEVICE_SPROC_GENERATE_RECOVERY_SECRETS_START:1603,LABYRINTH_ADD_DEVICE_SPROC_WRONG_RC:1604,LABYRINTH_ADD_DEVICE_SPROC_NULL_VD:1605,LABYRINTH_ADD_DEVICE_SPROC_NO_RC_STATUS_TABLE_FOUND:1606,LABYRINTH_ADD_DEVICE_SPROC_ISSUE_FETCH_VD_TASK:1607,LABYRINTH_ADD_DEVICE_SPROC_SUCCESS:1608,LABYRINTH_INITIALIZE_RESTORE_SPROC:1418,LABYRINTH_DECRYPT_THREADS_SPROC:1419,LABYRINTH_REQUEST_MESSAGES_FROM_THREADS_SPROC:1420,LABYRINTH_REQUEST_MESSAGES_FROM_RANGE_QUERY_SPROC:1421,LABYRINTH_DECRYPT_MESSAGES_SPROC:1422,LABYRINTH_DELETE_BACKUP_ON_CLIENT_SPROC:1423,LABYRINTH_DELETE_BACKUPS_SPROC:1424,LABYRINTH_HANDLE_DELETE_MAILBOX_SPROC:1425,LABYRINTH_ISSUE_DELETE_BACKUP_TASK_SPROC:1426,LABYRINTH_BACKUP_UPLOAD_BEGIN:1427,LABYRINTH_BACKUP_UPLOAD_SUCCESS_SPROC:1428,LABYRINTH_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC:1429,LABYRINTH_QR_INIT_ADD_DEVICE_SPROC:1430,LABYRINTH_QR_INIT_ADD_DEVICE_SUCCESS_SPROC:1431,LABYRINTH_QR_INIT_GET_SECRETS_SPROC:1433,LABYRINTH_QR_FINISH_ADD_PEER_DEVICE_SPROC:1434,LABYRINTH_SYNC_EPOCHS_STORED_PROCEDURE_SPROC:1436,LABYRINTH_SYNC_EPOCHS_SUCCESS_SPROC:1437,LABYRINTH_SYNC_EPOCHS_FORWARD_DERIVATION_END:1438,LABYRINTH_SYNC_EPOCHS_BACKWARD_DERIVATION_END:1439,LABYRINTH_SYNC_EPOCHS_OPEN_NEW_EPOCH:1440,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC:1441,LABYRINTH_PREPARE_OPEN_EPOCH_SUCCESS_SPROC:1442,LABYRINTH_MEB_MANAGER_ADD_DEVICE:1443,LABYRINTH_BACKUP_UPLOAD_FAIL:1450,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SPROC:1498,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SUCCESS:1499,LABYRINTH_MEDIA_BACKUP_START:1455,LABYRINTH_MEDIA_BACKUP_SUCCESS:1456,LABYRINTH_MEDIA_BACKUP_FAILURE:1458,LABYRINTH_MEDIA_RESTORE_START:1459,LABYRINTH_MEDIA_RESTORE_SUCCESS:1460,LABYRINTH_MEDIA_RESTORE_FAILURE:1462,LABYRINTH_REMOVE_VIRTUAL_DEVICE_SPROC:1484,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_SUCCESS:1485,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_FAILURE:1486,LABYRINTH_REMOVE_VIRTUAL_DEVICE_BACKUP_NOT_FOUND:1493,LABYRINTH_REMOVE_VIRTUAL_DEVICE_WRITE_TASK:1494,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_TASK_EXECUTER:1495,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_SERIALIZER:1496,LABYRINTH_BACKUP_UPLOAD_SERIALIZE:1451,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_SUCCEED:1463,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_FAIL:1464,LABYRINTH_UPDATE_BACKUP_TABLE_SPROC:1467,LABYRINTH_FETCH_BACKUP_IDS_SPROC:1468,LABYRINTH_PROCESS_BACKUP_IDS_SPROC:1487,LABYRINTH_BACKUP_STATUS_NO_INFO:1488,LABYRINTH_BACKUP_STATUS_FETCH_ERROR:1489,LABYRINTH_BACKUP_STATUS_NOT_ONBOARDED:1490,LABYRINTH_BACKUP_STATUS_ONBOARDED:1491,LABYRINTH_BACKUP_STATUS_NO_BACKUPS_PRESENT:1492,LABYRINTH_OPT_OUT_OF_BACKUP_SPROC:1469,LABYRINTH_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1470,LABYRINTH_HANDLE_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1471,LABYRINTH_FETCH_BACKUPS_METADATA_SPROC:1478,LABYRINTH_HANDLE_BACKUPS_METADATA_RESULT_SPROC:1480,LABYRINTH_RESTORE_THREADS_SUCCESS:1481,LABYRINTH_RESTORE_MESSAGES_SUCCESS:1482,LABYRINTH_POINT_QUERY_MESSAGE_RESTORE:2511,LABYRINTH_RESTORE_MESSAGE_NEWER_DIRECTION:2514,LABYRINTH_RESTORE_SURROUNDING_MESSAGES:2515,LABYRINTH_BACKUP_UPLOAD_GET_ECHO_DOC:1497,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE:1800,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_SUCCESS:1801,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_FAILURE:1802,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_CALLED:1803,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_SUCCESS:1804,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_FAILURE:1805,LABYRINTH_MEBMANAGER_ADD_DEVICE_NOTOFICATION_TRIGGERED:1806,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATE:1807,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATEFAILURE:1808,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_CALLED:1809,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_SUCCESS:1810,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_FAILURE:1811,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_CALLED:1812,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_SUCCESS:1813,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_FAILURE:1814,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_NOTIFICATION_TRIGGERRED:1815,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS:1816,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS_FAILURE:1817,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_SUCCESS:1818,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_FAILURE:1819,LABYRINTH_MEBMANAGER_WRONG_RECOVERY_CODE:1823,LABYRINTH_ENCRYPT_MESSAGE_FAIL:1828,LABYRINTH_ENCRYPT_MESSAGE_GENERATED_PAYLOAD:1824,LABYRINTH_ENCODE_DOCUMENT:1820,LABYRINTH_ENCODE_DOCUMENT_FAIL:1821,LABYRINTH_ENCODE_DOCUMENT_SUCCESS:1822,LABYRINTH_UPLOAD_CANCEL:1850,LABYRINTH_DELETE_BACKUP_ON_CLIENT_STARTING_CANCEL:1851,LABYRINTH_DELETE_BACKUP_ON_CLIENT_DID_CANCEL:1852,LABYRINTH_DELETE_BACKUP_ON_CLIENT_FAILED_CANCEL:1853,LABYRINTH_BACKUP_RETRY_DELETE_MESSAGE_BACKUP_STATUS_ENTRY:1865,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN:1881,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_GOT_MESSAGE_IDS_FROM_ACT:1882,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN_OCMF_OPE_OPERATIONS:1883,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_END_OCMF_OPE_OPERATIONS:1884,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_FETCH_MESSAGE_RANGE_ERROR:1885,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_ISSUE_COMPARATOR_TASK:1886,LABYRINTH_CLEAR_BACKUP_TABLE_ON_CLIENT:1891,LABYRINTH_CLEAR_VIRTUAL_DEVICES_TABLE_ON_CLIENT:1892,LABYRINTH_CLEAR_BACKUP_METADATA_TABLE_ON_CLIENT:1893,SAP_VESTA_FETCH_VESTA_KEY_AND_SECRET_BEGIN:2400,LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE:2401,SAP_FESTA_FETCH_KEY_AND_SECRET_COMPLETION:2402,SAP_VESTA_CALLING_VESTA_REGISTRATION:2403,SAP_VESTA_REGISTRATION_COMPLETION:2404,LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE:2405,SAP_VESTA_NOTIFY_SECRET_STORED_COMPLETION:2406,SAP_VESTA_NOTIFY_CLIENT_ABOUT_VESTA_REGISTRATION:2407,SAP_VESTA_CALLING_VESTA_LOGIN:2411,SAP_VESTA_LOGIN_COMPLETION:2412,LABYRINTH_PLUGIN_CALLING_ADD_DEVICE:2413,LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP:2416,LABYRINTH_PIN_SETUP_BEGIN:2417,LABYRINTH_PIN_SETUP_SUCCESS:2418,LABYRINTH_PIN_SETUP_FAILURE:2419,LABYRINTH_PIN_RESTORE_BEGIN:2420,LABYRINTH_PIN_RESTORE_SUCCESS:2421,LABYRINTH_PIN_RESTORE_FAILURE:2422,LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE:2423,LABYRINTH_FETCH_THREAD_IDS_SPROC:2500,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_SUCCESS:2501,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_FAILURE:2502,LABYRINTH_REQUEST_MESSAGES_FROM_FETCH_THREAD_IDS_SPROC:2503,LABYRINTH_REQUEST_MESSAGES_FROM_INIT_RESTORE_SPROC:2506,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_START:2512,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_END:2513,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_START:2800,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_END:2801,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_ENCRYPTION_VERSION_DATA_SPROC:2802,LABYRINTH_VERSIONING_UPSERT_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2803,LABYRINTH_VERSIONING_SYNC_ENCRYPTION_VERSION_DATA_SPROC:2804,LABYRINTH_VERSIONING_VERSION_SUPPORTED:2805,LABYRINTH_VERSIONING_SYNC_UPDATE_VERSION_DATA:2806,LABYRINTH_VERSIONING_SYNC_NO_VERSION_DATA:2807,LABYRINTH_VERSIONING_VERSION_SELECTED:2808,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2809,LABYRINTH_VERSIONING_VERSION_NOT_SUPPORTED:2810,LABYRINTH_VERSIONING_UPSERT_DEVICE_INVALID_SIGNATURE:2811,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_ISSUE_REQUEST_ASSOC_DEVICES:2821,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_NO_BACKUP:2822,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_FLOW_ALREADY_IN_PROGRES:2823,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC:2824,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_NUM_EDGES:2825,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_FROM:2826,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_TO:2827,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_SOURCE:2828,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_SOURCE_EPOCH_LOADED:2829,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DERIVE_CHAINING_KEY_PSK:2830,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_FORWARD_EDGE_ENTROPY:2831,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_SUCCESS:2832,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_FAIL:2833,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2834,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_SOURCE:2835,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_SOURCE_EPOCH_LOADED:2836,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_BACKWARD_EDGE:2837,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DECRYPTION_SUCCESS:2838,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DERIVATION_FAIL:2839,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2840,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FAILURE:2841,LABYRINTH_GET_OPEN_EPOCH_KEYS_SPROC:2842,LABYRINTH_GET_OPEN_EPOCH_KEYS_NO_EPOCHS_ON_CLIENT:2843,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_ALL_EPOCH_ANON_IDS:2844,LABYRINTH_GET_OPEN_EPOCH_KEYS_NUM_ANON_IDS:2845,LABYRINTH_GET_OPEN_EPOCHS_KEYS_EPOCH_ANON_ID_LIST_EMPTY:2846,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_KEYS_FOR_ANON_ID:2847,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NOT_FOUND:2848,LABYRINTH_SYNC_EPOCHS_SPROC_DOWNLOAD_EPOCHS_V2_WRITE_TASK:2849,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_INITIAL_EPOCH:2850,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_EPOCH_WITH_LAST_EPOCH_METADATA:2851,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_AFTER_FIRST_EPOCH:2852,LABYRINTH_OPEN_EPOCH_SPROC_FAILURE_LAST_EPOCH_NOT_FOUND:2853,LABYRINTH_OPEN_EPOCH_SPROC_ERROR:2854,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_CLOSE_LAST_EPOCH:2855,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_DERIVE_AND_STORE_EPOCH:2856,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_DERIVE_AND_STORE:2857,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_AUTHORITY:2858,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_EPOCH_ID:2859,LABYRINTH_INCLUDE_FALLBACK_KEY_DURING_ENCRYPTION:2860,LABYRINTH_DERIVE_FALLBACK_KEY:2861,LABYRINTH_FAILED_TO_INCLUDE_FALLBACK_KEY:2862,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_VALUE:2863,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NULL_VALUE:2864,LABYRINTH_MESSAGE_RESTORE_EPOCH_ANON_ID_NULL:2865,LABYRINTH_WEB_EPOCH_ROTATION_ENABLED:2866,LABYRINTH_WEB_EPOCH_ROTATION_DISABLED:2867,LABYRINTH_MOBILE_EPOCH_ROTATION_ENABLED:2868,LABYRINTH_MOBILE_EPOCH_ROTATION_DISABLED:2869,LABYRINTH_DECRYPT_MESSAGE_SPROC_SINGLE_EPOCH_KEY:2870,LABYRINTH_DECRYPT_MESSAGE_SPROC_EPOCH_NOT_FOUND_ERROR:2871,LABYRINTH_DECRYPT_MESSAGE_SPROC_MULTIPLE_EPOCHS_ERROR:2872,LABYRINTH_WEB_ECHO_MESSAGE_RESTORE_BEGIN:3600,LABYRINTH_WEB_ISSUE_RESTORE_JOB_DONE:3601,LABYRINTH_WEB_INSERT_TO_BAKCUP_MESSAGE_TABLE_DONE:3602,LABYRINTH_WEB_RESTORE_WITH_SERIALIZER_START:3603,LABYRINTH_WEB_ISSUE_RESTORE_JOB_STARTED:3604,LABYRINTH_WEB_INSERT_TO_RESTORE_PAYLOAD_CONTEXT_TABLE_DONE:3605,LABYRINTH_WEB_XMA_RESTORE_STARTED:3606,LABYRINTH_WEB_XMA_RESTORE_ENDED:3607,LABYRINTH_WEB_XMA_RESTORE_MEDIAID_NULL:3608,LABYRINTH_WEB_XMA_RESTORE_DBXMA_NULL:3609,LABYRINTH_WEB_ISSUE_MESSAGE_RANGE_QUERY:3610,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST:3700,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN:3701,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE:3702,LABYRINTH_WEB_UPLOAD_THREAD_NOT_PRESENT:3703,LABYRINTH_WEB_UPLOAD_THREAD_PRESENT:3704,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_UNSUCCESSFUL:3705,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_SUCCESSFUL:3706,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NULL:3707,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NOT_NULL:3708,LABYRINTH_WEB_UPLOAD_GET_RECEIPT_STATUS_LIST_SUCCESSFUL:3709,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NULL:3710,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NOT_NULL:3711,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_SUCCESSFUL:3712,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_UNSUCCESSFUL:3713,LABYRINTH_WEB_UPLOAD_INVALID_MSG_TYPE_FOR_MEDIA_TYPE:3714,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_TRUE:3715,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_FALSE:3716,LABYRINTH_WEB_UPLOAD_UNSUPPORTED_MEDIA_TYPE:3717,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ID_FOUND_IN_MEDIA_MSG:3718,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ENTRY_FOR_MEDIA_ID:3719,LABYRINTH_WEB_UPLOAD_GET_REACTION_DATA_SUCCESSFUL:3720,LABYRINTH_WEB_UPLOAD_GET_QUOTE_MSG_SUCCESSFUL:3721,LABYRINTH_WEB_UPLOAD_GET_QUOTE_SENDER_NAME_SUCCESSFUL:3722,LABYRINTH_WEB_UPLOAD_FB_ID_NULL_FOR_XMA_MSG:3723,LABYRINTH_WEB_UPLOAD_GET_XMA_DATA_SUCCESSFUL:3724,LABYRINTH_WEB_UPLOAD_NO_XMA_DB_ENTRY_FOR_EXTERNAL_ID:3725,LABYRINTH_WEB_UPLOAD_ECHO_MESSAGE_CREATION_SUCCESSFUL:3726,LABYRINTH_WEB_UPLOAD_MISSING_MEDIA_DATA_FOR_MEDIA_MSG:3727,LABYRINTH_WEB_UPLOAD_INVOKE_MESSAGE_UPLOAD_SPROC:3728,LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3729,LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED:3730,LABYRINTH_WEB_GET_BACKUP_TENANCY:3731,LABYRINTH_WEB_UPLOAD_ERROR_OCCURRED_ON_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3739,LABYRINTH_WEB_UPLOAD_XMA_NOT_FOUND_IN_IDB:3740,LABYRINTH_WEB_UPLOAD_MEDIA_NOT_FOUND_FOR_XMA_IN_IDB:3741,LABYRINTH_WEB_UPLOAD_INVALID_ECHO_MESSAGE_SERIALIZATION_RESPONSE:3742,LABYRINTH_WEB_UPLOAD_DUPLICATE_REQUEST:3743,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MSG:3744,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MEDIA:3745,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MSG_ERROR:3746,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MEDIA_ERROR:3747,LABYRINTH_WEB_UPLOAD_XMA_DATA_IS_NULL:3748,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_NOT_IN_DB:3749,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_IN_DB:3750,MQTT_STATE_DISCONNECTED_EVENT:10000001,MQTT_STATE_CONNECTED_EVENT:10000002,APP_STATEBACKGROUND:10000003,APP_STATEFOREGROUND:10000004,MQTT_STATE_CONNECTING_EVENT:10000005,GLOBAL_CONNECTIVITY_BANNER_DISPLAY:10000006,GLOBAL_CONNECTIVITY_BANNER_VANISH:10000007,SWITCH_ACCOUNT_EVENT:10000008,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED_EVENT:10001205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING_EVENT:10001206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED_EVENT:10001207});f["default"]=a}),66);
__d("LSDataTraceTag",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);
__d("LSRequestId",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="0123456789abcdef",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(){var a=c("uuidv4")().replace(/[^0-9a-f]/gi,""),b=0,d=["#"];while(b<33){var e=h.indexOf(a.charAt(b))<<8,f=h.indexOf(a.charAt(b+1))<<4,g=h.indexOf(a.charAt(b+2));g=g|(f|e);f=g>>6;d.push(i.charAt(f));d.push(i.charAt(g&63));b+=3}return d.join("")}b={generate:a};g["default"]=b}),98);
__d("MAWBridgeTrace",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h,i){var j=a.ack,k=a.externalId,l=a.ts;a=a.type;var m=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:j,externalId:k,isFirstMsg:!!f,openMessageOtid:e,openMessageParticipantCount:g,participantCount:h,threadJid:b,threadKey:i,threadType:m,traceType:c,ts:l,type_:a}}function b(a,b,c){return{traceContext:c,traceId:b,traceType:a}}function c(a,b,c,d){return{errorMessage:d,event:b,externalIds:a,traceType:c}}function e(a,b,c,d,e,f){return{checkPointId:a,dataTraceId:b,errorMessage:c,shouldFlush:d,syncChannel:e,tags:f}}g.createBridgeStartTraceData=a;g.createBridgeStartTraceWithTraceIdData=b;g.createBridgeUpdateTraceData=c;g.createBridgeTraceRecordCheckpointData=e}),98);
__d("MAWTraceUtils",["LSDataTraceCheckPoint","LSDataTraceTag","LSIntEnum","LSRequestId","MAWBridge","MAWBridgeTrace","MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="backup_upload",j="media_backup",k="vesta_registration",l="vesta_login";function m(){return c("LSRequestId").generate()}function a(a){return a}function b(a,b,c){c=c!=null?c:m();d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTraceWithTraceId",value:d("MAWBridgeTrace").createBridgeStartTraceWithTraceIdData(a,c,b)}]},!0);return c}function n(a,b,c,e,f){if(a!=null){c=c.length>0?c.map(function(a){return a.toString()}).join(","):void 0;d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"TraceRecordCheckpoint",value:d("MAWBridgeTrace").createBridgeTraceRecordCheckpointData(b,a,f,e,-1,c)}]},!0)}}function e(a,b,e,f){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),e,!0,f)}function f(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function o(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function p(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("LSDataTraceTag").messageTypeText;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("LSDataTraceTag").messageTypeFutureproof;case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return d("LSDataTraceTag").messageTypeCiphertext;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return d("LSDataTraceTag").messageTypeUnavailable;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("LSDataTraceTag").messageTypeImage;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("LSDataTraceTag").messageTypeVideo;case d("MAWMsgType").MSG_TYPE.PTT:return d("LSDataTraceTag").messageTypePtt;case d("MAWMsgType").MSG_TYPE.ADMIN:return d("LSDataTraceTag").messageTypeAdmin;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("LSDataTraceTag").messageTypeRevoked;case d("MAWMsgType").MSG_TYPE.GIF:return d("LSDataTraceTag").messageTypeGif;case d("MAWMsgType").MSG_TYPE.STICKER:return d("LSDataTraceTag").messageTypeSticker;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return d("LSDataTraceTag").messageTypeExpiredEphemeral;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("LSDataTraceTag").messageTypeEphemeralSettingAdmin;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("LSDataTraceTag").messageTypeEphemeralSyncResponse;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("LSDataTraceTag").messageTypeEphemeralScreenshotAction;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("LSDataTraceTag").messageTypeDeleteForMe;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:return d("LSDataTraceTag").messageTypeEphemeralSettingChangeFromCurrentDevice;case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("LSDataTraceTag").messageTypeAlertICDC;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("LSDataTraceTag").messageTypeGroupInvite;case d("MAWMsgType").MSG_TYPE.XMA:return d("LSDataTraceTag").messageTypeXMA;case d("MAWMsgType").MSG_TYPE.REACTION:return d("LSDataTraceTag").messageTypeReaction;case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return d("LSDataTraceTag").messageTypeSenderKeyDistribution;default:return d("LSDataTraceTag").messageTypeNone}}g.CONTEXT_BACKUP_UPLOAD=i;g.CONTEXT_MEDIA_BACKUP=j;g.CONTEXT_VESTA_REGISTRATION=k;g.CONTEXT_VESTA_LOGIN=l;g.createTraceId=m;g.stringToTraceId=a;g.startNewTrace=b;g.recordCheckpointForTrace=n;g.recordFailureAndFlushForTraceId=e;g.recordSuccessAndFlushForTraceId=f;g.recordInvalidUploadRequestAndFlushTrace=o;g.getTagForMsgType=p}),98);
__d("MAWEncryptedBackupUtils",["FBLogger","I64","LSAuthorityLevel","LSDataTraceCheckPoint","LSDict","LSIntEnum","LSShape","LSVec","MAWTraceUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,e,f){d("MAWTraceUtils").recordCheckpointForTrace(a,b,c,e,f)}function a(a,b,e){j(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_GET_BACKUP_TENANCY),[],!1);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.secure_encrypted_backups_client_state)).then(function(a){return k(a,e)})}function k(a,b){var e;if(a==null){b!=null&&b.addPoint("get_backup_tenancy_null_client_state_row");return}e=(e=a.backupTenancy)!=null?e:(i||(i=d("I64"))).one;a=a.authorityLevel;b!=null&&b.addPoint("get_backup_tenancy",{"int":{authorityLevel:(i||(i=d("I64"))).to_int32(a!=null?a:(i||(i=d("I64"))).zero),backupTenancy:i.to_int32(e!=null?e:(i||(i=d("I64"))).zero)}});if(e!=null&&(i||(i=d("I64"))).equal((h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),a))return e}function b(a,b){var d=new Set(),e=a.length;for(a of a.entries()){var f=a[0],g=a[1];d.has(g)&&c("FBLogger")("wmi_eb").warn("Duplicate messages returned from server for restoreType: %s, index: %s of batchSize: %s",b,f,e);d.add(g)}}function e(a){a=a.map(function(a){var b=a.toplevelProtobuf;b=d("LSShape").ofRecord({decrypted_protobuf:b.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(b.protobufTimestampMS)});var e=new(c("LSDict"))();a.supplementalProtobufs.forEach(function(a,b){e.set(b,d("LSShape").ofRecord({decrypted_protobuf:a.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(a.protobufTimestampMS)}))});return d("LSShape").ofRecord({otid:a.otid,supplemental_protobufs:e,toplevel_protobuf:b})});return c("LSVec").ofArray(a)}function f(a){a=c("LSVec").toArray(a);a=a.map(function(a){return d("LSShape").toRecord(a)});return a.map(function(a){var b=d("LSShape").toRecord(a.toplevel_protobuf);b={decryptedProtobuf:b.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(b.protobuf_timestamp_ms)};var c=new Map(),e=a.supplemental_protobufs;e.forEach(function(a,b){a=d("LSShape").toRecord(a);c.set(b,{decryptedProtobuf:a.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(a.protobuf_timestamp_ms)})});return{otid:a.otid,supplementalProtobufs:c,toplevelProtobuf:b}})}g.getBackupTenancy=a;g.getBackupTenancyFromClientStateRow=k;g.logIfDuplicateMessagesFoundInRestore=b;g.convertJSTypesToLSTypesForRestoreJob=e;g.convertLSTypesToJSTypesForRestoreJob=f}),98);
__d("EBIsEbEnabled",["EBDeps","EBReadyNotifier","FBLogger","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBSwitch","MAWEncryptedBackupUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return d("EBReadyNotifier").waitForEBReady().then(function(){return d("MAWEncryptedBackupUtils").getBackupTenancy(a,b,e)}).then(function(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}function a(){try{return d("WAResultOrError").makeResult(c("MAWEBSwitch").isEnabled())}catch(a){c("FBLogger")("wmi_eb").catching(a).mustfix("Failed to check EB enabled");return d("WAResultOrError").makeResult(!1)}}async function b(){var a=await d("EBDeps").getDeps().getLSDB();return j(a.tables)}g.isEbEnabledLS=j;g.isEbEnabledEbSwitch=a;g.isEBEnabled=b}),98);
__d("EBIsEbEnabledSubscriber",["EBDeps","EBIsEbEnabled","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","ReQL","WAPubSub"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){function a(a){this.$1=d("WAPubSub").simplePubSub(),this.$4=a,this.$2=!1}var b=a.prototype;b.initialize=async function(){this.$2=await d("EBIsEbEnabled").isEbEnabledLS(this.$4.tables),this.$5(this.$4)};b.$6=function(a){this.$2=a,this.$1.publish(a)};b.$5=function(a){var b=this;this.$3==null&&(this.$3=d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state).take(1).subscribe(function(a,e){e.operation==="delete"&&b.$6(!1),(e.operation==="add"||e.operation==="put")&&(e.value.backupTenancy!=null&&(h||(h=d("I64"))).equal(e.value.backupTenancy,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))?b.$6(!0):b.$6(!1))}));return this.$3};b.subscribe=function(a){return this.$1.subscribe(a)};b.isEnabled=function(){return this.$2};return a}(),k;async function l(a){if(k!=null)return Promise.resolve();k=new j(a);await k.initialize()}async function a(){if(k==null){var a=await d("EBDeps").getDeps().getLSDB();await l(a)}return k}async function b(a){if(k==null){var b=await d("EBDeps").getDeps().getLSDB();await l(b)}a(k.isEnabled());b=k.subscribe(a);return b}async function e(){if(k==null){var a=await d("EBDeps").getDeps().getLSDB();await l(a)}return k.isEnabled()}g.initIsEbEnabledPubSub=l;g.isEbEnabledSubscriber=a;g.subscribeToEbChanges=b;g.isEBEnabledValueFromSubscriber=e}),98);
__d("EBMarkerIdToQPLEvent",["I64","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(h||(h=d("I64"))).to_int32(a);switch(a){case 1021646192:return c("qpl")._(1021646192,"3099");case 1021656232:return c("qpl")._(1021656232,"3100");case 1021647318:return c("qpl")._(1021647318,"3101");case 1021651622:return c("qpl")._(1021651622,"3102");case 1021655799:return c("qpl")._(1021655799,"3103");case 1021648929:return c("qpl")._(1021648929,"3104");case 1021647593:return c("qpl")._(1021647593,"3105");case 1021653744:return c("qpl")._(1021653744,"3106");case 1021655355:return c("qpl")._(1021655355,"3107");case 1021648240:return c("qpl")._(1021648240,"3108");case 1021651939:return c("qpl")._(1021651939,"3109");case 1021656851:return c("qpl")._(1021656851,"3110");case 1021652813:return c("qpl")._(1021652813,"3111");case 1021653501:return c("qpl")._(1021653501,"3112");case 1021655710:return c("qpl")._(1021655710,"3114");case 1021655643:return c("qpl")._(1021655643,"3115");case 1021646076:return c("qpl")._(1021646076,"3116");case 1021642512:return c("qpl")._(1021642512,"3117");case 1021654781:return c("qpl")._(1021654781,"3118");case 1021649468:return c("qpl")._(1021649468,"3120");case 1021652080:return c("qpl")._(1021652080,"3121");case 1021652512:return c("qpl")._(1021652512,"3122");case 1021655828:return c("qpl")._(1021655828,"3124");case 1021642298:return c("qpl")._(1021642298,"3126");case 1021652377:return c("qpl")._(1021652377,"3127");case 521471316:return c("qpl")._(521471316,"2831");case 521478596:return c("qpl")._(521478596,"1329");case 521479468:return c("qpl")._(521479468,"3128");case 521473151:return c("qpl")._(521473151,"2593");case 521482563:return c("qpl")._(521482563,"3129");case 521482912:return c("qpl")._(521482912,"3131");case 521481876:return c("qpl")._(521481876,"1407");case 521471732:return c("qpl")._(521471732,"1454");case 521477507:return c("qpl")._(521477507,"1406");case 521478817:return c("qpl")._(521478817,"2806");case 521476801:return c("qpl")._(521476801,"3132");case 521484724:return c("qpl")._(521484724,"141");case 521473756:return c("qpl")._(521473756,"2768");case 521477113:return c("qpl")._(521477113,"2698");case 521478750:return c("qpl")._(521478750,"2850");case 521479165:return c("qpl")._(521479165,"3055");case 521484370:return c("qpl")._(521484370,"2995");case 521473213:return c("qpl")._(521473213,"27");case 521482281:return c("qpl")._(521482281,"2703");case 521476771:return c("qpl")._(521476771,"2454");case 521474469:return c("qpl")._(521474469,"2612");case 521471755:return c("qpl")._(521471755,"2586");case 521476367:return c("qpl")._(521476367,"2704");case 521473850:return c("qpl")._(521473850,"2910");case 521482558:return c("qpl")._(521482558,"2558");case 521482880:return c("qpl")._(521482880,"16");case 521473150:return c("qpl")._(521473150,"2143");case 521473369:return c("qpl")._(521473369,"2834");case 521485893:return c("qpl")._(521485893,"2835");case 521473922:return c("qpl")._(521473922,"2832");case 521479146:return c("qpl")._(521479146,"3133");case 521471468:return c("qpl")._(521471468,"2968");case 521480391:return c("qpl")._(521480391,"1167");case 521480745:return c("qpl")._(521480745,"3134");case 521481602:return c("qpl")._(521481602,"829");case 521475102:return c("qpl")._(521475102,"3135");case 521484676:return c("qpl")._(521484676,"2684");case 521485625:return c("qpl")._(521485625,"1876");case 521482085:return c("qpl")._(521482085,"409");case 521471024:return c("qpl")._(521471024,"2275");case 521474385:return c("qpl")._(521474385,"263");case 521479842:return c("qpl")._(521479842,"2163");case 521485383:return c("qpl")._(521485383,"2200");case 521478580:return c("qpl")._(521478580,"3136");case 521485815:return c("qpl")._(521485815,"3137");case 521482969:return c("qpl")._(521482969,"1519");case 521485406:return c("qpl")._(521485406,"272");case 521479972:return c("qpl")._(521479972,"3138");case 521474688:return c("qpl")._(521474688,"2714");case 521484777:return c("qpl")._(521484777,"2715");case 521483076:return c("qpl")._(521483076,"3140");case 521482858:return c("qpl")._(521482858,"1290");case 521472542:return c("qpl")._(521472542,"295");case 521472456:return c("qpl")._(521472456,"1646");case 521476140:return c("qpl")._(521476140,"378");case 521473194:return c("qpl")._(521473194,"1331");case 521482763:return c("qpl")._(521482763,"296");case 521484295:return c("qpl")._(521484295,"1460");case 521476165:return c("qpl")._(521476165,"2432");case 521477947:return c("qpl")._(521477947,"2395");case 521486220:return c("qpl")._(521486220,"827");case 521482576:return c("qpl")._(521482576,"1069");case 521479124:return c("qpl")._(521479124,"1939");case 521476098:return c("qpl")._(521476098,"504");case 521472095:return c("qpl")._(521472095,"2859")}return null}g.markerIdToQPLEvent=a}),98);
__d("InstagramMediaProductTypeName",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LIVE:"live",FEED:"feed",STORY:"story",DIRECT:"direct",IGTV:"igtv",NAMETAG:"nametag",DIRECT_AUDIO:"direct_audio",CAROUSEL_ITEM:"carousel_item",CAROUSEL_CONTAINER:"carousel_container",PROFILE_PIC:"profile_pic",AD:"ad",AR_EFFECT_PREVIEW:"ar_effect_preview",DIRECT_PERMANENT:"direct_permanent",SELFIE_STICKER:"selfie_sticker",COWATCH_LOCAL:"cowatch_local",CLIPS:"clips",GUIDE_MEDIA_FACADE:"guide_media_facade",FUNDRAISER_COVER:"fundraiser_cover",LIVE_ARCHIVE:"live_archive",HIGHLIGHT_POST_FACADE:"highlight_post_facade",DIRECT_THREAD:"direct_thread",SCHEDULED_LIVE:"scheduled_live",RATINGS_AND_REVIEWS:"ratings_and_reviews",DIRECT_HEADMOJI:"direct_headmoji",CLIPS_PREVIEW:"clips_preview",REPOST_MEDIA_FACADE:"repost_media_facade",STORY_INTERACTION_RESPONSE:"story_interaction_response",MEDIA_KIT:"media_kit",TEXT_POST:"text_post",NOTE_AUDIO:"note_audio",DIRECT_MESSAGE_COMMENT_FACADE:"direct_message_comment_facade"});c=a;f["default"]=c}),66);
__d("IGDThreadTTLCUtils",["IGDInstamadilloUtils","InstagramMediaProductTypeName","LSThreadBitOffset","ZenonRTWebBrowserFeatureSupport","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=[225,235,226,227,228,229,230,231,232,233,234,236];function i(a,b){if(a==null||d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a))return!1;return!c("qex")._("954")?!1:d("LSThreadBitOffset").has(b,a)}function j(a){return i(a,225)}function k(a){if(!c("gkx")("2400"))return!1;return!d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()?!1:i(a,235)}function l(a){return i(a,226)}function m(a){return i(a,227)}function n(a){return i(a,228)}function o(a){return i(a,229)}function p(a){return i(a,230)}function q(a){return i(a,231)}function r(a){return i(a,232)}function s(a){return i(a,233)}function t(a){return i(a,234)}function u(a){return i(a,236)}function v(a){return a==null||d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a)||!c("qex")._("954")?!1:w(a)}function w(a){return a==null?!1:h.some(function(b){return d("LSThreadBitOffset").has(b,a)})}function a(a,b){var d=a.isDisappearingModeSettingOn,e=a.isTTLCClipEnabled,f=a.isTTLCGenericXMAShareEnabled,g=a.isTTLCMediaShareEnabled;a=a.isTTLCStoryShareEnabled;b=c("InstagramMediaProductTypeName").cast(b);if(b==null||d)return!1;if(!c("qex")._("954"))return!1;switch(b){case"feed":case"carousel_container":case"ad":return g;case"clips":return e;case"story":return a;case"live":return f;default:return!1}}function b(a){return new Map([["Text",j(a)],["Clip",l(a)],["Reel Share",m(a)],["Media Share",n(a)],["Story Share",o(a)],["Link",p(a)],["Generic XMA",q(a)],["Profile",u(a)],["Image",r(a)],["Video",s(a)],["Audio",t(a)],["Gif/Sticker/Avatar",void 0],["Raven",void 0],["Media Collection",void 0],["Calling",k(a)],["Rest of Message Types",void 0]])}function e(a){return{is_instamadillo_ttlc:String(v(a)),is_instamadillo_ttlc_audio:String(t(a)),is_instamadillo_ttlc_clip:String(l(a)),is_instamadillo_ttlc_generic_xma:String(q(a)),is_instamadillo_ttlc_image:String(r(a)),is_instamadillo_ttlc_link:String(p(a)),is_instamadillo_ttlc_media_share:String(n(a)),is_instamadillo_ttlc_profile:String(u(a)),is_instamadillo_ttlc_reel_share:String(m(a)),is_instamadillo_ttlc_story_share:String(o(a)),is_instamadillo_ttlc_text:String(j(a)),is_instamadillo_ttlc_video:String(s(a))}}function f(a){return{is_instamadillo_ttlc:v(a),is_instamadillo_ttlc_audio:t(a),is_instamadillo_ttlc_clip:l(a),is_instamadillo_ttlc_generic_xma:q(a),is_instamadillo_ttlc_image:r(a),is_instamadillo_ttlc_link:p(a),is_instamadillo_ttlc_media_share:n(a),is_instamadillo_ttlc_profile:u(a),is_instamadillo_ttlc_reel_share:m(a),is_instamadillo_ttlc_story_share:o(a),is_instamadillo_ttlc_text:j(a),is_instamadillo_ttlc_video:s(a)}}function x(a,b){if(a==null)return!1;switch(a.__typename){case"XMSGIgReceiverFetchXmaFeedFetchParams":return n(b);case"XMSGIgReceiverFetchXmaProfileFetchParams":return q(b);case"XMSGIgReceiverFetchXmaClipFetchParams":return l(b);default:return!1}}function y(a){return a==null?!1:d("LSThreadBitOffset").has(261,a)}g.isInstamadilloTTLCTextEnabled=j;g.isInstamadilloTTLCCallingEnabled=k;g.isInstamadilloTTLCClipEnabled=l;g.isInstamadilloTTLCReelShareEnabled=m;g.isInstamadilloTTLCMediaShareEnabled=n;g.isInstamadilloTTLCStoryShareEnabled=o;g.isInstamadilloTTLCLinkEnabled=p;g.isInstamadilloTTLCGenericXmaEnabled=q;g.isInstamadilloTTLCImageEnabled=r;g.isInstamadilloTTLCVideoEnabled=s;g.isInstamadilloTTLCAudioEnabled=t;g.isInstamadilloTTLCProfileEnabled=u;g.isIGDTTLCEnabledForThread=v;g.threadHasInstamadilloTTLCCapability=w;g.isIGDTTLCEnabledForIGDCandidate=a;g.getTtlcMessageTypeMap=b;g.getTTLCLoggingExtraData=e;g.getTTLCBooleanAnnotations=f;g.isXmaReceiverFetchTTLCEnabled=x;g.isInstamadilloOptionalE2EE=y}),98);
__d("IGDInstamadilloUtils",["ExecutionEnvironment","IGDThreadTTLCUtils","LSThreadBitOffset","gkx","isInstamadillo","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(a==null?void 0:a.transportKey)==="Instamadillo"}function j(a){return a==null?!1:d("LSThreadBitOffset").has(214,a)}function a(a){return a==null?!1:d("LSThreadBitOffset").has(212,a)}function k(a){return a==null?!1:d("LSThreadBitOffset").has(38,a)}function b(a){return a==null?!1:d("LSThreadBitOffset").has(211,a)}function e(a){var b=j(a);a=l(a);return a||b}function l(a){if(c("gkx")("6650"))return!1;var b=k(a),e=j(a);a=d("IGDThreadTTLCUtils").threadHasInstamadilloTTLCCapability(a);return b&&(e||a)}function f(a,b){a=i(a)&&a.ephemeralExpirationTs!=null;return b&&a||!b&&!a}function m(a){a=i(a);return!a?!0:c("isInstamadillo")()}var n=function(){var a={browser:(h||(h=c("ExecutionEnvironment"))).isInBrowser,isLegacyArmadilloTLC:c("qex")._("121")===!0,isMobileDM:c("gkx")("2553"),isMobileInstamadilloTLC:c("gkx")("2322"),isMobileOrWebTTLC:c("gkx")("2406"),isWebTTLC:c("qex")._("954")===!0,sharedWorker:h.isInSharedWorker,worker:h.isInWorker},b="";for(a of Object.entries(a)){var d=a[0],e=a[1];b+=d+": "+String(e)+"\n"}return b};g.isInstamadilloMessage=i;g.isInstamadilloCutover=j;g.isInstamadilloDMToggleEnabled=a;g.isIGDDisappearingModeEnabled=k;g.isInstamadilloTransportEnabled=b;g.isInstamadilloHardblockEnabled=e;g.isDMHardblockedEnabled=l;g.shouldRenderMessageReply=f;g.canMutateIGDMessage=m;g.getE2EEGatingStateAsString=n}),98);
__d("IGDRouteProvider.react",["react","react-compiler-runtime","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;function k(a){var b;a=a==null||(b=a.params)==null?void 0:b.thread_key;return a!=null&&typeof a==="string"?a:null}var l=f();function a(a){var b=d("react-compiler-runtime").c(5);a=a.children;var e=c("useCurrentRoute")(),f;b[0]!==e?(f=k(e),b[0]=e,b[1]=f):f=b[1];e=f;b[2]!==a||b[3]!==e?(f=i.jsx(l.Provider,{value:e,children:a}),b[2]=a,b[3]=e,b[4]=f):f=b[4];return f}function b(){return j(l)}g.IGDRouteContextProvider=a;g.useThreadKeyFromCurrentRoute=b}),98);
__d("IGDInteractionTraceAnnotations",["I64","IGDInstamadilloUtils","IGDRouteProvider.react","IGDThreadTTLCUtils","Int64Hooks","InteractionTracing","LSIntEnum","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useEffect;function a(a){return babelHelpers["extends"]({},d("IGDThreadTTLCUtils").getTTLCBooleanAnnotations(a),{is_dm:d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a),is_instamadillo:d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),is_instamadillo_tlc:d("IGDInstamadilloUtils").isInstamadilloCutover(a)})}function l(a,b){var c=d("IGDInstamadilloUtils").isInstamadilloCutover(a),e=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),f=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);b.addAnnotationBoolean("is_instamadillo",e);b.addAnnotationBoolean("is_instamadillo_tlc",c);b.addAnnotationBoolean("is_dm",f);b.addAnnotationBoolean("is_instamadillo_ttlc",(e=d("IGDThreadTTLCUtils")).isIGDTTLCEnabledForThread(a));b.addAnnotationBoolean("is_instamadillo_ttlc_audio",e.isInstamadilloTTLCAudioEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_clip",e.isInstamadilloTTLCClipEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_generic_xma",e.isInstamadilloTTLCGenericXmaEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_image",e.isInstamadilloTTLCImageEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_link",e.isInstamadilloTTLCLinkEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_media_share",e.isInstamadilloTTLCMediaShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_profile",e.isInstamadilloTTLCProfileEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_reel_share",e.isInstamadilloTTLCReelShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_story_share",e.isInstamadilloTTLCStoryShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_text",e.isInstamadilloTTLCTextEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_video",e.isInstamadilloTTLCVideoEnabled(a))}function b(a){var b=d("react-compiler-runtime").c(3),e,f;b[0]!==a?(e=function(){c("InteractionTracing").getPendingInteractions().forEach(function(b){l(a,b)})},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);d("Int64Hooks").useEffectInt64(e,f)}var m=new Set();function e(a){var b=d("react-compiler-runtime").c(7),e;b[0]!==a.consistentThreadFbid||b[1]!==a.threadKey||b[2]!==a.threadSubtype||b[3]!==a.threadType?(e=function(){var b=(i||(i=d("I64"))).to_string(a.threadKey);c("InteractionTracing").getPendingInteractions().forEach(function(c){var e=m.has(b);c.addAnnotationBoolean("is_thread_visited",e);c.addAnnotation("thread_key",(i||(i=d("I64"))).to_string(a.threadKey));a.consistentThreadFbid!=null&&c.addAnnotation("consistent_thread_fbid",(i||(i=d("I64"))).to_string(a.consistentThreadFbid));c.addAnnotationInt("thread_type",(j||(j=d("LSIntEnum"))).toNumber(a.threadType));a.threadSubtype!=null&&c.addAnnotation("thread_subtype",(i||(i=d("I64"))).to_string(a.threadSubtype))});return function(){m.add(b)}},b[0]=a.consistentThreadFbid,b[1]=a.threadKey,b[2]=a.threadSubtype,b[3]=a.threadType,b[4]=e):e=b[4];var f;b[5]!==a?(f=[a],b[5]=a,b[6]=f):f=b[6];d("Int64Hooks").useEffectInt64(e,f)}function f(){var a=d("react-compiler-runtime").c(3),b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),e,f;a[0]!==b?(e=function(){c("InteractionTracing").getPendingInteractions().forEach(function(a){if(b==null){a.addAnnotationInt("rendered_direct_null_state",1);a.addAnnotationInt("has_thread_key",0);return}a.addAnnotationInt("has_thread_key",1);a.addAnnotationInt("rendered_direct_null_state",0)})},f=[b],a[0]=b,a[1]=e,a[2]=f):(e=a[1],f=a[2]);k(e,f)}g.getInstamadilloBooleanAnnotations=a;g.addInstamadilloAnnotationsToInteractionTrace=l;g.useAddInstamadilloAnnotationsToInteractionTraces=b;g.useAddThreadAnnotationToInteractionTraces=e;g.useAddThreadRouteAnnotations=f}),98);
__d("LSBase64Encode.nop",["EBBase64Encode","LSResult","LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e){return d("LSSynchronousPromise").makeSynchronousPromise(c("LSResult")(e?c("EBBase64Encode")(e):void 0))};a.__nop_name__="LSBase64Encode";g["default"]=a}),98);
__d("LSCheckIfAuthoritativeThreadMissingMiActMapping",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1],d=[],e=[];return b.sequence([function(f){return b.sequence([function(e){return c("gkx")("4792")?b.sequence([function(c){return b.db.table(173).fetch([[[a[0]]]]).next().then(function(c,e){e=c.done;c=c.value;return e?b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,c){var e=a.done;a=a.value;return e?d[3]=!1:(c=a.item,d[3]=b.i64.eq(c.authorityLevel,b.i64.cast([0,80])))})},function(a){return d[1]=d[3]}]):(c.item,d[1]=!1)})},function(a){return d[0]=d[1]}]):b.resolve(d[0]=!1)},function(a){return e[0]=d[0]}])},function(a){return b.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckIfAuthoritativeThreadMissingMiActMappingStoredProcedure";a.__tables__=["mi_act_mapping_table","threads"];b=a;g["default"]=b}),98);
__d("LSContactUserBlockAction",[],(function(a,b,c,d,e,f){a=Object.freeze({MN_UNBLOCK:0,MN_BLOCK:1,FB_UNBLOCK:2,FB_BLOCK:3});f["default"]=a}),66);
__d("LSGroupParticipantJoinState",[],(function(a,b,c,d,e,f){a=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});f["default"]=a}),66);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,c){return new(j||(j=b("Promise")))(function(b,e){var f=d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(c).subscribe(function(a,c){if(c.operation==="delete")return;if((h||(h=d("I64"))).equal(c.value.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2))){f();return b()}})})}function a(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(b)).then(function(c){if(c!=null&&(h||(h=d("I64"))).equal(c.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;return k(a,b)})}function c(a){return k(a,(i||(i=d("LSIntEnum"))).ofNumber(1))}g.maybeWaitForSyncGroup=a;g.use=c}),98);
__d("LSIsEncryptionVersionSecure",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.i64.eq(a[0],b.i64.cast([0,4]))?c[0]=!1:(b.i64.eq(a[0],b.i64.cast([0,3]))?c[1]=!0:(b.i64.eq(a[0],b.i64.cast([0,2]))?c[2]=!0:(b.i64.eq(a[0],b.i64.cast([0,0]))?c[3]=!0:(b.i64.eq(a[0],b.i64.cast([0,99]))?c[4]=!1:c[4]=!1,c[3]=c[4]),c[2]=c[3]),c[1]=c[2]),c[0]=c[1]),d[0]=c[0],b.resolve(d)}a.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3226");b=d("FalcoLoggerInternal").create("meb_client_logs",a);e=b;g["default"]=e}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){c("MebClientLogsFalcoEvent").log(function(){return{calling_class:f,device_family_id:void 0,device_registration_id:void 0,log_level:(i||(i=d("I64"))).to_string(k),msg:g,trace_ids:c("LSVec").toArray(j)}});return(h||(h=b("Promise"))).resolve()};a.__nop_name__="LSLogMebClientEvent";g["default"]=a}),98);
__d("LSQplAnnotateString.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i,j){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").addAnnotations(a,{string:(f={},f[i]=j,f)},{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplAnnotateString";g["default"]=a}),98);
__d("LSQplMarkPoint.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").addPoint(a,i,{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplMarkPoint";g["default"]=a}),98);
__d("LSQplStartTrace.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i,j){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").start(a,{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplStartTrace";g["default"]=a}),98);
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCheckIfAuthoritativeThreadMissingMiActMapping","LSCreateOfflineThreadingID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.i64.neq(a[1],void 0)?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[void 0,void 0],d[3]=e[0],d[4]=e[1],e):(c=b.item,e=[a[1],c.authorityLevel],d[3]=e[0],d[4]=e[1])})},function(a){return a=[d[3],d[4]],d[0]=a[0],d[1]=a[1],a}]):c.resolve((b=[void 0,void 0],d[0]=b[0],d[1]=b[1],b))},function(e){return c.i64.neq(d[0],void 0)?c.sequence([function(e){return c.i64.neq(d[1],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSCheckIfAuthoritativeThreadMissingMiActMapping"),d[0]).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.i64.gt(a[2],d[1])?c.forEach(c.db.table(9).fetch([[[d[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[2]})}):c.resolve()},function(e){return d[3]||c.i64.gt(a[2],d[1])?(d[4]=new c.Map(),d[4].set("thread_fbid",d[0]),d[4].set("force_upsert",!1),d[4].set("use_open_messenger_transport",!1),d[4].set("sync_group",c.i64.cast([0,95])),d[4].set("metadata_only",!1),d[4].set("preview_only",!1),d[5]=d[4].get("thread_fbid"),d[6]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[5]),c.i64.cast([0,209]),d[6],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()}]):c.resolve()},function(a){return d[2]=d[0]}]):c.sequence([function(e){return c.i64.neq(a[1],void 0)?c.sequence([function(e){return c.i64.neq(a[2],c.i64.cast([0,20]))?(d[11]=new c.Map(),d[11].set("thread_fbid",a[1]),d[11].set("force_upsert",!1),d[11].set("use_open_messenger_transport",!1),d[11].set("sync_group",c.i64.cast([0,95])),d[11].set("metadata_only",!1),d[11].set("preview_only",!1),d[12]=d[11].get("thread_fbid"),d[13]=c.toJSON(d[11]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[12]),c.i64.cast([0,209]),d[13],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()},function(b){return d[3]=a[1]}]):c.sequence([function(a){return d[11]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[3]=d[12]}])},function(b){return c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))?(b=["inbox",c.i64.cast([0,0])],d[4]=b[0],d[5]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,1]))?(b=["pending",c.i64.cast([-1,4294967295])],d[11]=b[0],d[12]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,2]))?(b=["other",c.i64.cast([-1,4294967294])],d[13]=b[0],d[14]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,3]))?(b=["spam",c.i64.cast([-1,4294967293])],d[15]=b[0],d[16]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,5]))?(b=["hidden",c.i64.cast([-1,4294967292])],d[17]=b[0],d[18]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,4]))?(b=["archived",c.i64.cast([-1,4294967286])],d[19]=b[0],d[20]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,15]))?(b=["restricted",c.i64.cast([-1,4294967281])],d[21]=b[0],d[22]=b[1],b):(b=["inbox",c.i64.cast([0,0])],d[21]=b[0],d[22]=b[1],b),b=[d[21],d[22]],d[19]=b[0],d[20]=b[1]),b=[d[19],d[20]],d[17]=b[0],d[18]=b[1]),b=[d[17],d[18]],d[15]=b[0],d[16]=b[1]),b=[d[15],d[16]],d[13]=b[0],d[14]=b[1]),b=[d[13],d[14]],d[11]=b[0],d[12]=b[1]),b=[d[11],d[12]],d[4]=b[0],d[5]=b[1]),d[6]=c.i64.cast([0,1083495711]),d[7]=c.i64.cast([0,1024]),d[8]=c.i64.cast([0,0]),d[9]=c.i64.cast([0,0]),d[10]=c.i64.cast([0,134217728]),c.forEach(c.filter(c.db.table(9).fetch([[[d[3]]]]),function(b){return c.i64.eq(b.threadKey,d[3])&&c.i64.lt(b.authorityLevel,a[2])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[3],mailboxType:c.i64.cast([0,4096]),threadType:a[0],folderName:d[4],lastActivityTimestampMs:c.i64.cast([-1,4294967295]),lastReadWatermarkTimestampMs:c.i64.cast([-1,4294967295]),removeWatermarkTimestampMs:c.i64.cast([-1,4294967295]),ongoingCallState:c.i64.cast([0,0]),parentThreadKey:d[5],authorityLevel:a[2],capabilities:d[6],capabilities2:d[7],capabilities3:d[8],capabilities4:d[9],capabilities5:d[10],unsendLimitMs:c.i64.cast([-1,4294967295]),syncGroup:c.i64.cast([0,95]),isHidden:!0,clientThreadKey:d[3]})},function(a){return d[2]=d[3]}])},function(a){return e[0]=d[2]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxVerifyE2EEMetadataThreadExistsV2StoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure",["LSSynchronousPromise","LSVerifyE2EEMetadataThreadExistsV2","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSVerifyE2EEMetadataThreadExistsV2"),e.threadType,e.threadKey,e.authorityLevel);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBlockUtils",["I64","LSContactUserBlockAction","LSIntEnum","LSThreadBitOffset","ReQL","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(k||d("react")).useCallback;var l=[0,31,35,55,56,58,24,25,19,85],m=[0,31,35,55,56,58,24,25,19,85,8,22],n=[35,19,85,56,24,25];function a(){var a=d("react-compiler-runtime").c(2),b=(h||(h=c("useReStore")))(),e;a[0]!==b?(e=function(a,e){c("promiseDone")(async function(){var g=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a));if(g==null)return;var h=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.threads).getKeyRange(g.threadKey).filter(o));if(h==null)return;g=(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactUserBlockAction").MN_BLOCK))?d("LSThreadBitOffset").clear(l,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5):(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactUserBlockAction").FB_BLOCK))?d("LSThreadBitOffset").clear(m,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5):d("LSThreadBitOffset").set(n,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5);var k=g[0],p=g[1];await b.runInTransaction(function(a){var b=babelHelpers.extends({},h,{capabilities:k,capabilities2:p});return a.threads.put(b)},"readwrite",void 0,void 0,f.id+":137")}())},a[0]=b,a[1]=e):e=a[1];return e}function o(a){return(i||(i=d("I64"))).equal(a.threadType,(j||(j=d("LSIntEnum"))).ofNumber(15))}g.clearedMnBlockCapabilities=l;g.clearedFbBlockCapabilities=m;g.useChangeThreadBlockCapabilities=a}),98);
__d("MAWReliabilityMonitor",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["PENDING","OK","ERROR","UNKNOWN"]);c=function(){function a(){this.$1=new Map(),this.$2=new Map(),this.$3=[]}var b=a.prototype;b.startMonitoring=function(a,b){b=new h(a,b,this);this.$1.set(a,b);this.recordReport(b);return b};b.stopMonitoring=function(a){this.$1["delete"](a.identifier),this.$2["delete"](a.identifier)};b.recordReport=function(a){this.$2.set(a.identifier,babelHelpers["extends"]({},a.selfAssessmentFn(),{identifier:a.identifier,timestamp:Date.now()})),this.$4()};b.onAggregatedReportChange=function(a){this.$3.push(a)};b.$4=function(){var a=this.getAggregatedReportEntity();this.$3.forEach(function(b){return b(a)})};b.getAggregatedReportEntity=function(){return new g(this.$2)};b.triggerAllSelfAssessments=function(){var a=this;this.$1.forEach(function(b){a.recordReport(b)})};b.getAggregatedReport=function(){this.triggerAllSelfAssessments();return this.$2};b.TEST_ONLY_reset=function(){this.$1.clear(),this.$2.clear(),this.$3=[]};return a}();var g=function(){function a(a){this.$1=a}var b=a.prototype;b.toAckPayloadFormat=function(){return Array.from(this.$1.values())};b.toString=function(){var a=Object.fromEntries(this.$1);return JSON.stringify(a)};return a}(),h=function(){function a(a,b,c){this.identifier=a,this.selfAssessmentFn=b,this.$1=c}var b=a.prototype;b.stopMonitoring=function(){this.$1.stopMonitoring(this)};b.updateState=function(){this.$1.recordReport(this)};return a}();d=new c();f.HealthReportState=a;f.ReliabilityAggregatedReport=g;f.ReportableModule=h;f.MAWReliabilityMonitorSingleton=d}),66);
__d("MAWSetupWorkerAuxStateForLogging",["nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=[],i=3,j={getWorkerAge:function(){if(j.workerStartTime!=null)return Math.floor((Date.now()-c("nullthrows")(j.workerStartTime))/1e3)},restartMessageTypes:[],restartReasons:[],workerStartTime:null,workerTerminatedPermanently:!1};function a(){j.workerStartTime=Date.now()}function b(a){h.push(a),h.length>i&&h.shift()}function d(){return h.join(",")}g.HEART_BEAT_HISTORY=h;g.WorkerLifeCycleState=j;g.resetWorkerCreationTime=a;g.addWorkerHeartbeatToHistory=b;g.getHeartbeatHistoryAsString=d}),98);
__d("MAWTrackPendingOccamadilloThreads",["Deferred","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSIntEnum","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","QuickPerformanceLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h={},h[d("MAWMICSchema").ANNOTATIONS.occamadilloBatchesSentToWorker]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads]=0,h);(function(){Object.keys(l).forEach(function(a){d("MAWMIC").addIntAnnotation(a,0)})})();function m(a){d("MAWMIC").addIntAnnotation(a,++l[a])}function a(){return l.occamadilloBatchesSentToWorker}var n=new(c("Deferred"))(),o=new Set(),p=new Set(),q=new Set(),r=new Set();function b(a){a=a.callingSource;r.add((k||(k=d("LSIntEnum"))).toNumber(a));d("MAWMIC").addIntArrayAnnotation(d("MAWMICSchema").ANNOTATIONS.occamadilloCallingSources,Array.from(r))}function e(a){d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_start);if(o.has(a)){m(d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads);return}p.add(a);d("LSPlatformLsInitLog").LsSync.isRunning()&&q.add(a);(i||(i=c("QuickPerformanceLogger"))).currentTimestamp();o.add(a);d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size);d("LSPlatformLsInitLog").LsSync.hasEnded()&&m(d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync)}function f(){d("MAWMIC").addBoolAnnotation("threadMappingAcked",!0)}async function s(a){if(c("gkx")("2661"))await n.getPromise();else{var b=await (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton;await d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(b,(k||(k=d("LSIntEnum"))).ofNumber(95))}p.delete(a);q.delete(a);d("MAWMIC").addIntAnnotation("occamadilloCompleteThreadCount",o.size-p.size);u()}function t(){n.resolve(),u()}function u(){d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size);if(d("LSPlatformLsInitLog").LsSync.hasEnded()&&q.size===0){d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_end);return}p.size===0&&d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_end)}g.incrementCounter=m;g.getBatchesSentNumber=a;g.markThreadPassedToNativeOp=b;g.addPendingThread=e;g.markBridgeCallAcked=f;g.removePendingThread=s;g.completeSync=t;g.maybeEndOccamadilloThreadMapping=u}),98);
__d("MAWInitError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b,c){var d;d=a.call(this,b)||this;d.error=void 0;d.name="MAWInitError";d.message=b;d.error=c;return d}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.MAWInitError=a}),66);
__d("MAWInit",["MAWCurrentUser","MAWInitError","MAWMIC","MWQPLJoinId","MultipleTabsLogger","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","gkx","qpl","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(25310776,"6155"),j=!1,k=[],l=[],m=!1;function n(){if(m)return;m=!0;c("QPLUserFlow").addAnnotations(i,{bool:{armadillo_init_sync_api_improvements:c("gkx")("24025"),isArmadilloPublicLaunchUser:c("gkx")("23405"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}})}var o=!1,p=function(){return document.visibilityState!==void 0?document.visibilityState==="hidden":document.hidden},q=function(){r("visibility_change_"+(p()?"hidden":"visible"))};function a(){if(o)return;d("MAWMIC").addPoint("maw_init_start");o=!0;c("QPLUserFlow").start(i,babelHelpers.extends({annotations:{bool:{initiallyHidden:p()},string:{hostname:window.location.hostname}},cancelOnUnload:!0},d("MWQPLJoinId").allowJoinId?{joinOptions:{joinId:d("MWQPLJoinId").MWQPLJoinId}}:{}));c("QPLUserFlow").addAlignmentPointForJoin(i,0,{requestId:d("MWQPLJoinId").MWQPLJoinId});d("MultipleTabsLogger").addAnnotationToQPLEvent(i);void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){c("QPLUserFlow").addAnnotations(i,a)});n();document.addEventListener("visibilitychange",q);k.forEach(function(a){return a()});l.forEach(function(a){return a()});k.splice(0,k.length);l.splice(0,l.length)}function r(a,b){if(!o||j){if(!o&&b!=null&&b.allowEarlyLogPoints){var d=(h||(h=c("QuickPerformanceLogger"))).currentTimestamp();l.push(function(){c("QPLUserFlow").addPoint(i,a,{timestamp:d})})}return}n();c("QPLUserFlow").addPoint(i,a)}function b(a,b,d){if(!o||j){!o&&d!=null&&d.allowEarlyAnnotations&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{bool:(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{bool:(d={},d[a]=b,d)})}function e(a,b,d){if(!o||j){!o&&d!=null&&d.allowEarlyAnnotations&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{string:(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{string:(d={},d[a]=b,d)})}function f(a,b,d){if(!o||j){!o&&d!=null&&d.allowEarlyAnnotations&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{string_array:(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{string_array:(d={},d[a]=b,d)})}function s(a,b,d){if(!o||j){!o&&d!=null&&d.allowEarlyAnnotations&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{int:(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{int:(d={},d[a]=b,d)})}function t(){n(),j=!0,m=!1,document.removeEventListener("visibilitychange",q)}function u(a,b){t();b=b instanceof d("MAWInitError").MAWInitError&&b.error?b.error:b;c("QPLUserFlow").addAnnotations(i,{string:{errorDescription:b==null?void 0:b.message}});c("QPLUserFlow").endFailure(i,a,{error:b});d("MAWMIC").fail(a,b)}function v(a,b){t(),c("QPLUserFlow").addAnnotations(i,{string:{cancelReason:a}}),b&&c("QPLUserFlow").markError(i,"maw_init_cancel_with_error",{error:b}),c("QPLUserFlow").endCancel(i),d("MAWMIC").addStringAnnotation("mawInitCancelReason",a),d("MAWMIC").cancel("maw_init_cancel",b),c("QPLUserFlow").addAnnotations(c("qpl")._(29818881,"6702"),{string:{maw_cancel_reason:a,maw_error_message:b==null?void 0:b.message}})}function w(a){if(j)return;t();d("MAWMIC").addStringAnnotation("mawInitDropReason",a);(h||(h=c("QuickPerformanceLogger"))).markerDrop(i)}function x(){t(),c("QPLUserFlow").endSuccess(i),d("MAWMIC").addPoint("maw_init_end")}async function y(a,b){var c=a+"_start";a=a+"_end";r(c);c=await b();r(a);return c}var z={isCompleted:function(){return j}};b={addBoolAnnotation:b,addIntAnnotation:s,addStringAnnotation:e,addStringArrayAnnotation:f,cancel:v,drop:w,endSuccess:x,fail:u,logPoint:r,measurePerformance:y,start:a};g.MAWInitState=z;g.MAWInit=b}),98);
__d("MAWStartupLoggingUtils",["FBLogger","MAWInit","MAWMIC","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var f;f=(f=b==null?void 0:b.message)!=null?f:"";f.indexOf("Failed to execute 'importScripts'")>=0?d("MAWInit").MAWInit.fail("import_scripts_failure",c("getErrorSafe")(b)):d("MAWInit").MAWInit.fail("worker_error",c("getErrorSafe")(b));c("FBLogger")("messenger_web").mustfix("[MAWWebWorkerSingletonAsync: "+a+"]: %s:%s:%s:%s:%s:%s:%s",JSON.stringify(b==null?void 0:b.message),b==null?void 0:b.lineno,b==null?void 0:b.colno,b==null?void 0:b.filename,JSON.stringify(b,window.Object.getOwnPropertyNames(b)),b==null?void 0:b.name,e)}function b(a){var b=function(d){d=d==null?void 0:d.data;if(typeof d==="object")if((d==null?void 0:d.type)==="importScripts_error"){var e,f;a.removeEventListener("message",b);var g=c("FBLogger")("messenger_web");g=g.addMetadata("FBLOGGER","ERROR_STACK",(e=typeof (d==null?void 0:d.stack)==="string"?d==null?void 0:d.stack:JSON.stringify(d==null?void 0:d.stack))!=null?e:"no_stack");e=d!=null?d:{};var h=e.error_code,i=e.error_msg,j=e.error_name;e=e.source;f=(f=d==null?void 0:d.perfEntry)!=null?f:{};var k=f.duration,l=f.encodedBodySize,m=f.responseStatus;f=f.transferSize;g.mustfix("[MAWWebWorkerSingletonAsync Script Import Error Details]: %s:%s:%s || errCode:%s || respStatus:%s || encBodySize:%s || duration:%s || transferSize:%s",e!=null&&JSON.stringify(e)||"no_source",j!=null&&JSON.stringify(j)||"no_name",i!=null&&JSON.stringify(i)||"no_msg",h!=null&&JSON.stringify(h)||"none",(g=JSON.stringify(m))!=null?g:"none",(e=JSON.stringify(l))!=null?e:"none",(j=JSON.stringify(k))!=null?j:"none",(i=JSON.stringify(f))!=null?i:"none")}else(d==null?void 0:d.type)==="importScripts_success"&&a.removeEventListener("message",b)};a.addEventListener("message",b)}var h=new Set(["worker_connection_established","worker_init_point_hsdp_end","worker_init_point_hblp_end","get_worker_rev_ack_received","old_worker_shutdown_end","old_worker_shutdown_start"]);function e(a){var b=a.data.annotations;if(b!=null){var c={allowEarlyAnnotations:!0};Object.keys(b).forEach(function(a){var e;e=(e=b[a])!=null?e:{};Object.entries(e).forEach(function(b){var e=b[0];b=b[1];e="workerInit"+e.charAt(0).toUpperCase()+e.substring(1);a==="int"&&typeof b==="number"?(d("MAWInit").MAWInit.addIntAnnotation(e,b,c),d("MAWMIC").addIntAnnotation(e,b)):a==="string"&&typeof b==="string"?(d("MAWInit").MAWInit.addStringAnnotation(e,b,c),d("MAWMIC").addStringAnnotation(e,b)):a==="bool"&&typeof b==="boolean"&&(d("MAWInit").MAWInit.addBoolAnnotation(e,b,c),d("MAWMIC").addBoolAnnotation(e,b))})})}var e={allowEarlyLogPoints:!0};if(a.type==="point"){if(h.has(a.data.event)){var f="worker_"+a.data.event;d("MAWInit").MAWInit.logPoint(f,e);d("MAWMIC").addPoint(f)}}else a.type==="end"&&(a.data.cancel===!0?d("MAWInit").MAWInit.logPoint("worker_creation_cancel",e):a.data.errorName!=null&&(d("MAWInit").MAWInit.addStringAnnotation("errorDescription",a.data.errorName,{allowEarlyAnnotations:!0}),d("MAWInit").MAWInit.logPoint("worker_creation_fail",e)))}g.logWorkerError=a;g.setImportScriptsErrorListener=b;g.logSharedWorkerQPLEvents=e}),98);
__d("MAWWorkerWatchdogRecovery",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(){return g}f.setRecoveryForWatchdog=a;f.getWorkerRecoveryForWatchdog=b}),66);
__d("SharedWorkerDevChangeManager",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=new Set();function a(a,b){var c=b.storageWorkerResource;b=b.tabResource;if(!h)return!0;if(i.has(a))return!0;if(new URLSearchParams(window.location.search).has("force_shared_worker_updates"))return!1;if(c.version===2&&b.version===2&&c.sandboxOnlyChecksum!=null)return c.sandboxOnlyChecksum===b.sandboxOnlyChecksum;return c.version===2&&c.rsrcBundleUrl==null||b.version===2&&b.getJSModuleBundleResource().url==null?!1:c.rsrcBundleUrl===b.getJSModuleBundleResource().url}function b(a){if(!h)return!1;if(i.has(a))return!1;return new URLSearchParams(window.location.search).has("force_shared_worker_updates")?!0:!1}function c(a){h&&i.add(a)}g.shouldUseStorageWorkerForDev=a;g.shouldUpgradeWorkerForDevExperimental=b;g.trackCreatedWorker=c}),98);
__d("SharedWorkerEventManager",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var d=function(a){var d;if(typeof a.data==="object"&&((d=a.data)==null?void 0:d.type)==="console"&&typeof ((d=a.data)==null?void 0:d.response)==="object"&&((d=a.data)==null?void 0:d.response)!=null){d=a.data.response;a=d.method;d=d.args;if(typeof a!=="string"||!["log","error","info","debug","warn"].includes(a)){c("FBLogger")("worker").mustfix("Unexpected console method: %s",String(a));return}if(!Array.isArray(d)){c("FBLogger")("worker").mustfix('Expected console args "%s" to be an array',JSON.stringify(d));return}b({method:a,args:d})}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function i(a,b){var c=function(a){var c;if(typeof a.data==="object"&&((c=a.data)==null?void 0:c.type)==="sw-uncaught-error"){a=typeof ((c=a.data)==null?void 0:c.e)==="object"?(c=a.data.e)!=null?c:{}:{};c=a.error;var d=a.lineno,e=a.colno,f=a.filename;a=a.message;b({error:c instanceof Error?c:null,errorObject:{lineno:typeof d==="number"?d:null,colno:typeof e==="number"?e:null,filename:typeof f==="string"?f:null,message:typeof a==="string"?a:null}})}},d=a.port;d.addEventListener("message",c);return function(){return d.removeEventListener("message",c)}}function a(a,b,d){var e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="sw-get-rev"&&typeof a.data.response==="object"){b==null||b.markPoint("get_worker_rev_ack_received");a=typeof a.data==="object"&&typeof ((e=a.data)==null?void 0:e.response)==="object"?(e=a.data)==null?void 0:e.response:{};e=a==null?void 0:a.workerRevision;var f=a==null?void 0:a.spinTime;a=a==null?void 0:a.workerChecksum;if(e==null||typeof e!=="number"){b==null||b.addAnnotations({string:{malformedData:"rev is non-number"}});c("FBLogger")("worker").mustfix("Expected worker rev to be non-null number, but instead received: %s",String(e));return}if(f==null||typeof f!=="number"){b==null||b.addAnnotations({string:{malformedData:"spin_time is non-number"}});c("FBLogger")("worker").mustfix("Expected worker spin time to be non-null number, but instead received: %s",String(f));return}d({rev:e,spinTime:f,workerChecksum:typeof a==="string"?a:void 0})}},f=a.port;f.addEventListener("message",e);return function(){return f.removeEventListener("message",e)}}function b(a,b,c){var d=function(e){var f;if(typeof e.data==="object"&&((f=e.data)==null?void 0:f.type)==="sw-shutdown"&&typeof e.data.response==="object"){var g,h;f=typeof ((f=e.data.response)==null?void 0:f.reason)==="string"?(f=e.data.response)==null?void 0:f.reason:null;g=typeof ((g=e.data.response)==null?void 0:g.workerID)==="string"?(g=e.data.response)==null?void 0:g.workerID:null;e=typeof ((h=e.data.response)==null?void 0:h.isInitialized)==="boolean"?(h=e.data.response)==null?void 0:h.isInitialized:null;b({reason:f,workerID:g,isInitialized:e});(c==null?void 0:c.once)===!0&&a.port.removeEventListener("message",d)}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function d(a,b){a.port.addEventListener("message",function(a){var c;typeof a.data==="object"&&((c=a.data)==null?void 0:c.type)==="sw-uptime-tracking"&&typeof ((c=a.data)==null?void 0:c.response)==="object"&&typeof ((c=a.data)==null||(c=c.response)==null?void 0:c.trackerID)==="number"&&b({trackerID:a.data.response.trackerID})})}function e(a,b,d){var e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="execute-worker-ack"&&typeof ((e=a.data)==null?void 0:e.response)==="object"){e=typeof a.data==="object"&&typeof ((e=a.data)==null?void 0:e.response)==="object"?(a=(e=a.data)==null?void 0:e.response)!=null?a:{}:{};a=e.workerRevision;var f=e.spinMode,g=e.spinTime,h=e.firstInit,i=e.errorGettingSiteData;e=e.error;if(typeof h!=="boolean"){b==null||b.addAnnotations({string:{malformedData:"firstInit is non-boolean"}});c("FBLogger")("worker").mustfix("Expected firstInit to be a boolean, but instead received: %s",String(h));return}i=i!=null?i:e;if(typeof i==="string")return d({err:i,isFirstInit:h});if(typeof a==="number"&&typeof f==="number"&&typeof g==="number")return d({workerRev:a,workerSpinTime:g,workerSpinMode:f,isFirstInit:h});else b==null||b.addAnnotations({string:{malformedData:"workerRevision, spinMode, and/or spinTime are non-numbers"}}),c("FBLogger")("worker").mustfix("Expected workerRevision, spinMode, and spinTime to be non-null number, but instead received: %s %s %s",String(a),String(f),String(g))}},f=a.port;f.addEventListener("message",e);return function(){return f.removeEventListener("message",e)}}function f(a,b,d,e){var f=function(g){var h;if(typeof g.data==="object"&&((h=g.data)==null?void 0:h.type)==="execute-worker-imports"&&typeof ((h=g.data)==null?void 0:h.response)==="object"){(e==null?void 0:e.once)===!0&&a.port.removeEventListener("message",f);b==null||b.markPoint("bundle_imports_ack");h=typeof g.data==="object"&&typeof ((h=g.data)==null?void 0:h.response)==="object"?(g=(h=g.data)==null?void 0:h.response)!=null?g:{}:{};g=h.err;h=h.attempts;if(g!=null&&typeof g!=="string"){b==null||b.addAnnotations({string:{malformedData:"err is neither null or a string"}});c("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(g));return}if(h!=null&&typeof h!=="number"){b==null||b.addAnnotations({string:{malformedData:"attempts is neither null or a number"}});c("FBLogger")("worker").mustfix("Expected attempts to be a number or null, but instead receieved: %s",String(h));return}d({err:g,attempts:h})}},g=a.port;g.addEventListener("message",f);return function(){return g.removeEventListener("message",f)}}function j(a,b,d){var e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="ww-hrp-init"){b==null||b.markEventEnd("hrp_init");e=typeof a.data==="object"&&typeof ((e=a.data)==null?void 0:e.response)==="object"?(a=(e=a.data)==null?void 0:e.response)!=null?a:{}:{};a=e.err;if(a!=null&&typeof a!=="string"){b==null||b.addAnnotations({string:{malformedData:"err is neither null or a string"}});c("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(a));return}d({err:a})}},f=a.port;f.addEventListener("message",e);return function(){return f.removeEventListener("message",e)}}function k(a,b){var c=function(a){var c;if(typeof a.data==="object"&&((c=a.data)==null?void 0:c.type)==="worker-init-mark"&&typeof ((c=a.data)==null?void 0:c.response)==="object"&&typeof ((c=a.data)==null||(c=c.response)==null?void 0:c.point)==="string"){b((c=a.data)==null||(c=c.response)==null?void 0:c.point)}},d=a.port;d.addEventListener("message",c);return function(){return d.removeEventListener("message",c)}}function l(a,b,c){var d=function(e){var f;if(typeof e.data==="object"&&((f=e.data)==null?void 0:f.type)==="self-terminate"&&typeof ((f=e.data)==null?void 0:f.response)==="object"&&typeof ((f=e.data)==null||(f=f.response)==null?void 0:f.from)==="string"){var g,h,i;f=(f=e.data)==null||(f=f.response)==null?void 0:f.from;g=typeof ((g=e.data)==null||(g=g.response)==null?void 0:g.reason)==="string"?(g=e.data)==null||(g=g.response)==null?void 0:g.reason:"unknown";h=typeof ((h=e.data)==null||(h=h.response)==null?void 0:h.workerID)==="string"?(h=e.data)==null||(h=h.response)==null?void 0:h.workerID:"unknown";e=typeof ((i=e.data)==null||(i=i.response)==null?void 0:i.error)==="string"?(i=e.data)==null||(i=i.response)==null?void 0:i.error:void 0;(c==null?void 0:c.once)===!0&&a.port.removeEventListener("message",d);b(f,g,h,e)}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function m(a,b){b=b!=null?b:{};var c=b.reason;b=b.upgrade;a.port.postMessage({type:"sw-shutdown",args:[{reason:c,upgrade:b}]})}function n(a){a.port.postMessage({type:"sw-get-rev",args:[]})}function o(a,b){b=b!=null?b:{};var c=b.jsModuleResource;b=b.isDev;a.port.postMessage({type:"execute-worker",args:[c!=null?c:{},b]})}var p=["no-hrp","initialized","processed"];function q(a,b,c){var d=function(e){var f;if(typeof e.data==="object"&&((f=e.data)==null?void 0:f.type)==="connection-ack"&&typeof ((f=e.data)==null?void 0:f.response)==="object"&&typeof ((f=e.data)==null||(f=f.response)==null?void 0:f.from)==="string"){var g;f=typeof ((f=e.data)==null||(f=f.response)==null?void 0:f.workerID)==="string"?(f=e.data)==null||(f=f.response)==null?void 0:f.workerID:void 0;g=typeof ((g=e.data)==null||(g=g.response)==null?void 0:g.hrpStatus)==="string"?(g=e.data)==null||(g=g.response)==null?void 0:g.hrpStatus:void 0;b((e=e.data)==null||(e=e.response)==null?void 0:e.from,f,g!=null&&p.includes(g)?g:void 0);(c==null?void 0:c.once)===!0&&a.port.removeEventListener("message",d)}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function r(a,b){var c=function(a){b(a.data)},d=a.port;d.addEventListener("message",c);return function(){return d.removeEventListener("message",c)}}function s(a){a.port.postMessage({type:"ww-connection-ack"})}function t(a,b,c){c=b.isDev;var d=b.hrp;b=b.js_env;a.port.postMessage({type:"ww-hrp-init",hrp:d,is_dev:c,js_env:b,tiered:!0})}function u(a,b){b=b.trackerID;a.port.postMessage({type:"sw-uptime-tracking",args:{trackerID:b}})}function v(a){var b=h(a,function(a){var b,c=a.args;a=a.method;(b=console)[a].apply(b,c)}),d=i(a,function(a){var b=a.error;a=a.errorObject;b!=null?c("FBLogger")("worker").catching(b).mustfix("Shared Worker uncaught error."):c("FBLogger")("worker").mustfix("Shared Worker uncaught error with no Error object. %s:%d:%d:%s",a.message,a.lineno,a.colno,a.filename)});return function(){b(),d()}}g.registerLogFowardingListener=h;g.registerUncaughtErrorForwardingListener=i;g.registerGetWorkerRevListener=a;g.registerWorkerShutdownListener=b;g.registerUptimeTrackerListener=d;g.registerExecuteWorkerAckListener=e;g.registerExecuteWorkerImportsListener=f;g.registerHrpInitListener=j;g.registerWorkerInitPointsListener=k;g.registerWorkerSelfTerminationListener=l;g.emitWorkerShutdown=m;g.emitGetRev=n;g.emitExecuteWorker=o;g.registerConnectionAckListener=q;g.registerAnyMessageListener=r;g.emitConnectionAckRequest=s;g.emitHrpInit=t;g.emitUptimeTracking=u;g.registerForwardListeners=v}),98);
__d("WebStorageLockManager",["FBLogger","LocalStorageWrapper","LockManager","Run","clearInterval","err","promiseDone","setInterval","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function h(a){c("FBLogger")("messenger_web").mustfix(a)}function a(a,b){var e="Failed to execute 'request' on 'LockManager'",f="Lock broken by another request with the 'steal' option.",g=function(a,b,c){var d=a.get(b);if(d!=null)return d;d=c();a.set(b,d);return d};try{var i=d("LocalStorageWrapper").getStorage(h),j=function(a,c){d("LocalStorageWrapper").setItemGuarded(i,a,c,h,b==null?void 0:b.onQuotaExceeded)},k=function(a){d("LocalStorageWrapper").removeItemGuarded(i,a,h)},l=function(a){return d("LocalStorageWrapper").getItemGuarded(i,a,h)},m=function(){function a(a,b){this.lockName=a,this.tabId=b,this.lockA=this.lockName+"-a",this.lockB=this.lockName+"-b"}var b=a.prototype;b.run=function(a){return this.$1(a,0)};b.$1=function(a,b){var d=this,e=function(c){return window.requestAnimationFrame(function(){return d.$1(a,b+1).then(c)})},f=function(a){return l(a)==null};j(this.lockA,this.tabId);return new Promise(function(g){var h=function(){try{a(),g()}finally{k(d.lockB),k(d.lockA)}};f(d.lockB)||b>10?(b>10&&c("FBLogger")("messenger_web").warn("web-lock polyfill: Had to steal lock"),j(d.lockB,d.tabId),l(d.lockA)===d.tabId?h():window.requestAnimationFrame(function(){l(d.lockB)===d.tabId?h():e(g)})):e(g)})};return a}(),n=function(){function a(b){this.tabId=b,this.lock=new m(a.tabsKey,b),c("promiseDone")(this.$1()),this.$2(),this.keepOnlyTabs(function(b){return a.isAlive(b)})}a.isAlive=function(b){b=l(a.$3(b));return b==null?!1:Date.now()-parseFloat(b)<1e3};var b=a.prototype;b.keepOnlyTabs=async function(b){await this.lock.run(function(){var c;c=JSON.parse((c=l(a.tabsKey))!=null?c:"[]").filter(b);c.length>0?j(a.tabsKey,JSON.stringify(c)):k(a.tabsKey)})};b.$2=function(){var b=a.$3(this.tabId);j(b,Date.now().toString());var e=c("setInterval")(function(){j(b,Date.now().toString())},500);d("Run").onUnload(function(){c("clearInterval")(e),k(b)})};b.$1=async function(){var b=this;await this.lock.run(function(){var c;c=JSON.parse((c=l(a.tabsKey))!=null?c:"[]");j(a.tabsKey,JSON.stringify([].concat(c,[b.tabId])))});d("Run").onUnload(function(){return c("promiseDone")(b.keepOnlyTabs(function(a){return a!==b.tabId}))})};a.$3=function(a){return"$navigator.heartbeat-"+a};return a}();n.tabsKey="$navigator.heartbeat-tabs";var o=function(){function a(b,e){var f=this;this.requests=new Map();this.name=b;this.tabId=e;this.queueKey=a.storagePrefix+"-"+b+"-q";this.currentOwnerKey=a.storagePrefix+"-"+b+"-o";this.lock=new m(a.storagePrefix+"-"+b,this.tabId);d("Run").onUnload(function(){c("promiseDone")(f.keepOnlyRequests(function(a){return(a==null?void 0:a.t)!==f.tabId}))})}var b=a.prototype;b.enqueue=async function(b,d,a){var e=this,f=c("uuidv4")().toString(),g={t:this.tabId,u:f},h=function(){b(null),e.markRequestReleased(f)},i=function(){b(f),e.markRequestReleased(f)};this.requests.set(f,[function(){return b(f)},function(){d(),e.markRequestReleased(f)}]);if((a==null?void 0:a.signal)!=null){a.signal.onabort=function(){c("promiseDone")(e.keepOnlyRequests(function(a){return(a==null?void 0:a.u)!==f})),i()};if(a.signal.aborted)return i()}await this.lock.run(function(){var b=e.getOwner();(a==null?void 0:a.steal)===!0&&e.$1(b==null?void 0:b.u);if(b==null||(a==null?void 0:a.steal)===!0||!n.isAlive(b.t))e.$2(e.currentOwnerKey,babelHelpers.extends({},g,(a==null?void 0:a.steal)===!0?{s:!0}:{})),e.$3(f);else if((a==null?void 0:a.ifAvailable)!==!0){b=e.getQueue();b.push(g);e.$2(e.queueKey,b)}else h()})};b.dequeue=async function(b){var c=this,d,e=null;await this.lock.run(function(){var d=c.getOwner();if((d==null?void 0:d.t)!==c.tabId||(d==null?void 0:d.u)!==b)return;d=c.getQueue();d=a.getNextOwner(d);var f=d[0];d=d[1];e=f;c.$2(c.currentOwnerKey,f);c.$2(c.queueKey,d)});this.$3((d=e)==null?void 0:d.u)};b.storageChangedOnOtherTab=async function(a,b){var c=this;a==="o"&&await this.lock.run(function(){var a=c.getOwner();if(a==null)return;c.$3(a==null?void 0:a.u);if(a.s===!0){a=b==null?void 0:b.oldValue;if(a!=null){a=JSON.parse(a);a.t===c.tabId&&c.$1(a.u)}}})};b.getQueue=function(){var a;return(a=this.$4(this.queueKey))!=null?a:[]};b.getOwner=function(){return this.$4(this.currentOwnerKey)};a.getQueueNameAndStorageType=function(b){if(!b.startsWith(a.storagePrefix))return null;var d=b.slice(a.storagePrefix.length+1,b.length-2),e=b.charAt(b.length-1);switch(e){case"q":case"o":case"a":case"b":break;default:throw c("err")("Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: "+b)}return[d,e]};a.getNextOwner=function(a){for(var b=0;b<a.length;b+=1)if(n.isAlive(a[b].t))return[a[b],a.slice(b+1)];return[null,[]]};b.$4=function(a){a=l(a);return a!=null?JSON.parse(a):null};b.$2=function(a,b){b=b==null||Array.isArray(b)&&b.length===0?null:JSON.stringify(b);b==null?k(a):j(a,b)};b.keepOnlyRequests=async function(b){var c=this;await this.lock.run(function(){var d=c.getOwner(),e=c.getQueue().filter(b);if(b(d))c.$2(c.queueKey,e);else{d=a.getNextOwner(e);e=d[0];d=d[1];c.$2(c.currentOwnerKey,e);c.$2(c.queueKey,d)}})};b.markRequestReleased=function(a){a!=null&&this.requests.delete(a)};b.$3=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a=a[0];a()}}};b.$1=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a[0];a=a[1];a()}}};return a}();o.storagePrefix="$navigator.locks";var p=function(){function a(a){this.$1=new Map(),this.storage=d("LocalStorageWrapper").getStorage(h),this.tabId=a,new n(this.tabId),c("promiseDone")(this.$2()),this.$3()}var b=a.prototype;b.request=function(){var a=this;for(var b=arguments.length,g=new Array(b),h=0;h<b;h++)g[h]=arguments[h];return new Promise(function(b,h){c("promiseDone")(async function(i){var j=g[0],b=g.length===3?g[1]:null,k=g.length===2?g[1]:g[2];if(j.startsWith("-"))throw new DOMException("Names cannot start with '-'.",e);if((b==null?void 0:b.ifAvailable)===!0&&(b==null?void 0:b.signal)!=null)throw new DOMException("The 'signal' and 'ifAvailable' options cannot be used together.",e);var l=a.$4(j),m=await new Promise(function(a){c("promiseDone")(l.enqueue(a,function(){h(new DOMException(f,e))},b))});if((b==null||(i=b.signal)==null?void 0:i.aborted)===!0)throw new DOMException("The request was aborted.",e);try{await k(m!=null?{mode:(i=b==null?void 0:b.mode)!=null?i:d("LockManager").LockMode.Exclusive,name:j}:null)}finally{m!=null&&await l.dequeue(m),l.markRequestReleased(m)}}(),b,h)})};b.query=function(){var a=[],b=[];for(var c of this.$5())if(c!=null){var e={mode:d("LockManager").LockMode.Exclusive,name:c.name};if(c.getOwner()!=null)a.push(e);else for(var f of c.getQueue())b.push(e)}return Promise.resolve({held:a,pending:b})};b.$4=function(a){var b=this;return g(this.$1,a,function(){return new o(a,b.tabId)})};b.$3=function(){var a=this;window.addEventListener("storage",function(b){var d=b.key;if(b.storageArea!==a.storage||d==null)return;d=o.getQueueNameAndStorageType(d);if(d==null)return;var e=d[0];d=d[1];c("promiseDone")((e=a.$4(e))==null?void 0:e.storageChangedOnOtherTab(d,b))})};b.$2=async function(){await Promise.all(this.$5().map(function(a){return a==null?void 0:a.keepOnlyRequests(function(a){return a==null?!1:n.isAlive(a.t)})}))};b.$5=function(){var a=this;return i==null?[]:Object.keys(i).map(function(b){b=o.getQueueNameAndStorageType(b);if(b==null)return;b=b[0];return a.$4(b)})};return a}();return new p(a)}catch(a){return null}}g.make=a}),98);
__d("supportsNativeWebLock",[],(function(a,b,c,d,e,f){"use strict";function a(){return self.LockManager!=null&&self.navigator.locks instanceof self.LockManager}f["default"]=a}),66);
__d("SharedWorkerLockManager",["Deferred","FBLogger","WebStorageLockManager","emptyFunction","pageID","promiseDone","setTimeout","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";var h="shared_worker_mutex",i=6e5;function j(a){var b;b=(b=window)==null||(b=b.navigator)==null?void 0:b.locks;if(b!=null)return b;var e=d("WebStorageLockManager").make(c("pageID"));if(e!=null){a==null||a.addAnnotations({bool:{fallback_lock_manager:!0}});return{request:function(a,b){return e.request(a,b)}}}return null}function k(a,b,d){c("setTimeout")(function(){a.isSettled()||(b==null||b.endFailure("lock_timeout"),c("FBLogger")("worker").warn("[SharedWorkerLockManager]: lock timed out in %s ms",i),a.resolve(),d==null||d())},i)}function a(a,b){var d=b.workerQPLLogger,e=b.onLockTimeout;b=b.onLockFail;var f=j(d);d==null||d.addAnnotations({bool:{native_locks:f!=null?c("supportsNativeWebLock")():null}});if(f==null){d==null||d.markPoint("no_lock_manager");c("FBLogger")("worker").warn("Unable to initialize lock manager");a(c("emptyFunction"));return}d==null||d.markPoint("lock_requested");var g=new(c("Deferred"))();c("promiseDone")(f.request(h,function(){d==null||d.markPoint("lock_obtained");k(g,d,e);a(function(){d==null||d.markPoint("lock_released"),g.resolve()});return g.getPromise()}),void 0,b)}g.withWorkerLock=a}),98);
__d("SharedWorkerLoggingUtils",["ErrorSerializer","FBLogger","ODS","QPLUserFlow","getErrorSafe","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e){(h||(h=d("ODS"))).bumpEntityKey(6653,"shared_worker_infra","worker_self_termination."+b+"."+a),i(a,b,c,e,!0)}function i(a,b,d,e,f){f===void 0&&(f=!1);var g=c("qpl")._(931600201,"1438");c("QPLUserFlow").start(g);c("QPLUserFlow").endSuccess(g,{annotations:{string:{workerName:a,workerID:e,reason:d,location:b,pageID:c("pageID")},bool:{isSelfTermination:f}}})}function b(a,b,c,d,e,f){a==null||a.markEventEnd("execute_worker"),a==null||a.addAnnotations({"int":{runningWorkerRev:e,runningWorkerSpinTime:b,runningWorkerSpinMode:f},string:{executeWorkerErr:c},bool:{isFirstInit:d}})}function e(a,b,d){var e;e=c("getErrorSafe")((e=b instanceof ErrorEvent&&(b==null?void 0:b.error))!=null?e:b);c("FBLogger")("worker").catching(e).warn("Worker %s onerror: %s type, %s message",d,String(b.type),c("ErrorSerializer").toReadableMessage(e));a==null||a.addAnnotations({string_array:{onErrorHandler:[(a=JSON.stringify((d=e==null?void 0:e.message)!=null?d:b==null?void 0:b.message))!=null?a:"undefined",String((d=b==null?void 0:b.lineno)!=null?d:e==null?void 0:e.lineno),String((a=b==null?void 0:b.colno)!=null?a:e==null?void 0:e.colno),String((d=b==null?void 0:b.filename)!=null?d:e==null?void 0:e.filename)]}})}g.logSelfTermination=a;g.logShutdown=i;g.logExecuteAck=b;g.logSharedWorkerError=e}),98);
__d("validateSharedWorkerReference",["ConstUriUtils","isRelativeURL","isSameOrigin","memoize"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoize")(function(){return d("ConstUriUtils").getUri(window.location.href)});function i(a){var b=h(),e=d("ConstUriUtils").getUri(a);e=b!=null&&e!=null?c("isSameOrigin")(e,b):!1;return e||c("isRelativeURL")(a)}function a(a){if(a==null||typeof a!=="object")return null;var b=a.rev,c=a.spin_time,d=a.url,e=a.version,f=a.rsrcBundleUrl;a=a.sandboxOnlyChecksum;return typeof b!=="number"||typeof c!=="number"||e!=null&&e!==1&&e!==2||!Number.isInteger(b)||!Number.isInteger(c)||typeof d!=="string"||!i(d)||f!=null&&typeof f!=="string"||a!=null&&typeof a!=="string"?null:{rev:b,spin_time:c,url:d,version:e!=null?e:1,rsrcBundleUrl:f,sandboxOnlyChecksum:a}}g["default"]=a}),98);
__d("SharedWorkerStorageManager",["Deferred","FBLogger","Promise","WebAsyncStorage","validateSharedWorkerReference"],(function(a,b,c,d,e,f,g){"use strict";var h,i="__swbundle__",j={};function k(a){return""+i+a}function l(a){var b=new(c("Deferred"))();c("WebAsyncStorage").removeItem(k(a),function(c){if(c)return b.reject(c);j[a]=null;b.resolve()});return b.getPromise()}function m(a,b){var d=new(c("Deferred"))();c("WebAsyncStorage").setItem(k(a),b,function(c){if(c!=null)return d.reject(c);j[a]=b;d.resolve()});return d.getPromise()}function n(a){var b=new(c("Deferred"))();c("WebAsyncStorage").getItem(k(a),function(c,d){if(c)return b.reject(c);j[a]=d;b.resolve(d)});return b.getPromise()}function a(){return j}function d(a,b){return n(a).then(function(a){a=c("validateSharedWorkerReference")(a);return a==null?null:a})["catch"](function(d){c("FBLogger")("worker").catching(d).mustfix("Failed to getSharedWorkerReference for bundleName %s",a);b==null||b.addAnnotations({bool:{failedToGetSharedWorkerResource:!0}});throw d})}function e(a,b){return l(a)["catch"](function(d){c("FBLogger")("worker").catching(d).mustfix("Failed to removeSharedWorkerReference for bundleName %s",a);b==null||b.addAnnotations({bool:{failedToDeleteSharedWorkerResource:!0}});throw d})}function f(a,d,e){var f=c("validateSharedWorkerReference")(d);if(f==null){c("FBLogger")("worker").mustfix('Failed to save worker reference for bundle "%s". Invalid reference: %s',a,JSON.stringify(d));return(h||(h=b("Promise"))).resolve()}return m(a,f)["catch"](function(b){c("FBLogger")("worker").catching(b).mustfix("Failed to saveSharedWorkerReference for bundleName %s",a);e==null||e.addAnnotations({bool:{failedToSaveSharedWorkerResource:!0}});throw b})}function o(a,b){var d=new(c("Deferred"))();c("WebAsyncStorage").upsertAndSaveAtomic(k(a),function(a){a=c("validateSharedWorkerReference")(a);return b(a)},function(b,e){if(b){c("FBLogger")("worker").catching(b).mustfix("Failed to getOrUpdateWorkerReference for bundleName %s",a);return d.reject(b)}j[a]=e;d.resolve(e)});return d.getPromise()}g.SHARED_WORKER_STORAGE_KEY_BASE=i;g.getDebugState=a;g.getSharedWorkerReference=d;g.removeSharedWorkerReference=e;g.saveSharedWorkerReference=f;g.getOrUpdateWorkerReference=o}),98);
__d("createSharedWorkerV2BundleUrlExperimental",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","nullthrows","supportsModuleWorker"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("supportsModuleWorker")(!0);return c("nullthrows")((b=c("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:b?"MODULE":"CLASSIC",name:a}))==null?void 0:b.toString())}g["default"]=a}),98);
__d("SharedWorkerMigrationUtils",["ConstUriUtils","Deferred","FBLogger","SharedWorkerEventManager","SharedWorkerStatusLock","SharedWorkerStorageManager","TrustedTypesWebWorkerScriptURLPolicy","clearTimeout","createSharedWorkerV2BundleUrlExperimental","err","justknobx","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";async function h(a){if(!c("supportsNativeWebLock")())return!0;var b=await self.navigator.locks.query();return b.held.some(function(b){return b.name===d("SharedWorkerStatusLock").getDynamicStringInitLockName(a)})}function a(){return c("supportsNativeWebLock")()}async function i(a){if(!c("supportsNativeWebLock")())return!0;var b=await self.navigator.locks.query();return b.held.some(function(b){return b.name===d("SharedWorkerStatusLock").getStatusLockName(a)})}async function b(a,b){if(!c("supportsNativeWebLock")())return!0;var e=await self.navigator.locks.query();return e.held.some(function(c){return c.name===d("SharedWorkerStatusLock").getWorkerIdStatusLockName(a,b)})}var j={SharedWorkerBundle:c("justknobx")._("2852"),MAWMainWebWorkerV2Bundle:c("justknobx")._("2920")};function e(a){return(a=j[a])!=null?a:!1}async function f(a){if(!await h(a))return!1;var b=new(c("Deferred"))(),e=c("createSharedWorkerV2BundleUrlExperimental")(a);e=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e);e=c("supportsModuleWorker")(!0)?new SharedWorker(e,{name:a,type:"module"}):new SharedWorker(e,a);d("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(a){b.resolve(!0)},{once:!0});d("SharedWorkerEventManager").emitWorkerShutdown(e,{upgrade:!1,reason:"dynamic_string_worker_rollback"});e.port.start();return b.getPromise()}function k(a){a=d("ConstUriUtils").getUri(a);return a!=null&&a.getQueryParam("hash")!=null}async function l(a){var b=a.name,e=a.logger;try{a=await Promise.all([i(b),h(b)]);var f=a[0];a=a[1];if(!f||c("supportsNativeWebLock")()&&a){e.markPoint("legacy_termination_skipped");e.addAnnotations({bool:{dynamicStringWorkerAlreadyRunning:a,workerAlreadyRunning:f,native_locks:c("supportsNativeWebLock")()}});return}a=await d("SharedWorkerStorageManager").getSharedWorkerReference(b);e.markPoint("storage_read");e.addAnnotations({bool:{storageResourceSet:a!=null}});if(a==null)return;try{await d("SharedWorkerStorageManager").removeSharedWorkerReference(b),e.markPoint("storage_cleaned")}catch(a){e.markPoint("storage_error"),e.addAnnotations({string:{storageError:a.toString()}}),c("FBLogger")("worker").catching(a).mustfix("Failed to remove reference from storage.")}f=k(a.url);e.markPoint(f?"legacy_termination_start":"termination_skipped");if(f){var g=new(c("Deferred"))();f=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a.url);a=c("supportsModuleWorker")(!0)?new SharedWorker(f,{name:b,type:"module"}):new SharedWorker(f,b);f=function(){e.markPoint("legacy_termination_end"),g.resolve(!0)};d("SharedWorkerEventManager").registerWorkerShutdownListener(a,f,{once:!0});d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(a,f,{once:!0});a.port.start();d("SharedWorkerEventManager").emitWorkerShutdown(a,{upgrade:!1,reason:"maw-request-refresh"});b=c("setTimeout")(function(){e.markPoint("legacy_termination_timeout"),g.reject(c("err")("Failed to close Shared Web Worker properly. SelfTerminationTimeout was exceeded."))},1e3);await g.getPromise();c("clearTimeout")(b)}}catch(a){e.markPoint("legacy_check_and_termination_error"),e.addAnnotations({string:{legacyCheckError:a.toString()}}),c("FBLogger")("worker").catching(a).mustfix("Failed to check storage and possibly terminate legacy worker.")}}g.isDynamicStringWorkerRunning=h;g.supportsNativeWebLocks=a;g.isStatusLockHeld=i;g.isWorkerIdStatusLockHeld=b;g.shouldCheckForDynamicStringWorker=e;g.maybeTerminateDynamicStringWorker=f;g.isLegacyWorkerURL=k;g.checkStorageAndTerminateLegacyWorker=l}),98);
__d("SharedWorkerUptimeTracker",["FBLogger","ODS","SharedWorkerEventManager","clearInterval","performanceNow","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=1e4,k=45e3,l=new Map();function m(a){return Math.floor(((i||(i=c("performanceNow")))()-a)/1e3)}function n(a,b){var e=0,f={};d("SharedWorkerEventManager").registerUptimeTrackerListener(a,function(a){a=a.trackerID;var c=f[a];if(c==null)return;(h||(h=d("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+b,1,0);h.bumpEntityKey(6653,"shared_worker_infra","worker_uptime_elapsed_time_to_response_sec."+m(c.createdMs)+"."+b);delete f[a]});return c("setInterval")(function(){var g=e++;c("setTimeout")(function(){var a=f[g];if(a==null)return;delete f[g]},k);f[g]={createdMs:(i||(i=c("performanceNow")))()};(h||(h=d("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+b,0,1);d("SharedWorkerEventManager").emitUptimeTracking(a,{trackerID:g})},j)}function a(a,b){if(l.has(b)){c("FBLogger")("worker").mustfix('Uptime tracking for worker "%s" already started.',b);return}l.set(b,{intervalID:n(a,b)})}function b(a){var b=l.get(a);b!=null&&(c("clearInterval")(b.intervalID),l["delete"](a))}g.startUptimeTracking=a;g.stopUptimeTracking=b}),98);
__d("buildSharedWorkerInitQPLLogger",["QPLUserFlow","SiteData","checkForIndexedDbSupported","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(931595918,"2062"),i=0;function a(a){var b=!1,d=!1,e=i++;function f(f){var g=f.version,i=f.workerName,j=f.callReason,k=f.experimental_init;f=f.migrationEnabled;if(b||d)return;b=!0;g={"int":{version:g,clientRev:c("SiteData").client_revision},bool:{isDev:!1,supportsIDB:c("checkForIndexedDbSupported")(),experimental_init:k!=null?k:!1,migrationEnabled:f!=null?f:!1},string:{workerName:i,hostname:window.location.hostname,callReason:j,pageID:c("pageID")}};c("QPLUserFlow").start(h,{onFlowTimeout:function(){c("QPLUserFlow").addAnnotations(h,{bool:{setupTimeout:!0}},{instanceKey:e}),d=!0},cancelOnUnload:!0,annotations:g,timeoutInMs:66e4,instanceKey:e});a==null||a({type:"start",data:{annotations:g}})}function g(f,g){f=f+"_start";a==null||a({type:"point",data:{annotations:g,event:f}});if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e})}function j(f,g){f=f+"_end";a==null||a({type:"point",data:{annotations:g,event:f}});if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null||a({type:"point",data:{annotations:g,event:f}})}function k(f,g){a==null||a({type:"point",data:{annotations:g,event:f}});if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e})}function l(f){a==null||a({type:"end",data:{annotations:f}});if(!b||d)return;c("QPLUserFlow").endSuccess(h,{annotations:f,instanceKey:e});d=!0}function m(f,g){a==null||a({type:"end",data:{errorName:f,annotations:g}});if(!b||d)return;c("QPLUserFlow").endFailure(h,f,{annotations:g,instanceKey:e});d=!0}function n(f){a==null||a({type:"end",data:{annotations:f,cancel:!0}});if(!b||d)return;c("QPLUserFlow").endCancel(h,{annotations:f,instanceKey:e});d=!0}function o(f){a==null||a({type:"annotate",data:{annotations:f}});if(!b||d)return;c("QPLUserFlow").addAnnotations(h,f,{instanceKey:e})}return{start:f,endFailure:m,addAnnotations:o,endSuccess:l,endCancel:n,markEventStart:g,markEventEnd:j,markPoint:k}}g["default"]=a}),98);
__d("buildSharedWorkerTerminateQPLLogger",["QPLUserFlow","SiteData","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(931600201,"1438"),i=0;function a(a){var b=!1,d=!1,e=i++;function f(f){var g=f.workerName;f=f.callReason;if(b||d)return;b=!0;g={"int":{clientRev:c("SiteData").client_revision},bool:{isDev:!1},string:{workerName:g,hostname:window.location.hostname,callReason:f,pageID:c("pageID")}};c("QPLUserFlow").start(h,{onFlowTimeout:function(){c("QPLUserFlow").addAnnotations(h,{bool:{setupTimeout:!0}},{instanceKey:e}),d=!0},cancelOnUnload:!0,annotations:g,timeoutInMs:3e4,instanceKey:e});a==null||a({type:"start",data:{annotations:g}})}function g(f,g){if(!b||d)return;f=f+"_start";c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null||a({type:"point",data:{annotations:g,event:f}})}function j(f,g){if(!b||d)return;f=f+"_end";c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null||a({type:"point",data:{annotations:g,event:f}})}function k(f,g){if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null||a({type:"point",data:{annotations:g,event:f}})}function l(f){if(!b||d)return;c("QPLUserFlow").endSuccess(h,{annotations:f,instanceKey:e});a==null||a({type:"end",data:{annotations:f}});d=!0}function m(f,g){if(!b||d)return;c("QPLUserFlow").endFailure(h,f,{annotations:g,instanceKey:e});a==null||a({type:"end",data:{errorName:f,annotations:g}});d=!0}function n(f){if(!b||d)return;c("QPLUserFlow").endCancel(h,{annotations:f,instanceKey:e});a==null||a({type:"end",data:{annotations:f,cancel:!0}});d=!0}function o(f){if(!b||d)return;c("QPLUserFlow").addAnnotations(h,f,{instanceKey:e});a==null||a({type:"annotate",data:{annotations:f}})}return{start:f,endFailure:m,addAnnotations:o,endSuccess:l,endCancel:n,markEventStart:g,markEventEnd:j,markPoint:k}}g["default"]=a}),98);
__d("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/sharedworker/init_script/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("getSharedWorkerHash",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("uuidv4")()}g["default"]=a}),98);
__d("createSharedWorkerBundleUrl",["XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a;return c("nullthrows")((a=c("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder").buildUri({hash:c("getSharedWorkerHash")()}).addQueryParams(c("getWorkerInitScriptSPINParams")()))==null?void 0:a.toString())}g["default"]=a}),98);
__d("createSharedWorkerV2BundleUrl",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","gkx","justknobx","nullthrows","supportsModuleWorker"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=c("supportsModuleWorker")(!0),b=c("getWorkerInitScriptSPINParams")();b.set("hash",c("getSharedWorkerHash")());b.set("use_broadcast",c("justknobx")._("4177"));b.set("worker_id_in_terminate",c("gkx")("12766"));return c("nullthrows")((a=c("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:a?"MODULE":"CLASSIC"}))==null||(a=a.addQueryParams(b))==null?void 0:a.toString())}a=function(){return h()};g.createSharedWorkerV2BundleUrl=a}),98);
__d("handleWorkerWriteError",["FBLogger","WebStorageCleanupReason"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a instanceof Error){c("FBLogger")("worker").catching(a).mustfix("Error occured checking in shared worker reference");return}if(a==="writes disabled"){var b;c("FBLogger")("worker").warn("Writes to WebAsyncStorage is disabled. Unable to save shared worker reference. Reason: %s",(b=d("WebStorageCleanupReason").getLastCleanupReason())!=null?b:"n/a");return}c("FBLogger")("worker").mustfix("Error occured checking in shared worker reference: %s",JSON.stringify(a))}g["default"]=a}),98);
__d("SharedWorkerInitFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4266");b=d("FalcoLoggerInternal").create("shared_worker_init",a);e=b;g["default"]=e}),98);
__d("logSharedWorkerInitStep",["SharedWorkerInitFalcoEvent","SiteData","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=c("uuidv4")();function a(a,b,d,e){if(!c("gkx")("21115"))return;c("SharedWorkerInitFalcoEvent").log(function(){return{client_id:h,bundle_name:a,client_rev:String(c("SiteData").client_revision),local_shared_worker_ref:b!=null?{bundle_url:b.url,rev:String(b.rev),spin_time:String(b.spin_time)}:null,new_shared_worker_ref:d!=null?{bundle_url:d}:null,init_step:e}})}g["default"]=a}),98);
__d("SharedWorkerBundleResource",["BootloaderPreloader","BrowserLockManager","Deferred","FBLogger","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLockManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerStatusLock","SharedWorkerStorageManager","SharedWorkerUptimeTracker","SharedWorkerV2ResourceExperimental","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","WebWorkerV2DynamicData","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerBundleUrl","createSharedWorkerV2BundleUrl","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","handleWorkerWriteError","justknobx","logSharedWorkerInitStep","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";var h=5e3,i="shared_worker_broadcast_channel",j=function(a){function b(b){var c;c=a.call(this)||this;c.name="SelfTerminationError";c.message="Worker self terminated with the reason: "+b;c.reason=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));function k(a,b,e,f){f==null||f.markEventStart("shared_worker_construct");var g=new SharedWorker(c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),b);f==null||f.markEventEnd("shared_worker_construct");g.addEventListener("error",function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(f,a,b)});var h=new Set();d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(g,function(a,c,e){d("SharedWorkerLoggingUtils").logSelfTermination(b,a,c,e)},{once:!0});var i=0;d("SharedWorkerEventManager").registerConnectionAckListener(g,function(a,b){i++;if(h.has("worker_connection_established")){f==null||f.addAnnotations({int:{connectionAckNum:i}});return}h.add("worker_connection_established");f==null||f.addAnnotations({string:{connectedFrom:a,workerID:b}});f==null||f.markPoint("worker_connection_established")});d("SharedWorkerEventManager").registerWorkerInitPointsListener(g,function(a){if(h.has(a))return;h.add(a);f==null||f.markPoint("worker_init_point_"+a)});g.port.start();d("SharedWorkerEventManager").registerExecuteWorkerImportsListener(g,f,function(a){var b=a.err;a=a.attempts;f==null||f.addAnnotations({string:{importsError:b},int:{importAttempts:a}});f==null||f.markPoint(b==null?"bundle_imports_success":"bundle_imports_failure")});var j=new(c("Deferred"))();d("SharedWorkerEventManager").registerExecuteWorkerAckListener(g,f,function(a){var b=a.workerSpinTime,e=a.err,g=a.isFirstInit,h=a.workerRev;a=a.workerSpinMode;d("SharedWorkerLoggingUtils").logExecuteAck(f,b,e,g,h,a);e!=null||b==null||h==null?j.reject(c("err")(e!=null?e:"no worker rev or spin time")):j.resolve({rev:h,spinTime:b})});f==null||f.markEventStart("execute_worker");d("SharedWorkerEventManager").emitExecuteWorker(g,{jsModuleResource:e,isDev:!1});return j.getPromise().then(function(a){var b=a.rev;a=a.spinTime;return{worker:g,rev:b,spinTime:a}})}function l(a,b,d){d==null||d.markEventStart("worker_constructor");a=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a);b=c("supportsModuleWorker")(!0)?new SharedWorker(a,{name:b,type:"module"}):new SharedWorker(a,b);d==null||d.markEventEnd("worker_constructor",{string:{workerUrl:a.toString()}});return b}function m(a,b,c){var e=[],f=new Set();e.push(d("SharedWorkerEventManager").registerWorkerInitPointsListener(a,function(a){if(f.has(a))return;f.add(a);c==null||c.markPoint("worker_init_point_"+a)}));e.push(d("SharedWorkerEventManager").registerHrpInitListener(a,c,function(){}));var g=function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(c,a,b)};a.addEventListener("error",g);e.push(function(){return a.removeEventListener("error",g)});return e}function n(a,b,e,f){d("SharedWorkerMigrationUtils").shouldCheckForDynamicStringWorker(b)&&(f==null||f.markEventStart("dynamic_string_worker_check"),c("promiseDone")(d("SharedWorkerMigrationUtils").maybeTerminateDynamicStringWorker(b),function(a){f==null||f.markEventEnd("dynamic_string_worker_check",{bool:{didTerminateDynamicStringWorker:a}})}));var g=l(a,b,f);d("SharedWorkerEventManager").registerConnectionAckListener(g,function(a,b,c){f==null||f.addAnnotations({string:{connectedFrom:a,workerID:b,hrpStatus:c}}),f==null||f.markPoint("worker_connection_established")});var h=new(c("Deferred"))();d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(g,function(a,c,e,g){f==null||f.addAnnotations({string:{selfTerminationError:g}}),d("SharedWorkerLoggingUtils").logSelfTermination(b,a,c,e),h.reject(new j(c))},{once:!0});m(g,b,f);g.port.start();d("SharedWorkerEventManager").emitConnectionAckRequest(g);f==null||f.markPoint("read_dynamic_data");c("promiseDone")(z(e,!1,f).then(function(a){a=a.hrp;f==null||f.markEventStart("hrp_init");d("SharedWorkerEventManager").emitHrpInit(g,{hrp:a.hrp,js_env:a.js_env,isDev:!1},f)},function(a){a=c("getErrorSafe")(a);f==null||f.addAnnotations({string:{hrpInitErr:a.toString()}})}));d("SharedWorkerEventManager").registerExecuteWorkerAckListener(g,f,function(a){var b=a.workerSpinTime,e=a.err,g=a.isFirstInit,i=a.workerRev;a=a.workerSpinMode;d("SharedWorkerLoggingUtils").logExecuteAck(f,b,e,g,i,a);e!=null||i==null||b==null?h.reject(c("err")(e!=null?e:"no worker rev or spin time")):h.resolve({rev:i,spinTime:b})});f==null||f.markEventStart("execute_worker");d("SharedWorkerEventManager").emitExecuteWorker(g);return h.getPromise().then(function(a){var b=a.rev;a=a.spinTime;return{worker:g,rev:b,spinTime:a}})}function o(a,b,e,f,g,h){var i=new(c("Deferred"))();d("SharedWorkerEventManager").registerGetWorkerRevListener(a,h,function(a){var j=a.rev;a=a.spinTime;c("promiseDone")(d("SharedWorkerStorageManager").saveSharedWorkerReference(e,{url:b,rev:j,spin_time:a,version:g.version,rsrcBundleUrl:g.getJSModuleBundleResource().url,sandboxOnlyChecksum:g.sandboxOnlyChecksum},h).then(function(){return d("SharedWorkerStorageManager").getSharedWorkerReference(e,h)}).then(function(a){c("logSharedWorkerInitStep")(e,a,g.resourceUrlForLogging,"after_worker_reference_save")}),function(){h.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!0}}),i.resolve(),f()},function(a){h.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!1}}),i.reject(a),c("handleWorkerWriteError")(a),f()})});h.markEventStart("get_worker_rev");d("SharedWorkerEventManager").emitGetRev(a);return i.getPromise()}function p(a,b,e,f){f===void 0;var g=[],h=function(c,a,f){g.forEach(function(a){return a()}),b(c,a,f),d("SharedWorkerUptimeTracker").stopUptimeTracking(e)};g.push(d("SharedWorkerEventManager").registerForwardListeners(a));g.push(d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){var b=a.reason;a=a.workerID;d("SharedWorkerLoggingUtils").logShutdown(e,null,b,a);b=b==="dynamic_string_worker_rollback"?"requested-upgrade":b;h(b,a,"sw-shutdown")}));g.push(d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(a,function(b,c,a){h(c,a,"self-terminate")}));d("SharedWorkerDevChangeManager").trackCreatedWorker(e);d("SharedWorkerUptimeTracker").startUptimeTracking(a,e);c("logSharedWorkerInitStep")(e,null,null,"create_worker_end")}async function q(a,b,e,f,g,h){h.addAnnotations({string:{initFlow:"use_existing_ref"}});c("logSharedWorkerInitStep")(a,null,null,"using_existing_worker_ref");var i=d("SharedWorkerMigrationUtils").isLegacyWorkerURL(b.url),j=await (b.version===2?i?n(b.url,a,e.getJSModuleBundleResource(),h):d("SharedWorkerV2ResourceExperimental").startV2Worker(b.url,a,e.getJSModuleBundleResource(),h):k(b.url,a,e.getJSModuleBundleResource(),h));j=j.worker;f();b.version===2&&!i&&void o(j,b.url,a,f,e,h);p(j,g,a);return j}async function r(a,b,e,f){e.markPoint("terminate_on_upgrade");var g=new(c("Deferred"))(),h=d("SharedWorkerMigrationUtils").isStatusLockHeld(a);if(await d("SharedWorkerMigrationUtils").isDynamicStringWorkerRunning(a)&&c("supportsNativeWebLock")()&&f===!1)g.resolve(),e.addAnnotations({string:{oldWorkerShutdown:"not_needed_for_dynamic_string"}});else if(self.BroadcastChannel!=null){var i=y(a);i.postMessage({type:"terminate",reason:"requested-upgrade",pageID:c("pageID")});g.resolve();e.addAnnotations({string:{oldWorkerShutdown:"broadcast"}})}else if(await h){b.version===2&&c("supportsModuleWorker")(!0)?i=new SharedWorker(b.url,{name:a,type:"module"}):i=new SharedWorker(b.url,a);d("SharedWorkerEventManager").registerWorkerShutdownListener(i,function(a){var b=a.workerID,h=a.isInitialized;f?c("setTimeout")(function(){e.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:b},bool:{oldWorkerWasInitialized:h}}),g.resolve()},d("SharedWorkerV2ResourceExperimental").DELAY_FOR_WORKER_SHUTDOWN_MS):(e.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:b},bool:{oldWorkerWasInitialized:h}}),g.resolve());e.addAnnotations({string:{oldWorkerShutdown:"success"}})},{once:!0});e.markEventStart("old_worker_shutdown");i.port.start();d("SharedWorkerEventManager").emitWorkerShutdown(i,{upgrade:!0})}else g.resolve(),e.addAnnotations({string:{oldWorkerShutdown:"not_needed"}});f===!0?await g.getPromise():g.resolve()}async function s(a,b,c,d,e,f,g){f.addAnnotations({string:{initFlow:"upgrade_worker_ref"}});await r(a,b,f,g);return u(a,c,d,e,f,"upgrading_worker_ref")}function t(a,b,c,d,e){e.addAnnotations({string:{initFlow:"new_worker_ref"}});return u(a,b,c,d,e,"new_worker_ref")}async function u(a,b,e,f,g,h){c("logSharedWorkerInitStep")(a,null,null,h);await d("SharedWorkerMigrationUtils").isStatusLockHeld(a)&&c("FBLogger")("worker").info("Trying to create a worker %s while old one is still running",a);var i=await b.createSharedWorker(),j=i[0];i=i[1].worker;h==="upgrading_worker_ref"&&await d("SharedWorkerStorageManager").removeSharedWorkerReference(a,g);await o(i,j,a,e,b,g);p(i,f,a);return i}function v(a,b){var e=d("SharedWorkerDevChangeManager").shouldUseStorageWorkerForDev(a.name,{storageWorkerResource:b,tabResource:a}),f=b.spin_time,g=b.version;b=b.rev;return b>=c("SiteData").client_revision&&(a.version===g||f>=c("SiteData")[c("StaticSiteData").spin_time_key])&&e}async function w(a,b,e,f,g){f.markEventStart("create_worker");var h=a.name;d("SharedWorkerUptimeTracker").stopUptimeTracking(h);f.addAnnotations({bool:{workerAlreadyRunning:c("supportsNativeWebLock")()?await d("SharedWorkerMigrationUtils").isStatusLockHeld(h):null}});var i=c("supportsNativeWebLock")()?await d("SharedWorkerMigrationUtils").isStatusLockHeld(h):!0;if(!g&&a.version===2)return D(a,b,e,f);var j=await d("SharedWorkerStorageManager").getSharedWorkerReference(h,f);c("logSharedWorkerInitStep")(h,j,a.resourceUrlForLogging,"create_worker_start");var k=j!=null&&d("SharedWorkerMigrationUtils").isLegacyWorkerURL(j==null?void 0:j.url);i=g&&i===!1&&k;if(j==null||i)return t(h,a,b,e,f);k=j.spin_time;i=j.version;var l=j.rev;f.addAnnotations({int:{storageWorkerSpinTime:k,storageWorkerVersion:i,storageWorkerRev:l}});if(v(a,j))return q(h,j,a,b,e,f);else return s(h,j,a,b,e,f,g)}function a(a,b,e){e=e!=null?e:{};var f=e.onQPLEvent;e=e.reason;var g=a.name,h=c("buildSharedWorkerInitQPLLogger")(f);h.start({version:1,workerName:g,callReason:e});var i=new(c("Deferred"))();d("SharedWorkerLockManager").withWorkerLock(function(d){var e;c("promiseDone")(w({name:g,version:1,resourceUrlForLogging:(e=a.url)!=null?e:"",getJSModuleBundleResource:function(){return a},createSharedWorker:async function(){var b=c("createSharedWorkerBundleUrl")();return[b,await k(b,g,a,h)]}},d,b,h,!1),function(a){h.markEventEnd("create_worker"),h.endSuccess(),i.resolve(a)},function(a){a=typeof a==="string"?c("err")(a):a;h.endFailure("worker_init_failure",{string:{workerInitFailureReason:a.message,errorName:a.name}});i.reject(a);d()})},{workerQPLLogger:h,onLockTimeout:function(){return i.reject(c("err")("Worker lock timeout"))}});return i.getPromise()}function x(a,b,e,f){f===void 0&&(f=0);var g=a.name,h=e!=null?e:{},i=h.onQPLEvent;h=h.reason;var k=c("buildSharedWorkerInitQPLLogger")(i);k.start({version:2,workerName:g,callReason:h,experimental_init:e==null?void 0:e.useDynamicStringInit});k.addAnnotations({bool:{usingModuleWorker:c("supportsModuleWorker")(!0)}});var l=new(c("Deferred"))();i=function(f){c("promiseDone")(w({name:g,version:2,getJSModuleBundleResource:function(){return a},sandboxOnlyChecksum:a.sandboxOnlyChecksum,createSharedWorker:(e==null?void 0:e.useDynamicStringInit)===!0?async function(){var b=c("createSharedWorkerV2BundleUrlExperimental")(g);return[b,await d("SharedWorkerV2ResourceExperimental").startV2Worker(b,g,a,k)]}:async function(){var b=d("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl();return[b,await n(b,g,a,k)]}},f,b,k,(e==null?void 0:e.useDynamicStringInit)===!0),function(a){k.markEventEnd("create_worker"),k.endSuccess(),l.resolve(a)},function(a){a=typeof a==="string"?c("err")(a):a;l.reject(a);f()})};d("SharedWorkerLockManager").withWorkerLock(i,{workerQPLLogger:k,onLockTimeout:function(){return l.reject(c("err")("Worker lock timeout"))},onLockFail:function(a){l.reject(a)}});return l.getPromise().catch(function(d){if(d instanceof j&&f<2){k.endCancel({string:{workerInitCancelReason:d.message},int:{workerInitRetry:f}});return new Promise(function(d,g){c("setTimeout")(function(){c("promiseDone")(x(a,b,e,f+1),d,g)},f===0?200:500)})}k.endFailure("worker_init_failure",{string:{workerInitFailureReason:d.message,errorName:d.name}});throw d})}async function b(a,b,e){var f=b!=null?b:a.name,g=new(c("Deferred"))(),i=c("buildSharedWorkerTerminateQPLLogger")();i.start({workerName:f});c("promiseDone")(c("supportsNativeWebLock")()?d("SharedWorkerMigrationUtils").isStatusLockHeld(f):Promise.resolve(void 0),function(a){return i.addAnnotations({bool:{workerAlreadyRunning:a}})});i.addAnnotations({string:{reason:e,terminatingPageId:c("pageID")}});if(self.BroadcastChannel!=null){b=y(f);b.postMessage({type:"terminate",reason:e,pageID:c("pageID")});c("promiseDone")(d("SharedWorkerStorageManager").removeSharedWorkerReference(f,i).then(function(){i.endSuccess(),g.resolve()}));return g.getPromise()}d("SharedWorkerLockManager").withWorkerLock(function(b){c("promiseDone")(d("SharedWorkerStorageManager").getSharedWorkerReference(f,i).then(function(b){i.markPoint("read_worker_reference",{int:{storageWorkerVersion:b==null?void 0:b.version},bool:{storageReferenceExists:b!=null}});if(b!=null){var e=d("SharedWorkerMigrationUtils").isLegacyWorkerURL(b.url);i.addAnnotations({bool:{isLegacy:e}});var g=b.version===2?e?n(b.url,f,a,void 0).then(function(a){a=a.worker;return a}):d("SharedWorkerV2ResourceExperimental").startV2Worker(b.url,f,a,void 0).then(function(a){a=a.worker;return a}):k(b.url,f,a).then(function(a){a=a.worker;return a});e=c("justknobx")._("3569")?Promise.resolve(null):d("SharedWorkerStorageManager").removeSharedWorkerReference(f,i);return e.then(function(){return g})}i.markPoint("storage_resource_empty");return null}),function(a){try{b();d("SharedWorkerUptimeTracker").stopUptimeTracking(f);if(a==null){i.endSuccess();g.resolve();return}d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){var b=a.workerID;a=a.isInitialized;i.markPoint("worker_shut_down",{string:{workerID:b},bool:{wasInitialized:a}});b=c("justknobx")._("3569")?d("SharedWorkerStorageManager").removeSharedWorkerReference(f,i):Promise.resolve(null);c("promiseDone")(b,function(){return i.endSuccess()},function(a){i.endFailure("failed_to_remove_worker_reference",{string:{errorDescription:a.toString()}})});g.resolve()},{once:!0});d("SharedWorkerEventManager").emitWorkerShutdown(a,{reason:e})}catch(a){i.endFailure("terminate_worker_failure",{string:{workerTerminateFailReason:a.message}}),g.reject(a.message)}},function(a){c("FBLogger")("worker").catching(c("getErrorSafe")(a)).mustfix("Failed to terminate worker"),i.endFailure("connect_to_worker_failure",{string:{workerTerminateFailReason:a.message}}),g.reject(a.message),b()})},{workerQPLLogger:i});c("setTimeout")(function(){return g.reject()},h);return g.getPromise()}function y(a){return new self.BroadcastChannel(i+"_"+a)}async function e(a){a=await d("SharedWorkerStorageManager").getSharedWorkerReference(a.name);return a!=null}async function z(a,b,e){e==null||e.markEventStart("load_hrp");b=await d("WebWorkerV2DynamicData").readDynamicDataForWorker(a,b);var f=b.data;b=b.time;e==null||e.markEventEnd("load_hrp");try{var g,h=c("justknobx")._("1979");e==null||e.markEventStart("prefetch_worker_scripts",{bool:{prefetchWorkerScripts:h},int:{resourcesCount:(g=f.hrp.allResources)==null?void 0:g.length}});h&&d("BootloaderPreloader").preloadWorkerJSFromHRP(f.hrp)}catch(b){g=c("getErrorSafe")(b);e==null||e.markPoint("prefetch_worker_scripts_fail",{string:{hrpInitErr:g.toString()}});c("FBLogger")("worker").catching(g).warn("Failed to preload worker %s JS from HRP",a.name)}e==null||e.markEventEnd("prefetch_worker_scripts");return{hrp:f,time:b,rev:(h=f.hrp.hsrp)==null||(h=h.hblp)==null||(h=h.consistency)==null?void 0:h.rev}}function A(b,a,c){return d("SharedWorkerStorageManager").getOrUpdateWorkerReference(b.name,function(d){if(d==null)return a;if(v(b,d))return d;void r(b.name,d,c,!1);return a})}function B(a,b){if(self.BroadcastChannel!=null){var d=y(a),e=function(a){a=a.data;if(typeof a==="object"&&(a==null?void 0:a.type)==="terminate"){var d=typeof a.reason==="string"?a.reason:"unknown";a=typeof a.pageID==="string"?a.pageID:null;if(a!=null&&a===c("pageID")&&d==="requested-upgrade")return;b(d)}};d.addEventListener("message",e);return function(){return d.removeEventListener("message",e)}}return function(){}}function C(a,b,e,f){var g=new(c("Deferred"))();void d("SharedWorkerStorageManager").getOrUpdateWorkerReference(a,function(a){if(a==null||a.url!==b){g.resolve("url-was-changed");return a}return a.rev!==e||a.spin_time!==f?babelHelpers.extends({},a,{rev:e,spin_time:f}):a}).then(function(){g.resolve("success")});return g.getPromise()}async function D(a,b,e,f){if(a.version!==2)throw c("err")("Worker version must be 2");var g=a.name,h=await z(a.getJSModuleBundleResource(),!1,f),i=h.rev;if(i==null)throw c("err")("HRP rev or spin time is null");i={url:d("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl(),rev:i,spin_time:h.time,version:a.version,rsrcBundleUrl:a.getJSModuleBundleResource().url,sandboxOnlyChecksum:a.sandboxOnlyChecksum};var k=new(c("Deferred"))(),n=new(c("Deferred"))(),o=[];try{var q=function(a){n.reject(a),k.reject(a)};o.push(B(g,function(a){q(new j("broadcast-"+a))}));f==null||f.markEventStart("get_worker_reference");var r=await A(a,i,f);f==null||f.markEventEnd("get_worker_reference");var s=l(r.url,g,f);o.push(d("SharedWorkerEventManager").registerConnectionAckListener(s,function(a,b,c){f==null||f.addAnnotations({string:{connectedFrom:a,workerID:b}}),k.resolve({hrpStatus:c!=null?c:"no-hrp",workerID:b})}));o.push(d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(s,function(a,b,c,e){f==null||f.addAnnotations({string:{selfTerminationError:e}}),d("SharedWorkerLoggingUtils").logSelfTermination(g,a,b,c),q(new j(b))},{once:!0}));o.push(d("SharedWorkerEventManager").registerWorkerShutdownListener(s,function(a){var b=a.reason;a=a.workerID;d("SharedWorkerLoggingUtils").logShutdown(g,null,b,a);q(new j(b!=null?b:"sw-shutdown-unknown"))}));o.push.apply(o,m(s,g,f));f.markEventStart("worker_connection");s.port.start();d("SharedWorkerEventManager").emitConnectionAckRequest(s);var t=await k.getPromise(),u=t.hrpStatus;t=t.workerID;f.markEventEnd("worker_connection");if(u==="no-hrp"){f==null||f.markPoint("read_dynamic_data");u=i.rev>=r.rev;i=u?Promise.resolve(h):z(a.getJSModuleBundleResource(),!0,f);c("promiseDone")(i.then(function(a){f==null||f.markEventStart("hrp_init"),d("SharedWorkerEventManager").emitHrpInit(s,{hrp:a.hrp.hrp,js_env:a.hrp.js_env,isDev:!1},f)},function(a){a=c("getErrorSafe")(a);f==null||f.markPoint("hrp_init_fail",{string:{hrpInitErr:a.toString()}});q(a)}))}o.push(d("SharedWorkerEventManager").registerExecuteWorkerAckListener(s,f,function(a){var b=a.workerSpinTime,e=a.err,g=a.isFirstInit,h=a.workerRev;a=a.workerSpinMode;d("SharedWorkerLoggingUtils").logExecuteAck(f,b,e,g,h,a);e!=null||b==null||h==null?n.reject(c("err")(e!=null?e:"no worker rev or spin time")):n.resolve({workerRev:h,workerSpinTime:b})}));f==null||f.markEventStart("execute_worker");d("SharedWorkerEventManager").emitExecuteWorker(s);u=await n.getPromise();h=u.workerRev;a=u.workerSpinTime;f==null||f.markEventStart("update_worker_ref");i=await C(g,r.url,h,a);f==null||f.markEventEnd("update_worker_ref",{string:{updateWorkerRef:i}});if(i==="url-was-changed"){d("SharedWorkerEventManager").emitWorkerShutdown(s,{reason:"url-was-changed"});throw new j("url-was-changed")}b();p(s,e,g,t);return s}finally{o.forEach(function(a){return a()})}}g.SHARED_WORKER_BROADCAST_CHANNEL=i;g.SelfTerminationError=j;g.createPushSafeSharedWebWorkerAsync=a;g.createPushSafeSharedWebWorkerV2Async=x;g.terminateSharedWorker=b;g.doesSharedWorkerReferenceExist=e}),98);
__d("SharedWorkerV2ResourceExperimental",["Deferred","SharedWorkerBundleResource","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerUptimeTracker","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerV2BundleUrlExperimental","justknobx","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";var h=50,i=5e3,j=2e3;function k(a,b,e,f){return d("SharedWorkerDevChangeManager").shouldUpgradeWorkerForDevExperimental(a)&&!f?!0:b<c("SiteData").client_revision&&e<c("SiteData")[c("StaticSiteData").spin_time_key]}async function a(a,b,e){var f=a.name,g=c("buildSharedWorkerInitQPLLogger")(e==null?void 0:e.onQPLEvent);g.start({version:2,workerName:f,experimental_init:!0,callReason:e==null?void 0:e.reason,migrationEnabled:!0});g.markEventStart("create_worker");c("supportsNativeWebLock")()&&c("promiseDone")(d("SharedWorkerMigrationUtils").isStatusLockHeld(f).then(function(a){g.addAnnotations({bool:{workerAlreadyRunning:a}})}));(e==null?void 0:e.migratedWorker)===!0&&await d("SharedWorkerMigrationUtils").checkStorageAndTerminateLegacyWorker({name:f,logger:g});e=await l(a,g);var i=e.worker,j=e.needsUpgrade;return new Promise(function(e,k){var m=function(a){return e(n(a,f,g,b))};j?(d("SharedWorkerEventManager").registerWorkerShutdownListener(i,function(b){var d=b.workerID;b=b.isInitialized;g.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:d},bool:{oldWorkerWasInitialized:b}});c("setTimeout")(function(){return l(a,g).then(function(a){a=a.worker;return m(a)})},h)},{once:!0}),g.markEventStart("old_worker_shutdown"),d("SharedWorkerEventManager").emitWorkerShutdown(i,{upgrade:!0})):m(i)})}function l(a,b){var e=a.name,f=c("createSharedWorkerV2BundleUrlExperimental")(e);f=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(f);var g=c("supportsModuleWorker")(!0)?"module":"classic",h=new SharedWorker(f,{name:e,type:g}),i=new Set();d("SharedWorkerEventManager").registerWorkerInitPointsListener(h,function(a){if(i.has(a))return;i.add(a);b==null||b.markPoint("worker_init_point_"+a)});var j=new(c("Deferred"))();d("SharedWorkerEventManager").registerGetWorkerRevListener(h,b,function(c){var d=c.rev,f=c.spinTime;c=c.workerChecksum;c=k(e,d,f,a.sandboxOnlyChecksum===c);j.resolve(c);c?b.addAnnotations({int:{oldWorkerRev:d,oldWorkerSpinTime:f}}):b.addAnnotations({int:{workerRev:d,workerSpinTime:f}})});m(h,e,b);h.port.start();d("SharedWorkerEventManager").emitConnectionAckRequest(h);return j.getPromise().then(function(a){return{worker:h,needsUpgrade:a}})}function m(a,b,c,e){a.addEventListener("error",function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(c,a,b)});d("SharedWorkerEventManager").registerForwardListeners(a);d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(a,function(a,b,d,e){c.endFailure("worker_init_failure",{string:{selfTerminationError:e,selfTerminationReason:b}})},{once:!0});d("SharedWorkerEventManager").registerConnectionAckListener(a,function(a,b){c==null||c.addAnnotations({string:{connectedFrom:a,workerID:b}}),c==null||c.markPoint("worker_connection_established")},{once:!0});return a}function n(a,b,e,f){d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){var e=a.reason,g=a.workerID;d("SharedWorkerLoggingUtils").logShutdown(b,null,e,g);e==="requested-upgrade"?c("setTimeout")(function(){return f==null?void 0:f(e,g)},1e3):e==="dynamic_string_worker_rollback"?f==null||f("maw_request_refresh",g):f==null||f(e,g);d("SharedWorkerUptimeTracker").stopUptimeTracking(b)});e.markEventEnd("create_worker");e.endSuccess();d("SharedWorkerUptimeTracker").startUptimeTracking(a,b);d("SharedWorkerDevChangeManager").trackCreatedWorker(b);return a}function o(a,b,e,f,g){g===void 0&&(g=0);var h=e.name,i=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),k=c("supportsModuleWorker")(!0)?"module":"classic",l=new SharedWorker(i,{name:h,type:k});f==null||f.markPoint("shared_worker_construct_done");f==null||f.addAnnotations({string:{workerUrl:i.toString()}});var m=new(c("Deferred"))(),n=[];n.push(d("SharedWorkerEventManager").registerConnectionAckListener(l,function(a,b){f==null||f.addAnnotations({string:{connectedFrom:a,workerID:b}}),f==null||f.markPoint("worker_connection_established"),m.resolve()},{once:!0}));n.push(d("SharedWorkerEventManager").registerWorkerInitPointsListener(l,function(a){f==null||f.markPoint("worker_init_point_"+a)}));n.push(d("SharedWorkerEventManager").registerForwardListeners(l));d("SharedWorkerEventManager").emitConnectionAckRequest(l);l.addEventListener("error",function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(f,a,b)});var p=new(c("Deferred"))();n.push(d("SharedWorkerEventManager").registerGetWorkerRevListener(l,f,function(a){var b=a.rev;a=a.spinTime;f==null||f.addAnnotations({int:{initialWorkerRev:b,initialSpinTime:a}});p.resolve({worker:l,rev:b,spinTime:a})}));n.push(d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(l,function(a,c,e,g){f==null||f.addAnnotations({string:{selfTerminationError:g}}),d("SharedWorkerLoggingUtils").logSelfTermination(b,a,c,e),p.reject(new(d("SharedWorkerBundleResource").SelfTerminationError)(c))},{once:!0}));n.push(d("SharedWorkerEventManager").registerWorkerShutdownListener(l,function(a){var c=a.reason;a=a.workerID;f==null||f.addAnnotations({string:{shutdownReason:c}});d("SharedWorkerLoggingUtils").logShutdown(b,null,c,a);p.reject(new(d("SharedWorkerBundleResource").SelfTerminationError)(c!=null?c:"unknownShutdown"))},{once:!0}));l.port.start();g===0&&c("justknobx")._("1707")&&void Promise.race([m.getPromise().then(function(){return"success"}),new Promise(function(a){c("setTimeout")(function(){a("timeout")},j)})]).then(function(c){if(c==="timeout"){c=l;var d=o(a,b,e,f,g+1);void d.then(function(a){return p.resolve(a)});n.forEach(function(a){return a()});c.port.close()}});return p.getPromise()}async function b(a,b){var e=a.name,f=new(c("Deferred"))();a=await d("SharedWorkerMigrationUtils").isStatusLockHeld(e);var g=c("buildSharedWorkerTerminateQPLLogger")();if(!a){g.start({workerName:e});g.markPoint("no_worker_running");g.endSuccess();return}g.start({workerName:e});g.addAnnotations({string:{reason:b,terminatingPageId:c("pageID")}});a=c("createSharedWorkerV2BundleUrlExperimental")(e);a=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a);var h=c("supportsModuleWorker")(!0)?"module":"classic";a=new SharedWorker(a,{workerName:e,type:h});g.markPoint("worker_created");d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){a=a.workerID;g.markPoint("worker_shut_down",{string:{workerID:a}});g.endSuccess();d("SharedWorkerUptimeTracker").stopUptimeTracking(e);f.resolve()},{once:!0});a.port.start();d("SharedWorkerEventManager").emitWorkerShutdown(a,{reason:b});c("setTimeout")(function(){return f.reject()},i);return f.getPromise()}g.DELAY_FOR_WORKER_SHUTDOWN_MS=h;g.createPushSafeSharedWebWorkerV2Async=a;g.startV2Worker=o;g.terminateSharedWorker=b}),98);
__d("MAWWebWorkerSingleton",["Deferred","MAWInit","MAWMIC","MAWStartupLoggingUtils","MAWWaitForBackendSetup","MAWWorkerWatchdogRecovery","Promise","SharedWorkerBundleResource","SharedWorkerMigrationUtils","SharedWorkerV2ResourceExperimental","WAResolvable","WebWorkerV2Resource","clearTimeout","cr:6600","err","gkx","promiseDone","setTimeout","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=function(a){i=a},k=function(){return i},l=f,m=new(d("WAResolvable").Resolvable)(),n=null;function a(){return d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?d("SharedWorkerMigrationUtils").isStatusLockHeld(b("cr:6600").name):(h||(h=b("Promise"))).resolve(n!==null)}function e(){var a={isSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),nativeLocksSupported:d("SharedWorkerMigrationUtils").supportsNativeWebLocks(),workerCreationPromiseExists:n!==null};if(a.isSharedWorker!==!0)return(h||(h=b("Promise"))).resolve(a.workerCreationPromiseExists===!0?{data:a,tag:"dedicated_exists"}:{data:a,tag:"dedicated_not_exists"});if(a.nativeLocksSupported!==!0)return(h||(h=b("Promise"))).resolve({data:a,tag:"shared_unknown_locks_not_supported"});var c=d("MAWWaitForBackendSetup").getCurrentWorkerID();return(h||(h=b("Promise"))).all([d("SharedWorkerMigrationUtils").isStatusLockHeld(b("cr:6600").name),c!=null?d("SharedWorkerMigrationUtils").isWorkerIdStatusLockHeld(b("cr:6600").name,c):(h||(h=b("Promise"))).resolve(!1)]).then(function(b){var c=b[0];b=b[1];a.sharedLockHeld=c;a.workerIdLockHeld=b;if(c&&b)return{data:a,tag:"shared_exists_and_connected"};if(c)return{data:a,tag:"shared_exists_not_connected"};return b?{data:a,tag:"shared_only_unique_lock_held"}:{data:a,tag:"shared_not_exists"}})}function f(){n=null}function o(a){if(n){d("MAWMIC").addPoint(a+"_wait_on_worker_creation");d("MAWInit").MAWInit.logPoint(a+"_wait_on_worker_creation");return n}d("MAWInit").MAWInit.logPoint(a+"_create_worker_start");d("MAWMIC").addPoint(a+"_create_worker_start");n=(d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?p(a):q().then(function(a){return{worker:a,workerID:"dedicated"}})).then(function(b){var c=b.worker;b=b.workerID;d("MAWMIC").addPoint(a+"_create_worker_end");d("MAWInit").MAWInit.logPoint(a+"_create_worker_end");return{worker:c,workerID:b}},function(a){n=null;throw a});return n}function p(a){var e=function(a,b,d){c("promiseDone")(m.promise.then(function(){return l(a,b,d)}))};d("MAWWorkerWatchdogRecovery").setRecoveryForWatchdog(e);var f=new(c("Deferred"))(),g=c("gkx")("7313");d("MAWMIC").addBoolAnnotation("migrationEnabled",g);g=g?d("SharedWorkerV2ResourceExperimental").createPushSafeSharedWebWorkerV2Async(b("cr:6600"),e,{migratedWorker:!0,onQPLEvent:d("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:a}):d("SharedWorkerBundleResource").createPushSafeSharedWebWorkerV2Async(b("cr:6600"),e,{onQPLEvent:d("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:a,useDynamicStringInit:c("gkx")("8737")});return g.then(function(a){j(a);d("MAWMIC").addPoint("shared_worker_bundle_created");var b=c("setTimeout")(function(){d("MAWMIC").addPoint("shared_worker_connection_ack_timeout"),f.reject(c("err")("Worker connection ack timeout"))},1e4),e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="connection-ack"&&typeof ((e=a.data)==null?void 0:e.response)==="object"&&typeof ((e=a.data)==null||(e=e.response)==null?void 0:e.from)==="string"){a=typeof ((e=a.data)==null||(e=e.response)==null?void 0:e.workerID)==="string"?(e=a.data)==null||(e=e.response)==null?void 0:e.workerID:void 0;a!=null?(d("MAWMIC").addPoint("shared_worker_workerID_received"),d("MAWMIC").addStringAnnotation("workerID",a),b!=null&&c("clearTimeout")(b),f.resolve(a)):(d("MAWMIC").addPoint("shared_worker_null_workerID_received"),d("MAWMIC").addStringAnnotation("workerID","unknown"))}};a.port.addEventListener("message",e);a.port.postMessage({type:"ww-connection-ack"});a.addEventListener("error",function(a){d("MAWStartupLoggingUtils").logWorkerError("Shared Worker",a,"")});return f.getPromise().then(function(b){return{worker:a.port,workerID:b}})})}function q(){return(h||(h=b("Promise"))).resolve(d("WebWorkerV2Resource").createDedicatedV2WebWorker(b("cr:6600"))).then(function(a){var b=a.url;a=a.worker;a.onerror=function(a){return d("MAWStartupLoggingUtils").logWorkerError("Dedicated Worker",a,b)};d("MAWStartupLoggingUtils").setImportScriptsErrorListener(a);return a})}function r(a){l=a,m.resolve()}g.getSharedWorkerInstance__TEST_ONLY=k;g.doesWorkerExist=a;g.getWorkerHealthStatus=e;g.resetWorkerCreation=f;g.createWorkerIfNone=o;g.setOnCloseForWorkerInstance=r}),98);
__d("MAWWaitForBackendSetup",["ErrorSerializer","MAWInit","MAWInitError","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWebWorkerSingleton","Promise","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new(h||(h=b("Promise")))(function(a,b){i=a,j=b}),l=!1,m=!1,n=!1,o=!1,p=null,q=i,r=j;function s(a){return new(h||(h=b("Promise")))(function(b,e){k.then(b)["catch"](function(b){var f=a+" rejected because backend setup failed: "+b.message+".";b=b instanceof d("MAWInitError").MAWInitError?b.error:null;b!=null&&(f=f.concat(" More error detail: "+c("ErrorSerializer").toReadableMessage(b)));e(c("err")(f))})})}function a(a,b){c("promiseDone")(s(b).then(function(){a()}))}function t(){if(!o)return;k=new(h||(h=b("Promise")))(function(a,b){i=a,j=b});o=!1;l=!1;q=i;r=j;m=!0;n=!1}function e(a){l=!0,o=!0,n=!1,q==null||q(a)}function f(a){l=!1,o=!0,n=!1,r==null||r(a)}function u(){return l}function v(){return o}function w(){return m}function x(a){a!=null&&p!==a&&d("MAWSetupWorkerAuxStateForLogging").resetWorkerCreationTime(),p=a}function y(a){if(p==null||p!==a)return;z()}function z(){p=null,d("MAWWebWorkerSingleton").resetWorkerCreation(),t(),d("MAWInit").MAWInit.logPoint("reset_current_worker"),d("MAWMIC").addPoint("reset_current_worker")}function A(){return p}function B(){n=!0}function C(){return n}g.waitForBackendSetup=s;g.runAfterBackendSetup=a;g.resetBackendSetup=t;g.resolveBackendSetup=e;g.rejectBackendSetup=f;g.isBackendSetupSuccessful=u;g.isBackendSetupSettled=v;g.wasBackendSetupReset=w;g.setCurrentWorker=x;g.resetCurrentWorkerWithId=y;g.resetCurrentWorkerSkipIdCheck=z;g.getCurrentWorkerID=A;g.markBackendSetupStarted=B;g.isBackendSetupInProgress=C}),98);
__d("MAWWorkerEvent",["FBLogger","MAWMIC","MAWReliabilityMonitor","MAWSetupWorkerAuxStateForLogging","MAWTrackPendingOccamadilloThreads","MAWWaitForBackendSetup","MultipleTabsLogger","QPLUserFlow","pageID","performanceNow","promiseDone","qpl","requireDeferred","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MAWBridgeObserver").__setRef("MAWWorkerEvent"),j=c("requireDeferred")("MAWWebWorkerSingleton").__setRef("MAWWorkerEvent"),k=new Set(),l=new Set(["addEbUploadTrackingWorkerQPL","ackWithInstanceKey","addMediaDownloadQpl","searchGetFTSRestoreSessionId","none"]),m=new Set(["bulkMaybeCreateOrUpdateThread","createOrUpdateThread"]),n=new Map(),o=function(a){switch(a){case"sendAndReceive":return 1e4;case"fireAndForget":return 4e3;case"waitUntilCompleted":return 1e4;case"waitUntilPersisted":return 1e4;default:return 1e4}},p=function(a,b,d){d=window.setTimeout(function(){v(a,"ack_timeout"),c("promiseDone")(i.load().then(function(a){a.notifyUnackedEvent({route:b,timestamp:(h||(h=c("performanceNow")))()})}))},o(d));n.set(a,d);return d},q=function(a){var b=n.get(a);b!=null&&(window.clearTimeout(b),c("promiseDone")(i.load().then(function(a){a.resetUnackedMessages()})),n["delete"](a))};function a(a,b,e){if(k.has(e)||l.has(b))return;k.add(e);c("QPLUserFlow").start(c("qpl")._(1056842055,"807"),{annotations:{bool:{duringMIC:d("MAWMIC").duringMIC(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},"int":{key:e},string:{callType:a,event:b,pageID:c("pageID"),workerHeartbeatsOnStart:d("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:d("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});void d("MultipleTabsLogger").hasMultipleTabs().then(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),{bool:{isMultiTabs:a}},{instanceKey:e})});void j.load().then(function(a){return a.getWorkerHealthStatus().then(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),{string:{workerHealthStatusOnStart:a.tag}})})})}function b(a){if(!k.has(a))return;k["delete"](a);c("QPLUserFlow").endSuccess(c("qpl")._(1056842055,"807"),{instanceKey:a})}function e(a,b){if(!k.has(a))return;k["delete"](a);c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"fail",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:b},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a})}function f(a,b,e){if(!k.has(a))return;k["delete"](a);c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"timeout",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:b,workerHealthStatus:e.tag},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a})}function r(a,b){if(!k.has(a))return;c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),b,{instanceKey:a})}function s(a,b){if(!k.has(a))return;try{if(Array.isArray(b)){var e=b.every(function(a){return typeof a==="object"&&a!=null&&"state"in a&&a.state===d("MAWReliabilityMonitor").HealthReportState.OK.valueOf()});b=b.reduce(function(a,b){typeof b==="object"&&b!=null&&"state"in b&&"identifier"in b&&"reason"in b&&b.state!==d("MAWReliabilityMonitor").HealthReportState.OK.valueOf()&&typeof b.state==="string"&&typeof b.reason==="string"&&typeof b.identifier==="string"&&a.push([b.identifier,b.state,b.reason].join(":"));return a},[]);r(a,{bool:{workerHealthStatus:e},string:{error:(a=b[0])!=null?a:void 0},string_array:{errors:b}})}}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to log ack result annotations");return!1}}function t(a,b,c){if(typeof c==="object"&&typeof (c==null?void 0:c.timestamp)==="number"){c=c.payload;q(a);v(a,"ack");s(a,c);m.has(b)&&d("MAWTrackPendingOccamadilloThreads").markBridgeCallAcked()}}function u(a,b,c){l.has(b)||p(a,b,c),v(a,"send")}function v(a,b,d){if(!k.has(a))return;c("QPLUserFlow").addPoint(c("qpl")._(1056842055,"807"),b,{instanceKey:a,timestamp:d})}g.getUnackedEventTimeout=o;g.logStart=a;g.logSuccess=b;g.logFailure=e;g.logTimeoutFailure=f;g.logAnnotations=r;g.logAck=t;g.logSend=u}),98);
__d("MAWBridgeLoggingUtils",["MAWWorkerEvent","ODS","Random","WAHashStringToNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i=3185,j="armadillo_worker_runtime",k="getWorkerHeartbeat",l=10,m=new Array(l);function n(a,b,c){(h||(h=d("ODS"))).bumpEntityKey(i,j,a+"_"+b+"_"+c)}function a(a){return d("WAHashStringToNumber").hashStringToNumber(a+Math.round(d("Random").random()*1e4)+1e4)}function b(a,b,c,e){n(b,c,"start");if(c===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_start");d("MAWWorkerEvent").logStart(a,c,e);m.length===l&&m.shift();m.push(b+"_"+c)}function o(a){m.filter(Boolean).forEach(function(b){(h||(h=d("ODS"))).bumpEntityKey(i,j,b+a)})}function c(a,b,c){n(a,b,"success");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_success");d("MAWWorkerEvent").logSuccess(c)}function e(a,b,c,e){n(a,b,"fail");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_fail");d("MAWWorkerEvent").logFailure(e,c)}function f(a,b,c,e){n(a,b,"timeout");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_timeout");d("MAWWorkerEvent").logTimeoutFailure(c,"Route timeout",e)}function p(){o("_before_unresponsive"),m.fill(null)}g.CAT_ID=i;g.ENT=j;g.HEARTBEAT_ROUTE=k;g.RECENT_ROUTES_NUM=l;g.getBridgeEventInstanceKey=a;g.routeStart=b;g.logRecentRoutes=o;g.routeSuccess=c;g.routeFail=e;g.routeTimeoutFail=f;g.logRecentBridgeEvents=p}),98);
__d("WAAbortError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(d("WACustomError").customError("AbortError"));var h="AbortError";function a(a){return function(b){if(b.name===h)return a(b);else throw b}}g.AbortError=b;g.ABORT_ERROR=h;g.catchAbort=a}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){return new(h||(h=b("Promise")))(function(b,e){if(c!=null&&c.aborted)throw new(d("WAAbortError").AbortError)();var f=setTimeout(g,a);c==null||c.addEventListener("abort",h);function g(){c==null||c.removeEventListener("abort",h),b()}function h(){c==null||c.removeEventListener("abort",h),clearTimeout(f),e(new(d("WAAbortError").AbortError)())}})}function c(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=setTimeout(function(){try{b(d())}catch(a){e(a)}},c);a.then(function(a){clearTimeout(f),b(a)},function(a){clearTimeout(f),e(a)})})}g.delayMs=a;g.withTimeout=c}),98);
__d("MAWMaybeWithTimeout",["MAWODSProxy","WAOdsEnums","WAPromiseDelays"],(function(a,b,c,d,e,f,g){"use strict";function h(){return!0}function a(a,b,c,e){return h()?d("WAPromiseDelays").withTimeout(a.then(function(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_NON_TIMEOUT,key:e!=null?e:"unknown"});return a}),b,function(){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TIMEOUT,key:e!=null?e:"unknown"});return c()}):a}g.maybeWithTimeout=a}),98);
__d("MAWTimedBridge",["MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=17e4;function a(a,b,c,e,f){f===void 0&&(f=i);return d("MAWWaitForBackendSetup").waitForBackendSetup(c).then(function(){return d("MAWMaybeWithTimeout").maybeWithTimeout(a(),f,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(a){d("MAWBridgeLoggingUtils").routeTimeoutFail(b,c,e,a);d("WALogger").COUNT(h||(h=babelHelpers.taggedTemplateLiteralLoose(["route.",""])),c).tags("bridge_timeout");throw new j("Bridge route "+c+" timed out, WorkerHealthStatus: "+a.tag)})},c)})}var j=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="BridgeTimeoutError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));g.DEFAULT_MAW_BRIDGE_TIMEOUT_MS=i;g.bridgeTimeout=a;g.MAWBridgeTimeoutError=j}),98);
__d("MAWBridgeFireAndForget",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWaitForBackendSetup","MAWWorkerEvent","Promise","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("justknobx")._("1143");function a(a,c,e,f){return d("MAWWaitForBackendSetup").runAfterBackendSetup(function(){var g=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(c);f!==!0&&d("MAWBridgeLoggingUtils").routeStart("fireAndForget",a,c,g);void d("MAWTimedBridge").bridgeTimeout(function(){return new(h||(h=b("Promise")))(function(b){d("MAWBridge").getBridge().fireAndForget(a,c,e,f,{onAck:function(e){f!==!0&&(d("MAWWorkerEvent").logAck(g,c,e),d("MAWBridgeLoggingUtils").routeSuccess(a,c,g)),b()},onSend:function(a){var b=a.queueMsgs;a=a.queueSize;f!==!0&&(d("MAWWorkerEvent").logSend(g,c,"fireAndForget"),d("MAWWorkerEvent").logAnnotations(g,{"int":{bridgeSize:a},string_array:{bridgeMsgs:b}}))}},{bridgeQPLInstanceKey:g})})},a,c,g,i)},c)}g.fireAndForget=a}),98);
__d("MAWClientConsistencyRefresh",["ClientConsistencyEventEmitter","CurrentAppID"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(d("CurrentAppID").getAppID()){case 772021112871879:c("ClientConsistencyEventEmitter").emit("hardRefresh",a);break;default:c("ClientConsistencyEventEmitter").emit("softRefresh",a)}}g["default"]=a}),98);
__d("WABridgeBatcher",["WAShiftTimer"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=1e3;a=function(){function a(a,b,c){var e=this;this.$1=null;this.$6=Date.now();this.$7=new(d("WAShiftTimer").ShiftTimer)(function(){var a=e.$1;if(a==null)return;e.$1=null;e.$2(a)});this.$2=b;this.$3=a;this.$5=c!=null?c:h;this.$4=this.$5}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$7.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$6,0)/i;b=Math.min(b+c,this.$5);this.$4=b;this.$6=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$7.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$7.cancel()};return a}();g.BridgeBatcher=a}),98);
__d("WALruCache",["WALogger","WAShiftTimer","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){this.key=a,this.value=b,this.prev=null,this.next=null};a=function(){function a(a){var b=this,e;this.$2=new Map();this.purgeNow=function(){for(var a=b.$6.prev;b.$4>b.$3&&a!==b.$5;a=a?a.prev:null){if(a==null)throw c("err")("The linked list is not constructed properly.");var d=a,e=d.key;d=d.value;if(!b.$9(e,d))continue;b["delete"](e);b.$10&&b.$10(e,d)}b.$8&&b.$8(b.$2)};this.$3=a.sizeLimit;this.$7=a.getSize;this.$8=a.onPurge;this.$9=(e=a.shouldEvict)!=null?e:function(){return!0};this.$10=a.onEvict;this.$11=a.onAdd;this.$12=a.onDelete;this.$4=0;this.$5=new i("placeholder-head",null);this.$6=new i("placeholder-tail",null);this.$5.next=this.$6;this.$6.prev=this.$5;this.$1=new(d("WAShiftTimer").ShiftTimer)(function(){return b.purgeNow()})}var b=a.prototype;b.get=function(a){if(!this.$2.has(a))return null;a=this.$2.get(a);if(a==null)return null;var b=a.prev,d=a.next;b&&(b.next=d);d&&(d.prev=b);d=this.$5.next;if(d==null)throw c("err")("The linked list is not constructed properly.");this.$5.next=a;d.prev=a;a.prev=this.$5;a.next=d;return a.value};b.has=function(a){return this.$2.has(a)};b.touch=function(a){this.get(a)};b.put=function(a,b){if(this.$3===0)return;if(this.$7(b)>this.$3){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."])));return}this["delete"](a);this.$14(a,b);this.schedulePurge()};b.$14=function(a,b){var d=new i(a,b);this.$2.set(a,d);var e=this.$5.next;if(e==null)throw c("err")("The linked list is not constructed properly.");this.$5.next=d;e.prev=d;d.prev=this.$5;d.next=e;this.$4+=this.$7(b);this.$11&&this.$11(a,b)};b["delete"]=function(a){if(!this.$2.has(a))return;var b=this.$2.get(a);if(b==null)return;this.$4-=this.$7(b.value);var c=b.prev,d=b.next;c&&(c.next=d);d&&(d.prev=c);this.$2["delete"](a);this.$12&&this.$12(a,b.value)};b.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()};b.schedulePurge=function(){this.$1.onOrBefore(1e3)};b.getCurrentSize=function(){return this.$4};b.getPlaceholderHead=function(){return this.$5};b.forEach=function(a){if(this.$4===0)return;var b=this.$6.prev;if(b==null)throw c("err")("The linked list is not constructed properly.");while(b!=null&&b!==this.$5)a(b.value),b=b.prev};return a}();g.LruCache=a}),98);
__d("WACrossWorkerPortal",["Promise","WABridgeBatcher","WALogger","WALruCache","WAPromiseManagement","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t=function(){function a(a,b,c,e,f){var g=this;this.port=null;this.$2=1;this.openRequests=new Map();this.listeners=new Set();if((f==null?void 0:f.useLRUCache)===!0){var h,i=new(d("WALruCache").LruCache)({sizeLimit:(h=f.portalCacheSize)!=null?h:100,getSize:function(){return 1}});this.processedRequests={has:function(a){return i.has(a)},add:function(a){i.put(a,!0)}}}else{var j=new Set();this.processedRequests={has:function(a){return j.has(a)},add:function(a){j.add(a)}}}this.$1=a;this.clientId=e;this.config=f;this.sendStream=new(d("WABridgeBatcher").BridgeBatcher)(b,function(a){g.$3(a)},(h=this.config)==null?void 0:h.bridgeBatcherMaxTokens);c.forEach(function(b){a.setNamespaceHandler(b,g.$4(b))})}var e=a.prototype;e.$5=function(){var a=this.clientId!=null?this.clientId+"_":"";return""+a+this.$2++};e.$6=function(a){a=a.split("_");return a.length!==2?null:a[0]};e.addListener=function(a){var b=this;this.listeners.add(a);return function(){return b.listeners["delete"](a)}};e.setPort=function(a){var b=this;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"])));this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]))).devConsole(c.data);return}c=c.data;if(!c||!Array.isArray(c))return;c.forEach(function(c){b.$7(c,"incoming"),b.$8(a,c)})};this.openRequests.forEach(function(a){a=a.request;d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"])),a.name);b.sendStream.addEvent({type:"request",content:a})})};e.getBridge=function(){return this.$1};e.$4=function(a){var b=this;return function(c,d,e,f,g,h){b.$9(a,c,d,e,f,g,h)}};e.$9=function(a,b,c,d,e,f,g){var h,i=this.$5();h=babelHelpers["extends"]({fromClientId:(h=this.clientId)!=null?h:void 0},g);g={requestId:i,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e,opts:h};this.openRequests.set(i,{request:g,resolver:d,eventCallbacks:f});this.sendStream.addEvent({type:"request",content:g})};e.$10=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:"result",content:b})};e.$3=function(a){var b=this,c=this.port;if(!c){d("WALogger").DEV(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"])),a.length);return}c.postMessage(a);var e=a.map(function(a){var b;b=(b=(b=a.content.arg)==null?void 0:b.type)!=null?b:"";return""+((a=a.content.name)!=null?a:"")+(b?":"+b:"")}).filter(Boolean);a.forEach(function(c){var d;b.$7(c,"outgoing");c=b.openRequests.get(c.content.requestId);(c==null||(d=c.eventCallbacks)==null?void 0:d.onSend)!=null&&c.eventCallbacks.onSend({queueSize:a.length,queueMsgs:e})})};e.$7=function(a,b){this.listeners.forEach(function(c){return c(a,b)})};e.$8=function(a,e){var f=this;if(e.type==="request"){var g=e.content,h=g.namespace,i=g.name,j=g.requestId,k=g.arg,r=g.expectsResponse,t=g.silentLog,u=g.opts;t||d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""])),j,i);if((u==null?void 0:u.toClientId)!=null&&u.toClientId!==this.clientId){t||d("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," not intended for client ",""])),j,this.clientId);return}g=this.$1;var v={type:"result",content:{requestId:j,type:"handled",result:{payload:g.getAckPayoad(),timestamp:Date.now()},silentLog:t,opts:u}};this.$7(v,"outgoing");a.postMessage([v]);if(r){v=g.sendAndReceive(h,i,k,t,void 0,u).then(function(b){f.$10(a,{requestId:j,type:"success",result:b,silentLog:t,opts:u})},function(b){f.$10(a,{requestId:j,type:"error",result:String(b),silentLog:t,opts:u})});d("WAPromiseManagement").preventGarbageCollection(v)}else g.fireAndForget(h,i,k,t,void 0,u)}else{e.type;r=e.content;v=r.requestId;g=r.type;h=r.result;i=r.silentLog;i||d("WALogger").DEV(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""])),v,g);k=this.$6(v);if(k!==this.clientId||this.processedRequests.has(v))return;e=this.openRequests.get(v);if(!e){d("WALogger").WARN(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""])),v);return}switch(g){case"success":case"error":this.openRequests["delete"](v);this.processedRequests.add(v);r=e.resolver;r?r(g==="success"?h:(s||(s=b("Promise"))).reject(c("err")(h!=null?h:""))):d("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast: ",""])),h);break;case"handled":try{(i=e.eventCallbacks)==null||i.onAck==null||i.onAck(h)}catch(a){d("WALogger").ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onAck: ",""])),a.message)}e.resolver||(this.openRequests["delete"](v),this.processedRequests.add(v));break}}};return a}();function a(a,b,c,d,e){return new t(a,c,b,d,e)}function e(a){var b;(b=a.port)==null||b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,h=b.silentLog;d("WALogger").LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""])),b.requestId);a?a(c.sendAndReceive(e,f,g,h)):c.fireAndForget(e,f,g,h)})}g.CrossWorkerPortal=t;g.attachPortal=a;g.killPortalAndSendPendingToBridge=e}),98);
__d("MAWCrossWorkerPortal",["FBLogger","WACrossWorkerPortal","pageID"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){if(h!=null)return h;h=d("WACrossWorkerPortal").attachPortal(a,b,e,c("pageID"),f);return h}function b(){if(h==null){c("FBLogger")("messenger_web").warn("Trying to kill portal before its setup");return}d("WACrossWorkerPortal").killPortalAndSendPendingToBridge(h)}g.getOrCreateCrossWorkerPortal=a;g.killPortalWhenWorkerTerminating=b}),98);
__d("MAWWorkerOnClose",["MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MAWWebWorkerSingleton","QPLUserFlow","pageID","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(1056841865,"2862");function a(a,b,e){c("QPLUserFlow").start(h,{annotations:{string:{currentWorkerId:d("MAWWaitForBackendSetup").getCurrentWorkerID(),pageID:c("pageID"),terminationMsgType:b,terminationReason:a,workerID:e},string_array:{pastWorkerTerminationMsgTypes:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,pastWorkerTerminationReasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}}})}function b(a){c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(b){return c("QPLUserFlow").endSuccess(h,{annotations:{bool:babelHelpers["extends"]({},b.data),string:{healthStatusAfter:b.tag,outcome:a}}})})}function e(a,b){c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(d){return c("QPLUserFlow").endFailure(h,a,{annotations:{bool:babelHelpers["extends"]({},d.data),string:{healthStatusAfter:d.tag}},error:b})})}g.ON_WORKER_CLOSED_HANDLER_QPL=h;g.startQPL=a;g.success=b;g.fail=e}),98);
__d("MAWBridgeSendAndReceive",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWorkerEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(b),g=(e==null?void 0:e.isLoggingDisabled)!==!0,h=d("MAWTimedBridge").bridgeTimeout(function(){g&&d("MAWBridgeLoggingUtils").routeStart("sendAndReceive",a,b,f);return d("MAWBridge").getBridge().sendAndReceive(a,b,c,e==null?void 0:e.isLoggingDisabled,{onAck:function(a){g&&d("MAWWorkerEvent").logAck(f,b,a)},onSend:function(a){var c=a.queueMsgs;a=a.queueSize;g&&(d("MAWWorkerEvent").logSend(f,b,"sendAndReceive"),d("MAWWorkerEvent").logAnnotations(f,{"int":{bridgeSize:a},string_array:{bridgeMsgs:c}}))}},{bridgeQPLInstanceKey:f}).then(function(c){g&&d("MAWBridgeLoggingUtils").routeSuccess(a,b,f);return c})["catch"](function(c){g&&d("MAWBridgeLoggingUtils").routeFail(a,b,c.message,f);throw c})},a,b,f,e==null?void 0:e.timeoutMs);return h}g.sendAndReceive=a}),98);
__d("MAWWorkerWatchdog",["MAWBridgeLoggingUtils","MAWBridgeSendAndReceive","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerWatchdogRecovery","Promise","QPLUserFlow","err","justknobx","promiseDone","qpl","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("justknobx")._("4240"),j=i/2,k=c("qpl")._(1056847415,"2909"),l=!1,m=!1,n=["shared_not_exists","shared_exists_not_connected"];function o(){var a;c("QPLUserFlow").start(k,{annotations:{bool:{workerTerminatedPermanently:(a=d("MAWSetupWorkerAuxStateForLogging")).WorkerLifeCycleState.workerTerminatedPermanently},"int":{workerAge:a.WorkerLifeCycleState.getWorkerAge()},string:{currentWorkerId:d("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{pastWorkerTerminationMsgTypes:a.WorkerLifeCycleState.restartMessageTypes,pastWorkerTerminationReasons:a.WorkerLifeCycleState.restartReasons}}});return(h||(h=b("Promise"))).race([d("MAWBridgeSendAndReceive").sendAndReceive("backend",d("MAWBridgeLoggingUtils").HEARTBEAT_ROUTE),new h(function(a,b){c("setTimeout")(function(){b(c("err")("Armadillo web worker heartbeat timed out."))},j)})]).then(function(){c("QPLUserFlow").endSuccess(k),d("MAWSetupWorkerAuxStateForLogging").addWorkerHeartbeatToHistory("OK")},function(a){p(),d("MAWSetupWorkerAuxStateForLogging").addWorkerHeartbeatToHistory("ERROR"),c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(b){return c("QPLUserFlow").endFailure(k,"heartbeat_timeout",{annotations:{bool:babelHelpers["extends"]({},b.data),string:{workerHealthStatus:b.tag}},error:a})})})}function p(){c("QPLUserFlow").addPoint(k,"starting-lock-based-recovery"),c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(a){var b=d("MAWWorkerWatchdogRecovery").getWorkerRecoveryForWatchdog(),c=d("MAWWaitForBackendSetup").getCurrentWorkerID();if(n.includes(a.tag)&&b!=null)return b("locks_based_recovery",c,"locks_based_recovery")}))}function a(){if(m)return;c("setInterval")(function(){if(!l)return;c("promiseDone")(o())},i);d("MAWWaitForBackendSetup").runAfterBackendSetup(function(){l=!0},d("MAWBridgeLoggingUtils").HEARTBEAT_ROUTE);m=!0}g.HEARTBEAT_TIMEOUT_INTERVAL=j;g.MAW_WORKER_HEARTBEAT_QPL=k;g.startWatchdog=a}),98);
__d("MAWSetupWorker",["CurrentAppID","Deferred","IGDWebUtils","MAWBridgeObserver","MAWClientConsistencyRefresh","MAWCommonSetupWorker","MAWCrossWorkerPortal","MAWInit","MAWLoggerUtils","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWUnrecoverableDbErrors","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerOnClose","MAWWorkerWatchdog","MWFBLogger","QPLUserFlow","SharedWorkerBundleResource","SharedWorkerV2ResourceExperimental","cr:6600","gkx","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=d("MWFBLogger").MWLogger().tags([d("MAWLoggerUtils").Tag.WorkerSetup,d("MAWLoggerUtils").Tag.MAWInit]),o=d("IGDWebUtils").isInstagramWebSupportedApp(Number(d("CurrentAppID").getAppID())),p=o?"IGDAWMainWorker":"MAWMainWorker",q=null,r=!1;function s(a){r=a,d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently=a}function t(){return r}function u(a){switch(a){case"mawInit":return!0;case"mawReinitSetupMutex":case"mawReinitReregDevice":case"bridgeRecovery":case"workerUpgraded":case"rebootRequired":case"workerTerminated":default:return!1}}async function v(a,b,e,f,g,k){if(t())throw n.mustfixThrow("Worker is permanently killed.");d("MAWWaitForBackendSetup").markBackendSetupStarted();var l=function(c){return v(a,b,e,f,c,k)};(g==="bridgeRecovery"||g==="backendSetupFailure")&&c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"create_worker_start");d("MAWWebWorkerSingleton").setOnCloseForWorkerInstance(function(a,b,e){d("MAWWorkerOnClose").startQPL(a,e,b);var f=a!=null?a:"unknown",h=A(f)&&d("MAWWaitForBackendSetup").isBackendSetupSettled();d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons.push(f);d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes.push(e!=null?e:"unknown");if(d("MAWWaitForBackendSetup").getCurrentWorkerID()==null||b!==d("MAWWaitForBackendSetup").getCurrentWorkerID()){d("MAWInit").MAWInit.logPoint(f+"_worker_termination_skipped");d("MAWMIC").addPoint(f+"_worker_termination_skipped");d("MAWWorkerOnClose").success(f+"_worker_restart_skipped");n.warn("Worker termination skipped %s. Terminate reason: %s, Worker: %s, current worker: %s",g,a,b,d("MAWWaitForBackendSetup").getCurrentWorkerID());return}d("MAWWaitForBackendSetup").resetCurrentWorkerSkipIdCheck();n.warn("Worker termination started %s. Terminate reason: %s, Worker: %s",g,a,b);d("MAWInit").MAWInit.logPoint(f+"_worker_terminated");d("MAWMIC").addPoint(f+"_worker_terminated");d("MAWInit").MAWInit.addStringArrayAnnotation("workerTerminationReason",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons);d("MAWMIC").addStringArrayAnnotation("workerTerminationReason",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons);d("MAWInit").MAWInit.addStringArrayAnnotation("workerTerminationMsgType",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes);d("MAWMIC").addStringArrayAnnotation("workerTerminationMsgType",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes);var i=a==="requested-upgrade"?"workerUpgraded":f+"_worker_terminated";c("promiseDone")(z(),function(){if(h){s(!0);n.warn("Tab displays soft refresh. Flow: %s",f);d("MAWInit").MAWInit.logPoint(f+"_soft_refresh");d("MAWMIC").addPoint(f+"_soft_refresh");c("MAWClientConsistencyRefresh")("maw_request_refresh");d("MAWWorkerOnClose").success("softRefresh");return}if(f!=="logout")return l(i).then(function(){return d("MAWWorkerOnClose").success(i)}).catch(function(a){d("MAWInit").MAWInit.fail("worker_restart_failed",a),d("MAWWorkerOnClose").fail("workerUpgradeFailed",a),d("MAWWaitForBackendSetup").rejectBackendSetup(a)});else d("MAWWorkerOnClose").success("skip_logout")})});var m=await d("MAWWebWorkerSingleton").createWorkerIfNone(g),o=m.worker;m=m.workerID;d("MAWWaitForBackendSetup").setCurrentWorker(m);m=new(c("Deferred"))();q=m.getPromise();(g==="bridgeRecovery"||g==="backendSetupFailure")&&c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"create_worker_end");var r=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();n.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["worker setting up with reason: ",", use shared worker: ",""])),g,r);r&&o.addEventListener("message",function(a){var b;typeof a.data==="object"&&((b=a.data)==null?void 0:b.type)==="sw-shutdown"&&typeof a.data.response==="object"&&((b=a.data.response)==null?void 0:b.reason)==="maw-request-refresh"&&c("MAWClientConsistencyRefresh")("maw_request_refresh")});var u=new(d("MAWCommonSetupWorker").BridgeAdapter)(o,p);await b(u);m.resolve(u);n.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["bridge promise resolved"])));d("MAWMIC").addPoint(g+"_connect_to_backend");await d("MAWInit").MAWInit.measurePerformance(g+"-init_backend",async function(){var b=function(){return d("MAWCommonSetupWorker").initWorker({bridge:u,onWorkerAlreadySetup:e,onWorkerRestart:l,reason:g,vaultMaterials:a})};b=r?await b():await u.fullyConnected.then(b);d("MAWWaitForBackendSetup").resolveBackendSetup(b);n.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["backend setup successful"])))});return d("MAWWaitForBackendSetup").waitForBackendSetup("setup-worker")}function a(a,b,e,f,g,h){var i=v(a,b,e,f,g,h);u(g)&&c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup("init bridge recovery observer").then(function(){d("MAWBridgeObserver").initUnackedMessagesObserver({onConnectToExistingWorker:e,onTerminateWorker:f,onWorkerConnect:b,updateWorkerState:h,vaultMaterials:a}),d("MAWWorkerWatchdog").startWatchdog()}));return i}function e(){return q}async function w(a){n.debug("Terminating dedicated worker: %s. Bridge Promise: %s",a,!!q);if(!q){n.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["worker doesn't exist, no need to terminate"])));return!1}n.DEBUG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["worker terminating: for ",""])),a);await z();return!0}async function f(){await w("terminateWorkerPermanently"),s(!0)}function x(a,e){var f=c("gkx")("7313");return f?d("SharedWorkerV2ResourceExperimental").terminateSharedWorker(b("cr:6600"),a?"maw-request-refresh":e!=null?e:"unknown"):d("SharedWorkerBundleResource").terminateSharedWorker(b("cr:6600"),null,a?"maw-request-refresh":e!=null?e:"unknown")}async function y(a){var b=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();if(b){n.debug("Terminating shared worker: %s",a);b=await x(!1,a).then(function(){return!0},function(){return!1});n.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Shared worker responded to termination request: ",""])),b)}else await w(a)}async function z(){var a;n.debug("Updating worker state on termination");(a=await q)==null||a.close();q=null;d("MAWWaitForBackendSetup").resetBackendSetup();d("MAWCrossWorkerPortal").killPortalWhenWorkerTerminating();d("MAWWebWorkerSingleton").resetWorkerCreation()}function A(a){if(a==="MAWEARKeychainDecryptionError"||d("MAWUnrecoverableDbErrors").isUnrecoverableDbErrorByName(a))return!0;return a==="update-required-fbid_change"||a==="update-required-vault_materials_change"?!0:!1}g.setPreventWorkerRestart=s;g.getOrSetupWorker=a;g.waitForWorkerSetup=e;g.terminateDedicatedWorker=w;g.terminateWorkerPermanently=f;g.killSharedWorker=x;g.terminateWorker=y}),98);
__d("MAWWorkerReboot",["FBLogger","MAWBridgeObserver","MAWSetupWorker","MAWWaitForBackendSetup","ODS","Promise","QPLUserFlow","pageID","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){(i||(i=d("ODS"))).bumpEntityKey(3185,"armadillo_shared_worker_reboot","shared_worker_reboot_"+a)}var k=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),l=function(a){switch(a){case"bridge_recovery":return"bridgeRecovery";case"backend_setup_failure":return"backendSetupFailure"}};function a(a,e,f,g,i,m){c("QPLUserFlow").start(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,{annotations:{bool:{isSharedWorker:k},string:{trigger:i,workerInitPageID:c("pageID")}}});c("FBLogger")("messenger_web").info("Rebooting worker started.");j("start");d("MAWWaitForBackendSetup").resetBackendSetup();var n=l(i);c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"terminate_worker_start");return new(h||(h=b("Promise")))(function(b,h){return d("MAWSetupWorker").terminateWorker(n).then(function(){c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"terminate_worker_end");c("FBLogger")("messenger_web").info("Reboot process killed existing worker successfully.");return d("MAWSetupWorker").getOrSetupWorker(a,e,f,g,n,m).then(function(a){c("FBLogger")("messenger_web").info("Rebooting worker success. Reason for reboot: %s",n),j("success"),c("QPLUserFlow").endSuccess(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL),e(a),b()})})["catch"](function(a){c("FBLogger")("messenger_web").info("Rebooting worker failed. Error message: %s",a.message),j("fail"),c("QPLUserFlow").endFailure(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,a.message),d("MAWWaitForBackendSetup").rejectBackendSetup(a),h(a)})})}g.rebootWorker=a}),98);
__d("MAWBridgeObserver",["FBLogger","MAWWaitForBackendSetup","MAWWorkerReboot","promiseDone","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";a=c("qpl")._(1056840252,"808");var h=5,i=[],j=!1,k,l=function(){i=[]};b=function(a){if(!o())return;if(d("MAWWaitForBackendSetup").isBackendSetupInProgress()){l();return}if(n().length>=h&&!d("MAWWaitForBackendSetup").isBackendSetupInProgress()){c("FBLogger")("messenger_web").info("Minimum threshold of unacked messages reached: %s. Unacked messages: %s",h,JSON.stringify(n()));var b=c("qex")._("440"),e=c("qex")._("468")||h;b===!0&&n().length>=e?(c("FBLogger")("messenger_web").info("QE threshold of unacked messages reached: %s. Unacked messages: %s",h,JSON.stringify(n())),l(),c("promiseDone")(m())):(c("FBLogger")("messenger_web").info("Bridge recovery attempt skipped. Reason for skipped: maw_bridge_recovery_v2_enabled: %s, maw_bridge_recovery_threshold: %s",b,e),i.push(a))}else i.push(a)};var m=function(){c("FBLogger")("messenger_web").info("Starting bridge recovery attempt.");return d("MAWWorkerReboot").rebootWorker(k.vaultMaterials,k.onWorkerConnect,k.onConnectToExistingWorker,k.onTerminateWorker,"bridge_recovery",k.updateWorkerState).then(function(){c("FBLogger")("messenger_web").info("Bridge recovery attempt successful. Worker has restarted.")},function(a){c("FBLogger")("messenger_web").info("Bridge recovery attempt failed. Worker has failed to restart. Error: %s",a.message);throw a})};e=function(a){j=!0,k=a};var n=function(){return i},o=function(){return j};f=function(){return k};g.BAD_STATE_RECOVERY_QPL=a;g.MIN_UNACKED_EVENTS_THRESHOLD=h;g.resetUnackedMessages=l;g.notifyUnackedEvent=b;g.attemptRecovery=m;g.initUnackedMessagesObserver=e;g.getUnackedMessages=n;g.getIsObserverActive=o;g.getProps=f}),98);
__d("MAWGetDBVersionForTest",["justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(!c("justknobx")._("1495"))return;var a=new URL(document.location.href);a=a.searchParams.get("db_version");if(a==null)return;if(a==="current"||a==="latest")return a;a=parseInt(a,10);if(Number.isInteger(a))return Number(a)}g.getDbVersionForTest=a}),98);
__d("WADevToolMessageChannel",[],(function(a,b,c,d,e,f){"use strict";var g=new MessageChannel(),h;a=function(){g=new MessageChannel();h(g);return g};b=function(){return g};c=function(a){h=a,h(g)};f.createNewChannel=a;f.getMostRecentChannel=b;f.onCreateNewChannel=c}),66);
__d("MAWCommonSetupWorker",["Deferred","FBLogger","MAWCurrentUser","MAWGetDBVersionForTest","MAWInit","MAWMIC","MAWSetupWorker","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MessengerWebInitData","Promise","WADevToolMessageChannel","WALogger","WorkerClient","WorkerMessagePort","err","gkx","pageID","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("gkx")("3282");e=function(a){function b(b,c){var e;e=a.call(this,b,c)||this;e.onmessage=null;e.$BridgeAdapter$p_1=b;d("WorkerClient").init(e);e.onUnhandledMessage.add(function(a){e.onmessage&&e.onmessage({data:a})});e.addMessageListener("worker-setup",function(a){a.status==="worker-ready"&&d("MAWInit").MAWInit.addBoolAnnotation("workerReadyReceived",!0)});return e}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.getBridgePort=function(){return this};return b}(d("WorkerMessagePort").WorkerSyncedMessagePort);function a(a){var b=a.bridge,e=a.reason,f=a.vaultMaterials,g=new(c("Deferred"))();b.addMessageListener("worker-setup",function(b){return k(a,g,b)});b.addMessageListener("worker-setup-ack",function(a){return l(a,e)});n(b,f);c("promiseDone")(d("MAWWebWorkerSingleton").doesWorkerExist(),function(a){return d("MAWInit").MAWInit.addBoolAnnotation("workerExistsOnSetup",a)});c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(a){return d("MAWInit").MAWInit.addStringAnnotation("workerHealthStatus",a.tag)});return g.getPromise()}function k(a,b,e){var f;if(e.setupHash!==c("pageID"))return;switch(e.status){case"success":b.resolve(a.bridge.getBridgePort());break;case"failure":b.reject(c("err")((f=e.msg)!=null?f:"Error setting up worker"));break;case"already-setup":return m(a,b,e);default:d("MAWInit").MAWInit.addBoolAnnotation("invalidSetupMessageReceived",!0);throw c("FBLogger")("messenger_web").mustfixThrow("Invalid message for worker: "+e.status)}}function l(a,b){if(a.setupHash!==c("pageID"))return;d("MAWInit").MAWInit.logPoint(b+"_backend_setup_ack");d("MAWMIC").addPoint(b+"_backend_setup_ack");a=(b=a.backendState)!=null?b:"none";d("MAWInit").MAWInit.addStringAnnotation("backendAckState",a);d("MAWMIC").addStringAnnotation("backendAckState",a)}function m(a,e,f){var g=a.bridge,j=a.onWorkerAlreadySetup,k=a.onWorkerRestart;a=a.reason;switch(f.action){case"no-action":e.resolve(g.getBridgePort());j();d("MAWInit").MAWInit.logPoint(a+"_backend_already_setup");d("MAWMIC").addPoint(a+"_backend_already_setup");break;case"reboot-required":d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Terminating worker and rebooting..."])));d("MAWMIC").addPoint(a+"_worker_rebooting");d("MAWInit").MAWInit.logPoint(a+"_worker_rebooting");j=(g=f==null?void 0:f.reason)!=null?g:"none";d("MAWInit").MAWInit.addStringAnnotation("workerRebootReason",j);d("MAWMIC").addStringAnnotation("workerRebootReason",j);a=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?(i||(i=b("Promise"))).resolve(d("MAWWaitForBackendSetup").resetCurrentWorkerWithId(d("MAWWaitForBackendSetup").getCurrentWorkerID())):d("MAWSetupWorker").terminateDedicatedWorker("reboot required");return a.then(function(){return k("rebootRequired").then(function(a){return e.resolve(a)})["catch"](function(a){return e.reject(a)})});default:f.action;throw c("FBLogger")("messenger_web").mustfixThrow("Invalid action for worker-setup:already-setup: "+f.action)}}function n(a,b){b={content:{createdAt:c("MessengerWebInitData").createdAt,fbId:d("MAWCurrentUser").getID(),sessionId:c("MessengerWebInitData").sessionId,testDbVersion:d("MAWGetDBVersionForTest").getDbVersionForTest(),userKeyBase:c("MessengerWebInitData").userKeyBase,vaultMaterials:b},setupHash:c("pageID"),type:"worker-setup"};if(j){d("MAWInit").MAWInit.addBoolAnnotation("devToolsEnabled",!0);var e=d("WADevToolMessageChannel").createNewChannel();b.content.devToolMessageChannelPort2=e.port2;a.postMessage(b,[e.port2])}else a.postMessage(b)}g.BridgeAdapter=e;g.initWorker=a}),98);
__d("MAWMessageRequestUtil",["I64","LSContactBitOffset","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWFBLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){if(a==="pending"||a==="other"){d("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is "+a+", contactViewerRelationship is "+(h||(h=d("I64"))).to_string(e.contactViewerRelationship));return!0}var f=d("LSContactBitOffset").hasWithDefault(64,e,!0);if(a==="inbox"&&(h||(h=d("I64"))).equal(e.contactViewerRelationship,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").NOT_CONTACT))&&!f){b&&d("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is inbox, contactViewerRelationship is "+(h||(h=d("I64"))).to_string(e.contactViewerRelationship)+", isViewerUnconnected is false, hasActivity is true");return b}return!1}function k(a){return a==="pending"||a==="other"}function a(a){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?k(a.folderName):!1}function l(a,b){return b!=null?j(a.folderName,c("gkx")("13333")?(h||(h=d("I64"))).gt(a.lastActivityTimestampMs,(h||(h=d("I64"))).zero):!(h||(h=d("I64"))).equal(a.lastActivityTimestampMs,(h||(h=d("I64"))).zero),b[1]):!1}function b(a,b){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?l(a,b):!1}function e(a){return d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?k(a.folderName):!1}f=[8,18,19,34,24,25,122];var m=[21,48];g.isMessageRequestV2=j;g.isOneOnOneMessageRequest=a;g.isOneOnOneMessageRequestV2=b;g.isGroupMessageRequest=e;g.disabledThreadCapabilitiesForIncomingRequest=f;g.enabledThreadCapabilitiesForIncomingRequest=m}),98);
__d("clearedMAWMnRestrictCapabilities",[],(function(a,b,c,d,e,f){"use strict";a=[0,31,35,55,56,58,24,25,35,19];b=a;f["default"]=b}),66);
__d("MAWUpdateLSThreadCapabilities",["fbt","I64","LSBitOffset","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBlockUtils","MAWCurrentUser","MAWMessageRequestUtil","ReQL","clearedMAWMnRestrictCapabilities","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=d("MAWCurrentUser").getID(),l=(i||(i=d("I64"))).of_string(k);function a(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)).then(function(b){if(b==null)return Promise.resolve();var c=d("LSBitOffset").set((j||(j=d("LSIntEnum"))).ofNumber(27),b.capabilities);b=babelHelpers.extends({},b,{capabilities:c});return a.threads.put(b)}).then(c("emptyFunction"))}function b(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)).then(function(b){if(b==null)return Promise.resolve();var c=d("LSBitOffset").clear((j||(j=d("LSIntEnum"))).ofNumber(27),b.capabilities);b=babelHelpers.extends({},b,{capabilities:c});return a.threads.put(b)}).then(c("emptyFunction"))}function e(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)).then(function(c){if(c==null)return Promise.resolve([void 0,void 0]);var e=d("ReQL").firstAsync(d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.participants).getKeyRange(b),d("ReQL").fromTableAscending(a.contacts)).filter(function(a){a=a[1];return!(i||(i=d("I64"))).equal(a.id,l)}).map(function(a){a=a[1];return a}):d("ReQL").empty());return Promise.all([Promise.resolve(c),e])}).then(function(b){var e=b[0];if(e==null)return Promise.resolve();b=b[1];if(b==null)return Promise.resolve();var f=(i||(i=d("I64"))).equal(b.blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)),g=i.equal(b.blockedByViewerStatus,j.ofNumber(c("LSContactBlockedByViewerStatus").FULLY_BLOCKED));b=d("LSContactBitOffset").has(66,b);g=g?d("LSThreadBitOffset").clear(d("MAWBlockUtils").clearedFbBlockCapabilities,e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5):f?d("LSThreadBitOffset").clear(d("MAWBlockUtils").clearedMnBlockCapabilities,e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5):b?d("LSThreadBitOffset").clear(c("clearedMAWMnRestrictCapabilities"),e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5):[e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5];f=g[0];b=g[1];var h=g[2],k=g[3];g=g[4];return a.threads.put(babelHelpers.extends({},e,{capabilities:f,capabilities2:b,capabilities3:h,capabilities4:k,capabilities5:g})).then(c("emptyFunction"))})}async function f(a,b){a=a.threads;b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(b));if(b==null)return Promise.resolve();var c=d("LSThreadBitOffset").set.apply(d("LSThreadBitOffset"),[d("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest].concat(d("LSThreadBitOffset").clear(d("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5))),e=c[0],f=c[1],g=c[2],h=c[3];c=c[4];await a.put(babelHelpers.extends({},b,{additionalThreadContext:void 0,capabilities:e,capabilities2:f,capabilities3:g,capabilities4:h,capabilities5:c}))}async function m(a,b,c){b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b));if(b==null)return;c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.contacts,["name"]).getKeyRange(c));if(c==null)return;c=h._(/*BTDS*/"{Inviter Name} invited you to join",[h._param("Inviter Name",c.name)]).toString();var e=d("LSThreadBitOffset").set([105],b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5),f=e[0],g=e[1],i=e[2],j=e[3];e=e[4];await a.threads.put(babelHelpers.extends({},b,{capabilities:f,capabilities2:g,capabilities3:i,capabilities4:j,capabilities5:e,snippet:c}))}async function n(a,b){var c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b));if(c==null)return;b=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.group_invites).getKeyRange(b));var e=d("LSThreadBitOffset").clear([105],c.capabilities,c.capabilities2,c.capabilities3,c.capabilities4,c.capabilities5),f=e[0],g=e[1],h=e[2],i=e[3];e=e[4];await a.threads.put(babelHelpers.extends({},c,{capabilities:f,capabilities2:g,capabilities3:h,capabilities4:i,capabilities5:e,snippet:void 0}));await b.map(async function(b){await a.group_invites.delete(b.threadKey,b.inviterId,b.inviteeId)})}g.enableAddMembersTxn=a;g.disableAddMembersTxn=b;g.disableBlockerCapabilitiesTxn=e;g.updateNonMessageRequestThreadTxn=f;g.setGroupInviteTxn=m;g.clearGroupInviteTxn=n}),226);
__d("uniqueArray",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a}function a(a,b){var c=b!=null?b:g,d=[],e=new Set();a.forEach(function(a){var b=c(a);if(e.has(b))return;e.add(b);d.push(a)});return d}f["default"]=a}),66);
__d("MAWBridgeParticipantsUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWCurrentUser","MAWJids","MAWMiActMappingTableAPI","MAWUpdateLSThreadCapabilities","uniqueArray"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=d("MAWCurrentUser").getID(),l=(i||(i=d("I64"))).of_string(k);function a(a,b){b=b.map(function(a){var b=a.chatJid,c=a.type;a=a.userJid;return babelHelpers.extends({chatJid:b},s(c),{userJid:a})});return m(a,b)}function b(a,b){b=b.participants.map(function(a){return{chatJid:a.threadJid,isAdmin:a.isAdmin,isInvited:a.isInvited,isSuperAdmin:a.isSuperAdmin,userJid:d("MAWJids").toUserJid(a.fbid)}});return m(a,b)}async function m(a,b){b=await o(a,b);await Promise.all(b.map(function(b){var c=b.mawParticipant,e=b.threadKey,f=d("MAWJids").convertChatJidToIntJid(c.userJid);return[a.participants.get(e,f).then(function(b){var d=q(b,c,e);return b!=null?a.participants.put(d):Promise.all([a.participants.add(d),n(a,f)])}),p(a,f,e,c.isAdmin)]}).flat(Infinity))}async function n(a,b){await c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:b,isBlocked:!1,isMemorialized:!1,isSelf:k===(i||(i=d("I64"))).to_string(b),workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}async function o(a,b){var e=c("uniqueArray")(b.map(function(a){return a.chatJid})),f=new Map();await Promise.all(e.map(function(b){return d("MAWMiActMappingTableAPI").getThreadKeyForChatJid(a,b).then(function(a){return a!=null&&f.set(b,a)})}));return b.map(function(a){var b=f.get(a.chatJid);return b==null?null:{mawParticipant:a,threadKey:b}}).filter(Boolean)}async function p(a,b,c,e){await d("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(a,c),(i||(i=d("I64"))).equal(l,b)&&(e?await d("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(a,c):await d("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(a,c))}function q(a,b,c){return a==null?babelHelpers.extends({},r(b),{authorityLevel:(i||(i=d("I64"))).zero,contactId:d("MAWJids").convertChatJidToIntJid(b.userJid),deliveredWatermarkTimestampMs:i.zero,isSuperAdmin:b.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:i.zero,readWatermarkTimestampMs:i.zero,threadKey:c,threadRoles:i.zero}):babelHelpers.extends({},a,r(b))}function r(a){return{groupParticipantJoinState:a.isInvited?(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED):(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:a.isAdmin,isModerator:!1,subscribeSource:a.isSuperAdmin?h._(/*BTDS*/"Group creator").toString():void 0}}function s(a){return{isAdmin:a==="superadmin"||a==="admin",isInvited:a==="invitedParticipant",isSuperAdmin:a==="superadmin"}}g.callFromMainThread=a;g.call=b;g.mawToLsParticipantTypeConversion=s}),226);
__d("MAWBundleResource",["MAWMainWebWorkerV2Resource"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MAWMainWebWorkerV2Resource")}),98);
__d("MAWChatJid",["FBLogger","I64","MAWJids","MAWMiActMappingTableAPI","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){try{return d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,d("MAWJids").convertChatJidToIntJid(b)).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Invalid chatJid: "+b);return Promise.reject(a)}}function a(a,b,d){return i(a,b).then(function(a){if(a!=null)return a;throw c("FBLogger")("messenger_web").mustfixThrow("[toThreadKey] No mapping record for chatJid, source: %s",d)})}async function b(a,b){b=await i(a,b);return b==null?void 0:d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b))}function e(a,b){try{return d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,b).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Invalid integer jid: "+(h||(h=d("I64"))).to_string(b));return Promise.reject(a)}}g.toThreadKeyMaybe=i;g.toThreadKey=a;g.toThreadMaybe=b;g.toThreadKeyMaybeForChatJidInteger=e}),98);
__d("MAWEBLSInWorkerSwitch",["MAWEBEnabledStateManager"],(function(a,b,c,d,e,f,g){"use strict";a=new(d("MAWEBEnabledStateManager").MAWEBEnabledStateManager)();b=a;g["default"]=b}),98);
__d("MAWEBCombinedSwitch",["MAWEBEnabledStateManager","MAWEBLSInWorkerSwitch","MAWEBSwitch"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("MAWEBEnabledStateManager").MAWEBEnabledStateManager)();function i(){h.set(c("MAWEBSwitch").isEnabled()&&c("MAWEBLSInWorkerSwitch").isEnabled())}c("MAWEBSwitch").onSet(function(){i()});c("MAWEBLSInWorkerSwitch").onSet(function(){i()});i();g.MAWEBCombinedSwitch=h}),98);
__d("MAWEphemeralMsgAutoResetSystemId",[],(function(a,b,c,d,e,f){"use strict";a="-111111";b=a;f["default"]=b}),66);
__d("MAWFolderTypes",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=10;var g=15,h={ARCHIVED:e,INBOX:a,OTHER:c,PENDING:b,RESTRICTED:g,SPAM:d};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.SPAM=d;f.ARCHIVED=e;f.RESTRICTED=g;f.FOLDER_ID=h}),66);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case"add":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}g.getUserDeviceAdminType=a}),98);
__d("MAWMiActGetMappingWithMawTypes",["I64","MAWJids","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var c=(h||(h=d("I64"))).to_string(a.jid);b=b?d("WAJids").toGroupJid(c):d("MAWJids").toUserJid(c);return{clientThreadPk:a.clientThreadPk,jid:b,serverThreadKey:a.serverThreadKey}}g["default"]=a}),98);
__d("MAWMiActThreadLifecycleState",[],(function(a,b,c,d,e,f){"use strict";a={AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:"AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW",AUTHORITATIVE_THREAD_ONLY:"AUTHORITATIVE_THREAD_ONLY",CLIENT_PARTIAL_MI_THREAD:"CLIENT_PARTIAL_MI_THREAD",CLIENT_PARTIAL_MI_THREAD_WITH_ACT:"CLIENT_PARTIAL_MI_THREAD_WITH_ACT",JID_MISSING_MAPPING_ROW:"JID_MISSING_MAPPING_ROW",JID_MISSING_MI_THREAD:"JID_MISSING_MI_THREAD",MI_AND_ACT_THREAD_COMPLETE:"MI_AND_ACT_THREAD_COMPLETE",OPTIMISTIC_THREAD_NO_ACT:"OPTIMISTIC_THREAD_NO_ACT",OPTIMISTIC_THREAD_WITH_ACT:"OPTIMISTIC_THREAD_WITH_ACT",SERVER_PARTIAL_MI_THREAD:"SERVER_PARTIAL_MI_THREAD",THREAD_KEY_ONLY:"THREAD_KEY_ONLY"};f.MiActThreadStatesEnum=a}),66);
__d("MAWThreadLoadingState",["I64","LSAuthorityLevel","LSIntEnum","MAWJids","MAWMiActMappingTableAPI","MAWThreadMappingQPL","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={MISSING:"MISSING",OPTIMISTIC:"OPTIMISTIC",PARTIAL:"PARTIAL",READY:"READY"},k={IN_PROGRESS:"IN_PROGRESS",MISSING:"MISSING",READY:"READY"};async function l(a,b){b=await d("MAWMiActMappingTableAPI").getMappingRowForChatJid(a,b);if(b==null)return{mappingState:{actState:k.MISSING,miState:j.MISSING},threadKey:null};a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b.serverThreadKey));return{mappingState:m(a,b),threadKey:b.serverThreadKey}}async function a(a,b){a=await l(a,b);b=a.mappingState;return b}async function b(a,b){a=await Promise.all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)),d("MAWMiActMappingTableAPI").getMappingRowForThreadKey(a,b)]);b=a[0];a=a[1];return m(b,a)}function m(a,b){return{actState:p(b),miState:q(a)}}function e(a){return n(a)&&o(a)}function f(a){return a.miState===j.OPTIMISTIC}function n(a){return a.miState===j.READY}function o(a){return a.actState===k.READY}function p(a){return a==null?k.MISSING:s(a.clientThreadPk)?k.IN_PROGRESS:k.READY}function q(a){if(a==null)return j.MISSING;a=(h||(h=d("LSIntEnum"))).toNumber(a.authorityLevel);if(a===c("LSAuthorityLevel").AUTHORITATIVE)return j.READY;return a===c("LSAuthorityLevel").OPTIMISTIC?j.OPTIMISTIC:j.PARTIAL}async function r(a,b,c){await a.mi_act_mapping_table.put({clientThreadPk:(i||(i=d("I64"))).neg(b),jid:c,serverThreadKey:b})}function s(a){return(i||(i=d("I64"))).lt(a,i.zero)}async function t(a,b,c){var e=b.jid;b=b.threadKey;c===void 0&&(c=null);await u(a,{intJid:d("MAWJids").convertChatJidToIntJid(e),threadKey:b},c)}async function u(a,b,c){var e=b.intJid;b=b.threadKey;c===void 0&&(c=null);c!=null&&d("MAWThreadMappingQPL").addPoint("insert_mapping_row",c);await a.mi_act_mapping_table.put({clientThreadPk:e,jid:e,serverThreadKey:b})}function v(a,b){return l(a,b).then(function(a){var b=a.mappingState;a=a.threadKey;return b.miState===j.MISSING?null:a})}g.MiState=j;g.ActState=k;g.genThreadLoadingStateAndThreadKeyFromJid=l;g.genLoadingStateFromJid=a;g.genThreadLoadingState=b;g.getThreadLoadingStateForDbRows=m;g.isReady=e;g.isMiOptimistic=f;g.isMiReady=n;g.isActReady=o;g.getActState=p;g.getMiState=q;g.markActThreadLoadingAsInProgress=r;g.markActThreadLoadingAsCompletedForJid=t;g.markActThreadLoadingAsCompleted=u;g.getThreadKeyIfMiThreadNotMissing=v}),98);
__d("MWLogSendToSentFailedError",["FBLogger","QuickPerformanceLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,d,e,f){var g,i,j,k=a.qplEventType;a=a.qplInstanceKey;k=(h||(h=c("QuickPerformanceLogger"))).getMarker(k,a);a=k==null||(g=k.annotations)==null||(g=g.bool)==null?void 0:g.is_secure;c("FBLogger")("messenger_web_messaging","send_to_sent_failed").blameToPreviousFrame().blameToPreviousFrame().warn("send_to_sent failed with reason: %s. Caught error message: %s. Additional description: %s. Secure? %s. Error Code: %s. Application Error: %s.",b,(b=d==null?void 0:d.message)!=null?b:"",(b=(d=k==null||(i=k.annotations)==null||(i=i.string)==null?void 0:i.error_description)!=null?d:k==null||(j=k.annotations)==null||(j=j.string)==null?void 0:j.errorType)!=null?b:"",a===!0?"secure":a===!1?"open":"unknown",(d=e==null?void 0:e.toString())!=null?d:"",(k=f==null?void 0:f.toString())!=null?k:"")}g["default"]=a}),98);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video",Share:"share",NoteReply:"note_reply"});function a(a){var b=a.hasFile;b=b===void 0?!1:b;var c=a.hasGif;c=c===void 0?!1:c;var d=a.hasHotEmoji;d=d===void 0?!1:d;var e=a.hasImage;e=e===void 0?!1:e;var f=a.hasLinks;f=f===void 0?!1:f;var h=a.hasNoteReply;h=h===void 0?!1:h;var i=a.hasShare;i=i===void 0?!1:i;var j=a.hasSticker;j=j===void 0?!1:j;var k=a.hasVideo;k=k===void 0?!1:k;a=a.hasVoiceClip;a=a===void 0?!1:a;var l=g.None;e?l=g.Image:k?l=g.Video:d?l=g.HotEmoji:j?l=g.Sticker:c?l=g.Gif:a?l=g.Audio:b?l=g.File:i?l=g.Share:f?l=g.Link:h&&(l=g.NoteReply);return l}f.AttachmentType=g;f.getAttachmentType=a}),66);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e,f,g=d("MWChatInteraction").get((h||(h=d("I64"))).to_string(a));g=g!=null?c("InteractionTracingMetrics").get(g):null;b=(b=g==null||(e=g.annotations.string)==null?void 0:e.inboxEntrypoint)!=null?b:g==null||(f=g.annotations.string)==null?void 0:f.entrypoint;if(b!=null&&b!=="unknown")return b;g=d("MWChatInteraction").get("inbox_init");if(g!=null&&(h||(h=d("I64"))).equal(a,(h||(h=d("I64"))).of_string(g)))return"initInbox";b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b=b!=null?(g=c("InteractionTracingMetrics").get(b))==null||(g=g.annotations.string)==null?void 0:g.thread_id:null;return b===(h||(h=d("I64"))).to_string(a)?"auto_open":"unknown"}g["default"]=a}),98);
__d("MWMsgActionLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Send:"send",Reaction:"reaction",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply",Unsend:"unsend",GroupInvite:"group-invite",SenderKeyDistribution:"sender-key-distribution",EphemeralSetting:"ephemeral-setting",Edit:"edit",Bump:"bump",Retry:"retry"});function a(a){var b=a.hasEphemeralSetting;b=b===void 0?!1:b;var c=a.hasGroupInvite;c=c===void 0?!1:c;var d=a.hasReaction;d=d===void 0?!1:d;var e=a.hasReply;e=e===void 0?!1:e;var f=a.hasSenderKeyDistribution;f=f===void 0?!1:f;var h=a.hasStoryReply;h=h===void 0?!1:h;var i=a.isBump;i=i===void 0?!1:i;var j=a.isEdit;j=j===void 0?!1:j;var k=a.isForward;k=k===void 0?!1:k;var l=a.isRetry;l=l===void 0?!1:l;a=a.isUnsend;a=a===void 0?!1:a;var m=g.Send;e?m=g.Reply:h?m=g.StoryReply:a?m=g.Unsend:d?m=g.Reaction:c?m=g.GroupInvite:b?m=g.EphemeralSetting:f?m=g.SenderKeyDistribution:j?m=g.Edit:k?m=g.Forward:i?m=g.Bump:l&&(m=g.Retry);return m}f.ActionType=g;f.getActionType=a}),66);
__d("MWHasLinksUtil",["URLMatcher","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isStringNullOrEmpty")(a)?!1:c("URLMatcher").match(a)!=null}g.getHasLinks=a}),98);
__d("MWVersion",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("2");g.v2=a}),98);
__d("MWSharedS2SBaseAnnotations",["$InternalEnum","I64","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","MWHasLinksUtil","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWPreloadableQueries","MWVersion","MultipleTabsLogger","ReQL","gkx","isStringNullOrEmpty","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h=["hasAttachment","hasEphemeralSetting","hasGroupInvite","hasReaction","hasReply","hasSenderKeyDistribution","hasStoryReply","hasText","isBump","isEdit","isForward","isRetry","isUnsend"],i=["db","threadKey"],j,k=b("$InternalEnum")({Text:"text",NonText:"non-text"});async function a(a,b,e,f){var g=a.hasAttachment;g=g===void 0?!1:g;var i=a.hasEphemeralSetting,m=a.hasGroupInvite,n=a.hasReaction,o=a.hasReply,p=a.hasSenderKeyDistribution,q=a.hasStoryReply,r=a.hasText;r=r===void 0?!1:r;var s=a.isBump,t=a.isEdit,u=a.isForward,v=a.isRetry,w=a.isUnsend;a=babelHelpers.objectWithoutPropertiesLoose(a,h);i=d("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:i,hasGroupInvite:m,hasReaction:n,hasReply:o,hasSenderKeyDistribution:p,hasStoryReply:q,isBump:s,isEdit:t,isForward:u,isRetry:v,isUnsend:w});m=d("MWMsgMediaTypeLogUtils").getAttachmentType(a);n=r&&(!m||m===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?k.Text:k.NonText;o=f!=null?parseInt(f,10):void 0;isNaN(o)&&(o=void 0);return{bool:{has_attachment:g,has_sticker:a.hasSticker,has_text:r,is_attachments_grouped:a.isAttachmentsGrouped,is_pdb:Boolean(c("gkx")("8483")),is_tlc_public_user:c("gkx")("24028"),use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},int:{number_of_attachments:a.numberOfAttachments,number_of_grouped_attachments:a.numberOfGroupedAttachments,offline_threading_id:o},string:{action_type:i,attachment_type:m,entrypoint:l(b),message_type:n,multipleTabs:await d("MultipleTabsLogger").getMultipleTabsAnnotation(),mw_version:(j||(j=d("I64"))).to_string(d("MWVersion").v2),offline_threading_id:f,root_component:e}}}function l(a){var b;return(b=Object.keys(c("LSMessagingThreadAttributionType")).find(function(b){return c("LSMessagingThreadAttributionType")[b]===a}))!=null?b:"UNKNOWN"}async function e(a){var b=a.db,c=a.threadKey;a=babelHelpers.objectWithoutPropertiesLoose(a,i);b=b!=null&&c!=null?await d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(b,c)):[];return{mediaStagings:b,messageTypeParams:m(babelHelpers.extends({},a,{mediaStagings:b}))}}function m(a){var b=a.externalAttachmentUrl,e=a.hotEmojiSize,f=a.isBump,g=a.isEdit,h=a.isEphemeralSetting,i=a.isForward,j=a.isGroupInvite,k=a.isReaction,l=a.isRetry,m=a.isSenderKeyDistribution,n=a.isUnsend,o=a.mediaGroupInfo,p=a.mediaStagings,q=a.messageText,r=a.reply,s=a.sentFromShareSheet,t=a.stickerId,u=a.threadType;a=a.voiceClip;var v=!c("isStringNullOrEmpty")(q);q=d("MWHasLinksUtil").getHasLinks(q);var w=!1;a=a!=null;a?w=!0:b!=null&&(w=!0);var x=!1,y=!1,z=!1,A=0,B=0,C;if(p!=null&&p.length>0){w=!0;for(var D of p){var E=D.mimeType;E.indexOf("image")!==-1&&(x=!0);E.indexOf("video")!==-1&&(y=!0);E.indexOf("application")!==-1&&(z=!0)}if(x&&u!=null){E=d("LSMessagingThreadTypeUtil").isArmadilloSecure(u);C=!E}A=p.length}o!=null&&(C=!0,B=o.messagesAndAttachments.length);D=e!=null;u=r!=null;E=r!=null;p=t!=null&&!D;o=!p&&b!=null;e=s===!0;r=k===!0;t=j===!0;b=h===!0;s=m===!0;return{hasAttachment:w,hasEphemeralSetting:b,hasFile:z,hasGif:o,hasGroupInvite:t,hasHotEmoji:D,hasImage:x,hasLinks:q,hasReaction:r,hasReply:u,hasSenderKeyDistribution:s,hasShare:e,hasSticker:p,hasStoryReply:E,hasText:v,hasVideo:y,hasVoiceClip:a,isAttachmentsGrouped:C,isBump:f!=null?f:!1,isEdit:g!=null?g:!1,isForward:i!=null?i:!1,isRetry:l!=null?l:!1,isUnsend:n!=null?n:!1,numberOfAttachments:A,numberOfGroupedAttachments:B}}g.MsgType=k;g.getSendToSentBaseAnnotations=a;g.getEntrypointAnnotation=l;g.queryMediaStagingAndGetMessageTypeParams=e;g.getMessageTypeParams=m}),98);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","IGDInteractionTraceAnnotations","LSIntEnum","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWSharedS2SBaseAnnotations","MultipleTabsLogger","cr:6985","gkx","isArmadillo","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("$InternalEnum")({Text:"text",NonText:"non-text"});async function a(a,e,f,g,i){var j=b("cr:6985")!=null?await b("cr:6985").isCutoverThreadKey(a.threadKey):!1;e=await d("MWSharedS2SBaseAnnotations").getSendToSentBaseAnnotations(e,f,g,i);return{bool:babelHelpers.extends({},e.bool,d("IGDInteractionTraceAnnotations").getInstamadilloBooleanAnnotations(a),{is_community_event:a.eventStartTimestampMs!=null,is_cutover:c("isArmadillo")()&&j,is_message_request:d("LSMessagingThreadTypeUtil").isMessageRequest(a),is_secure:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)}),int:babelHelpers.extends({},e.int),string:babelHelpers.extends({},e.string,{consistent_thread_fbid:a.consistentThreadFbid!=null?(h||(h=d("I64"))).to_string(a.consistentThreadFbid):null,original_entrypoint:c("MWGetOriginalEntrypoint")(a.threadKey),thread_id:(h||(h=d("I64"))).to_string(a.threadKey),thread_subtype:a.threadSubtype!=null?(h||(h=d("I64"))).to_string(a.threadSubtype):null,thread_type:h.to_string(a.threadType)})}}function e(a,b,e,f){k(a,b,c("MWGetOriginalEntrypoint")(e.threadKey),e.threadKey,e.consistentThreadFbid,e.threadType,e.threadSubtype,f),d("IGDInteractionTraceAnnotations").addInstamadilloAnnotationsToInteractionTrace(e,a)}function k(a,e,f,g,i,k,l,m){var n=e.hasEphemeralSetting;n=n===void 0?!1:n;var o=e.hasFile;o=o===void 0?!1:o;var p=e.hasGif;p=p===void 0?!1:p;var q=e.hasGroupInvite;q=q===void 0?!1:q;var r=e.hasHotEmoji;r=r===void 0?!1:r;var s=e.hasImage;s=s===void 0?!1:s;var t=e.hasLinks;t=t===void 0?!1:t;var u=e.hasReaction;u=u===void 0?!1:u;var v=e.hasReply;v=v===void 0?!1:v;var w=e.hasSenderKeyDistribution;w=w===void 0?!1:w;var x=e.hasShare;x=x===void 0?!1:x;var y=e.hasSticker;y=y===void 0?!1:y;var z=e.hasStoryReply;z=z===void 0?!1:z;var A=e.hasText;A=A===void 0?!1:A;var B=e.hasVideo;B=B===void 0?!1:B;var C=e.hasVoiceClip;C=C===void 0?!1:C;var D=e.isAttachmentsGrouped,E=e.isBump;E=E===void 0?!1:E;var F=e.isEdit;F=F===void 0?!1:F;var G=e.isForward;G=G===void 0?!1:G;var H=e.isRetry;H=H===void 0?!1:H;var I=e.isUnsend;I=I===void 0?!1:I;var J=e.numberOfAttachments;J=J===void 0?0:J;e=e.numberOfGroupedAttachments;e=e===void 0?0:e;n=d("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:n,hasGroupInvite:q,hasReaction:u,hasReply:v,hasSenderKeyDistribution:w,hasStoryReply:z,isBump:E,isEdit:F,isForward:G,isRetry:H,isUnsend:I});q=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:o,hasGif:p,hasHotEmoji:r,hasImage:s,hasLinks:t,hasShare:x,hasSticker:y,hasVideo:B,hasVoiceClip:C,numberOfAttachments:J,numberOfGroupedAttachments:e});u=A&&(!q||q===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?j.Text:j.NonText;d("MultipleTabsLogger").addAnnotationWithInteractionUuid(a.getTraceId());a.addAnnotation("attachment_type",q);a.addAnnotation("action_type",n);a.addAnnotation("message_type",u);a.addAnnotation("original_entrypoint",f);m!=null&&a.addAnnotation("root_component",m);a.addAnnotationInt("number_of_attachments",J);D!=null&&a.addAnnotationBoolean("is_attachments_grouped",D);a.addAnnotation("thread_id",(h||(h=d("I64"))).to_string(g));i!=null&&a.addAnnotation("consistent_thread_fbid",(h||(h=d("I64"))).to_string(i));a.addAnnotation("thread_type",h.to_string(k));l!=null&&a.addAnnotation("thread_subtype",(h||(h=d("I64"))).to_string(l));b("cr:6985")!=null&&c("promiseDone")(b("cr:6985").isCutoverThreadKey(g),function(b){a.addAnnotationBoolean("is_cutover",b)});a.addAnnotationBoolean("is_secure",d("LSMessagingThreadTypeUtil").isArmadilloSecure(k));a.addAnnotationBoolean("is_eb_enabled",c("MAWEBSwitch").isEnabled());a.addAnnotationBoolean("use_maw_shared_worker",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker());a.addAnnotationBoolean("is_pdb",Boolean(c("gkx")("8483")))}function f(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2)))return"media";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4)))return"audio";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728)))return"sticker";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384)))return"gif";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64)))return"file";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1)))return"text";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1024))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(536870912)))return"XMA";else return"unknown"}g.MsgType=j;g.getSendToSentAnnotations=a;g.addSendMessageMetadataForInteractionTrace=e;g.addSendMessageMetadataForInteractionTraceWithThreadMetadata=k;g.getMessageTypeFromDisplayedContentType=f}),98);
__d("sendToSentQPLLogger",["LSDatabaseSingleton","LSIntEnum","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MWLogSendToSentFailedError","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","Network","QPLEvent","QPLUserFlow","QuickPerformanceLogger","Random","ReQL","WAExceededStorageQuota","WAGetSafeQPLError","WAGetStorageQplAnnotations","gkx","interaction-tracing","justknobx","mergeDeep","pageID","performance","promiseDone","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=c("requireDeferred")("MAWWebWorkerSingleton").__setRef("sendToSentQPLLogger"),n=c("qpl")._(25313175,"1551"),o=new Map();function p(a,b){c("QPLUserFlow").addAnnotations(n,b,{instanceKey:a})}function a(a,b){c("QPLUserFlow").endCancel(n,{annotations:b!=null?b:{},instanceKey:a}),u(a)}function b(a,b,e,f){b=f!=null?f.type:b;c("MWLogSendToSentFailedError")({qplEventType:n,qplInstanceKey:a},b,e,f==null?void 0:f.errorCode,f==null?void 0:f.applicationErrorCode);c("QPLUserFlow").endFailure(n,b,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),useSentBytesCache:c("gkx")("33008"),wasBackendSetupReset:d("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:d("WAGetSafeQPLError").getSafeQPLErrorMessage(e)},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},error:e,instanceKey:a});u(a)}function q(a,b,d,e){a!=null&&c("QPLUserFlow").addPoint(n,b,{data:e,debugInfo:d,instanceKey:a})}function r(a){(k||(k=c("QuickPerformanceLogger"))).markerEnd(n,160,a),u(a)}function s(a,b){q(a,b?"network_connection_online":"network_connection_offline"),b||r(a)}function t(a){var b=c("interaction-tracing").NetworkStatusTracker.onChange(function(b){b=b.online;s(a,b)});o.set(a,b);s(a,c("interaction-tracing").NetworkStatusTracker.isOnline());if(c("Network").containsNetworkInformation()){b=c("Network").getRTT();b!=null&&p(a,{int:{network_rtt:b}});b=c("Network").getEffectiveType();b!=null&&p(a,{string:{network_effective_type:String(b)}});var d=c("Network").getBandwidth();d!=null&&p(a,{int:{network_bandwidth:d}});d=c("Network").getType();d!=null&&p(a,{string:{network_connectivity_type:String(b)}})}}function u(a){var b;(b=o.get(a))==null||b.remove();o.delete(a)}function v(a){window.navigator&&window.navigator.hardwareConcurrency&&p(a,{int:{hardware_concurrency:window.navigator.hardwareConcurrency}})}function w(a,b){a===void 0&&(a=!0);var e=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(x(b),{annotations:{bool:{backendSetupReady:d("MAWWaitForBackendSetup").isBackendSetupSuccessful(),wasBackendSetupReset:d("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{timeMsSinceSessionStart:(l||(l=c("performance"))).now()},string:{hostname:window.location.hostname,pageID:c("pageID"),workerHeartbeatsOnStart:d("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:d("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});c("promiseDone")(d("MAWMIC").getState().then(function(a){p(e,{string:{mic_state:a}})}));a&&c("promiseDone")(d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){p(e,a)}));c("promiseDone")((h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.connectivity_status)).then(function(a){if(!a)return;p(e,{int:{connection_state_ls_transport:(i||(i=d("LSIntEnum"))).toNumber(a.internetConnectionState)}})})}));c("promiseDone")(m.load().then(function(a){return a.getWorkerHealthStatus().then(function(a){p(e,{string:{workerHealthStatusOnStart:a.tag}})})}));t(e);v(e);return e}function x(a){if((j||(j=d("QPLEvent"))).getSamplingMethod(n)!==1)return n;if(!y(a))return n;a=(j||(j=d("QPLEvent"))).getSampleRate(n);var b=c("justknobx")._("3946");b=Math.max(1,Math.min(b,a));return{i:j.getMarkerId(n),m:j.getSamplingMethod(n),r:b}}function y(a){return a===d("MWMsgMediaTypeLogUtils").AttachmentType.Application||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Audio||a===d("MWMsgMediaTypeLogUtils").AttachmentType.File||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Gif||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Image||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Link||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Sticker||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Video||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Share}function e(a){c("QPLUserFlow").endSuccess(n,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota()}},instanceKey:a}),u(a)}function f(a,b,e,f,g,h){g===void 0&&(g=!0);var i=w(g);if(a==null)return i;g=d("MWSharedS2SBaseAnnotations").getMessageTypeParams(babelHelpers.extends({},b,{threadType:a.threadType}));c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(a,g,e,void 0,h),function(a){a=c("mergeDeep")(a,f);p(i,a)});return i}var z=async function(a,b,d){var e=a+"_start";a=a+"_end";c("QPLUserFlow").addPoint(n,e,{instanceKey:b});e=await d();c("QPLUserFlow").addPoint(n,a,{instanceKey:b});return e};g.addSendToSentAnnotations=p;g.markSendToSentCancel=a;g.markSendToSentFail=b;g.markSendToSentPoint=q;g.markSendToSentStart=w;g.markSendToSentSuccess=e;g.markSendToSentStartWithAnnotation=f;g.measureSendToSentPerformance=z}),98);
__d("MAWThreadMappingQPL",["I64","JSResourceForInteraction","LSIntEnum","MAWLoggerUtils","MAWMiActMappingTableAPI","MAWQplProxy","MAWThreadLoadingState","QPLUserFlow","Random","ReQL","WAJids","promiseDone","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=["instanceKey","s2sInstanceKey"],i=["instanceKey","s2sInstanceKey"],j,k,l=new Map(),m=new Set();function a(a){m.add(a)}function n(a,b){return!m.has(b)?!1:d("MAWThreadLoadingState").isActReady(a)&&d("MAWThreadLoadingState").isMiOptimistic(a)}var o=c("JSResourceForInteraction")("MAWWaitForBackendSetup").__setRef("MAWThreadMappingQPL"),p=c("qpl")._(1056836502,"2778"),q=c("qpl")._(25313175,"1551"),r=null;function b(a){return d("MAWLoggerUtils").getInstanceKeyFromId(a)}function s(a){return d("MAWLoggerUtils").getInstanceKeyFromId((j||(j=d("I64"))).to_string(a)+d("Random").random().toString())}function e(a,b,c){var e=l.get((j||(j=d("I64"))).to_string(a.jid));if(e!=null){u("continue_thread_mapping_after_tpq",e);c!=null&&w({bool:babelHelpers.extends({},c)},e);l.delete((j||(j=d("I64"))).to_string(a.jid));return e}e=(e=a.instanceKey)!=null?e:s(a.fbid);c=c!=null?c:{};var f=c.hasMappingRowAlready,g=c.hasPlaceholderRowInserted,h=c.isExistingRowPlaceholder;c=c.isExpectedThreadMissingInLsdb;var i=a.jid;t({hasMappingRowAlready:f,hasPlaceholderRowInserted:g,instanceKey:e,isExistingRowPlaceholder:h,isExpectedThreadMissingInLsdb:c,jid:a.isGroupThread?d("WAJids").toGroupJid((j||(j=d("I64"))).to_string(i)):d("WAJids").toMsgrUserJid((j||(j=d("I64"))).to_string(i)),threadKey:a.fbid,trigger:b});return e}function t(a){var b=a.instanceKey,e=a.s2sInstanceKey,f=babelHelpers.objectWithoutPropertiesLoose(a,h);r=e;d("sendToSentQPLLogger").markSendToSentPoint(e,"thread_mapping_start",void 0,{string:{thread_state:a.threadState}});c("QPLUserFlow").start(p,{annotations:G(f),instanceKey:b});c("promiseDone")(o.load(),function(a){a=a.runAfterBackendSetup;a(function(){return u("maw_backend_available",b)},"bulkMaybeCreateOrUpdateThread")})}function f(a){var b=a.instanceKey;a.s2sInstanceKey;a=babelHelpers.objectWithoutPropertiesLoose(a,i);d("MAWQplProxy").startQplUserFlow(p,G(a),{providedInstanceKey:b})}function u(a,b){c("QPLUserFlow").addPoint(p,a,{instanceKey:b}),r!=null&&c("QPLUserFlow").addPoint(q,"thread_mapping_"+a,{instanceKey:r})}function v(a,b){u("handle_existing_thread_fail",a);var c=b==null?"no_thread":"not_authoritative";b=b==null?void 0:(k||(k=d("LSIntEnum"))).toNumber(b.authorityLevel);w({int:{insufficientAuthorityLevel:b},string:{handleExistingThreadFailReason:c}},a)}function w(a,b){c("QPLUserFlow").addAnnotations(p,a,{instanceKey:b})}var x=async function(a,b,d){var e=a+"_start";a=a+"_end";c("QPLUserFlow").addPoint(p,e,{instanceKey:b});e=await d();c("QPLUserFlow").addPoint(p,a,{instanceKey:b});return e},y=function(a,b,c){return b==null?c():x(a,b,c)};function z(a,b){w({bool:{isResultVerified:!0},string:{finalActState:b.actState.toString(),finalMiState:b.miState.toString()}},a),d("sendToSentQPLLogger").markSendToSentPoint(r,"thread_mapping_end"),d("MAWThreadLoadingState").isReady(b)||n(b,a)?c("QPLUserFlow").endSuccess(p,{instanceKey:a}):B("thread_state_not_ready",a)}async function A(a){var b,c=a.instanceKey,e=a.intJid,f=a.tables;a=a.threadKey;if(a==null&&e==null){B("no_thread_key_nor_jid",c);return}e=await H(f,{intJid:e,threadKey:a});b=(b=e==null?void 0:e.serverThreadKey)!=null?b:a;a=b==null?null:await d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.threads).getKeyRange(b));z(c,await d("MAWThreadLoadingState").getThreadLoadingStateForDbRows(a,e))}function B(a,b){d("sendToSentQPLLogger").markSendToSentPoint(r,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:a}}),c("QPLUserFlow").endFailure(p,a,{instanceKey:b})}function C(a,b){d("sendToSentQPLLogger").markSendToSentPoint(r,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:a.message}}),c("QPLUserFlow").endFailure(p,"error_thrown",{annotations:{string:{errorMessage:a.message}},instanceKey:b})}function D(a,b,c){d("MAWQplProxy").sendQPLFailThroughBridge(p,a,c,b)}function E(a,b){u(a,b),c("QPLUserFlow").endCancel(p,{instanceKey:b})}function F(a,b){d("MAWQplProxy").sendQPLCancelThroughBridge(p,{string:{cancelInWorkerReason:a}},b)}function G(a){var b=a.hasMappingRowAlready,c=a.hasPlaceholderRowInserted,e=a.isExistingRowPlaceholder,f=a.isExpectedThreadMissingInLsdb,g=a.jid,h=a.threadKey,i=a.threadState;a=a.trigger;return{bool:{hasMappingRowAlready:b,hasPlaceholderRowInserted:c,isExistingRowPlaceholder:e,isExpectedThreadMissingInLsdb:f},string:{initJid:g,initThreadKey:h==null?null:(j||(j=d("I64"))).to_string(h),initThreadState:i==null?void 0:i.toString(),trigger:a}}}async function H(a,b){var c=b.intJid;b=b.threadKey;b=await d("MAWMiActMappingTableAPI").getMappingRowForThreadKey(a,b);return b!=null?b:d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,c)}g.pendingThreadCreationOnServer=l;g.allowToSkipUpgradingOptimisticThreadInMI=a;g.getInstanceKeyForJidInWorker=b;g.getInstanceKeyForThreadKey=s;g.startOrContinueForMiActMappingParams=e;g.start=t;g.startInWorker=f;g.addPoint=u;g.handleExistingThreadFail=v;g.addAnnotations=w;g.measurePerformance=x;g.measurePerformanceForNullableInstanceKey=y;g.endForThreadState=z;g.end=A;g.endFailure=B;g.endFailureError=C;g.endFailureInWorker=D;g.endCancel=E;g.endCancelInWorker=F}),98);
__d("MAWMiActGetThreadLifecycleState",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActGetMappingWithMawTypes","MAWMiActMappingTableAPI","MAWMiActThreadLifecycleState","MAWThreadLoadingState","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){var f=(h||(h=d("LSIntEnum"))).toNumber(a.authorityLevel);if(f===c("LSAuthorityLevel").OPTIMISTIC)if(b!=null)return babelHelpers.extends({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT});else return{serverThreadKey:a.threadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT};if(f===c("LSAuthorityLevel").CLIENT_PARTIAL)return b!=null?babelHelpers.extends({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT}):{serverThreadKey:a.threadKey,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD};if(f===c("LSAuthorityLevel").SERVER_PARTIAL)return{serverThreadKey:a.threadKey,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD};if(f===c("LSAuthorityLevel").AUTHORITATIVE){if(b==null)return{serverThreadKey:a.threadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW};var g=d("MAWThreadLoadingState").getActState(b)===d("MAWThreadLoadingState").ActState.IN_PROGRESS;if(!g)return babelHelpers.extends({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE});else{g=c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType));return{jid:g.jid,jidInt64:b.jid,serverThreadKey:g.serverThreadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY}}}throw c("FBLogger")("messenger_web").mustfixThrow("[MiActMapping] Unknown thread lifecycle state for threadKey: %s, authorityLevel: %s, thread action: %s",(i||(i=d("I64"))).to_string(a.threadKey),f,e)}async function k(a,b,c){var e=await d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,b);if(e==null)return{jidInt64:b,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW};a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e.serverThreadKey));return a==null?{jidInt64:b,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD}:j(a,e,c)}async function l(a,b,c){var e;e=await Promise.all([(e=d("ReQL")).firstAsync(e.fromTableAscending(a.threads).getKeyRange(b)),e.firstAsync(e.fromTableAscending(a.mi_act_mapping_table).getKeyRange(b))]);a=e[0];e=e[1];return a==null?{serverThreadKey:b,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY}:j(a,e,c)}async function a(a,b,c,e){b=await k(a,b,e);if(b.type===d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW&&c!=null)return l(a,(i||(i=d("I64"))).of_string(c),"MAWBridgeOccamadilloVerifyThreadExistsHandler");else return b}g.getThreadLifecycleStateByJid=k;g.getThreadLifecycleStateByThreadKey=l;g.getThreadLifecycleStateByJidOrThreadKey=a}),98);
__d("MAWMiActOnActThreadReadyInstrumentation",["QPLUserFlow","Random","WAHashStringToNumber","isOfflineThreadingId","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WAHashStringToNumber").hashStringToNumber(a+Math.round(d("Random").random()*1e4)+1e4)}function b(a,b,d,e){c("QPLUserFlow").start(c("qpl")._(1056846543,"1530"),{annotations:{bool:{is_otid:c("isOfflineThreadingId")(d)},string:{apiName:e,description:b}},instanceKey:a})}function e(a,b){c("QPLUserFlow").addPoint(c("qpl")._(1056846543,"1530"),b,{instanceKey:a})}function f(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(1056846543,"1530"),b,{instanceKey:a})}function h(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056846543,"1530"),{instanceKey:a})}function i(a,b){c("QPLUserFlow").endFailure(c("qpl")._(1056846543,"1530"),b,{instanceKey:a})}g.getOnActThreadReadyInstanceKey=a;g.startQPL=b;g.addPointQPL=e;g.addAnnotationsQPL=f;g.endSuccessQPL=h;g.endFailureQPL=i}),98);
__d("MAWVerifyThreadExistsUtils",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","isOfflineThreadingId"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map(),k=6e4,l=1e4;function m(a){if(j.size>l){c("FBLogger")("messenger_web").mustfix("MAWVerifyThreadExistsUtils: requestedThreadKeys size exceeded limit");return}j.has(a)&&(window.clearTimeout(j.get(a)),j["delete"](a));j.set(a,window.setTimeout(function(){j["delete"](a)},k))}function a(a){return j.has(a)}function b(a,b,e){var f=b.threadKey;f!=null&&m((h||(h=d("I64"))).to_string(f));f!=null&&c("isOfflineThreadingId")(f)&&(h||(h=d("I64"))).equal(b.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&c("FBLogger")("messenger_web").warn("MAWVerifyThreadExistsUtils: runVerifyThreadExistsSproc called with offline thread key - callsite: %s",e);return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(a,b)}g.isThreadRequested=a;g.runVerifyThreadExistsSproc=b}),98);
__d("MAWMiActOnActThreadReadyQueue",["ExecutionEnvironment","I64","LSPlatformLsInitLog","MAWInit","MAWMIC","MAWMiActOnActThreadReadyInstrumentation","MAWThreadMappingQPL","MAWVerifyThreadExistsUtils","MWChatInteraction","MWFBLogger","clearTimeout","getErrorSafe","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=d("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]),n=new Map(),o=3e4;function a(a,b,e,f,g,i){var j;if(!(l||(l=c("ExecutionEnvironment"))).isInBrowser)return;d("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(i,"enqueue_by_thread_key_start");var p=(k||(k=d("I64"))).to_string(a);j=(j=n.get(p))!=null?j:[];var q=c("setTimeout")(function(){var b=d("MWChatInteraction").getInteractionTraceForThreadKey((k||(k=d("I64"))).to_string(a));b==null||b.addMarkerPoint("timeout_when_waiting_for_act_thread","AppTiming");b==null||b.addAnnotation("callsite_waiting_for_act_thread",f);b==null||b.addAnnotation("initial_thread_state",g);b==null||b.addAnnotationBoolean("is_mi_thread_requested",d("MAWVerifyThreadExistsUtils").isThreadRequested(p));d("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(i,{bool:{during_mic:d("MAWMIC").duringMIC(),is_thread_requested:d("MAWVerifyThreadExistsUtils").isThreadRequested(p),ls_sync_has_ended:d("LSPlatformLsInitLog").LsSync.hasEnded(),maw_init_completed:d("MAWInit").MAWInitState.isCompleted()}});d("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(i,"enqueue_by_thread_key_timeout");m.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Took longer than "," ms to execute: "," in threadState: "," for threadKey: ",", onActThreadReady"])),o,f,g,p);e(g)},o);j.push({callback:b,description:f,telemetryInstanceKey:i,threadState:g,timeoutId:q});n.set(p,j)}function b(a,b,c,e){if(a==null&&b==null)return;var f=a!=null?b!=null?"both":"clientThreadKey":"authoritativeThreadKey";a=a==null?0:(a=(a=n.get(a))==null?void 0:a.length)!=null?a:0;b=b==null?0:(b=(b=n.get(b))==null?void 0:b.length)!=null?b:0;d("MAWThreadMappingQPL").addAnnotations({int:{authorativeThreadKeyCallbacksNum:b,clientThreadKeyCallbacksNum:a},string:{flushBasedOnKey:f,flushReason:e}},c);d("MAWThreadMappingQPL").addPoint("flush_awaiting_callbacks",c)}async function e(a,b,e,f){var g=(k||(k=d("I64"))).to_string(a),h=n.get(g);if(h==null||h.length===0)return;while(h.length!==0){var l=h.shift();if(l==null)continue;var o=l.callback,p=l.description,q=l.telemetryInstanceKey,r=l.threadState;l=l.timeoutId;d("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(q,"enqueue_by_thread_key_end");d("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(q,{string:{caller_identifier:e,processed_based_on_key:f}});try{m.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Executing queued "," for threadKey: ",""])),p,g),d("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(q),await o(a,b),c("clearTimeout")(l)}catch(a){c("clearTimeout")(l),d("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(q,"process_queue_on_act_thread_ready_failure"),m.catching(c("getErrorSafe")(a)).MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Error executing callback on ACT thread ready: ",", original threadState: ",", threadKey: ",""])),p,r,g)}}n.delete(g)}g.enqueueByThreadKey=a;g.logOnFlushQueue=b;g.processQueueOnActThreadReady=e}),98);
__d("MAWOneTimeCodeGating",["gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("1910")&&c("justknobx")._("1601")}g.isOneTimeCodeEnabled=a}),98);
__d("hasDefaultThreadOneToOneCapabilityDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("hasDefaultThreadOneToOneCapability").__setRef("hasDefaultThreadOneToOneCapabilityDeferred");g["default"]=a}),98);
__d("useCometMessengerhasDefaultThreadOneToOneCapability",["FBLogger","hasDefaultThreadOneToOneCapabilityDeferred","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a,b){var e=d("react-compiler-runtime").c(7),f=j(!1),g=f[0],h=f[1];e[0]!==a||e[1]!==b?(f=function(){c("hasDefaultThreadOneToOneCapabilityDeferred").load().then(function(c){b==null?h(!1):c(b,a).then(function(a){h(a)})["catch"](l)})["catch"](k)},e[0]=a,e[1]=b,e[2]=f):f=e[2];var m;e[3]!==a||e[4]!==g||e[5]!==b?(m=[a,g,b],e[3]=a,e[4]=g,e[5]=b,e[6]=m):m=e[6];i(f,m);return g}function k(a){c("FBLogger")("messenger_web").warn("Error loading hasDefaultThreadOneToOneCapability. %s",a)}function l(){}g["default"]=a}),98);
__d("MAWThreadCutover",["I64","LSAuthorityLevel","LSContactBitOffset","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWPActor.react","MWPreloadableQueries","ReQL","ReQLSuspense","WAJids","react-compiler-runtime","useCometMessengerhasDefaultThreadOneToOneCapability","useMAWCanThreadBeCutoverOnDemand","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){var e=(j||(j=c("useReStore")))(),f=u(a);e=c("useCometMessengerhasDefaultThreadOneToOneCapability")(e,a);a=b!=null&&d("LSMessagingThreadTypeUtil").isGroup(b);return a?!0:f||e}async function b(a){return await C(a)!=null}function k(a){var b=d("react-compiler-runtime").c(4),e=(j||(j=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(){return a!=null?d("MWPreloadableQueries").getCutoverThreadByThreadKey(e,a):d("ReQL").empty()},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);return d("ReQLSuspense").useFirst(g,h,f.id+":62")!=null}function l(a){var b,e=(j||(j=c("useReStore")))();b=(b=d("ReQLSuspense").useFirst(function(){return a!=null?d("MWPreloadableQueries").getCutoverThreadByThreadKey(e,a):d("ReQL").empty()},[e,a],f.id+":74"))==null?void 0:b.showOpenMessageHistory;return b===!1}function e(a){a=t(a);return l(a)}function m(a,b){return d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).getKeyRange(b)}function n(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).filter(function(a){return(h||(h=d("I64"))).equal(a.armadilloThreadId,b)})}function o(a){var b=d("react-compiler-runtime").c(8),e=(j||(j=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(){return a==null?d("ReQL").empty():m(e,a)},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);var i=d("ReQLSuspense").useFirst(g,h,f.id+":112");b[4]!==e||b[5]!==i?(g=function(){return i==null?d("ReQL").empty():n(e,i.jid)},h=[e,i],b[4]=e,b[5]=i,b[6]=g,b[7]=h):(g=b[6],h=b[7]);return d("ReQLSuspense").useFirst(g,h,f.id+":120")}function p(a,b){return d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.openThreadId)}function q(a){a=r(a);if(a==null||(h||(h=d("I64"))).lt(a.authorityLevel,(h||(h=d("I64"))).of_int32(c("LSAuthorityLevel").SERVER_PARTIAL)))return;return a}function r(a){var b=d("react-compiler-runtime").c(4),e=(j||(j=c("useReStore")))(),g=o(a),h;b[0]!==g||b[1]!==e?(a=function(){return g==null?d("ReQL").empty():p(e,g)},h=[e,g],b[0]=g,b[1]=e,b[2]=a,b[3]=h):(a=b[2],h=b[3]);return d("ReQLSuspense").useFirst(a,h,f.id+":162")}function s(a){var b=d("react-compiler-runtime").c(8),e=(j||(j=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(){return a==null?d("ReQL").empty():m(e,a)},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);g=d("ReQLSuspense").useFirst(g,h,f.id+":174");var i=g==null?void 0:g.jid;b[4]!==e.tables.threads||b[5]!==i?(h=function(){return i!=null?d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(i):d("ReQL").empty()},g=[e.tables.threads,i],b[4]=e.tables.threads,b[5]=i,b[6]=h,b[7]=g):(h=b[6],g=b[7]);b=d("ReQLSuspense").useFirst(h,g,f.id+":183");h=c("useMAWCanThreadBeCutoverOnDemand")(i);return h?b:void 0}function t(a){a=o(a);if(a!=null)return a.openThreadId}function u(a){return o(a)!=null}function v(a,b){b=d("WAJids").threadIdForChatJid(b);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange((h||(h=d("I64"))).of_string(b))).then(function(a){return a!=null})}function w(){var a=d("react-compiler-runtime").c(3),b=(j||(j=c("useReStore")))(),e=d("MWPActor.react").useActor();if(a[0]!==e||a[1]!==b.tables.contacts){var g=d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(e),f.id+":223");g=g!=null&&((g=d("LSContactBitOffset").has(75,g))!=null?g:!1);a[0]=e;a[1]=b.tables.contacts;a[2]=g}else g=a[2];return g}function x(){var a=d("react-compiler-runtime").c(4),b=(j||(j=c("useReStore")))(),e;a[0]!==b.tables.experiences_shared_state?(e=function(){return d("ReQL").fromTableAscending(b.tables.experiences_shared_state).getKeyRange(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY)},a[0]=b.tables.experiences_shared_state,a[1]=e):e=a[1];var g;a[2]!==b?(g=[b],a[2]=b,a[3]=g):g=a[3];a=d("ReQLSuspense").useFirst(e,g,f.id+":238");e=d("MWEncryptedBackupsSharedState").getEntryValue({db:b,sharedStateRow:a,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY});return e!=null}function y(a){var b=d("react-compiler-runtime").c(7),e=(j||(j=c("useReStore")))(),g;b[0]!==a?(g=a!=null?(h||(h=d("I64"))).of_string(a):void 0,b[0]=a,b[1]=g):g=b[1];var i=g,l=k(i);b[2]!==e||b[3]!==l||b[4]!==i?(a=function(){if(l&&i!=null)return d("ReQL").fromTableAscending(e.tables.mi_act_mapping_table).filter(function(a){return(h||(h=d("I64"))).equal(a.jid,i)}).map(z);else return d("ReQL").empty()},g=[e,i,l],b[2]=e,b[3]=l,b[4]=i,b[5]=a,b[6]=g):(a=b[5],g=b[6]);return d("ReQLSuspense").useFirst(a,g,f.id+":259")}function z(a){return(h||(h=d("I64"))).to_string(a.serverThreadKey)}function A(){return!0}function B(a){var b=d("react-compiler-runtime").c(8),e=(j||(j=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(){if(a!=null)return d("MWPreloadableQueries").getCutoverThreadByThreadKey(e,a);else return d("ReQL").empty()},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);g=d("ReQLSuspense").useFirst(g,h,f.id+":286");var i=g==null?void 0:g.armadilloThreadId;b[4]!==e.tables.mi_act_mapping_table||b[5]!==i?(h=function(){if(i!=null)return d("ReQL").fromTableAscending(e.tables.mi_act_mapping_table.index("jid")).getKeyRange(i);else return d("ReQL").empty()},g=[i,e.tables.mi_act_mapping_table],b[4]=e.tables.mi_act_mapping_table,b[5]=i,b[6]=h,b[7]=g):(h=b[6],g=b[7]);b=d("ReQLSuspense").useFirst(h,g,f.id+":297");return b==null?void 0:b.serverThreadKey}async function C(a){var b=await (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).getKeyRange(a));if(c==null)return void 0;a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.cutover_threads).filter(function(a){return(h||(h=d("I64"))).equal(a.armadilloThreadId,c.jid)}));return a}g.useShouldHideE2eeAttribution=a;g.isCutoverThreadKey=b;g.useIsCutoverOpenThread=k;g.useIsDualThreadCutoverOpenThread=l;g.useIsDualThreadCutoverSecureThread=e;g.getMiActMappings=m;g.getCutoverThreadsByJid=n;g.useGetCutoverMapping=o;g.getThreadByCutoverThread=p;g.useOpenThreadIfExistsFromCutoverThread=q;g.useCutoverOpenThread=r;g.useODCutoverEligibleOpenOneToOneThread=s;g.useGetCutoverOpenThreadKey=t;g.useIsCutoverSecureThread=u;g.isCutoverSecureThreadFromChatJid=v;g.useIsCurrentUserCutoverUser=w;g.useGetHasUserRestoredBefore=x;g.useGetCutoverSecureThreadKey=y;g.useSupportedCutoverEnvironment=A;g.useCutoverSecureThreadKeyForOpenThreadKey=B;g.getCutoverThreadBySecureThreadKey=C}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(12),e=(h||(h=c("useReStore")))(),g,i;b[0]!==e||b[1]!==a?(g=function(){return a!=null?d("ReQL").fromTableAscending(e.tables.contacts,d("LSContactBitOffset").contactCapabilityFields).getKeyRange(a):d("ReQL").empty()},i=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=i):(g=b[2],i=b[3]);g=d("ReQLSuspense").useFirst(g,i,f.id+":34");b[4]!==g?(i=g!=null&&d("LSContactBitOffset").has(76,g),b[4]=g,b[5]=i):i=b[5];g=i;var j;b[6]!==e||b[7]!==a?(i=function(){return a!=null?d("ReQL").fromTableAscending(e.tables.threads,["threadType"]).getKeyRange(a):d("ReQL").empty()},j=[e,a],b[6]=e,b[7]=a,b[8]=i,b[9]=j):(i=b[8],j=b[9]);i=d("ReQLSuspense").useFirst(i,j,f.id+":53");b[10]!==i?(j=i?d("LSMessagingThreadTypeUtil").isOpenOneToOne(i.threadType):!1,b[10]=i,b[11]=j):j=b[11];i=j;b=((j=(b=d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(a):d("ReQL").empty()},[e,a],f.id+":67"))==null?void 0:b.minMessageId)!=null?j:"")==="";j=d("MAWThreadCutover").useIsCutoverOpenThread(a);var k=d("MAWThreadCutover").useIsCutoverSecureThread(a);j=j||k;return g&&i&&!b&&!j}g["default"]=a}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=d("I64"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d("WATimeUtils").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(a));return i(a)}return(h||(h=d("I64"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d("WATimeUtils").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(a));return d("WATimeUtils").castToMillisTime(a*1e3)}return a}f=(h||(h=d("I64"))).of_string("9999999999999");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID());if((h||(h=c("ExecutionEnvironment"))).isInWorker){var b=d("WAGlobals").getMyUserJid();d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:b===a?"same":"different"});return b}return a}g.getMyUserJid=a}),98);
__d("MWGetOtherContactOrSelf",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,c){a=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(c.tables.participants).getKeyRange(a));if(a.length===1){var e=a[0];return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.contacts).getKeyRange(e.contactId))}if(a.length>2)return;e=a.find(function(a){return!(h||(h=d("I64"))).equal(a.contactId,b)});if(e!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.contacts).getKeyRange(e.contactId))}g.getOtherContactOrSelf=a}),98);
__d("WADbContact",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;f.NON_CONTACT=a;f.ONE_WAY_CONTACT=b;f.REVERSED_ONE_WAY_CONTACT=c;f.TWO_WAY_CONTACT=d}),66);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";var g=/^[0-9A-Za-z-]{1,32}$/;function a(a){return a}function b(a){return g.test(a)?a:null}f.toStanzaId=a;f.validateCallId=b}),66);
__d("hasDefaultThreadOneToOneCapability",["FBLogger","LSContactBitOffset","MAWDefaultE2eeOneToOneEligibility","MWGetOtherContactOrSelf","ReQL"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b){if(a==null)return!1;var e=await d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(b.tables._user_info).map(function(a){return a.facebookUserId})),f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(e));if(f==null){c("FBLogger")("messenger_search").warn("Error fetching viewer details");return!1}f=d("LSContactBitOffset").has(80,f);if(!f)return!1;f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a));a=await d("MWGetOtherContactOrSelf").getOtherContactOrSelf(a,e,b);e=a!=null?a:f;return d("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:e})}g.default=a}),98);
__d("isTlcSearchEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("135")===!0}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("ACSCipherSuiteModule",[],(function(a,b,c,d,e,f){"use strict";b={hash:"SHA-512",name:"HMAC"};c={curveName:"RISTRETTO",macAlgorithm:b,value:1};var g=new Map([[c.value,c]]);function a(a){return g.has(a)?g.get(a):null}f.VOPRF_RISTRETTO_HMACSHA512=c;f.getACSCipherSuiteByValue=a}),66);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h(a,b).then(function(a){return j(a,c)})}function h(a,b){return d("XPlatReactCrypto").subtleImportKey("raw",b,a,!1,["sign"]).then(function(b){return{algo:a,key:b}})}function i(a){return typeof a.hash==="string"?a.hash:a.hash.name}function j(a,b){var c=a.algo;a=a.key;c={hash:i(c),name:"HMAC"};return d("XPlatReactCrypto").subtleSign(c,a,b).then(function(a){return new Uint8Array(a)})}g.hmac=a}),98);
__d("EBEpochChangeListener",["EBIsEbEnabled","EBIsEbEnabledSubscriber","ReQL","WAPubSub","err"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=d("WAPubSub").simplePubSub(),this.$3=a}var b=a.prototype;b.initialize=async function(){var a=this;await d("EBIsEbEnabled").isEbEnabledLS(this.$3.tables)&&this.$4(this.$3);await d("EBIsEbEnabledSubscriber").isEbEnabledSubscriber().then(function(b){b.subscribe(function(b){b?a.$4(a.$3):a.$2==null||a.$2()})})};b.$4=function(a){var b=this;this.$2==null&&(this.$2=d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_epochs).subscribe(function(a,c){b.$1.publish(c)}));return this.$2};b.subscribe=function(a){return this.$1.subscribe(a)};return a}(),i;async function a(a){if(i!=null)return Promise.resolve();i=new h(a);await i.initialize()}function b(a){if(i==null)throw c("err")("EBEpochChangeListener is not initialized");return i.subscribe(a)}g.initEBEpochChangeListener=a;g.subscribeToEpochChanges=b}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]);a=function(){function a(){}var b=a.prototype;b.handle=function(a){i.debug("Running default reenrollment trigger handler for reason: "+(h||(h=d("LSIntEnum"))).toNumber(a.deviceReenrollmentReason));for(a of c("MWEncryptedBackupsLocalStorageEntryEnum").members())i.debug("Clearing local storage key: "+a),a!==c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&d("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(a)};return a}();g.DefaultEBReenrollmentTriggerHandler=a}),98);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){function a(a){this.$1=new Map(),this.$4=new(d("EBReenrollmentTriggerHandler").DefaultEBReenrollmentTriggerHandler)(),this.$2=a,this.$5()}var b=a.prototype;b.$5=function(){var a=this;this.$3==null&&(this.$3=d("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(b,e){if(e.operation==="add"||e.operation==="put"){(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");b=a.getDefaultHandler();if(e.value.deviceReenrollmentReason!=null){var g;b=(g=a.$1.get((i||(i=d("LSIntEnum"))).unwrapIntEnum(e.value.deviceReenrollmentReason)))!=null?g:b}b.handle(e.value);c("promiseDone")(a.$2.runInTransaction(function(a){return a.encrypted_backups_reenrollment_trigger["delete"](e.value.pk)},"readwrite",void 0,void 0,f.id+":77"))}}));return this.$3};b.attachHandler=function(a,b){this.$1.set(a,b)};b.getDefaultHandler=function(){return this.$4};return a}(),k;function l(a){if(k!=null)return k;k=new j(a);return k}function a(a){k==null&&l(a);return k}g.initEBReenrollmentTriggerListener=l;g.getEBReenrollmentTriggerListener_TESTING_ONLY=a}),98);
__d("EBWorkerAddDeviceUtils",["EBDB","EBDBEbsmApi","EBSMProperties","I64","LSAuthorityLevel","LSIntEnum","LSJSEBInMemoryStorage","LSMetadata","LSReStoreWrapper","MAWLSVaultingHooks","ReQL","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a,b){var e=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.secure_encrypted_backups_client_state));if(e!=null)return"dest_table_not_empty";e={clearEbStores:d("EBDB").clearEbStores,flushEBSMtoEBDB:d("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:d("EBDBEbsmApi").rehydrateEBSMFromEBDB,updateEBSM:function(){return Promise.resolve()}};e=await d("LSJSEBInMemoryStorage").makeReStorePersistence(e);if(e==null)throw c("err")("persistence is null");e=d("LSReStoreWrapper").createLSReStore(e,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);var g=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_epochs));return g.filter(function(a){return(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}).length===0?"source_epoch_not_authoritative":e.runInTransaction(function(c){return b.runInTransaction(async function(b){var d=await Promise.all(a.map(async function(a){var d=c[a];d=d.entries(new WeakMap());var e=await d.next();if(e.done)return"source_table_empty";a=b[a];while(!e.done){var f=e.value,g=f[0];f=f[1];await a.upsert(g,f);e=await d.next()}return"success"}));d=new Set(d);if(d.has("source_table_empty"))return"source_table_empty";else if(d.has("success")&&d.size===1)return"success";return"fail"},"readwrite",void 0,void 0,f.id+":91")},"readonly",void 0,void 0,f.id+":89")}async function b(a){await a.runInTransaction(function(a){return Promise.all(c("EBSMProperties").persistedTablesArray.map(async function(b){b=a[b];var c=b.entries(new WeakMap()),d=await c.next();while(!d.done)await b.delete.apply(b,d.value[0]),d=await c.next()}))},"readwrite",void 0,void 0,f.id+":132")}g.copyEBStateTablesFromMainthreadToWorker=a;g.clearLSEBSMTables=b}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function a(a){if(!c("MetaConfig")._("62"))return(h||(h=b("Promise"))).resolve(function(){});else return i.load().then(function(b){return b.flushExpiredDataTraces(a)})}g.watchForExpiredTraces=a}),98);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6542"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6542")}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:1232")!=null&&b("cr:1232").shutdownAndClear()}function d(a,d,e,f,g,h){return function(i){if(b("cr:1232")!=null)return b("cr:1232").getInstance(i,a,d,e,f,g,h);else return c("FBMqttChannel")}}g.shutdownAndClear=a;g.getInstance=d}),98);
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(a){return b.forEach(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(115).add({statusId:b.i64.cast([0,0]),timestampMs:c[0],errorShouldBeShown:a[0]})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSConnectivityTruncateTableAndSetShowErrorStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return d[0]=c.i64.of_float(Date.now()),c.db.table(114).add({statusId:void 0,timestampMs:d[0],internetConnectionState:a[0]})},function(d){return c.storedProcedure(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],c.i64.cast([0,1])))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSConnectivityDeleteAllAndInsertConnectivityStatusStoredProcedure";a.__tables__=["connectivity_status"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDeleteAllAndInsertConnectivityStatus"),e.internetConnectionState);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=b("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),l=d("MessengerLogHistory").getInstance("client_init"),m=c("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",n={c:{},d:c("MqttWebDeviceID").clientID,s:k.NOT_SYNCING,u:c("pageID")};function o(a){function b(a){d("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(a),window.location.hostname)}var e=c("Cookie").get(m);if(e==null){var f;b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f));return}f=JSON.parse(e);if(f.u==null){b(babelHelpers["extends"]({},f,(e={},e[d("CurrentMessengerUser").getIDorEIMU()]=a,e)))}else{b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f))}}function a(){c("Cookie").clear(m)}function p(a){if(typeof a!=="object")return null;if(a==null)return null;var b=a.c,c=a.d,d=a.s;a=a.u;d=typeof d==="string"?k.cast(d):null;b=typeof b==="object"&&b!=null?Object.entries(b).reduce(function(a,b){var c=b[0];b=b[1];if(a==null||typeof b!=="string")return null;a[c]=b;return a},{}):null;if(typeof c!=="string")return null;if(d==null)return null;if(b==null)return null;return typeof a!=="string"?null:{c:b,d:c,s:d,u:a}}function q(){var a=c("Cookie").get(m);if(c("isStringNullOrEmpty")(a))return n;a=JSON.parse(a);var b=d("CurrentMessengerUser").getIDorEIMU(),e=p(a);a=typeof a==="object"&&a!=null?p(a[b]):null;return(b=a!=null?a:e)!=null?b:n}function r(a){var b=q();if(b.u!==c("pageID"))return;var e={};a.forEach(function(a){a[0];a=a[1];var b=a.currentCursor;a=a.groupId;b!=null&&(e[(i||(i=d("I64"))).to_string(a)]=b)});l.debug("Updated sync cookie to set syncing=false, saving latest cursors");o(babelHelpers["extends"]({},b,{c:e,s:k.NOT_SYNCING}))}var s=[1,2,d("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function e(a){var b=d("SortedAsyncIterable").toArray(d("ReQL").union.apply(void 0,s.map(function(b){return b==null?d("ReQL").empty():d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(b))})));if((h||(h=c("isPromise")))(b)){c("promiseDone")(b.then(function(a){r(a)}));return}r(b)}function f(){try{var a=q();l.debug("Updated sync cookie to set syncing=true");o(babelHelpers["extends"]({},a,{s:k.SYNCING,u:c("pageID")}))}catch(a){c("FBLogger")("messenger_web").catching(a).warn("[LS] Failed to sync cookie")}}g.Status=k;g.DEFAULT_COOKIE=n;g.clear=a;g.get=q;g.syncBeforeUnload=e;g.setSyncing=f}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){if(c("gkx")("21118"))return c("MqttWebDeviceID").clientID;else return c("ChannelClientID").getID()}b=h();function a(a){a==null&&c("FBLogger")("messenger_web").info("Missed provider type for deviceId");return a==="persisted"?d("LSCookie").get().d:h()}g.deviceId=b;g.getDeviceIdForProviderType=a}),98);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("emptyFunction")}function d(){return(h||(h=b("Promise"))).resolve()}e={cleanup:c("emptyFunction"),logEvent:function(a){},onConnectionStatusChange:a,onReconnect:a,publish:d,subscribe:a};g["default"]=e}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(!c("justknobx")._("3005"))return void 0;var a=c("isMessengerPWA")();if(!a)return void 0;a=(a=new URL(window.location.href).searchParams.get("__pwa"))!=null?a:"1.0.0";return a}g["default"]=a}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","LSStreamGroupRef","MessengerPWAVersionForUserAgent","NetworkStatus","Promise","QuickPerformanceLogger","Random","clearTimeout","promiseDone","qex","qpl","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("qpl")._(701246226,"1285"),m=d("LSMailboxInitialSyncCursor").isWebApp&&((e=c("qex")._("2093"))!=null?e:!1);f="LSPlatformRealtimeTransport.NotConnected";var n="LSPlatformRealtimeTransport.Timeout";function o(a){var b=new Map();return{getAll:function(){return Array.from(b.values())},getOrStart:function(c){var d=c.toString(),e=b.get(d);e==null&&(e=a(c),b.set(d,e));return e}}}function p(a){}function a(a,e,f){var g=new Map(),q={contents:p},r=new Set(),s=new Map(),t=[],u=o(function(b){b=a(b,f);t.push(b.subscribe(function(a){var b=JSON.parse(a),e=d("LSDynamicDependencies").downloadBootloaderDependencies(b.sp,b.nop,b.ntop);a=b.request_id;var f;if(a!=null){var h=g.get(a);if(h==null)f=!1;else{c("clearTimeout")(h.timeoutId);h.resolve({downloadTask:e,payload:b,type:"taskresponse"});g["delete"](a);a=h.instanceKey;(k||(k=c("QuickPerformanceLogger"))).markerPoint(l,"response",{instanceKey:a});k.markerAnnotate(l,{string:{isWebApp:String(d("LSMailboxInitialSyncCursor").isWebApp),networkStatus:String(c("NetworkStatus").isOnline()),streamGroupId:d("LSStreamGroupRef").getTransportId(),streamGroupStatus:d("LSStreamGroupRef").getTransportStatus(),syncOverDGW:String(d("LSMailboxInitialSyncCursor").syncOverDGW)}},{instanceKey:a});k.markerEnd(l,2,a);f=!0}}else f=!1;if(!f){Array.from(s.entries()).forEach(function(a){return a[1](e,b)});return}}));t.push(b.onReconnect(function(a){return q.contents(a)}));t.push(b.onConnectionStatusChange(function(a){r.forEach(function(b){return b(a)})}));return b});m?(u.getOrStart((i||(i=d("LSIntEnum"))).unwrapIntEnum((j||(j=d("I64"))).of_int32(3))),u.getOrStart(i.unwrapIntEnum(j.of_int32(1)))):u.getOrStart((i||(i=d("LSIntEnum"))).unwrapIntEnum(d("LSMailboxInitialSyncCursor").syncChannel));return{cleanup:function(){t.forEach(function(a){return a()}),u.getAll().forEach(function(a){return a.cleanup()})},logEvent:function(a){u.getAll().forEach(function(b){return b.logEvent(a)})},onConnectionStatusChange:function(a){r.add(a);return function(){r["delete"](a)}},onReconnect:function(a){q.contents=a;return function(){q.contents=p}},publish:function(a){var f=a.databaseType,m=a.payload,o=a.queueName,p=a.requestId,q=a.syncChannel,r=a.type_;return new(h||(h=b("Promise")))(function(a,b){var h=u.getOrStart((i||(i=d("LSIntEnum"))).unwrapIntEnum(q));if((j||(j=d("I64"))).equal(r,(i||(i=d("LSIntEnum"))).ofNumber(3))){var s=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);(k||(k=c("QuickPerformanceLogger"))).markerStart(l,s);k.markerPoint(l,"publish",{instanceKey:s});var t=c("setTimeout")(function(){h.logEvent("Timeout");var a=g.get(p);(k||(k=c("QuickPerformanceLogger"))).markerPoint(l,"timeout",{instanceKey:s});k.markerEnd(l,3,s);a!=null&&(g["delete"](p),a.reject({RE_EXN_ID:n}));return b({RE_EXN_ID:n})},3e4);g.set(p,{instanceKey:s,queueName:o,reject:b,resolve:a,timeoutId:t,timestamp:Date.now()})}t=c("MessengerPWAVersionForUserAgent")();c("promiseDone")(h.publish(d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({app_id:e,payload:m},t!=null?{pwa_version:t}:{},{request_id:p,type:r}))),r,f),function(){if(!(j||(j=d("I64"))).equal(r,(i||(i=d("LSIntEnum"))).ofNumber(3)))return a({type:"noresponseexpected"})},function(a){b(a)})})},subscribeToNonTaskResponses:function(a){var b={};s.set(b,a);return function(){s["delete"](b)}}}}g.NotConnected=f;g.Timeout=n;g.LSPlatformRealtimeTransport=a}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return!(h||(h=c("ExecutionEnvironment"))).canUseDOM&&!(h||(h=c("ExecutionEnvironment"))).isInWorker}g["default"]=a}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:a}),qos:1,topic:"/ls_app_settings"}]}function l(a){var e={contents:a.getConnectionState()},f={contents:function(){}},g={contents:new(j||(j=b("Promise")))(function(a,b){f.contents=a})},k={onMQTTStateChanged:function(a){a==="Connected"?f.contents():a==="Disconnected"&&e.contents==="Connected"&&(g.contents=new(j||(j=b("Promise")))(function(a,b){f.contents=a})),e.contents=a}};e.contents==="Connected"&&f.contents();a.subscribeChannelEvents(k);return[function(){a.unsubscribeChannelEvents(k)},function(e,f,k){return g.contents.then(function(){return new(j||(j=b("Promise")))(function(b,g){c("promiseDone")(a.publish("/ls_req",e,{listener:{onEvent:function(a){if(a==="NOT_CONNECTED")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})}},qos:(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return b()},function(a){if(a.message==="Publish Timed Out")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").Timeout});else return g(a)})})})}]}var m={contents:void 0};function a(a,b,d){if(c("shouldStubUnderlyingTransport")())return c("LSPlatformDefaultUnderlyingApi");var e=d.getInstance(b),f={getPublishMessages:function(){return k(a)}};e.registerExtraConnectPayloadProvider(f);var g={onMQTTStateChanged:function(a){var b=m.contents;if(b!=null)return b(a)}};e.subscribeChannelEvents(g);var h=e.subscribe("/ls_foreground_state",function(){});b=l(e);var i=b[0];b=b[1];return{cleanup:function(){e.unregisterExtraConnectPayloadProvider(f),d.shutdownAndClear(),e.unsubscribeChannelEvents(g),h(),i()},logEvent:function(a){},onConnectionStatusChange:function(a){m.contents=a;return function(){m.contents=void 0}},onReconnect:function(a){var b={contents:e.getConnectionState()},c={contents:b.contents==="Connected"},d={onMQTTStateChanged:function(d){d==="Connected"&&(c.contents&&b.contents!=="Connected"&&a(1),c.contents=!0),b.contents=d}};e.subscribeChannelEvents(d);return function(){e.unsubscribeChannelEvents(d)}},publish:b,subscribe:function(a){return e.subscribe("/ls_resp",function(b){return a(b)})}}}g["default"]=a}),98);
__d("LSDatabaseProviderType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.persistenceTypes)}function g(a){return a.includes("indexeddb")}f.isProviderPersisted=a;f.hasPersistentType=g}),66);
__d("LSSyncStoredProcedureUtils",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;async function i(a,b,c){c=c!=null?(h||(h=d("I64"))).of_float(Date.now()+c):b.minTimeToSyncTimestampMs;await a.pending_tasks.put(babelHelpers.extends({},b,{failureCount:(h||(h=d("I64"))).add(b.failureCount,h.one),minTimeToSyncTimestampMs:c}))}async function a(a,b,c){b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b));if(b==null)return;return i(a,b,c)}async function b(a,b,c){b=await a.network_requests.get(b,c);if(b==null)return;await a.network_requests.put(babelHelpers.extends({},b,{failureCount:(h||(h=d("I64"))).add(b==null?void 0:b.failureCount,h.one)}))}async function c(a,b,c){b=await a.network_requests.get(b,c);if(b==null)return;await a.network_requests.put(babelHelpers.extends({},b,{epochId:void 0,networkTaskIdentifier:void 0}))}g.incrementPendingTaskFailureCount=i;g.incrementPendingTasksTaskFailureCount=a;g.incrementNetworkRequestsTaskFailureCount=b;g.closeEpoch=c}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,c){await d("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(a,b,c),await d("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(a,b,(h||(h=d("I64"))).neg_one),await d("LSSyncStoredProcedureUtils").closeEpoch(a,b,h.neg_one)}g.default=a}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b){var c=await a.network_requests.get(b,(h||(h=d("I64"))).neg_one);if(c==null||c.epochId==null)return;await a.network_requests.delete(b,h.neg_one)}g.default=a}),98);
__d("LSPlatformRequestId",[],(function(a,b,c,d,e,f){"use strict";var g=4;function a(){var a=g;g+=1;return a}b={generate:a};f["default"]=b}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","justknobx","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.pow(2,31)-1;a=function(){function a(){this.requests=new Map()}var b=a.prototype;b.schedule=function(a,b,d){var e=this.requests.get(b);e!=null&&c("clearTimeout")(e);e=c("justknobx")._("4435")?Math.min(d,h):d;this.requests.set(b,c("setTimeout")(a,e))};b.cleanup=function(){this.requests.forEach(function(a){return c("clearTimeout")(a)})};return a}();g["default"]=a}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","clearTimeout","nullthrows","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h="executeFirstBlockForSyncTransaction";a=function(){function a(a){this.eval=a,this.currentlyRunning=new Map()}var b=a.prototype;b.evalWhenReady=async function(a,b){var d;try{await a,d=c("setTimeout")(function(){c("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),await this.eval(b)}finally{c("clearTimeout")(d)}};b.$1=function(a){var b=this.currentlyRunning.get(a);b==null&&(b=Promise.resolve(),this.currentlyRunning.set(a,b));return b};a.getSyncScriptType=function(a){var b;if(!((b=a.sp)!=null&&b.includes(h)))return{status:"non-transactional"};b=function(){try{var b;return(b=JSON.parse(a.syncScript))==null?void 0:b.step}catch(a){return null}}();if(!Array.isArray(b)){c("FBLogger")("messenger_web").warn("Sync payload appears invalid.");return{status:"non-transactional"}}b=[b];while(b.length){var d=c("nullthrows")(b.shift());for(d of d)if(Array.isArray(d)){if(d[0]===5&&d[1]===h&&Array.isArray(d[2]))return{status:"transactional",syncGroup:parseInt(d[2][1],10)};b.push(d)}}return{status:"err"}};b.maybeEvalInOrderReceived=function(b,d){var e,f=this,g=a.getSyncScriptType(d),h=0;switch(g.status){case"err":c("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=d.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(b,d);case"transactional":h=g.syncGroup;break}e=this.$1(h);g=e.then(function(){return f.evalWhenReady(b,babelHelpers.extends({},d,{priority:"sync_script"}))}).catch(function(a){f.currentlyRunning.delete(h);throw a});this.currentlyRunning.set(h,g);return g};return a}();g.default=a}),98);
__d("LSPlatformTaskSyncGroupId",[],(function(a,b,c,d,e,f){"use strict";a=-1;b=a;f["default"]=b}),66);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return c[0]=b.createArray(),b.forEach(b.filter(b.db.table(5).fetch(),function(b){return b.queueName===a[0]}),function(a){a=a.item;return c[3]=new b.Map(),c[3].set("label",a.context),c[3].set("payload",a.taskValue),c[3].set("queue_name",a.queueName),c[3].set("task_id",a.taskId),c[3].set("failure_count",b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))?void 0:b.i64.cast([0,0])),c[4]=(c[0].push(c[3]),c[0])})},function(e){return c[1]=new b.Map(),c[1].set("tasks",c[0]),c[1].set("epoch_id",void 0),c[2]=new b.Map(),c[2].set("queue_name",a[0]),c[2].set("next_sync_ms",void 0),c[2].set("work_item_type",b.i64.cast([0,5])),c[2].set("network_payload",c[1]),c[2].set("http_url_override",void 0),c[2].set("skip_realtime_gateway",!1),d[0]=c[2]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreBeginHandlingFireForgetTasksForQueueStoredProcedure";a.__tables__=["pending_fire_and_forget_tasks"];e.exports=a}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBeginHandlingFireForgetTasksForQueue"),e.queueName);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSForceTaskExecutionImmediately",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,c[1]=b.i64.of_float(Date.now()),b.i64.lt(c[1],e.minTimeToSyncTimestampMs)?b.forEach(b.db.table(2).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({minTimeToSyncTimestampMs:b.i64.cast([0,0]),failureCount:b.i64.add(a.failureCount,b.i64.cast([0,1]))})}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreForceTaskExecutionImmediatelyStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSRemoveUsedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(309).fetch(),function(a){return b.i64.le(a.redeemLimit,b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveUsedTokensStoredProcedure";a.__tables__=["secure_acs_tokens"];e.exports=a}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),d[1]=c.createArray(),c.count(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]})).then(function(a){return d[2]=a})},function(b){return c.forEach(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]}),function(a){a=a.item;return d[7]=a.configId,c.i64.gt(d[0],a.expirationTimestampMs)?c.forEach(c.db.table(307).fetch([[[d[7]]]]),function(a){return a["delete"]()}):c.resolve(d[8]=(d[1].push(d[7]),d[1]))})},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_int32(d[1].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(a){return d[7]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[1],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.count(c.filter(c.db.table(309).fetch(),function(a){return a.configId===d[8]})).then(function(a){return d[10]=a})},function(a){return d[3]=c.i64.add(d[10],d[3]),c.storedProcedure(b("LSRemoveBlindedTokens"),d[8])}])}):c.resolve()},function(a){return c.i64.gt(d[2],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(d[1].length),d[5]=c.i64.ge(d[7],c.i64.cast([0,1]))):d[5]=void 0,d[5]!==void 0?(d[5]?(c.i64.gt(d[3],c.i64.cast([0,0]))?d[8]=c.i64.cast([0,3]):d[8]=c.i64.cast([0,2]),d[7]=d[8]):d[7]=c.i64.cast([0,1]),d[6]=d[7]):d[6]=c.i64.cast([0,0]),a=[d[6],d[3]],e[0]=a[0],e[1]=a[1]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsGetCurrentTokenPoolStateStoredProcedure";a.__tables__=["secure_acs_configurations","secure_acs_tokens"];e.exports=a}),null);
__d("LSVoprfBlind.nop",["XPlatReactVoprf"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c){a=await d("XPlatReactVoprf").loadXPlatReactVoprf();b=a.voprfInstance;a=b.voprfInfo;var e=b.voprfWasm;try{e=e.blind(a,new Uint8Array(c));return[e.blindedElement.buffer,e.blindingFactor.buffer]}catch(a){throw a}finally{d("XPlatReactVoprf").freeVoprfInstance(b)}};a.__nop_name__="LSVoprfBlind";g.default=a}),98);
__d("LSVoprfCreateNonce.nop",["LSSynchronousPromise","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h=32;a=function(a,b){a=h;b=new Uint8Array(a);d("XPlatReactCrypto").getRandomValues(b);return d("LSSynchronousPromise").makeSynchronousPromise([b.buffer])};a.__nop_name__="LSVoprfCreateNonce";g["default"]=a}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.db.table(310).fetch([[[a[0]]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?(function(a){c.logger(a).mustfix(a)}("Request context for the passed task_id was not found"),f=[void 0,void 0,void 0],d[0]=f[0],d[1]=f[1],d[2]=f[2]):(e=a.item,c.sequence([function(a){return d[9]=e.projectName,d[10]=e.maxClientTokenPoolSize,c.storedProcedure(b("LSGetCurrentTokenPoolState"),d[9]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(a){return c.i64.eq(d[4],c.i64.cast([0,0]))||c.i64.eq(d[4],c.i64.cast([0,1]))?c.resolve((d[11]=new c.Map(),d[11].set("project_name",d[9]),d[12]=c.toJSON(d[11]),a=[d[12],c.i64.cast([0,351]),void 0],d[6]=a[0],d[7]=a[1],d[8]=a[2])):c.sequence([function(a){return d[11]=c.i64.of_float(Date.now()),c.islc(c.sortBy(c.filter(c.db.table(307).fetch(),function(a){return a.projectName===d[9]&&c.i64.gt(a.expirationTimestampMs,d[11])}),[["expirationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?(function(a){c.logger(a).mustfix(a)}("A config for the passed project name was not found"),d[16]=new c.Map(),d[16].set("project_name",d[9]),d[16].set("max_client_token_pool_size",d[10]),d[17]=c.toJSON(d[16]),a=[d[17],c.i64.cast([0,362]),void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2]):(f=e.item,c.sequence([function(a){return d[24]=f.configId,d[16]=f.maxEvals,d[26]=f.tokenPollFrequencyMs,d[25]=f.maxClientTokenPoolSize,d[17]=c.i64.sub(d[10],d[5]),d[23]=c.i64.lt(d[16],d[17])?d[16]:d[17],d[18]=c.createArray(),c.i64.gt(d[23],c.i64.cast([0,0]))?c.loopAsync(d[23],function(a){return d[27]=a,c.sequence([function(a){return c.nativeOperation(b("LSVoprfCreateNonce.nop")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.blobs.neq(d[28],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSVoprfBlind.nop"),d[28]).then(function(a){return a=a,d[29]=a[0],d[30]=a[1],a})},function(a){return c.blobs.neq(d[29],void 0)?c.blobs.neq(d[30],void 0)?c.sequence([function(a){return d[31]=c.i64.cast([-1,4294967295]),c.db.table(308).peekNextAutoIncrementId().then(function(a){return d[31]=a})},function(a){return c.db.table(308).add({tokenId:void 0,blindedNonce:d[29],blindingFactor:d[30],nonce:d[28],configId:d[24]})},function(a){return c.db.table(308).fetch([[[d[31]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[32]=c.i64.cast([-1,4294967295]):(e=b.item,d[32]=e.tokenId)})},function(a){return c.i64.eq(d[32],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.islc(c.db.table(308).fetchDesc([[[{gt:c.i64.cast([0,0])}]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?d[37]=c.i64.cast([-1,4294967295]):(e=b.item,d[37]=e.tokenId)})},function(a){return d[34]=d[37]}]):c.resolve(d[34]=d[32])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[29]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=new c.Map(),d[36].set("id",d[34]),d[36].set("data",d[35]==null?"":d[35]),d[37]=(d[18].push(d[36]),d[18])}]):c.resolve():c.resolve()}]):c.resolve()}])}):c.resolve()},function(a){return d[19]=c.i64.of_int32(d[18].length),c.i64.gt(d[19],c.i64.cast([0,0]))?c.resolve((d[27]=new c.Map(),d[27].set("project_name",d[9]),d[27].set("config_id",d[24]),d[27].set("blinded_nonces",d[18]),d[28]=c.toJSON(d[27]),a=[d[28],c.i64.cast([0,354]),void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2])):c.sequence([function(a){return c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.i64.neq(d[25],void 0)?c.sequence([function(a){return function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",d[9]].join("")),c.storedProcedure(b("LSIssueNextSync"),d[25],d[9],d[26],!1)},function(a){return a=[void 0,void 0,void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[33]=new c.Map(),d[33].set("project_name",d[9]),d[33].set("max_client_token_pool_size",d[10]),d[34]=c.toJSON(d[33]),a=[d[34],c.i64.cast([0,362]),void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2]))},function(a){return a=[d[30],d[31],d[32]],d[27]=a[0],d[28]=a[1],d[29]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[30]=new c.Map(),d[30].set("project_name",d[9]),d[30].set("max_client_token_pool_size",d[10]),d[31]=c.toJSON(d[30]),a=[d[31],c.i64.cast([0,362]),void 0],d[27]=a[0],d[28]=a[1],d[29]=a[2]))},function(a){return a=[d[27],d[28],d[29]],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}])},function(a){return a=[d[20],d[21],d[22]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}])},function(a){return a=[d[6],d[7],d[8]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}]))})},function(a){return a=[d[0],d[1],d[2]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerAcsIssueNextSyncStoredProcedure";a.__tables__=["acs_request_context","secure_acs_configurations","secure_acs_blinded_tokens"];e.exports=a}),null);
__d("LSTaskSerializerDeleteChatHistory",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerDeleteChatHistory: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(a,d){d=a.done;a=a.value;return d?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerDeleteChatHistory: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2]):(a.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,903]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerDeleteChatHistoryStoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,705]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerE2eeMessageIntegrityCheckV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,700]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTaskSerializerE2eeMetadataThreadIntegrityCheckStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,319]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupActionStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),d[3]="LSEncryptedBackupsLoopingUploadPayloadsTable table not found",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] ","",d[3]].join("")),d[2]=c.createArray(),void 0!==void 0?d[10]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",d[3],d[2],c.i64.cast([0,3]))},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',c.i64.cast([0,50043]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["ReQL"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e){b=await d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store).filter(function(a){var b=a.offlineThreadingId;a=a.threadId;return a===c&&e===b}));if(b.length===0)return Promise.resolve([void 0,void 0,!1]);a=b[0];return Promise.resolve([a.messagePayload,a.messageTimestampMs,!1])};a.__nop_name__="LSQueryLocalPersistenceStoreForBackup";g.default=a}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["ReQL"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e,f){b=await d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_supplemental).filter(function(a){var b=a.supplementalKey,d=a.threadId;a=a.toplevelOfflineThreadingId;return d===c&&a===e&&b===f}));return b==null?Promise.resolve([void 0,void 0]):Promise.resolve([b.messagePayload,b.messageTimestampMs])};a.__nop_name__="LSQueryLocalPersistenceStoreSupplementalForBackup";g.default=a}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h=":";a=async function(a,b,e,f){b=await d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(f,e));if(b==null)return Promise.resolve([c("LSVec").ofArray([])]);a=b.tag;return Promise.resolve([c("LSVec").ofArray(a.split(h))])};a.__nop_name__="LSQueryLocalPersistenceStoreTagsForBackup";g.default=a}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],d[12]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[13]=a[0],a})},function(e){return c.blobs.neq(d[10],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[10]).then(function(a){return a=a,d[16]=a[0],a})},function(b){return d[16]!==void 0?(d[13]!==void 0?(d[21]=new c.Map(),d[21].set("message_tags",d[13]),d[22]=new c.Map(),d[26]="message_tags",d[23]=d[21].get(d[26]),d[23]?d[24]=!1:d[24]=!0,d[24]?0:d[22].set(d[26],d[23]),d[25]=c.toJSON(d[22]),d[19]=d[25]):d[19]=void 0,d[20]=new c.Map(),d[20].set("backup_action",a[0]),d[20].set("protobuf_encrypted",d[16]),d[20].set("supplemental_data_encrypted",void 0),d[20].set("timestamp_ms",a[4]),d[20].set("message_tags",d[19]),b=[d[20],void 0],d[17]=b[0],d[18]=b[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,68])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),b=[void 0,d[19]],d[17]=b[0],d[18]=b[1]),b=[d[17],d[18]],d[14]=b[0],d[15]=b[1]}]):c.resolve((d[12]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,70])),d[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[18].set("error_message",""),e=[void 0,d[18]],d[16]=e[0],d[17]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,63])),d[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[18].set("error_message",""),e=[void 0,d[18]],d[16]=e[0],d[17]=e[1]),e=[d[16],d[17]],d[14]=e[0],d[15]=e[1]))},function(a){return a=[d[14],d[15]],d[2]=a[0],d[3]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[14],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[19]=a[0],a})},function(e){return c.blobs.neq(d[19],void 0)?c.sequence([function(a){return d[22]=new c.Map(),d[22].set("sk_ciphertext",d[19]),d[22].set("sk_hash",d[19]),c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[23]=a[0],a})},function(b){return d[23]!==void 0?(d[16]!==void 0?(d[28]=new c.Map(),d[28].set("message_tags",d[16]),d[29]=new c.Map(),d[33]="message_tags",d[30]=d[28].get(d[33]),d[30]?d[31]=!1:d[31]=!0,d[31]?0:d[29].set(d[33],d[30]),d[32]=c.toJSON(d[29]),d[26]=d[32]):d[26]=void 0,d[27]=new c.Map(),d[27].set("backup_action",a[0]),d[27].set("protobuf_encrypted",d[23]),d[27].set("supplemental_data_encrypted",d[22]),d[27].set("timestamp_ms",a[4]),d[27].set("message_tags",d[26]),b=[d[27],void 0],d[24]=b[0],d[25]=b[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,68])),d[26].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[26].set("error_message",""),b=[void 0,d[26]],d[24]=b[0],d[25]=b[1]),b=[d[24],d[25]],d[20]=b[0],d[21]=b[1]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),d[22]=new c.Map(),d[22].set("error_code",c.i64.cast([0,69])),d[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[22].set("error_message",""),e=[void 0,d[22]],d[20]=e[0],d[21]=e[1]))},function(a){return a=[d[20],d[21]],d[17]=a[0],d[18]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,64])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),e=[void 0,d[19]],d[17]=e[0],d[18]=e[1]))},function(a){return a=[d[17],d[18]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,65])),d[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1]))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(d[14]=new c.Map(),d[14].set("backup_action",a[0]),d[14].set("protobuf_encrypted",void 0),d[14].set("supplemental_data_encrypted",void 0),d[14].set("timestamp_ms",a[4]),d[14].set("message_tags",void 0),e=[d[14],void 0],d[12]=e[0],d[13]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([-1,4294967289])),d[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1]),e=[d[12],d[13]],d[10]=e[0],d[11]=e[1]))},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){var e;return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[18]=c.i64.mul(d[1],c.i64.cast([0,1e6])),c.sequence([function(b){return c.db.table(2).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(d[30]=c.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[30],c.i64.cast([0,1e6])),d[18]),void 0],d[22]=f[0],d[23]=f[1],d[24]=f[2],d[25]=f[3],d[26]=f[4],d[27]=f[5],d[28]=f[6]):(e=b.item,d[30]=c.i64.of_float(Date.now()),f=[a[0],e.queueName,e.enqueueTimestampMs,e.priority,e.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[30],c.i64.cast([0,1e6])),d[18]),void 0],d[22]=f[0],d[23]=f[1],d[24]=f[2],d[25]=f[3],d[26]=f[4],d[27]=f[5],d[28]=f[6])})},function(a){return a=[d[22],d[23],d[24],d[25],d[26],d[27],d[28]],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],a}])},function(e){return d[9]=new c.Map(),d[9].set("task_id",d[2]),d[9].set("queue_name",d[3]),d[9].set("enqueue_timestamp_ms",d[4]),d[9].set("priority",d[5]),d[9].set("first_executed_timestamp_ms",d[6]),d[9].set("execution_time_ns",d[7]),d[9].set("echo_encoding_execution_time_ns",d[8]),d[10]=new c.Map(),d[10].set("task_metadata",d[9]),d[10].set("action_type",void 0),d[10].set("content_type",void 0),d[10].set("identifiers",void 0),d[10].set("identifiers_v2",void 0),d[10].set("task_creation_source",void 0),d[10].set("message_payload_source",c.i64.cast([0,2])),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[22]=new c.Map(),d[22].set("error_code",c.i64.cast([0,5])),d[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),d[22].set("error_message",""),g=[void 0,d[22],d[10]],d[11]=g[0],d[12]=g[1],d[13]=g[2]):(f=e.item,c.sequence([function(b){var e;return d[39]=f.actThreadId,d[40]=f.toplevelOfflineThreadingId,d[23]=f.messageTimestampMs,d[22]=new c.Map(),d[22].set("backup_id","openEbUploadGenericBackupId"),d[22].set("act_thread_id",d[39]),d[22].set("server_thread_id",d[39]),d[22].set("timestamp",c.i64.to_string(d[23])),d[22].set("otid",d[40]),d[24]=new c.Map(),d[24].set("backup_id","openEbUploadGenericBackupId"),d[24].set("act_thread_id",d[39]),d[24].set("timestamp",c.i64.to_string(d[23])),d[24].set("otid",d[40]),c.sequence([function(b){return c.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var b=e.done;e=e.value;return b?(d[49]=c.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[49],c.i64.cast([0,1e6])),d[18]),void 0],d[41]=b[0],d[42]=b[1],d[43]=b[2],d[44]=b[3],d[45]=b[4],d[46]=b[5],d[47]=b[6]):(f=e.item,d[49]=c.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,f.priority,f.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[49],c.i64.cast([0,1e6])),d[18]),void 0],d[41]=b[0],d[42]=b[1],d[43]=b[2],d[44]=b[3],d[45]=b[4],d[46]=b[5],d[47]=b[6])})},function(a){return a=[d[41],d[42],d[43],d[44],d[45],d[46],d[47]],d[25]=a[0],d[26]=a[1],d[27]=a[2],d[28]=a[3],d[29]=a[4],d[30]=a[5],d[31]=a[6],a}])},function(a){return d[32]=new c.Map(),d[32].set("task_id",d[25]),d[32].set("queue_name",d[26]),d[32].set("enqueue_timestamp_ms",d[27]),d[32].set("priority",d[28]),d[32].set("first_executed_timestamp_ms",d[29]),d[32].set("execution_time_ns",d[30]),d[32].set("echo_encoding_execution_time_ns",d[31]),d[33]=new c.Map(),d[33].set("task_metadata",d[32]),d[33].set("action_type",void 0),d[33].set("content_type",void 0),d[33].set("identifiers",void 0),d[33].set("identifiers_v2",d[24]),d[33].set("task_creation_source",void 0),d[33].set("message_payload_source",c.i64.cast([0,2])),c.storedProcedure(b("LSLoadUnencryptedProtobufWithInputs"),f.backupAction,d[39],d[40],f.supplementalKey,d[23],d[22]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[34]!==void 0?(d[41]=new c.Map(),d[41].set("unencrypted_protobuf_backup_payload",d[34]),d[41].set("message_identifiers",d[22]),d[41].set("attachment_backup_payload",f.attachmentPayload),d[41].set("sender_id",f.senderId),d[41].set("extra_data_for_eb_upload",void 0),a=[d[41],void 0,d[33]],d[36]=a[0],d[37]=a[1],d[38]=a[2]):(a=[void 0,d[35],d[33]],d[36]=a[0],d[37]=a[1],d[38]=a[2],a),a=[d[36],d[37],d[38]],d[11]=a[0],d[12]=a[1],d[13]=a[2]}]))})},function(a){return d[15]=c.i64.of_float(Date.now()),d[16]=c.i64.random(),d[19]="Finishing execution. Execution time: ",d[20]=c.i64.to_string(c.i64.sub(d[15],d[0])),d[21]=" ms",d[17]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",d[17],d[19],d[17],d[20],d[17],d[21]].join("")),c.i64.eq(c.i64.mod_(d[16],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[22]=",",d[23]=c.createArray(),void 0!==void 0?d[24]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[d[19],d[22],d[20],d[22],d[21]].join(""),d[23],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[11],d[12],d[13]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure";a.__tables__=["pending_tasks","pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],a})},function(a){return d[2]!==void 0?c.sequence([function(a){return d[15]=d[2].get("message_identifiers"),d[16]=d[2].get("unencrypted_protobuf_backup_payload"),d[17]=d[15].get("server_thread_id"),d[18]=d[15].get("timestamp"),d[19]=d[15].get("otid"),d[20]=d[15].get("act_thread_id"),d[21]=new c.Map(),d[21].set("server_thread_key",d[17]),d[21].set("timestamp",d[18]),d[21].set("otid",d[19]),d[21].set("wa_thread_id",c.i64.from_string(d[20])),d[22]=new c.Map(),d[22].set("message_identifiers",d[21]),d[23]=d[2].get("extra_data_for_eb_upload"),d[23]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[23]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=new c.Map(),d[41]="ttd",d[34]=d[32].get(d[41]),d[34]?d[35]=!1:d[35]=!0,d[35]?c.resolve():c.sequence([function(a){return d[34]?d[46]=!1:d[46]=!0,d[46]?c.resolve(d[47]=void 0):c.sequence([function(a){return d[48]=new c.Map(),d[51]="message_tags",d[49]=d[34].get(d[51]),d[49]?d[50]=!1:d[50]=!0,d[50]?c.resolve():c.sequence([function(a){return d[52]=c.createArray(),d[53]=c.i64.of_int32(d[49].length),c.i64.gt(d[53],c.i64.cast([0,0]))?c.loopAsync(d[53],function(a){return d[54]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[49],d[54]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[57]=(d[52].push(d[55]),d[52])}])}):c.resolve()},function(a){return d[48].set(d[51],d[52])}])},function(a){return d[47]=d[48]}])},function(a){return d[33].set(d[41],d[47])}])},function(a){return d[42]="mt",d[36]=d[32].get(d[42]),d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve():c.sequence([function(a){return d[36]?d[46]=!1:d[46]=!0,d[46]?c.resolve(d[47]=void 0):c.sequence([function(a){return d[48]=new c.Map(),d[51]="message_tags",d[49]=d[36].get(d[51]),d[49]?d[50]=!1:d[50]=!0,d[50]?c.resolve():c.sequence([function(a){return d[52]=c.createArray(),d[53]=c.i64.of_int32(d[49].length),c.i64.gt(d[53],c.i64.cast([0,0]))?c.loopAsync(d[53],function(a){return d[54]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[49],d[54]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[57]=(d[52].push(d[55]),d[52])}])}):c.resolve()},function(a){return d[48].set(d[51],d[52])}])},function(a){return d[47]=d[48]}])},function(a){return d[33].set(d[42],d[47])}])},function(a){return d[43]="mooos",d[38]=d[32].get(d[43]),d[38]!==void 0?d[33].set(d[43],d[38]):0,d[44]="said",d[39]=d[32].get(d[44]),d[39]!==void 0?d[33].set(d[44],d[39]):0,d[45]="ms",d[40]=d[32].get(d[45]),c.i64.neq(d[40],void 0)?d[33].set(d[45],d[40]):0,d[24]=d[33]}]):c.resolve(d[24]=void 0)},function(a){return d[24]!==void 0?(d[32]=d[24].get("mt"),d[32]!==void 0?(d[34]=new c.Map(),d[38]="message_tags",d[35]=d[32].get(d[38]),d[35]?d[36]=!1:d[36]=!0,d[36]?0:d[34].set(d[38],d[35]),d[37]=c.toJSON(d[34]),d[33]=d[37]):d[33]=void 0,d[25]=d[33]):d[25]=void 0,d[26]=d[16].get("supplemental_data_encrypted"),d[26]!==void 0?c.sequence([function(a){return d[32]=d[16].get("protobuf_encrypted"),d[33]=d[16].get("backup_action"),d[34]=d[16].get("timestamp_ms"),d[35]=d[26].get("sk_ciphertext"),c.nativeOperation(b("LSBase64Encode.nop"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=d[26].get("sk_hash"),c.nativeOperation(b("LSBase64Encode.nop"),d[37]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=new c.Map(),d[39].set("supplementary_data_key",void 0),d[39].set("encrypted_protobuf",d[32]),d[39].set("key_value_backup_action",d[33]),d[39].set("protobuf_ts_ms",d[34]),d[39].set("supplemental_key_ciphertext",d[36]),d[39].set("supplemental_key_hash",d[38]),d[39].set("message_tags",d[25]),d[27]=d[39]}]):c.resolve((d[32]=d[16].get("protobuf_encrypted"),d[33]=d[16].get("backup_action"),d[34]=d[16].get("timestamp_ms"),d[35]=new c.Map(),d[35].set("supplementary_data_key",void 0),d[35].set("encrypted_protobuf",d[32]),d[35].set("key_value_backup_action",d[33]),d[35].set("protobuf_ts_ms",d[34]),d[35].set("message_tags",d[25]),d[27]=d[35]))},function(a){return d[22].set("key_value_backup_unencrypted_payload",d[27]),d[28]=d[2].get("sender_id"),d[22].set("sender_id",d[28]),d[29]=d[2].get("attachment_backup_payload"),d[29]!==void 0?d[22].set("attachment_backup_payload",d[29]):0,d[24]!==void 0?(d[32]=d[24].get("ttd"),d[32]!==void 0?(d[34]=new c.Map(),d[38]="message_tags",d[35]=d[32].get(d[38]),d[35]?d[36]=!1:d[36]=!0,d[36]?0:d[34].set(d[38],d[35]),d[37]=c.toJSON(d[34]),d[33]=d[37]):d[33]=void 0,d[30]=d[33]):d[30]=void 0,d[30]!==void 0?d[22].set("tags_to_delete",d[30]):0,d[31]=c.toJSON(d[22]),a=[d[31],void 0,d[4]],d[5]=a[0],d[6]=a[1],d[7]=a[2]}]):c.resolve((d[3]?d[15]=!1:d[15]=!0,d[15]?(a=[void 0,void 0,d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a):(a=[void 0,d[3],d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a),a=[d[16],d[17],d[18]],d[5]=a[0],d[6]=a[1],d[7]=a[2]))},function(a){return d[15]=new c.Map(),d[16]=d[15].set("success",d[5]),d[17]=d[15].set("failure",d[6]),d[18]=d[15].set("context",d[7]),d[19]=c.toJSON(d[15]),d[8]=d[19],d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[8],c.i64.cast([0,50048])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsOpenUploadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("encryption_version"),d[4]=d[2].get("epoch_anon_id"),d[5]=d[2].get("epoch_root_key"),d[6]=d[2].get("payload_key"),d[7]=c.createArray(),d[41]=(d[7].push(c.i64.cast([0,6])),d[7]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[8]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[8],void 0,d[4],d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!1:d[10]=!0,d[10]?c.resolve(d[11]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[11]=d[43]==null?"":d[43]}])},function(a){return d[12]=c.createArray(),d[41]=(d[12].push(c.i64.cast([0,6])),d[12]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[13],void 0,d[5],d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!1:d[15]=!0,d[15]?c.resolve(d[16]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[14],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[16]=d[43]==null?"":d[43]}])},function(a){return d[17]=c.createArray(),d[41]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[6],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[21]=d[43]==null?"":d[43]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[22]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[22]==null?"":d[22],a[0]].join("")).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[41]=(d[24].push(c.i64.cast([0,6])),d[24]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[25],void 0,d[23],d[24]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!1:d[27]=!0,d[27]?c.resolve(d[28]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[26],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[28]=d[43]==null?"":d[43]}])},function(a){return d[29]=":",c.blobs.neq(d[5],void 0)?c.sequence([function(a){return d[41]=c.createArray(),d[47]=(d[41].push(c.i64.cast([0,18])),d[41]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]!==void 0?c.sequence([function(a){return d[47]=c.i64.of_int32(d[42].length),c.i64.ge(d[47],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[42],c.i64.cast([0,0])).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[50]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[50]].join("")),d[49]=c.createArray(),void 0!==void 0?d[51]=(d[49].push(void 0),d[49]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[50],d[49],c.i64.cast([0,3]))},function(a){return d[48]=void 0}])},function(a){return d[43]=d[48]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[48]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[48]].join("")),d[47]=c.createArray(),void 0!==void 0?d[49]=(d[47].push(void 0),d[47]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[48],d[47],c.i64.cast([0,3]))},function(a){return d[43]=void 0}])},function(a){return c.blobs.neq(d[43],void 0)?d[44]=!0:d[44]=!1,d[44]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[43]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]!==void 0?d[46]=d[45]:d[46]="encodingfailed",d[30]=d[46]}]):c.resolve(d[30]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[31]=a[0],a})},function(e){return d[32]=new c.Map(),d[32].set("encryption_version",d[3]),d[32].set("epoch_anon_id",d[31]==null?"":d[31]),d[32].set("message_encryption_values",[d[11],d[29],d[16],d[29],d[21],d[29],d[28]].join("")),d[32].set("root_key_fingerprint",d[30]),d[32].set("backup_id",a[1]),d[33]=c.toJSON(d[32]),d[34]=new c.Map(),d[34].set("value_secret_ref",d[33]),d[35]=c.i64.of_float(Date.now()),d[36]=c.i64.random(),d[38]="Finishing execution. Execution time: ",d[39]=c.i64.to_string(c.i64.sub(d[35],d[0])),d[40]=" ms",d[37]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deriveValueSecretRefV2] ",d[37],d[38],d[37],d[39],d[37],d[40]].join("")),c.i64.eq(c.i64.mod_(d[36],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[41]=",",d[42]=c.createArray(),void 0!==void 0?d[43]=(d[42].push(void 0),d[42]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[d[38],d[41],d[39],d[41],d[40]].join(""),d[42],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[34],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e){a=Array.from(new Uint8Array(e));d=a.map(function(a){return a.toString(16).padStart(2,"0")});e=d.join("").toUpperCase();return(h||(h=b("Promise"))).resolve(c("LSResult")(e))};a.__nop_name__="LSBinaryToHex";g["default"]=a}),98);
__d("GetBlobFromInt64BE",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=new Uint8Array(8);e.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));e[c]=b;return i.div(a,i.of_string("256"))},a);return(h||(h=b("Promise"))).resolve(c("LSResult")(e.buffer))}g.GetBlobFromInt64BE=a}),98);
__d("LSGetBlobFromInt64BE.nop",["GetBlobFromInt64BE"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c){return d("GetBlobFromInt64BE").GetBlobFromInt64BE(c)};a.__nop_name__="LSGetBlobFromInt64BE";g["default"]=a}),98);
__d("PakeCpaceUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function b(a,b){var c=new a.VectorInt();b.forEach(function(a){c.push_back(a)});return c}f.typedArrayToBuffer=a;f.uint8ArrayToVectorInt=b}),66);
__d("Hmac_v2",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e){try{a=new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(new Uint8Array(a)).update(new Uint8Array(e)).finish();return(h||(h=b("Promise"))).resolve(c("LSResult")(d("PakeCpaceUtils").typedArrayToBuffer(a)))}catch(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",e==null?void 0:e.byteLength,!1);throw a}};g["default"]=a}),98);
__d("LSHmac_v2.nop",["Hmac_v2"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e){return c("Hmac_v2")(d,e)};a.__nop_name__="LSHmac_v2";g["default"]=a}),98);
__d("OcmfClientMap",["CryptoLogger","LSCryptoUtils","Promise","requireDeferred","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("OcmfClientMap");a=function(a,c){c=d("tweetnacl").hash(d("LSCryptoUtils").bufToUint8(c));return(h||(h=b("Promise"))).all([c,i.load()]).then(function(b){var c=b[0];b=b[1];c=b.fromHash(new Uint8Array(c));b=b.scalarMult(new Uint8Array(a),c);return b.buffer})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["LSResult","OcmfClientMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e){return c("OcmfClientMap")(d,e).then(function(a){return c("LSResult")(a)})};a.__nop_name__="LSOcmfClientMap";g["default"]=a}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","LSSynchronousPromise","Promise","UInt8Array","WACryptoHkdfSync","XPlatReactCrypto","gkx","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function j(a){var b=a.length;return b%2!==0?"0"+a:a}function k(a){a=BigInt(a);var b=j(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d*2);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function l(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function m(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function n(a,b,e){var f=new ArrayBuffer(0);if(c("gkx")("13860"))try{var g=d("WACryptoHkdfSync").hkdf(a,d("LSCryptoUtils").bufToUint8(f),d("LSCryptoUtils").bufToUint8(b.buffer),e);return d("LSSynchronousPromise").makeSynchronousPromise({_0:g})}catch(a){c("FBLogger")("wmi_eb").mustfix("hkdf failed at OrderPreservingEncryption");throw a}return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:b.buffer,name:"HKDF",salt:f},a,e*8)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function o(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function p(a,e,f,g){var j=f.byteLength;if(j!==32)throw c("FBLogger")("wmi_eb").mustfixThrow(m(j));var k=g.byteLength,p=function(a,b){var c=new Uint8Array(1+k),d=new Uint8Array(k-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(k>=255)throw c("FBLogger")("wmi_eb").mustfixThrow("Input is too large");j=Array.from(g).map(function(b,c){c=p(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return n(b,c,a).then(function(a){return o(a,e)})}).map(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise);j=(i||(i=c("isPromise")))(j[0])?(h||(h=b("Promise"))).all(j):d("LSSynchronousPromise").makeSynchronousPromise(j);return j.then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),l(a)._0])})}function e(a,b,c,d){d=k(d);return p(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=k;g.buildKeyLengthErrorMsg=m;g.encryptBigEndianBytes=p;g.encryptIntString=e}),98);
__d("OpeEncrypt",["CryptoLogger","I64","LSResult","OrderPreservingEncryption"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((h||(h=d("I64"))).to_int32(e),1,a,new Uint8Array(b)).then(function(a){return c("LSResult")(a.buffer)},function(a){d("CryptoLogger").captureError(f,a).mustfix("OpeEncrypt_impl failed");throw a})}g.OpeEncrypt=a}),98);
__d("LSOpeEncrypt.nop",["OpeEncrypt"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f){return d("OpeEncrypt").OpeEncrypt(c,e,f)};a.__nop_name__="LSOpeEncrypt";g["default"]=a}),98);
__d("TruncateSortKey",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");function a(a){if(a.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");var d=new Uint8Array(a);d=d.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(a.slice(2)))}g.TruncateSortKey=a}),98);
__d("LSTruncateSortKey.nop",["TruncateSortKey"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c){return d("TruncateSortKey").TruncateSortKey(c)};a.__nop_name__="LSTruncateSortKey";g["default"]=a}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[3]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[2],d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))&&c.i64.eq(a[1],c.i64.cast([0,2]))?d[7]=a[5]:d[7]=a[3],d[8]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[9]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[8],d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(e){return d[13]=a[6].get("ope_key"),c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[4]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[13],d[15],c.i64.cast([0,16])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[18],d[20]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=new c.Map(),d[23].set("backup_id_ocmf_partial",d[6]==null?"":d[6]),d[23].set("act_thread_id_ocmf_partial",d[12]==null?"":d[12]),d[23].set("timestamp_encrypted",d[17]==null?"":d[17]),d[23].set("otid_ocmf_partial",d[22]==null?"":d[22]),d[24]=c.i64.of_float(Date.now()),d[25]=c.i64.random(),d[27]="Finishing execution. Execution time: ",d[28]=c.i64.to_string(c.i64.sub(d[24],d[0])),d[29]=" ms",d[26]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptIdentifiersV2] ",d[26],d[27],d[26],d[28],d[26],d[29]].join("")),c.i64.eq(c.i64.mod_(d[25],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[30]=",",d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[d[27],d[30],d[28],d[30],d[29]].join(""),d[31],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[23],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["EBEncryptMessageTypes","LSSymmetricEncryptionCreateDecryptedData.nop","MWEBODSEntityName.enum","MWFBLogger","ODS","QPLUserFlow","Random","SymmetricEncryptionCreateEncryptedData","WAArrayBufferUtils","WAErrorMessage","WAGetSafeQPLError","WAResultOrError","cr:20303","getErrorSafe","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=c("qpl")._(521471468,"2968"),p=d("MWFBLogger").MWLogger().tags(["LSEncryption"]);function q(a,b,e){var f=d("Random").uint32();c("QPLUserFlow").start(o,{annotations:{string:{implementation:"js",native_op_name:"LSSymmetricEncryptionCreateEncryptedData"}},instanceKey:f});return c("SymmetricEncryptionCreateEncryptedData")(a,b,e).then(function(a){c("QPLUserFlow").endSuccess(o,{instanceKey:f});return d("WAResultOrError").makeResult(a[0])}).catch(function(a){var b=c("getErrorSafe")(a);c("QPLUserFlow").endFailure(o,"runtime-exception",{annotations:{string:{error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}},instanceKey:f});return d("WAResultOrError").makeError({error:b,type:"runtime-exception"})})}function r(a,e,f){if(b("cr:20303")==null)return Promise.resolve(d("WAResultOrError").makeError("skipped"));var g=d("Random").uint32();c("QPLUserFlow").start(o,{annotations:{string:{implementation:"rust",native_op_name:"LSSymmetricEncryptionCreateEncryptedData"}},instanceKey:g});return b("cr:20303").encryptMessage(d("EBEncryptMessageTypes").unsafeCastToSecretKey(a),d("EBEncryptMessageTypes").unsafeCastToAAD(e),d("EBEncryptMessageTypes").unsafeCastToPlaintext(f)).then(function(a){a.success===!1?c("QPLUserFlow").endFailure(o,a.error,{instanceKey:g}):c("QPLUserFlow").endSuccess(o,{instanceKey:g});return a}).catch(function(a){c("QPLUserFlow").endFailure(o,"runtime-exception",{annotations:{string:{error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}},instanceKey:g});return d("WAResultOrError").makeError("runtime-exception")})}a=function(a,b,d,e,f){return q(d,e,f).then(function(g){if(g.success===!1){p.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["EB symmetric encryption in JS failed with error: ",""])),String(g.error));return[void 0]}c("promiseDone")(s(d,e,f,g,a,b));return[g.value]})};async function s(a,b,c,e,f,g){c=await r(a,b,c);try{await t(f,g,a,b,e,c)}catch(a){p.MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["'EB symmetric encryption comparison failed with error: ",""])),d("WAErrorMessage").maybeGetMessageFromError(a))}}async function t(a,b,e,f,g,h){if(h.success===!1&&h.error==="skipped")return;if(h.success===!1){(n||(n=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - ciphertextFromWasm failed with error: ",""])),h.error);return}g=g.value;h=h.value;if(g==null){(n||(n=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - ciphertextFromJS is null"])));return}g=await c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,g);a=await c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,h);b=g[0];e=a[0];if(b==null||e==null){(n||(n=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(l||(l=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - Either JS Decrypted or Rust Decrypted is null"])));return}if(d("WAArrayBufferUtils").arrayBuffersEqualUNSAFE(b,e)===!1){(n||(n=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - Decrypted content is not equal"])));return}(n||(n=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"match")}a.__nop_name__="LSSymmetricEncryptionCreateEncryptedData";g.default=a}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){var j=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return c("LSSymmetricEncryptionCreateEncryptedData.nop")(a,e,f,g,d("LSCryptoUtils").strToBuf(i)).then(function(a){return a[0]}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a?d("Base64Utils").fromArrayBuffer(a):void 0))})["catch"](function(a){d("CryptoLogger").captureError(j,a).mustfix("symmetric string encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};a.__nop_name__="LSSymmetricEncryptionCreateEncryptedString";g["default"]=a}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),d[3],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[3]).then(function(a){return a=a,d[4]=a[0],a})},function(e){return d[4]!==void 0?c.sequence([function(a){return d[13]=d[2].get("encryption_version"),d[14]=d[2].get("epoch_anon_id"),d[15]=d[2].get("epoch_root_key"),d[16]=d[2].get("payload_key"),d[17]=c.createArray(),d[45]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[14],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[21]=d[47]==null?"":d[47]}])},function(a){return d[22]=c.createArray(),d[45]=(d[22].push(c.i64.cast([0,6])),d[22]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[23],void 0,d[15],d[22]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!1:d[25]=!0,d[25]?c.resolve(d[26]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[26]=d[47]==null?"":d[47]}])},function(a){return d[27]=c.createArray(),d[45]=(d[27].push(c.i64.cast([0,6])),d[27]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[28],void 0,d[16],d[27]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!1:d[30]=!0,d[30]?c.resolve(d[31]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[31]=d[47]==null?"":d[47]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[32]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[32]==null?"":d[32],a[1]].join("")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[45]=(d[34].push(c.i64.cast([0,6])),d[34]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[35],void 0,d[33],d[34]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve(d[38]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[36],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[38]=d[47]==null?"":d[47]}])},function(a){return d[39]=":",c.blobs.neq(d[15],void 0)?c.sequence([function(a){return d[45]=c.createArray(),d[51]=(d[45].push(c.i64.cast([0,18])),d[45]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[15],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]!==void 0?c.sequence([function(a){return d[51]=c.i64.of_int32(d[46].length),c.i64.ge(d[51],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],c.i64.cast([0,0])).then(function(a){return a=a,d[53]=a[0],d[54]=a[1],a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[54]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[54]].join("")),d[53]=c.createArray(),void 0!==void 0?d[55]=(d[53].push(void 0),d[53]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[54],d[53],c.i64.cast([0,3]))},function(a){return d[52]=void 0}])},function(a){return d[47]=d[52]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[52]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[52]].join("")),d[51]=c.createArray(),void 0!==void 0?d[53]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[52],d[51],c.i64.cast([0,3]))},function(a){return d[47]=void 0}])},function(a){return c.blobs.neq(d[47],void 0)?d[48]=!0:d[48]=!1,d[48]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[47]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]!==void 0?d[50]=d[49]:d[50]="encodingfailed",d[40]=d[50]}]):c.resolve(d[40]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[41]=a[0],a})},function(b){return d[42]=new c.Map(),d[42].set("encryption_version",d[13]),d[42].set("epoch_anon_id",d[41]==null?"":d[41]),d[42].set("message_encryption_values",[d[21],d[39],d[26],d[39],d[31],d[39],d[38]].join("")),d[42].set("root_key_fingerprint",d[40]),d[42].set("backup_id",a[0]),d[43]=c.toJSON(d[42]),d[44]=new c.Map(),d[44].set("encrypted_message_payload",d[4]),d[44].set("value_secret_ref",d[43]),b=[d[44],void 0],d[5]=b[0],d[6]=b[1]}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,40])),d[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[5]=e[0],d[6]=e[1]))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptMessagePayloadV2] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]="",d[3]=void 0,d[4]=void 0,d[5]=void 0,a[0]?c.resolve(0):(d[15]=void 0,c.i64.neq(d[15],void 0)?c.sequence([function(a){return c.count(c.db.table(169).fetch([[[d[15]]]])).then(function(a){return d[16]=a})},function(a){return c.i64.le(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[15]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[26]=new c.Map(),d[26].set("error_msg","Expected a nonempty query result"),d[26].set("code",c.i64.cast([0,3])),d[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[27]=c.createArray(),d[28]=(d[27].push(d[26]),d[27]),e=[void 0,d[27]],d[22]=e[0],d[23]=e[1]):(b=a.item,d[26]=new c.Map(),d[26].set("epoch_id",b.epochId),d[26].set("backup_id",b.backupId),d[26].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[26].set("epoch_root_key_blob",b.epochRootKeyBlob),d[26].set("epoch_status",b.epochStatus),d[26].set("epoch_head",b.epochHead),d[26].set("authority_level",b.authorityLevel),e=[d[26],void 0],d[22]=e[0],d[23]=e[1])})},function(a){return d[25]=new c.Map(),d[25].set("value",d[22]),d[25].set("errors",d[23]),d[17]=d[25]}]):c.resolve((d[22]=new c.Map(),d[22].set("error_msg","Expected at most one result"),d[22].set("code",c.i64.cast([0,4])),d[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[23]=c.createArray(),d[25]=(d[23].push(d[22]),d[23]),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[23]),d[17]=d[24]))},function(a){return d[18]=d[17].get("value"),d[18]!==void 0?(d[22]=d[18].get("epoch_id"),d[23]=d[18].get("backup_id"),d[24]=d[18].get("epoch_anon_id_blob"),d[25]=d[18].get("epoch_root_key_blob"),d[26]=d[18].get("epoch_status"),d[27]=d[18].get("epoch_head"),d[28]=d[18].get("authority_level"),d[29]=d[17],d[19]=d[29]):(d[22]=d[17].get("errors"),d[23]=d[17].get("errors"),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[22]),d[19]=d[24]),d[20]=d[19].get("value"),d[20]!==void 0?(d[22]=d[20].get("epoch_id"),d[23]=d[20].get("backup_id"),d[24]=d[20].get("epoch_anon_id_blob"),d[25]=d[20].get("epoch_root_key_blob"),d[26]=d[20].get("epoch_status"),d[27]=d[20].get("epoch_head"),d[28]=d[20].get("authority_level"),d[2]=c.blobs.to_string(d[24]),d[3]=d[22],d[4]=d[25],c.blobs.neq(d[27],void 0)?d[5]=d[27]:0,d[21]=!0):(d[22]=d[19].get("errors"),d[23]=d[19].get("errors"),d[21]=!1)}]):c.resolve())},function(b){return c.i64.neq(d[3],void 0)?c.resolve(0):c.sequence([function(b){return d[15]=void 0,d[16]="",d[17]=void 0,d[18]=void 0,c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[20]=c.blobs.to_string(a.epochAnonIdBlob),c.i64.eq([0,d[20].length],[0,d[16].length])?d[19]=d[20]>d[16]:d[19]=c.i64.gt([0,d[20].length],[0,d[16].length]),d[19]?(d[15]=a.epochId,d[16]=d[20],d[17]=a.epochRootKeyBlob,d[18]=a.epochHead):0})},function(a){return c.i64.neq(d[15],void 0)?(d[2]=d[16],d[3]=d[15],d[4]=d[17],c.blobs.neq(d[18],void 0)?d[5]=d[18]:0,d[19]=c.i64.of_float(Date.now()),0):0}])},function(a){return d[11]=c.blobs.of_string(d[2]),c.i64.neq(d[3],void 0)?(c.blobs.neq(d[11],void 0)?(c.blobs.neq(d[4],void 0)?(d[19]=new c.Map(),d[19].set("epoch_id",d[3]),d[19].set("epoch_root_key",d[4]),d[19].set("epoch_anon_id",d[11]),d[19].set("epoch_head",d[5]),d[20]=new c.Map(),d[20].set("epoch_keys",d[19]),a=[d[20],void 0],d[17]=a[0],d[18]=a[1]):(d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,402])),d[19].set("error_message","failed to query latest epoch"),d[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[19]],d[17]=a[0],d[18]=a[1]),a=[d[17],d[18]],d[15]=a[0],d[16]=a[1]):(d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,403])),d[17].set("error_message","failed to query latest epoch"),d[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[17]],d[15]=a[0],d[16]=a[1]),a=[d[15],d[16]],d[6]=a[0],d[7]=a[1]):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,400])),d[15].set("error_message","failed to query latest epoch"),d[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[15]],d[6]=a[0],d[7]=a[1]),d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[14]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][getLatestEpochKeys] ",d[10],d[12],d[10],d[13],d[10],d[14]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[6],d[7]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure";a.__tables__=["secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],d[12]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[13]=a[0],a})},function(e){return d[14]=new c.Map(),d[14].set("message_tags",d[13]),d[15]=new c.Map(),d[15].set("mt",d[14]),c.blobs.neq(d[10],void 0)?c.sequence([function(e){return d[18]=a[5].get("message_payload_encryption_keys"),d[19]=d[18].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[19],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[10]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.blobs.neq(d[20],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[20]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[21]=d[24]}]):c.resolve(d[21]=void 0)},function(b){return d[21]!==void 0?(d[15]!==void 0?(d[27]=d[15].get("mt"),d[27]!==void 0?(d[29]=new c.Map(),d[33]="message_tags",d[30]=d[27].get(d[33]),d[30]?d[31]=!1:d[31]=!0,d[31]?0:d[29].set(d[33],d[30]),d[32]=c.toJSON(d[29]),d[28]=d[32]):d[28]=void 0,d[24]=d[28]):d[24]=void 0,d[15]!==void 0?(d[27]=d[15].get("mooos"),d[25]=d[27]):d[25]=void 0,d[26]=new c.Map(),d[26].set("backup_action",a[0]),d[26].set("protobuf_encrypted",d[21]),d[26].set("supplemental_data_encrypted",void 0),d[26].set("timestamp_ms",a[4]),d[26].set("message_tags",d[24]),d[26].set("serialized_attachment_backup_payload",void 0),d[26].set("maybe_ooo_supplemental_upload",d[25]),b=[d[26],void 0],d[22]=b[0],d[23]=b[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,62])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),b=[void 0,d[24]],d[22]=b[0],d[23]=b[1]),b=[d[22],d[23]],d[16]=b[0],d[17]=b[1]}]):c.resolve((d[12]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,70])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,63])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1]),e=[d[18],d[19]],d[16]=e[0],d[17]=e[1]))},function(a){return a=[d[16],d[17]],d[2]=a[0],d[3]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[17]=new c.Map(),d[17].set("message_tags",d[16]),d[18]=new c.Map(),d[18].set("mt",d[17]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return d[23]=a[5].get("mailbox_root_key_v2"),c.blobs.neq(d[23],void 0)?c.sequence([function(e){return d[26]=a[5].get("message_payload_encryption_keys"),d[27]=d[26].get("epoch_root_key"),d[28]=c.createArray(),d[41]=(d[28].push(c.i64.cast([0,32])),d[28]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,d[23],d[28]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[29].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[30]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[30]=void 0}])},function(a){return c.blobs.neq(d[30],void 0)?d[31]=!0:d[31]=!1,d[31]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[32]=c.createArray(),d[41]=(d[32].push(c.i64.cast([0,32])),d[32]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,d[27],d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[33]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[33].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[34]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[34]=void 0}])},function(e){return c.blobs.neq(d[34],void 0)?d[35]=!0:d[35]=!1,d[35]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),d[30],d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[34],c.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),d[36]).then(function(a){return a=a,d[38]=a[0],a})},function(e){return c.blobs.neq(d[38],void 0)?c.sequence([function(e){return d[41]=new c.Map(),d[41].set("sk_ciphertext",d[38]),d[41].set("sk_hash",d[37]),d[42]=a[5].get("message_payload_encryption_keys"),d[43]=d[42].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[43],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.blobs.neq(d[44],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[44]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[45]=d[48]}]):c.resolve(d[45]=void 0)},function(b){return d[45]!==void 0?(d[18]!==void 0?(d[51]=d[18].get("mt"),d[51]!==void 0?(d[53]=new c.Map(),d[57]="message_tags",d[54]=d[51].get(d[57]),d[54]?d[55]=!1:d[55]=!0,d[55]?0:d[53].set(d[57],d[54]),d[56]=c.toJSON(d[53]),d[52]=d[56]):d[52]=void 0,d[48]=d[52]):d[48]=void 0,d[18]!==void 0?(d[51]=d[18].get("mooos"),d[49]=d[51]):d[49]=void 0,d[50]=new c.Map(),d[50].set("backup_action",a[0]),d[50].set("protobuf_encrypted",d[45]),d[50].set("supplemental_data_encrypted",d[41]),d[50].set("timestamp_ms",a[4]),d[50].set("message_tags",d[48]),d[50].set("serialized_attachment_backup_payload",void 0),d[50].set("maybe_ooo_supplemental_upload",d[49]),b=[d[50],void 0],d[46]=b[0],d[47]=b[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[48]=new c.Map(),d[48].set("error_code",c.i64.cast([0,62])),d[48].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[48].set("error_message",""),b=[void 0,d[48]],d[46]=b[0],d[47]=b[1]),b=[d[46],d[47]],d[39]=b[0],d[40]=b[1]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),d[41]=new c.Map(),d[41].set("error_code",c.i64.cast([0,66])),d[41].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[41].set("error_message",""),e=[void 0,d[41]],d[39]=e[0],d[40]=e[1]))},function(a){return a=[d[39],d[40]],d[24]=a[0],d[25]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,27])),d[26].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[26].set("error_message",""),e=[void 0,d[26]],d[24]=e[0],d[25]=e[1]))},function(a){return a=[d[24],d[25]],d[21]=a[0],d[22]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,65])),d[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[23].set("error_message",""),e=[void 0,d[23]],d[21]=e[0],d[22]=e[1]))},function(a){return a=[d[21],d[22]],d[19]=a[0],d[20]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,64])),d[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[21].set("error_message",""),e=[void 0,d[21]],d[19]=e[0],d[20]=e[1]))},function(a){return a=[d[19],d[20]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,65])),d[14].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1]))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,4]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],d[16]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=new c.Map(),d[18].set("message_tags",d[17]),d[19]=new c.Map(),d[19].set("mt",d[18]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return d[22]=a[5].get("message_payload_encryption_keys"),d[23]=d[22].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[23],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.blobs.neq(d[24],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[24]).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[25]=d[28]}]):c.resolve(d[25]=void 0)},function(b){return d[25]!==void 0?(d[19]!==void 0?(d[31]=d[19].get("mt"),d[31]!==void 0?(d[33]=new c.Map(),d[37]="message_tags",d[34]=d[31].get(d[37]),d[34]?d[35]=!1:d[35]=!0,d[35]?0:d[33].set(d[37],d[34]),d[36]=c.toJSON(d[33]),d[32]=d[36]):d[32]=void 0,d[28]=d[32]):d[28]=void 0,d[19]!==void 0?(d[31]=d[19].get("mooos"),d[29]=d[31]):d[29]=void 0,d[30]=new c.Map(),d[30].set("backup_action",a[0]),d[30].set("protobuf_encrypted",d[25]),d[30].set("supplemental_data_encrypted",void 0),d[30].set("timestamp_ms",a[4]),d[30].set("message_tags",d[28]),d[30].set("serialized_attachment_backup_payload",void 0),d[30].set("maybe_ooo_supplemental_upload",d[29]),b=[d[30],void 0],d[26]=b[0],d[27]=b[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[28]=new c.Map(),d[28].set("error_code",c.i64.cast([0,62])),d[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[28].set("error_message",""),b=[void 0,d[28]],d[26]=b[0],d[27]=b[1]),b=[d[26],d[27]],d[20]=b[0],d[21]=b[1]}]):c.resolve((d[16]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,70])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,63])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1]),e=[d[22],d[23]],d[20]=e[0],d[21]=e[1]))},function(a){return a=[d[20],d[21]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(void 0!==void 0?(d[19]=(void 0).get("mt"),d[19]!==void 0?(d[21]=new c.Map(),d[25]="message_tags",d[22]=d[19].get(d[25]),d[22]?d[23]=!1:d[23]=!0,d[23]?0:d[21].set(d[25],d[22]),d[24]=c.toJSON(d[21]),d[20]=d[24]):d[20]=void 0,d[16]=d[20]):d[16]=void 0,void 0!==void 0?(d[19]=(void 0).get("mooos"),d[17]=d[19]):d[17]=void 0,d[18]=new c.Map(),d[18].set("backup_action",a[0]),d[18].set("protobuf_encrypted",void 0),d[18].set("supplemental_data_encrypted",void 0),d[18].set("timestamp_ms",a[4]),d[18].set("message_tags",d[16]),d[18].set("serialized_attachment_backup_payload",void 0),d[18].set("maybe_ooo_supplemental_upload",d[17]),e=[d[18],void 0],d[14]=e[0],d[15]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN_PROTOBUF_TYPE"),d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,60])),d[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[16].set("error_message",""),e=[void 0,d[16]],d[14]=e[0],d[15]=e[1]),e=[d[14],d[15]],d[12]=e[0],d[13]=e[1]))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}])},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),d[11]=new c.Map(),d[11].set("error_code",c.i64.cast([0,67])),d[11].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),d[11].set("error_message",""),g=[void 0,d[11]],d[2]=g[0],d[3]=g[1]):(f=e.item,c.sequence([function(e){return c.storedProcedure(b("LSLoadAndEncryptProtobufWithInputsV2"),f.backupAction,a[2],f.toplevelOfflineThreadingId,f.supplementalKey,f.messageTimestampMs,a[1]).then(function(a){return a=a,d[11]=a[0],d[12]=a[1],a})},function(a){return a=[d[11],d[12]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufV2] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure";a.__tables__=["pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSSerializeBackupPayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","LSQplAnnotateBool.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(b){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),e[19]=d.i64.mul(e[1],d.i64.cast([0,1e6])),e[2]=d.i64.random(),e[6]=d.i64.to_string(e[2]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[3]=void 0:(b=a.item,e[3]=b.dataTraceId)})},function(a){return e[3]!==void 0?e[5]=e[3]:e[5]=void 0,e[6]!==void 0?d.nativeOperation(b("LSQplStartTrace.nop"),d.i64.cast([0,637746317]),e[6],!0,e[5]):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkPoint.nop"),d.i64.cast([0,637746317]),e[6],"LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure_start"):d.resolve()},function(a){return d.islc(d.filter(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?(e[23]=new d.Map(),e[23].set("error_msg","Expected a nonempty query result"),e[23].set("code",d.i64.cast([0,3])),e[23].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),e[24]=d.createArray(),e[25]=(e[24].push(e[23]),e[24]),c=[void 0,e[24]],e[7]=c[0],e[8]=c[1]):(b=a.item,e[23]=new d.Map(),e[23].set("backup_id",b.backupId),e[23].set("device_public_key_blob",b.devicePublicKeyBlob),e[23].set("device_private_key_blob",b.devicePrivateKeyBlob),e[23].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),e[23].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),e[23].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),e[23].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),e[23].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),e[23].set("ocmf_client_state_blob",b.ocmfClientStateBlob),e[23].set("orf_client_state_v2_blob",void 0),e[23].set("orf_v2_authority_level",void 0),e[23].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),e[23].set("device_id",b.deviceId),e[23].set("backup_tenancy",b.backupTenancy),e[23].set("encryption_version",b.encryptionVersion),e[23].set("revision_version",b.revisionVersion),e[23].set("initialize_restore_result",void 0),e[23].set("device_creation_timestamp_sec",void 0),e[23].set("authority_level",b.authorityLevel),c=[e[23],void 0],e[7]=c[0],e[8]=c[1])})},function(f){return e[10]=new d.Map(),e[10].set("value",e[7]),e[10].set("errors",e[8]),e[11]=e[10].get("value"),e[11]!==void 0?d.sequence([function(f){return e[23]=e[11].get("backup_id"),e[24]=e[11].get("device_public_key_blob"),e[25]=e[11].get("device_private_key_blob"),e[26]=e[11].get("epoch_storage_public_key_blob"),e[27]=e[11].get("epoch_storage_private_key_blob"),e[28]=e[11].get("epoch_auth_public_key_blob"),e[29]=e[11].get("epoch_auth_private_key_blob"),e[30]=e[11].get("mailbox_root_key_blob"),e[31]=e[11].get("ocmf_client_state_blob"),e[32]=e[11].get("orf_client_state_v2_blob"),e[33]=e[11].get("orf_v2_authority_level"),e[34]=e[11].get("oblivious_validation_token_blob"),e[35]=e[11].get("device_id"),e[36]=e[11].get("backup_tenancy"),e[37]=e[11].get("encryption_version"),e[38]=e[11].get("revision_version"),e[39]=e[11].get("initialize_restore_result"),e[40]=e[11].get("device_creation_timestamp_sec"),e[41]=e[11].get("authority_level"),d.i64.neq(e[35],void 0)?d.sequence([function(a){return e[46]=void 0,d.i64.neq(e[46],void 0)?d.resolve(e[47]=e[46]):d.sequence([function(a){return e[55]=d.createArray(),d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[56]=a[0],a})},function(a){return e[56]?e[65]=(e[55].push(d.i64.cast([0,0])),e[55]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[57]=a[0],a})},function(a){return e[57]?e[65]=(e[55].push(d.i64.cast([0,2])),e[55]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[58]=a[0],a})},function(a){return e[58]?e[65]=(e[55].push(d.i64.cast([0,3])),e[55]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[59]=a[0],a})},function(a){return e[59]?e[65]=(e[55].push(d.i64.cast([0,4])),e[55]):0,e[60]=d.createArray(),e[61]=d.i64.of_int32(e[55].length),d.i64.gt(e[61],d.i64.cast([0,0]))?d.loopAsync(e[61],function(a){return e[65]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[55],e[65]).then(function(a){return a=a,e[66]=a[0],e[67]=a[1],a})},function(a){return e[68]=(e[60].push(e[66]),e[60])}])}):d.resolve()},function(a){return d.sequence([function(a){return e[65]=d.createArray(),e[66]=d.i64.of_int32(e[60].length),d.i64.gt(e[66],d.i64.cast([0,0]))?d.loopAsync(e[66],function(a){return e[68]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[60],e[68]).then(function(a){return a=a,e[69]=a[0],e[70]=a[1],a})},function(a){return e[71]=(e[65].push(d.i64.to_string(e[69])),e[65])}])}):d.resolve()},function(a){return e[67]=e[65].join(","),e[62]=e[67]}])},function(a){return e[60].some(function(a){return d.i64.eq(e[37],a)})?e[63]=e[37]:e[63]=void 0,d.i64.neq(e[63],void 0)?e[64]=e[63]:e[64]=void 0,e[47]=e[64]}])},function(f){return d.i64.neq(e[47],void 0)?e[48]=e[47]:e[48]=d.i64.cast([0,0]),d.i64.neq(e[36],void 0)?e[49]=e[36]:e[49]=d.i64.cast([0,1]),d.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]).next().then(function(f,g){var h=f.done;f=f.value;return h?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[67]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[67],d.i64.cast([0,1e6])),e[19]),void 0],e[55]=b[0],e[56]=b[1],e[57]=b[2],e[58]=b[3],e[59]=b[4],e[60]=b[5],e[61]=b[6]):(f=c.item,e[67]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[67],d.i64.cast([0,1e6])),e[19]),void 0],e[55]=b[0],e[56]=b[1],e[57]=b[2],e[58]=b[3],e[59]=b[4],e[60]=b[5],e[61]=b[6])})},function(a){return e[63]=new d.Map(),e[63].set("task_id",e[55]),e[63].set("queue_name",e[56]),e[63].set("enqueue_timestamp_ms",e[57]),e[63].set("priority",e[58]),e[63].set("first_executed_timestamp_ms",e[59]),e[63].set("execution_time_ns",e[60]),e[63].set("echo_encoding_execution_time_ns",e[61]),e[64]=new d.Map(),e[64].set("task_metadata",e[63]),e[64].set("action_type",void 0),e[64].set("content_type",void 0),e[64].set("identifiers",void 0),e[64].set("identifiers_v2",void 0),e[64].set("task_creation_source",void 0),e[64].set("message_payload_source",d.i64.cast([0,2])),e[65]=new d.Map(),e[65].set("error_code",d.i64.cast([0,5])),e[65].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[65].set("error_message","Pending backup context row not found"),e[65]!==void 0?(e[67]=e[65].get("stored_procedure"),e[68]=e[65].get("error_code"),e[69]=e[65].get("error_message"),e[70]=".",e[71]=[e[67],e[70],d.i64.to_string(e[68]),e[70],e[69]].join(""),e[6]!==void 0?e[71]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[71]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[67]=(void 0).get("stored_procedure"),e[68]=(void 0).get("error_code"),e[69]=(void 0).get("error_message"),e[70]=".",e[71]=[e[67],e[70],d.i64.to_string(e[68]),e[70],e[69]].join(""),e[6]!==void 0?e[71]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[71]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[66]=d.createArray(),a=[void 0,e[65],e[64],e[66]],e[50]=a[0],e[51]=a[1],e[52]=a[2],e[53]=a[3]}]):(g=f.item,d.sequence([function(b){return e[62]=g.actionType,e[63]=g.contentType,e[68]=g.echoContent,e[69]=g.lsTraceId,e[67]=g.echoEncodingLatencyNs,e[66]=g.attachmentPayload,e[70]=g.tamThreadSubtype,e[71]=g.isInstamadillo,e[55]=new d.Map(),e[55].set("backup_id",d.i64.to_string(e[23])),e[55].set("act_thread_id",g.listKey),e[55].set("timestamp",g.sortKey),e[55].set("otid",g.uniqueKey),d.filter(d.db.table(305).fetch(),function(b){return d.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(b,c){var a=b.done;b=b.value;return a?e[56]=!1:(c=b.item,e[55].set("supplemental_otid",c.supplementalOfflineThreadingId),e[55].set("deletion_otid",c.deletionOfflineThreadingId),e[56]=!0)})},function(a){return e[65]=d.i64.eq(void 0,void 0),e[6]!==void 0?d.nativeOperation(b("LSQplAnnotateBool.nop"),d.i64.cast([0,637746317]),e[6],"should_run_device_timestamp_sync",e[65]):d.resolve()},function(f){return e[64]=g.error==null?d.i64.cast([0,0]):g.error,[d.i64.cast([0,0]),d.i64.cast([0,32])].some(function(a){return d.i64.eq(e[64],a)})?d.sequence([function(a){return e[72]=e[55].get("act_thread_id"),e[73]=e[55].get("otid"),d.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,e[74]=a[0],e[75]=a[1],a})},function(a){return e[74]!==void 0?d.sequence([function(a){return d.i64.eq(e[63],d.i64.cast([0,1]))?d.sequence([function(a){return e[85]=d.createArray(),e[90]=(e[85].push(d.i64.cast([0,32])),e[85]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[72]].join("")).then(function(a){return a=a,e[86]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[86],void 0,e[30],e[85]).then(function(a){return a=a,e[87]=a[0],a})},function(a){return e[87]?e[88]=!1:e[88]=!0,e[88]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[91]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[91]].join("")),e[90]=d.createArray(),void 0!==void 0?e[92]=(e[90].push(void 0),e[90]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[91],e[90],d.i64.cast([0,3]))},function(a){return e[89]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[87],d.i64.cast([0,0])).then(function(a){return a=a,e[90]=a[0],e[91]=a[1],a})},function(a){return e[89]=e[90]}])},function(a){return e[82]=e[89]}]):d.sequence([function(a){return d.i64.eq(e[62],d.i64.cast([0,2]))?d.sequence([function(a){return e[86]=d.createArray(),e[91]=(e[86].push(d.i64.cast([0,32])),e[86]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[73]].join("")).then(function(a){return a=a,e[87]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[87],void 0,e[30],e[86]).then(function(a){return a=a,e[88]=a[0],a})},function(a){return e[88]?e[89]=!1:e[89]=!0,e[89]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[92]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[92]].join("")),e[91]=d.createArray(),void 0!==void 0?e[93]=(e[91].push(void 0),e[91]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[92],e[91],d.i64.cast([0,3]))},function(a){return e[90]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[88],d.i64.cast([0,0])).then(function(a){return a=a,e[91]=a[0],e[92]=a[1],a})},function(a){return e[90]=e[91]}])},function(a){return e[85]=e[90]}]):d.resolve(e[85]=void 0)},function(a){return e[82]=e[85]}])},function(a){return d.blobs.neq(e[82],void 0)?d.sequence([function(a){return e[85]=e[74].get("epoch_keys"),e[86]=e[85].get("epoch_anon_id"),e[87]=e[85].get("epoch_root_key"),e[88]=d.createArray(),e[103]=(e[88].push(d.i64.cast([0,32])),e[88]),d.i64.ge(e[48],d.i64.cast([0,3]))?d.resolve(e[89]=void 0):d.sequence([function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),e[72]).then(function(a){return a=a,e[103]=a[0],a})},function(a){return e[89]=e[103]}])},function(a){return d.i64.ge(e[48],d.i64.cast([0,4]))?(e[103]="_",e[90]=["message_key_in_epoch",e[103],d.blobs.to_string(e[86]),e[103],"cipher_version",e[103],d.i64.to_string(e[48]),e[103],"thread",e[103],e[72]==null?"":e[72]].join("")):(d.i64.ge(e[48],d.i64.cast([0,3]))?(e[104]="_",e[103]=["message_key_in_epoch",e[104],d.blobs.to_string(e[86]),e[104],"cipher_version",e[104],d.i64.to_string(e[48]),e[104],"thread",e[104],e[72]==null?"":e[72]].join("")):(d.i64.ge(e[48],d.i64.cast([0,2]))?(e[105]="_",e[104]=["message_key_in_epoch",e[105],d.blobs.to_string(e[86]),e[105],"cipher_version",e[105],d.i64.to_string(e[48])].join("")):e[104]=["message_key_in_epoch","_",d.blobs.to_string(e[86])].join(""),e[103]=e[104]),e[90]=e[103]),d.nativeOperation(b("LSGetBlobFromString.nop"),e[90]).then(function(a){return a=a,e[91]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[91],e[89],e[87],e[88]).then(function(a){return a=a,e[92]=a[0],a})},function(a){return e[92]?e[93]=!1:e[93]=!0,e[93]?d.resolve(e[94]=void 0):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[92],d.i64.cast([0,0])).then(function(a){return a=a,e[103]=a[0],e[104]=a[1],a})},function(a){return e[94]=e[103]}])},function(a){return d.filter(d.db.table(169).fetch(),function(a){return d.blobs.eq(a.epochAnonIdBlob,d.blob("MA=="))}).next().then(function(b,c){var a=b.done;b=b.value;return a?(e[103]=new d.Map(),e[103].set("error_msg","Expected a nonempty query result"),e[103].set("code",d.i64.cast([0,3])),e[103].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),e[104]=d.createArray(),e[105]=(e[104].push(e[103]),e[104]),a=[void 0,e[104]],e[95]=a[0],e[96]=a[1]):(c=b.item,e[103]=new d.Map(),e[103].set("epoch_id",c.epochId),e[103].set("backup_id",c.backupId),e[103].set("epoch_anon_id_blob",c.epochAnonIdBlob),e[103].set("epoch_root_key_blob",c.epochRootKeyBlob),e[103].set("epoch_status",c.epochStatus),e[103].set("epoch_head",c.epochHead),e[103].set("authority_level",c.authorityLevel),a=[e[103],void 0],e[95]=a[0],e[96]=a[1])})},function(a){return e[98]=new d.Map(),e[98].set("value",e[95]),e[98].set("errors",e[96]),e[99]=e[98].get("value"),e[99]!==void 0?d.sequence([function(a){return e[103]=e[99].get("epoch_id"),e[104]=e[99].get("backup_id"),e[105]=e[99].get("epoch_anon_id_blob"),e[106]=e[99].get("epoch_root_key_blob"),e[107]=e[99].get("epoch_status"),e[108]=e[99].get("epoch_head"),e[109]=e[99].get("authority_level"),e[110]=d.createArray(),e[118]=(e[110].push(d.i64.cast([0,32])),e[110]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,e[30],e[110]).then(function(a){return a=a,e[111]=a[0],a})},function(a){return e[111]!==void 0?d.sequence([function(a){return e[118]=d.i64.of_int32(e[111].length),d.i64.ge(e[118],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[111],d.i64.cast([0,0])).then(function(a){return a=a,e[120]=a[0],e[121]=a[1],a})},function(a){return e[119]=e[120]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[121]].join("")),e[120]=d.createArray(),void 0!==void 0?e[122]=(e[120].push(void 0),e[120]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[121],e[120],d.i64.cast([0,3]))},function(a){return e[119]=void 0}])},function(a){return e[112]=e[119]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[119]].join("")),e[118]=d.createArray(),void 0!==void 0?e[120]=(e[118].push(void 0),e[118]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[119],e[118],d.i64.cast([0,3]))},function(a){return e[112]=void 0}])},function(a){return d.blobs.neq(e[112],void 0)?e[113]=!0:e[113]=!1,e[113]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[114]=d.createArray(),e[118]=(e[114].push(d.i64.cast([0,32])),e[114]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),e[112],e[106],e[114]).then(function(a){return a=a,e[115]=a[0],a})},function(a){return e[115]!==void 0?d.sequence([function(a){return e[118]=d.i64.of_int32(e[115].length),d.i64.ge(e[118],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[115],d.i64.cast([0,0])).then(function(a){return a=a,e[120]=a[0],e[121]=a[1],a})},function(a){return e[119]=e[120]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[121]].join("")),e[120]=d.createArray(),void 0!==void 0?e[122]=(e[120].push(void 0),e[120]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[121],e[120],d.i64.cast([0,3]))},function(a){return e[119]=void 0}])},function(a){return e[116]=e[119]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[119]].join("")),e[118]=d.createArray(),void 0!==void 0?e[120]=(e[118].push(void 0),e[118]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[119],e[118],d.i64.cast([0,3]))},function(a){return e[116]=void 0}])},function(a){return d.blobs.neq(e[116],void 0)?e[117]=!0:e[117]=!1,e[117]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[100]=e[116]}]):d.sequence([function(a){return e[103]=e[98].get("errors"),e[104]=e[98].get("errors"),function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBEpochClientUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),e[106]="Failed to get mailbox_root_key_v2: epoch 0 is not available.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBEpochClientUtils] ","",e[106]].join("")),e[105]=d.createArray(),void 0!==void 0?e[107]=(e[105].push(void 0),e[105]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBEpochClientUtils",e[106],e[105],d.i64.cast([0,3]))},function(a){return e[100]=void 0}])},function(a){return d.blobs.neq(e[94],void 0)?d.sequence([function(a){return d.blobs.neq(e[100],void 0)?d.sequence([function(a){return e[109]=d.createArray(),e[113]=(e[109].push(d.i64.cast([0,32])),e[109]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,e[100],e[109]).then(function(a){return a=a,e[110]=a[0],a})},function(a){return e[110]!==void 0?d.sequence([function(a){return e[113]=d.i64.of_int32(e[110].length),d.i64.ge(e[113],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[110],d.i64.cast([0,0])).then(function(a){return a=a,e[115]=a[0],e[116]=a[1],a})},function(a){return e[114]=e[115]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[116]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[116]].join("")),e[115]=d.createArray(),void 0!==void 0?e[117]=(e[115].push(void 0),e[115]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[116],e[115],d.i64.cast([0,3]))},function(a){return e[114]=void 0}])},function(a){return e[111]=e[114]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[114]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[114]].join("")),e[113]=d.createArray(),void 0!==void 0?e[115]=(e[113].push(void 0),e[113]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[114],e[113],d.i64.cast([0,3]))},function(a){return e[111]=void 0}])},function(a){return d.blobs.neq(e[111],void 0)?e[112]=!0:e[112]=!1,e[112]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[103]=e[111]}]):d.resolve(e[103]=void 0)},function(a){return e[104]=e[85].get("epoch_root_key"),e[105]=e[85].get("epoch_anon_id"),e[106]=e[85].get("epoch_id"),e[107]=new d.Map(),e[107].set("payload_key",e[94]),e[107].set("payload_fallback_key",e[103]),e[107].set("encryption_version",e[48]),e[107].set("epoch_root_key",e[104]),e[107].set("epoch_anon_id",e[105]),e[107].set("epoch_id",e[106]),e[108]=new d.Map(),e[108].set("ope_key",e[82]),e[108].set("message_payload_encryption_keys",e[107]),e[108].set("ocmf_shared_key",e[31]),e[108].set("mailbox_base_salt",e[30]),e[108].set("mailbox_root_key_v2",e[100]),a=[e[108],void 0],e[101]=a[0],e[102]=a[1]}]):d.resolve((e[103]=new d.Map(),e[103].set("error_code",d.i64.cast([0,26])),e[103].set("stored_procedure","MEBKeyDeriver"),e[103].set("error_message",""),a=[void 0,e[103]],e[101]=a[0],e[102]=a[1]))},function(a){return a=[e[101],e[102]],e[83]=a[0],e[84]=a[1],a}]):d.resolve((e[85]=new d.Map(),e[85].set("error_code",d.i64.cast([0,25])),e[85].set("stored_procedure","MEBKeyDeriver"),e[85].set("error_message",""),a=[void 0,e[85]],e[83]=a[0],e[84]=a[1]))},function(a){return a=[e[83],e[84]],e[76]=a[0],e[77]=a[1],a}]):d.resolve((a=[void 0,e[75]],e[76]=a[0],e[77]=a[1],a))},function(f){return e[76]!==void 0?d.sequence([function(a){return e[82]=e[55].get("backup_id"),e[83]=e[55].get("act_thread_id"),e[84]=e[55].get("timestamp"),e[85]=e[55].get("otid"),d.storedProcedure(b("LSEncryptIdentifiersV2"),e[62],e[63],e[82],e[83],d.i64.from_string(e[84]),e[85],e[76]).then(function(a){return a=a,e[86]=a[0],e[87]=a[1],a})},function(f){return e[86]!==void 0?d.sequence([function(c){return e[92]=e[55].get("act_thread_id"),d.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],e[76],e[92]).then(function(a){return a=a,e[93]=a[0],e[94]=a[1],a})},function(f){return e[99]=d.i64.eq(e[64],d.i64.cast([0,32]))||!1||c("gkx")("12541")||!1,e[100]=e[93]!==void 0,e[99]&&e[100]?d.sequence([function(a){return e[101]=e[55].get("act_thread_id"),e[102]=e[55].get("backup_id"),d.storedProcedure(b("LSDeriveValueSecretRefV2"),e[101],e[102],e[76]).then(function(a){return a=a,e[103]=a[0],e[104]=a[1],a})},function(c){return e[93]!==void 0?d.sequence([function(c){return e[103]!==void 0?d.sequence([function(a){return e[113]=e[103].get("value_secret_ref"),e[114]=e[86].get("act_thread_id_ocmf_partial"),e[115]=e[86].get("otid_ocmf_partial"),e[116]=e[86].get("timestamp_encrypted"),e[117]=new d.Map(),e[117].set("list_key",e[114]),e[117].set("unique_key",e[115]),e[117].set("sort_key",e[116]),void 0!==void 0?(e[151]=(void 0).get("encrypted_message_payload"),e[152]=(void 0).get("value_secret_ref"),e[153]=new d.Map(),e[153].set("value",e[151]),e[153].set("value_secret_ref",e[152]),e[118]=e[153]):e[118]=void 0,e[119]=new d.Map(),e[119].set("list_item_id",e[117]),e[119].set("list_item",e[118]),e[119].set("action_type",e[62]),e[120]=e[55].get("timestamp"),e[121]=e[55].get("otid"),e[122]=e[55].get("act_thread_id"),e[123]=e[55].get("supplemental_otid"),e[124]=e[55].get("deletion_otid"),e[125]=new d.Map(),e[125].set("timestamp",e[120]),e[125].set("otid",e[121]),e[125].set("wa_thread_id",d.i64.from_string(e[122])),e[125].set("supplemental_otid",e[123]),e[125].set("deletion_otid",e[124]),e[126]=e[76].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[126]).then(function(a){return a=a,e[127]=a[0],a})},function(a){return e[128]=e[76].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[128]).then(function(a){return a=a,e[129]=a[0],a})},function(a){return e[130]=new d.Map(),e[130].set("mailbox_root_key",e[127]==null?"":e[127]),e[130].set("ocmf_client_state_blob",e[129]==null?"":e[129]),e[131]=e[86].get("backup_id_ocmf_partial"),e[132]=e[76].get("message_payload_encryption_keys"),e[133]=e[132].get("epoch_id"),e[134]=e[76].get("message_payload_encryption_keys"),e[135]=e[134].get("encryption_version"),e[150]=e[69]==null?"":e[69],e[136]=new d.Map(),e[136].set("mailbox_partial_id",e[131]),e[136].set("action",e[119]),e[136].set("device_id",e[35]),e[136].set("echo_version",d.i64.cast([0,0])),e[136].set("epoch_id",e[133]),e[136].set("trace_id",void 0),e[136].set("encryption_version",e[135]),e[136].set("is_thread",d.i64.eq(e[63],d.i64.cast([0,2]))),e[136].set("raw_identifiers",e[125]),e[136].set("raw_tokens",e[130]),e[136].set("request_id",e[150]),e[136].set("tam_thread_subtype",e[70]==null?d.i64.cast([0,0]):e[70]),e[136].set("is_instamadillo",e[71]==null?!1:e[71]),e[136].set("should_run_device_creation_timestamp_sync",e[65]),e[136].set("value_secret_ref",e[113]),e[136].set("empty_echo_payload_reason",d.i64.cast([0,1])),e[93]!==void 0?d.sequence([function(a){return e[151]=e[93].get("supplemental_data_encrypted"),e[151]!==void 0?d.sequence([function(a){return e[153]=e[93].get("protobuf_encrypted"),e[154]=e[93].get("backup_action"),e[155]=e[93].get("timestamp_ms"),e[156]=e[151].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[156]).then(function(a){return a=a,e[157]=a[0],a})},function(a){return e[158]=e[151].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[158]).then(function(a){return a=a,e[159]=a[0],a})},function(a){return e[160]=e[93].get("message_tags"),e[161]=e[93].get("maybe_ooo_supplemental_upload"),e[162]=new d.Map(),e[162].set("supplementary_data_key",void 0),e[162].set("encrypted_protobuf",e[153]),e[162].set("key_value_backup_action",e[154]),e[162].set("protobuf_ts_ms",e[155]),e[162].set("supplemental_key_ciphertext",e[157]),e[162].set("supplemental_key_hash",e[159]),e[162].set("message_tags",e[160]),e[162].set("maybe_ooo_supplemental_upload",e[161]),e[152]=e[162]}]):d.resolve((e[153]=e[93].get("protobuf_encrypted"),e[154]=e[93].get("backup_action"),e[155]=e[93].get("timestamp_ms"),e[156]=e[93].get("message_tags"),e[157]=new d.Map(),e[157].set("supplementary_data_key",void 0),e[157].set("encrypted_protobuf",e[153]),e[157].set("key_value_backup_action",e[154]),e[157].set("protobuf_ts_ms",e[155]),e[157].set("message_tags",e[156]),e[152]=e[157]))},function(a){return e[136].set("key_value_backup_payload",e[152])}]):d.resolve()},function(a){return e[66]!==void 0?d.resolve(e[136].set("attachment_backup_payload",e[66])):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[151]="payload_null",e[6]!==void 0?e[151]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"attachment_info",e[151]):d.resolve():d.resolve())},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplAnnotateBool.nop"),d.i64.cast([0,637746317]),e[6],"process_attachments_via_message_upload",!0):d.resolve()},function(a){return e[150]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[150],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[137]=d.toJSON(e[136]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[151]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[152]=void 0:e[152]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[151],d.i64.cast([0,1e6])),e[19]),e[152]],e[138]=b[0],e[139]=b[1],e[140]=b[2],e[141]=b[3],e[142]=b[4],e[143]=b[5],e[144]=b[6]):(f=c.item,e[151]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[152]=void 0:e[152]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[151],d.i64.cast([0,1e6])),e[19]),e[152]],e[138]=b[0],e[139]=b[1],e[140]=b[2],e[141]=b[3],e[142]=b[4],e[143]=b[5],e[144]=b[6])})},function(a){return e[146]=new d.Map(),e[146].set("task_id",e[138]),e[146].set("queue_name",e[139]),e[146].set("enqueue_timestamp_ms",e[140]),e[146].set("priority",e[141]),e[146].set("first_executed_timestamp_ms",e[142]),e[146].set("execution_time_ns",e[143]),e[146].set("echo_encoding_execution_time_ns",e[144]),e[147]=new d.Map(),e[147].set("task_metadata",e[146]),e[147].set("action_type",e[62]),e[147].set("content_type",e[63]),e[147].set("identifiers",void 0),e[147].set("identifiers_v2",e[55]),e[147].set("task_creation_source",void 0),e[147].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[151]=(void 0).get("stored_procedure"),e[152]=(void 0).get("error_code"),e[153]=(void 0).get("error_message"),e[154]=".",e[155]=[e[151],e[154],d.i64.to_string(e[152]),e[154],e[153]].join(""),e[6]!==void 0?e[155]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[155]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[151]=(void 0).get("stored_procedure"),e[152]=(void 0).get("error_code"),e[153]=(void 0).get("error_message"),e[154]=".",e[155]=[e[151],e[154],d.i64.to_string(e[152]),e[154],e[153]].join(""),e[6]!==void 0?e[155]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[155]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!0):d.resolve()},function(a){return e[148]=new d.Map(),e[148].set("payload",e[137]),e[149]=d.createArray(),e[151]=(e[149].push(void 0),e[149]),a=[e[148],void 0,e[147],e[149]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3]}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[125]=void 0:e[125]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[19]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6]):(f=c.item,e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[125]=void 0:e[125]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[19]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6])})},function(a){return e[121]=new d.Map(),e[121].set("task_id",e[113]),e[121].set("queue_name",e[114]),e[121].set("enqueue_timestamp_ms",e[115]),e[121].set("priority",e[116]),e[121].set("first_executed_timestamp_ms",e[117]),e[121].set("execution_time_ns",e[118]),e[121].set("echo_encoding_execution_time_ns",e[119]),e[122]=new d.Map(),e[122].set("task_metadata",e[121]),e[122].set("action_type",e[62]),e[122].set("content_type",e[63]),e[122].set("identifiers",void 0),e[122].set("identifiers_v2",e[55]),e[122].set("task_creation_source",void 0),e[122].set("message_payload_source",d.i64.cast([0,2])),e[104]!==void 0?(e[124]=e[104].get("stored_procedure"),e[125]=e[104].get("error_code"),e[126]=e[104].get("error_message"),e[127]=".",e[128]=[e[124],e[127],d.i64.to_string(e[125]),e[127],e[126]].join(""),e[6]!==void 0?e[128]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[128]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[124]=(void 0).get("stored_procedure"),e[125]=(void 0).get("error_code"),e[126]=(void 0).get("error_message"),e[127]=".",e[128]=[e[124],e[127],d.i64.to_string(e[125]),e[127],e[126]].join(""),e[6]!==void 0?e[128]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[128]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[123]=d.createArray(),e[124]=(e[123].push(void 0),e[123]),a=[void 0,e[104],e[122],e[123]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3]}])},function(a){return a=[e[109],e[110],e[111],e[112]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[121]=void 0:e[121]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[19]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6]):(f=c.item,e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[121]=void 0:e[121]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[19]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6])})},function(a){return e[117]=new d.Map(),e[117].set("task_id",e[109]),e[117].set("queue_name",e[110]),e[117].set("enqueue_timestamp_ms",e[111]),e[117].set("priority",e[112]),e[117].set("first_executed_timestamp_ms",e[113]),e[117].set("execution_time_ns",e[114]),e[117].set("echo_encoding_execution_time_ns",e[115]),e[118]=new d.Map(),e[118].set("task_metadata",e[117]),e[118].set("action_type",e[62]),e[118].set("content_type",e[63]),e[118].set("identifiers",void 0),e[118].set("identifiers_v2",e[55]),e[118].set("task_creation_source",void 0),e[118].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[120]=(void 0).get("stored_procedure"),e[121]=(void 0).get("error_code"),e[122]=(void 0).get("error_message"),e[123]=".",e[124]=[e[120],e[123],d.i64.to_string(e[121]),e[123],e[122]].join(""),e[6]!==void 0?e[124]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[124]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[120]=e[94].get("stored_procedure"),e[121]=e[94].get("error_code"),e[122]=e[94].get("error_message"),e[123]=".",e[124]=[e[120],e[123],d.i64.to_string(e[121]),e[123],e[122]].join(""),e[6]!==void 0?e[124]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[124]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[119]=d.createArray(),e[120]=(e[119].push(e[94]),e[119]),a=[void 0,void 0,e[118],e[119]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3]}])},function(a){return a=[e[105],e[106],e[107],e[108]],e[95]=a[0],e[96]=a[1],e[97]=a[2],e[98]=a[3],a}]):d.sequence([function(c){return e[99]===!0&&e[100]===!1?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[117]=void 0:e[117]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[19]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6]):(f=c.item,e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[117]=void 0:e[117]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[19]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6])})},function(a){return e[113]=new d.Map(),e[113].set("task_id",e[105]),e[113].set("queue_name",e[106]),e[113].set("enqueue_timestamp_ms",e[107]),e[113].set("priority",e[108]),e[113].set("first_executed_timestamp_ms",e[109]),e[113].set("execution_time_ns",e[110]),e[113].set("echo_encoding_execution_time_ns",e[111]),e[114]=new d.Map(),e[114].set("task_metadata",e[113]),e[114].set("action_type",e[62]),e[114].set("content_type",e[63]),e[114].set("identifiers",void 0),e[114].set("identifiers_v2",e[55]),e[114].set("task_creation_source",void 0),e[114].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[116]=(void 0).get("stored_procedure"),e[117]=(void 0).get("error_code"),e[118]=(void 0).get("error_message"),e[119]=".",e[120]=[e[116],e[119],d.i64.to_string(e[117]),e[119],e[118]].join(""),e[6]!==void 0?e[120]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[120]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[116]=e[94].get("stored_procedure"),e[117]=e[94].get("error_code"),e[118]=e[94].get("error_message"),e[119]=".",e[120]=[e[116],e[119],d.i64.to_string(e[117]),e[119],e[118]].join(""),e[6]!==void 0?e[120]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[120]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[115]=d.createArray(),e[116]=(e[115].push(e[94]),e[115]),a=[void 0,void 0,e[114],e[115]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3]}]):d.sequence([function(c){return d.i64.eq(e[62],d.i64.cast([0,1]))?(e[113]=e[68]===""?void 0:e[68],e[113]!==void 0?(c=[e[113],void 0],e[111]=c[0],e[112]=c[1],c):(e[114]=new d.Map(),e[114].set("error_code",d.i64.cast([0,30])),e[114].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[114].set("error_message",""),c=[void 0,e[114]],e[111]=c[0],e[112]=c[1]),c=[e[111],e[112]],e[105]=c[0],e[106]=c[1]):(c=["",void 0],e[105]=c[0],e[106]=c[1],c),e[105]!==void 0?d.sequence([function(a){return d.i64.eq(e[62],d.i64.cast([0,1]))?d.sequence([function(a){return e[117]=e[55].get("backup_id"),e[118]=e[55].get("act_thread_id"),d.storedProcedure(b("LSEncryptMessagePayloadV2"),e[117],e[118],e[76],e[105]).then(function(a){return a=a,e[119]=a[0],e[120]=a[1],a})},function(a){return a=[e[119],e[120]],e[111]=a[0],e[112]=a[1],a}]):d.resolve((e[117]=new d.Map(),e[117].set("encrypted_message_payload",""),e[117].set("value_secret_ref",""),a=[e[117],void 0],e[111]=a[0],e[112]=a[1]))},function(c){return e[111]!==void 0?d.sequence([function(a){return e[93]!==void 0&&d.i64.eq(e[62],d.i64.cast([0,2]))?d.sequence([function(a){return e[155]=e[55].get("act_thread_id"),e[156]=e[55].get("backup_id"),d.storedProcedure(b("LSDeriveValueSecretRefV2"),e[155],e[156],e[76]).then(function(a){return a=a,e[157]=a[0],e[158]=a[1],a})},function(a){return e[157]!==void 0?(e[160]=e[157].get("value_secret_ref"),e[159]=e[160]):e[159]="",e[117]=e[159]}]):d.resolve(e[117]="")},function(a){return e[118]=e[86].get("act_thread_id_ocmf_partial"),e[119]=e[86].get("otid_ocmf_partial"),e[120]=e[86].get("timestamp_encrypted"),e[121]=new d.Map(),e[121].set("list_key",e[118]),e[121].set("unique_key",e[119]),e[121].set("sort_key",e[120]),e[111]!==void 0?(e[155]=e[111].get("encrypted_message_payload"),e[156]=e[111].get("value_secret_ref"),e[157]=new d.Map(),e[157].set("value",e[155]),e[157].set("value_secret_ref",e[156]),e[122]=e[157]):e[122]=void 0,e[123]=new d.Map(),e[123].set("list_item_id",e[121]),e[123].set("list_item",e[122]),e[123].set("action_type",e[62]),e[124]=e[55].get("timestamp"),e[125]=e[55].get("otid"),e[126]=e[55].get("act_thread_id"),e[127]=e[55].get("supplemental_otid"),e[128]=e[55].get("deletion_otid"),e[129]=new d.Map(),e[129].set("timestamp",e[124]),e[129].set("otid",e[125]),e[129].set("wa_thread_id",d.i64.from_string(e[126])),e[129].set("supplemental_otid",e[127]),e[129].set("deletion_otid",e[128]),e[130]=e[76].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[130]).then(function(a){return a=a,e[131]=a[0],a})},function(a){return e[132]=e[76].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[132]).then(function(a){return a=a,e[133]=a[0],a})},function(a){return e[134]=new d.Map(),e[134].set("mailbox_root_key",e[131]==null?"":e[131]),e[134].set("ocmf_client_state_blob",e[133]==null?"":e[133]),e[135]=e[86].get("backup_id_ocmf_partial"),e[136]=e[76].get("message_payload_encryption_keys"),e[137]=e[136].get("epoch_id"),e[138]=e[76].get("message_payload_encryption_keys"),e[139]=e[138].get("encryption_version"),e[154]=e[69]==null?"":e[69],e[140]=new d.Map(),e[140].set("mailbox_partial_id",e[135]),e[140].set("action",e[123]),e[140].set("device_id",e[35]),e[140].set("echo_version",d.i64.cast([0,0])),e[140].set("epoch_id",e[137]),e[140].set("trace_id",void 0),e[140].set("encryption_version",e[139]),e[140].set("is_thread",d.i64.eq(e[63],d.i64.cast([0,2]))),e[140].set("raw_identifiers",e[129]),e[140].set("raw_tokens",e[134]),e[140].set("request_id",e[154]),e[140].set("tam_thread_subtype",e[70]==null?d.i64.cast([0,0]):e[70]),e[140].set("is_instamadillo",e[71]==null?!1:e[71]),e[140].set("should_run_device_creation_timestamp_sync",e[65]),e[140].set("value_secret_ref",e[117]),e[93]!==void 0?d.sequence([function(a){return e[155]=e[93].get("supplemental_data_encrypted"),e[155]!==void 0?d.sequence([function(a){return e[157]=e[93].get("protobuf_encrypted"),e[158]=e[93].get("backup_action"),e[159]=e[93].get("timestamp_ms"),e[160]=e[155].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[160]).then(function(a){return a=a,e[161]=a[0],a})},function(a){return e[162]=e[155].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[162]).then(function(a){return a=a,e[163]=a[0],a})},function(a){return e[164]=e[93].get("message_tags"),e[165]=e[93].get("maybe_ooo_supplemental_upload"),e[166]=new d.Map(),e[166].set("supplementary_data_key",void 0),e[166].set("encrypted_protobuf",e[157]),e[166].set("key_value_backup_action",e[158]),e[166].set("protobuf_ts_ms",e[159]),e[166].set("supplemental_key_ciphertext",e[161]),e[166].set("supplemental_key_hash",e[163]),e[166].set("message_tags",e[164]),e[166].set("maybe_ooo_supplemental_upload",e[165]),e[156]=e[166]}]):d.resolve((e[157]=e[93].get("protobuf_encrypted"),e[158]=e[93].get("backup_action"),e[159]=e[93].get("timestamp_ms"),e[160]=e[93].get("message_tags"),e[161]=new d.Map(),e[161].set("supplementary_data_key",void 0),e[161].set("encrypted_protobuf",e[157]),e[161].set("key_value_backup_action",e[158]),e[161].set("protobuf_ts_ms",e[159]),e[161].set("message_tags",e[160]),e[156]=e[161]))},function(a){return e[140].set("key_value_backup_payload",e[156])}]):d.resolve()},function(a){return e[66]!==void 0?d.resolve(e[140].set("attachment_backup_payload",e[66])):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[155]="payload_null",e[6]!==void 0?e[155]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"attachment_info",e[155]):d.resolve():d.resolve())},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplAnnotateBool.nop"),d.i64.cast([0,637746317]),e[6],"process_attachments_via_message_upload",!0):d.resolve()},function(a){return e[154]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[154],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[141]=d.toJSON(e[140]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[155]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[156]=void 0:e[156]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[155],d.i64.cast([0,1e6])),e[19]),e[156]],e[142]=b[0],e[143]=b[1],e[144]=b[2],e[145]=b[3],e[146]=b[4],e[147]=b[5],e[148]=b[6]):(f=c.item,e[155]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[156]=void 0:e[156]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[155],d.i64.cast([0,1e6])),e[19]),e[156]],e[142]=b[0],e[143]=b[1],e[144]=b[2],e[145]=b[3],e[146]=b[4],e[147]=b[5],e[148]=b[6])})},function(a){return e[150]=new d.Map(),e[150].set("task_id",e[142]),e[150].set("queue_name",e[143]),e[150].set("enqueue_timestamp_ms",e[144]),e[150].set("priority",e[145]),e[150].set("first_executed_timestamp_ms",e[146]),e[150].set("execution_time_ns",e[147]),e[150].set("echo_encoding_execution_time_ns",e[148]),e[151]=new d.Map(),e[151].set("task_metadata",e[150]),e[151].set("action_type",e[62]),e[151].set("content_type",e[63]),e[151].set("identifiers",void 0),e[151].set("identifiers_v2",e[55]),e[151].set("task_creation_source",void 0),e[151].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[155]=(void 0).get("stored_procedure"),e[156]=(void 0).get("error_code"),e[157]=(void 0).get("error_message"),e[158]=".",e[159]=[e[155],e[158],d.i64.to_string(e[156]),e[158],e[157]].join(""),e[6]!==void 0?e[159]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[159]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[155]=e[94].get("stored_procedure"),e[156]=e[94].get("error_code"),e[157]=e[94].get("error_message"),e[158]=".",e[159]=[e[155],e[158],d.i64.to_string(e[156]),e[158],e[157]].join(""),e[6]!==void 0?e[159]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[159]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!0):d.resolve()},function(a){return e[152]=new d.Map(),e[152].set("payload",e[141]),e[153]=d.createArray(),e[155]=(e[153].push(e[94]),e[153]),a=[e[152],void 0,e[151],e[153]],e[113]=a[0],e[114]=a[1],e[115]=a[2],e[116]=a[3]}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[128]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[129]=void 0:e[129]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[128],d.i64.cast([0,1e6])),e[19]),e[129]],e[117]=b[0],e[118]=b[1],e[119]=b[2],e[120]=b[3],e[121]=b[4],e[122]=b[5],e[123]=b[6]):(f=c.item,e[128]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[129]=void 0:e[129]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[128],d.i64.cast([0,1e6])),e[19]),e[129]],e[117]=b[0],e[118]=b[1],e[119]=b[2],e[120]=b[3],e[121]=b[4],e[122]=b[5],e[123]=b[6])})},function(a){return e[125]=new d.Map(),e[125].set("task_id",e[117]),e[125].set("queue_name",e[118]),e[125].set("enqueue_timestamp_ms",e[119]),e[125].set("priority",e[120]),e[125].set("first_executed_timestamp_ms",e[121]),e[125].set("execution_time_ns",e[122]),e[125].set("echo_encoding_execution_time_ns",e[123]),e[126]=new d.Map(),e[126].set("task_metadata",e[125]),e[126].set("action_type",e[62]),e[126].set("content_type",e[63]),e[126].set("identifiers",void 0),e[126].set("identifiers_v2",e[55]),e[126].set("task_creation_source",void 0),e[126].set("message_payload_source",d.i64.cast([0,2])),e[112]!==void 0?(e[128]=e[112].get("stored_procedure"),e[129]=e[112].get("error_code"),e[130]=e[112].get("error_message"),e[131]=".",e[132]=[e[128],e[131],d.i64.to_string(e[129]),e[131],e[130]].join(""),e[6]!==void 0?e[132]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[132]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[128]=e[94].get("stored_procedure"),e[129]=e[94].get("error_code"),e[130]=e[94].get("error_message"),e[131]=".",e[132]=[e[128],e[131],d.i64.to_string(e[129]),e[131],e[130]].join(""),e[6]!==void 0?e[132]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[132]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[127]=d.createArray(),e[128]=(e[127].push(e[94]),e[127]),a=[void 0,e[112],e[126],e[127]],e[113]=a[0],e[114]=a[1],e[115]=a[2],e[116]=a[3]}])},function(a){return a=[e[113],e[114],e[115],e[116]],e[107]=a[0],e[108]=a[1],e[109]=a[2],e[110]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[122]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[123]=void 0:e[123]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[122],d.i64.cast([0,1e6])),e[19]),e[123]],e[111]=b[0],e[112]=b[1],e[113]=b[2],e[114]=b[3],e[115]=b[4],e[116]=b[5],e[117]=b[6]):(f=c.item,e[122]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[123]=void 0:e[123]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[122],d.i64.cast([0,1e6])),e[19]),e[123]],e[111]=b[0],e[112]=b[1],e[113]=b[2],e[114]=b[3],e[115]=b[4],e[116]=b[5],e[117]=b[6])})},function(a){return e[119]=new d.Map(),e[119].set("task_id",e[111]),e[119].set("queue_name",e[112]),e[119].set("enqueue_timestamp_ms",e[113]),e[119].set("priority",e[114]),e[119].set("first_executed_timestamp_ms",e[115]),e[119].set("execution_time_ns",e[116]),e[119].set("echo_encoding_execution_time_ns",e[117]),e[120]=new d.Map(),e[120].set("task_metadata",e[119]),e[120].set("action_type",e[62]),e[120].set("content_type",e[63]),e[120].set("identifiers",void 0),e[120].set("identifiers_v2",e[55]),e[120].set("task_creation_source",void 0),e[120].set("message_payload_source",d.i64.cast([0,2])),e[106]!==void 0?(e[122]=e[106].get("stored_procedure"),e[123]=e[106].get("error_code"),e[124]=e[106].get("error_message"),e[125]=".",e[126]=[e[122],e[125],d.i64.to_string(e[123]),e[125],e[124]].join(""),e[6]!==void 0?e[126]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[126]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[122]=e[94].get("stored_procedure"),e[123]=e[94].get("error_code"),e[124]=e[94].get("error_message"),e[125]=".",e[126]=[e[122],e[125],d.i64.to_string(e[123]),e[125],e[124]].join(""),e[6]!==void 0?e[126]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[126]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[121]=d.createArray(),e[122]=(e[121].push(e[94]),e[121]),a=[void 0,e[106],e[120],e[121]],e[107]=a[0],e[108]=a[1],e[109]=a[2],e[110]=a[3]}])},function(a){return a=[e[107],e[108],e[109],e[110]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3],a}])},function(a){return a=[e[101],e[102],e[103],e[104]],e[95]=a[0],e[96]=a[1],e[97]=a[2],e[98]=a[3],a}])},function(a){return a=[e[95],e[96],e[97],e[98]],e[88]=a[0],e[89]=a[1],e[90]=a[2],e[91]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[103]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[104]=void 0:e[104]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[103],d.i64.cast([0,1e6])),e[19]),e[104]],e[92]=b[0],e[93]=b[1],e[94]=b[2],e[95]=b[3],e[96]=b[4],e[97]=b[5],e[98]=b[6]):(f=c.item,e[103]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[104]=void 0:e[104]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[103],d.i64.cast([0,1e6])),e[19]),e[104]],e[92]=b[0],e[93]=b[1],e[94]=b[2],e[95]=b[3],e[96]=b[4],e[97]=b[5],e[98]=b[6])})},function(a){return e[100]=new d.Map(),e[100].set("task_id",e[92]),e[100].set("queue_name",e[93]),e[100].set("enqueue_timestamp_ms",e[94]),e[100].set("priority",e[95]),e[100].set("first_executed_timestamp_ms",e[96]),e[100].set("execution_time_ns",e[97]),e[100].set("echo_encoding_execution_time_ns",e[98]),e[101]=new d.Map(),e[101].set("task_metadata",e[100]),e[101].set("action_type",e[62]),e[101].set("content_type",e[63]),e[101].set("identifiers",void 0),e[101].set("identifiers_v2",e[55]),e[101].set("task_creation_source",void 0),e[101].set("message_payload_source",d.i64.cast([0,2])),e[87]!==void 0?(e[103]=e[87].get("stored_procedure"),e[104]=e[87].get("error_code"),e[105]=e[87].get("error_message"),e[106]=".",e[107]=[e[103],e[106],d.i64.to_string(e[104]),e[106],e[105]].join(""),e[6]!==void 0?e[107]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[107]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[103]=(void 0).get("stored_procedure"),e[104]=(void 0).get("error_code"),e[105]=(void 0).get("error_message"),e[106]=".",e[107]=[e[103],e[106],d.i64.to_string(e[104]),e[106],e[105]].join(""),e[6]!==void 0?e[107]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[107]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[102]=d.createArray(),e[103]=(e[102].push(void 0),e[102]),a=[void 0,e[87],e[101],e[102]],e[88]=a[0],e[89]=a[1],e[90]=a[2],e[91]=a[3]}])},function(a){return a=[e[88],e[89],e[90],e[91]],e[78]=a[0],e[79]=a[1],e[80]=a[2],e[81]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[93]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[94]=void 0:e[94]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[93],d.i64.cast([0,1e6])),e[19]),e[94]],e[82]=b[0],e[83]=b[1],e[84]=b[2],e[85]=b[3],e[86]=b[4],e[87]=b[5],e[88]=b[6]):(f=c.item,e[93]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[94]=void 0:e[94]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[93],d.i64.cast([0,1e6])),e[19]),e[94]],e[82]=b[0],e[83]=b[1],e[84]=b[2],e[85]=b[3],e[86]=b[4],e[87]=b[5],e[88]=b[6])})},function(a){return e[90]=new d.Map(),e[90].set("task_id",e[82]),e[90].set("queue_name",e[83]),e[90].set("enqueue_timestamp_ms",e[84]),e[90].set("priority",e[85]),e[90].set("first_executed_timestamp_ms",e[86]),e[90].set("execution_time_ns",e[87]),e[90].set("echo_encoding_execution_time_ns",e[88]),e[91]=new d.Map(),e[91].set("task_metadata",e[90]),e[91].set("action_type",e[62]),e[91].set("content_type",e[63]),e[91].set("identifiers",void 0),e[91].set("identifiers_v2",e[55]),e[91].set("task_creation_source",void 0),e[91].set("message_payload_source",d.i64.cast([0,2])),e[77]!==void 0?(e[93]=e[77].get("stored_procedure"),e[94]=e[77].get("error_code"),e[95]=e[77].get("error_message"),e[96]=".",e[97]=[e[93],e[96],d.i64.to_string(e[94]),e[96],e[95]].join(""),e[6]!==void 0?e[97]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[97]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[93]=(void 0).get("stored_procedure"),e[94]=(void 0).get("error_code"),e[95]=(void 0).get("error_message"),e[96]=".",e[97]=[e[93],e[96],d.i64.to_string(e[94]),e[96],e[95]].join(""),e[6]!==void 0?e[97]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[97]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[92]=d.createArray(),e[93]=(e[92].push(void 0),e[92]),a=[void 0,e[77],e[91],e[92]],e[78]=a[0],e[79]=a[1],e[80]=a[2],e[81]=a[3]}])},function(a){return a=[e[78],e[79],e[80],e[81]],e[58]=a[0],e[59]=a[1],e[60]=a[2],e[61]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[84]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[85]=void 0:e[85]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[84],d.i64.cast([0,1e6])),e[19]),e[85]],e[72]=b[0],e[73]=b[1],e[74]=b[2],e[75]=b[3],e[76]=b[4],e[77]=b[5],e[78]=b[6]):(f=c.item,e[84]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[85]=void 0:e[85]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[84],d.i64.cast([0,1e6])),e[19]),e[85]],e[72]=b[0],e[73]=b[1],e[74]=b[2],e[75]=b[3],e[76]=b[4],e[77]=b[5],e[78]=b[6])})},function(a){return e[80]=new d.Map(),e[80].set("task_id",e[72]),e[80].set("queue_name",e[73]),e[80].set("enqueue_timestamp_ms",e[74]),e[80].set("priority",e[75]),e[80].set("first_executed_timestamp_ms",e[76]),e[80].set("execution_time_ns",e[77]),e[80].set("echo_encoding_execution_time_ns",e[78]),e[81]=new d.Map(),e[81].set("task_metadata",e[80]),e[81].set("action_type",e[62]),e[81].set("content_type",e[63]),e[81].set("identifiers",void 0),e[81].set("identifiers_v2",e[55]),e[81].set("task_creation_source",void 0),e[81].set("message_payload_source",d.i64.cast([0,2])),e[82]=new d.Map(),e[82].set("error_code",e[64]),e[82].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[82].set("error_message",""),e[82]!==void 0?(e[84]=e[82].get("stored_procedure"),e[85]=e[82].get("error_code"),e[86]=e[82].get("error_message"),e[87]=".",e[88]=[e[84],e[87],d.i64.to_string(e[85]),e[87],e[86]].join(""),e[6]!==void 0?e[88]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[88]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[84]=(void 0).get("stored_procedure"),e[85]=(void 0).get("error_code"),e[86]=(void 0).get("error_message"),e[87]=".",e[88]=[e[84],e[87],d.i64.to_string(e[85]),e[87],e[86]].join(""),e[6]!==void 0?e[88]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[88]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[83]=d.createArray(),a=[void 0,e[82],e[81],e[83]],e[58]=a[0],e[59]=a[1],e[60]=a[2],e[61]=a[3]}])},function(a){return a=[e[58],e[59],e[60],e[61]],e[50]=a[0],e[51]=a[1],e[52]=a[2],e[53]=a[3],a}]))})},function(a){return a=[e[50],e[51],e[52],e[53]],e[42]=a[0],e[43]=a[1],e[44]=a[2],e[45]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[58]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[58],d.i64.cast([0,1e6])),e[19]),void 0],e[46]=f[0],e[47]=f[1],e[48]=f[2],e[49]=f[3],e[50]=f[4],e[51]=f[5],e[52]=f[6]):(c=b.item,e[58]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[58],d.i64.cast([0,1e6])),e[19]),void 0],e[46]=f[0],e[47]=f[1],e[48]=f[2],e[49]=f[3],e[50]=f[4],e[51]=f[5],e[52]=f[6])})},function(a){return e[54]=new d.Map(),e[54].set("task_id",e[46]),e[54].set("queue_name",e[47]),e[54].set("enqueue_timestamp_ms",e[48]),e[54].set("priority",e[49]),e[54].set("first_executed_timestamp_ms",e[50]),e[54].set("execution_time_ns",e[51]),e[54].set("echo_encoding_execution_time_ns",e[52]),e[55]=new d.Map(),e[55].set("task_metadata",e[54]),e[55].set("action_type",void 0),e[55].set("content_type",void 0),e[55].set("identifiers",void 0),e[55].set("identifiers_v2",void 0),e[55].set("task_creation_source",void 0),e[55].set("message_payload_source",d.i64.cast([0,2])),e[56]=new d.Map(),e[56].set("error_code",d.i64.cast([0,24])),e[56].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[56].set("error_message",""),e[56]!==void 0?(e[58]=e[56].get("stored_procedure"),e[59]=e[56].get("error_code"),e[60]=e[56].get("error_message"),e[61]=".",e[62]=[e[58],e[61],d.i64.to_string(e[59]),e[61],e[60]].join(""),e[6]!==void 0?e[62]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[62]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[58]=(void 0).get("stored_procedure"),e[59]=(void 0).get("error_code"),e[60]=(void 0).get("error_message"),e[61]=".",e[62]=[e[58],e[61],d.i64.to_string(e[59]),e[61],e[60]].join(""),e[6]!==void 0?e[62]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[62]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[57]=d.createArray(),a=[void 0,e[56],e[55],e[57]],e[42]=a[0],e[43]=a[1],e[44]=a[2],e[45]=a[3]}])},function(a){return a=[e[42],e[43],e[44],e[45]],e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=a[3],a}]):d.sequence([function(b){return e[23]=e[10].get("errors"),e[24]=e[10].get("errors"),d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[37]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[37],d.i64.cast([0,1e6])),e[19]),void 0],e[25]=f[0],e[26]=f[1],e[27]=f[2],e[28]=f[3],e[29]=f[4],e[30]=f[5],e[31]=f[6]):(c=b.item,e[37]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[37],d.i64.cast([0,1e6])),e[19]),void 0],e[25]=f[0],e[26]=f[1],e[27]=f[2],e[28]=f[3],e[29]=f[4],e[30]=f[5],e[31]=f[6])})},function(a){return e[33]=new d.Map(),e[33].set("task_id",e[25]),e[33].set("queue_name",e[26]),e[33].set("enqueue_timestamp_ms",e[27]),e[33].set("priority",e[28]),e[33].set("first_executed_timestamp_ms",e[29]),e[33].set("execution_time_ns",e[30]),e[33].set("echo_encoding_execution_time_ns",e[31]),e[34]=new d.Map(),e[34].set("task_metadata",e[33]),e[34].set("action_type",void 0),e[34].set("content_type",void 0),e[34].set("identifiers",void 0),e[34].set("identifiers_v2",void 0),e[34].set("task_creation_source",void 0),e[34].set("message_payload_source",d.i64.cast([0,2])),e[35]=new d.Map(),e[35].set("error_code",d.i64.cast([0,1])),e[35].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[35].set("error_message",""),e[35]!==void 0?(e[37]=e[35].get("stored_procedure"),e[38]=e[35].get("error_code"),e[39]=e[35].get("error_message"),e[40]=".",e[41]=[e[37],e[40],d.i64.to_string(e[38]),e[40],e[39]].join(""),e[6]!==void 0?e[41]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[41]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[37]=(void 0).get("stored_procedure"),e[38]=(void 0).get("error_code"),e[39]=(void 0).get("error_message"),e[40]=".",e[41]=[e[37],e[40],d.i64.to_string(e[38]),e[40],e[39]].join(""),e[6]!==void 0?e[41]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[41]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[36]=d.createArray(),a=[void 0,e[35],e[34],e[36]],e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=a[3]}])},function(a){return e[16]=d.i64.of_float(Date.now()),e[17]=d.i64.random(),e[20]="Finishing execution. Execution time: ",e[21]=d.i64.to_string(d.i64.sub(e[16],e[0])),e[22]=" ms",e[18]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][serializeBackupPayloadV2] ",e[18],e[20],e[18],e[21],e[18],e[22]].join("")),d.i64.eq(d.i64.mod_(e[17],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[23]=",",e[24]=d.createArray(),void 0!==void 0?e[25]=(e[24].push(void 0),e[24]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[e[20],e[23],e[21],e[23],e[22]].join(""),e[24],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[12],e[13],e[14],e[15]],f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],a}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure";a.__tables__=["pending_tasks","secure_encrypted_backups_client_state","pending_backups_context_v2","pending_protobuf_backups_context","secure_encrypted_backups_epochs"];d=a;g["default"]=d}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.forEach(c.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]),function(a){var b=a.update;a.item;return b({backupStatus:c.i64.cast([0,2])})})},function(e){return c.storedProcedure(b("LSSerializeBackupPayloadV2"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],a})},function(a){return d[6]=c.createArray(),d[7]=c.i64.of_int32(d[5].length),c.i64.gt(d[7],c.i64.cast([0,0]))?c.loopAsync(d[7],function(a){return d[23]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],d[23]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],a})},function(a){return d[24]!==void 0?d[26]=(d[6].push(d[24]),d[6]):0}])}):c.resolve()},function(a){return d[8]=c.i64.of_int32(d[6].length),c.i64.gt(d[8],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[6],c.i64.cast([0,0])).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[9]=d[23]}]):c.resolve(d[9]=void 0)},function(a){return d[2]?d[10]=!1:d[10]=!0,d[10]?(d[3]?d[23]=!1:d[23]=!0,d[23]?(a=[void 0,void 0,d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a):(a=[void 0,d[3],d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a),a=[d[24],d[25],d[26],d[27],d[28]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4]):(d[23]=d[2].get("payload"),a=[d[23],d[3],d[9],d[6],d[4]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4]),d[23]=new c.Map(),d[24]=d[23].set("success",d[11]),d[25]=d[23].set("failure",d[12]),d[26]=d[23].set("protobuf_failure",d[13]),d[27]=d[23].set("protobuf_failures",d[14]),d[28]=d[23].set("context",d[15]),d[29]=c.toJSON(d[23]),d[16]=d[29],d[17]=c.i64.of_float(Date.now()),d[18]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[17],d[0])),d[22]=" ms",d[19]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",d[19],d[20],d[19],d[21],d[19],d[22]].join("")),c.i64.eq(c.i64.mod_(d[18],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[16],c.i64.cast([0,50026])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure";a.__tables__=["pending_backups_context_v2"];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[],e=[];return d[0]=new c.Map(),d[0].set("error_code",c.i64.cast([0,802])),d[0].set("stored_procedure","LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure"),d[0].set("error_message",""),d[2]=new c.Map(),d[3]=d[2].set("success",void 0),d[4]=d[2].set("failure",d[0]),d[5]=d[2].set("context",void 0),d[6]=c.toJSON(d[2]),d[1]=d[6],a=[d[1],c.i64.cast([0,50042]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],c.resolve(e)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadSenderBackup",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] LSEncryptedBackupsMinosEncrypt native op not supported"),d[3]="LSEncryptedBackupsMinosEncrypt native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] ","",d[3]].join("")),d[2]=c.createArray(),void 0!==void 0?d[12]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",d[3],d[2],c.i64.cast([0,3]))},function(a){return d[4]=new c.Map(),d[4].set("error_code",c.i64.cast([0,3])),d[4].set("stored_procedure","taskSerializerEncryptedBackupsUploadSenderBackup"),d[4].set("error_message",""),d[12]=new c.Map(),d[13]=d[12].set("success",void 0),d[14]=d[12].set("failure",d[4]),d[15]=d[12].set("context",void 0),d[16]=c.toJSON(d[12]),d[5]=d[16],d[6]=c.i64.of_float(Date.now()),d[7]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[6],d[0])),d[11]=" ms",d[8]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] ",d[8],d[9],d[8],d[10],d[8],d[11]].join("")),c.i64.eq(c.i64.mod_(d[7],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadSenderBackup",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],c.i64.cast([0,50057]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerMuteThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("TaskSerializerMuteThreadV2: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("mailbox_type",b.i64.cast([0,0])),c[11].set("mute_expire_time_ms",e.muteExpireTimeMs),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,144]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerMuteThreadV2StoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSTaskSerializerRemoveThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,c[7]=e.removeType,b.i64.neq(c[7],void 0)?(c[8]=new b.Map(),c[8].set("thread_key",e.threadKey),c[8].set("remove_type",c[7]),c[8].set("sync_group",e.syncGroup==null?b.i64.cast([0,1]):e.syncGroup),c[9]=b.toJSON(c[8]),f=[c[9],b.i64.cast([0,146]),void 0],c[4]=f[0],c[5]=f[1],c[6]=f[2]):(d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d),e=[c[4],c[5],c[6]],c[0]=e[0],c[1]=e[1],c[2]=e[2])})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerRemoveThreadStoredProcedure";a.__tables__=["threads_optimistic_context"];e.exports=a}),null);
__d("LSTaskSerializerSendMessageV2",["LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(31).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(d){return c[11]=e.offlineThreadingId,c[12]=e.messageId,c[22]=e.threadAttributionSource,c[9]=e.platformRef,c[10]=e.platformToken,c[8]=e.replySourceId,c[13]=e.replySourceType,c[21]=e.sendType,c[23]=e.markThreadRead,c[14]=e.initiatingSource,c[15]=e.skipUrlPreviewGen,c[17]=e.textHasLinks,c[18]=e.dataclassParams,c[19]=e.multitabEnv,c[20]=e.metadataDataclass,c[16]=e.richTextFormatType,b.db.table(12).fetch([[[c[11]]],"optimistic"]).next().then(function(e,f){var d=e.done;e=e.value;return d?(c[24]=b.createArray(),c[25]=(c[24].push("OTID not found"),c[24]),c[26]=(c[24].push(c[11]),c[24]),c[27]=b.toJSON(c[24]),function(a){b.logger(a).mustfix(a)}(c[27]),d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2]):(f=e.item,b.sequence([function(d){return c[32]=f.text,c[28]=f.threadKey,c[33]=f.messageId,c[41]=f.senderId,c[30]=f.stickerId,c[35]=f.mentionOffsets,c[36]=f.mentionLengths,c[29]=f.mentionIds,c[37]=f.mentionTypes,c[40]=f.replyType,c[38]=f.isForwarded,c[34]=f.forwardScore,c[39]=f.hotEmojiSize,c[31]=f.metadataDataclass,b.db.table(9).fetch([[[c[28]]]]).next().then(function(e,g){var d=e.done;e=e.value;return d?(c[42]=b.createArray(),c[43]=(c[42].push("thread not found"),c[42]),c[44]=(c[42].push(c[28]),c[42]),c[45]=b.toJSON(c[42]),function(a){b.logger(a).mustfix(a)}(c[45]),d=[void 0,void 0,void 0],c[24]=d[0],c[25]=d[1],c[26]=d[2]):(g=e.item,b.sequence([function(d){return c[49]=g.threadName,c[48]=g.threadKey,c[50]=g.mailboxType,c[42]=g.threadType,c[51]=g.capabilities,c[52]=g.capabilities2,c[53]=g.capabilities3,c[54]=g.capabilities4,c[55]=g.capabilities5,b.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var d=e.done;e=e.value;return d?c[43]=!1:(f=e.item,b.sequence([function(d){return b.islc(b.db.table(2).fetch([[[f.queueName]],"queueNameTaskId"]),0,b.i64.to_float(b.i64.cast([0,1]))).next().then(function(e,f){var d=e.done;e=e.value;return d?c[56]=!1:(f=e.item,c[56]=b.i64.eq(f.taskId,a[0]))})},function(a){return c[43]=c[56]}]))})},function(a){return b.i64.eq(g.authorityLevel,b.i64.cast([0,20]))&&(b.i64.eq(c[42],b.i64.cast([0,2]))||b.i64.eq(c[42],b.i64.cast([0,5]))||b.i64.eq(c[42],b.i64.cast([0,26])))&&c[43]?b.sequence([function(a){return c[59]=c[21]==null?b.i64.cast([0,1]):c[21],b.db.table(9).fetch([[[c[28]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[56]=b.i64.cast([0,1]):(e=d.item,c[74]=e.syncGroup,b.i64.neq(c[74],void 0)?c[73]=c[74]:c[73]=b.i64.cast([0,1]),c[56]=c[73])})},function(a){return c[58]=new b.Map(),c[58].set("thread_id",c[28]),c[58].set("otid",c[11]),c[58].set("source",c[22]==null?b.i64.cast([0,0]):c[22]),c[58].set("send_type",b.i64.cast([0,1])),c[58].set("sync_group",c[56]),c[58].set("mark_thread_read",c[23]),b.i64.eq(c[59],b.i64.cast([0,1]))?b.resolve(c[58].set("text",c[32])):b.i64.eq(c[59],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[30],void 0)?(c[58].set("sticker_id",c[30]),c[58].set("send_type",c[59])):0):b.i64.eq(c[59],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[73]=a[0],c[74]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[73]=a[0],c[74]=a[1])})},function(a){return c[73]!==void 0?b.i64.neq(c[74],void 0)?(c[58].set("url",c[73]),c[58].set("attribution_app_id",c[74]),c[58].set("send_type",c[59]),c[31]!==void 0?c[58].set("metadata_dataclass",c[31]):0):0:0}]):b.i64.eq(c[59],b.i64.cast([0,3]))?b.sequence([function(a){return c[58].set("text",c[32]),c[73]=b.createArray(),c[74]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[28],c[33]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[75]=a.offlineAttachmentId,c[76]=(c[73].push(b.i64.from_string(a.attachmentFbid)),c[73]),c[75]!==void 0?c[76]=(c[74].push(c[75]),c[74]):0})},function(a){return c[58].set("attachment_fbids",c[73]),b.i64.eq(c[59],b.i64.cast([0,9]))?c[58].set("offline_attachment_ids",c[74]):0,c[58].set("send_type",c[59])}]):b.i64.eq(c[59],b.i64.cast([0,9]))?b.sequence([function(a){return c[58].set("text",c[32]),c[73]=b.createArray(),c[74]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[28],c[33]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[75]=a.offlineAttachmentId,c[76]=(c[73].push(b.i64.from_string(a.attachmentFbid)),c[73]),c[75]!==void 0?c[76]=(c[74].push(c[75]),c[74]):0})},function(a){return c[58].set("attachment_fbids",c[73]),b.i64.eq(c[59],b.i64.cast([0,9]))?c[58].set("offline_attachment_ids",c[74]):0,c[58].set("send_type",c[59])}]):b.i64.eq(c[59],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[73]=void 0:(d=b.item,c[73]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[75]=void 0:(d=b.item,c[75]=d.actionUrl)})},function(a){return c[73]!==void 0?(c[58].set("text",c[32]),c[75]!==void 0?c[58].set("url",c[75]):0,c[58].set("forwarded_share_id",c[73]),c[58].set("send_type",c[59])):0}]):b.i64.eq(c[59],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[58].set("forwarded_msg_id",c[12]),c[58].set("send_type",c[59]),b.i64.neq(c[34],void 0)?c[58].set("forward_score",c[34]):0,c[58].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[59],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[73]=a[0],c[74]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[73]=a[0],c[74]=a[1])})},function(a){return c[73]!==void 0?(c[58].set("url",c[73]),c[58].set("text",c[32]),c[58].set("send_type",c[59])):0}]):b.i64.eq(c[59],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[73]=a[0],c[74]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[73]=a[0],c[74]=a[1])})},function(a){return c[73]!==void 0?(c[58].set("url",c[73]),c[58].set("text",c[32]),c[58].set("send_type",c[59])):0}]):b.resolve(0)},function(a){return c[69]=c[8]===""?void 0:c[8],c[69]!==void 0?b.i64.neq(c[13],void 0)?(c[73]=new b.Map(),c[73].set("reply_source_id",c[69]),c[73].set("reply_source_type",c[13]),c[73].set("reply_type",c[40]==null?b.i64.cast([0,0]):c[40]),c[73].set("reply_source_attachment_id",void 0),c[58].set("reply_metadata",c[73])):0:0,c[70]=c[29]===""?void 0:c[29],c[70]!==void 0?(c[73]=c[35]===""?void 0:c[35],c[73]!==void 0?(c[74]=c[36]===""?void 0:c[36],c[74]!==void 0?(c[75]=new b.Map(),c[75].set("mention_ids",c[70]),c[75].set("mention_offsets",c[73]),c[75].set("mention_lengths",c[74]),c[75].set("mention_types",c[37]===""?void 0:c[37]),c[58].set("mention_data",c[75])):0):0):0,c[38]!==void 0?c[58].set("is_forwarded",c[38]):0,c[71]=c[9]===""?void 0:c[9],c[71]!==void 0?c[58].set("platform_ref",c[71]):0,c[72]=c[10]===""?void 0:c[10],c[72]!==void 0?c[58].set("platform_token",c[72]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[59],a)})?b.i64.neq(c[39],void 0)?c[58].set("hot_emoji_size",c[39]):0:0,b.i64.neq(c[14],void 0)?c[58].set("initiating_source",c[14]):0,c[15]!==void 0?c[58].set("skip_url_preview_gen",c[15]):0,b.i64.neq(c[16],void 0)?c[58].set("rich_text_format_type",c[16]):0,b.resolve()},function(a){return c[17]!==void 0?c[58].set("text_has_links",c[17]):0,c[18]!==void 0?c[58].set("dataclass_params",c[18]):0,c[19]!==void 0?c[58].set("multitab_env",c[19]):0,c[20]!==void 0?c[58].set("metadata_dataclass",c[20]):0,b.filter(b.db.table(14).fetch([[[c[48],c[41]]]]),function(a){return b.i64.eq(a.threadKey,c[48])&&b.i64.eq(b.i64.cast([0,0]),c[50])&&b.i64.eq(a.contactId,c[41])}).next().then(function(d,e){var a=d.done;d=d.value;return a?c[60]=!1:(e=d.item,b.i64.eq(c[42],b.i64.cast([0,152]))?(c[74]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,7]))?c[75]=!1:c[75]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),c[74]),b.i64.cast([0,0])),c[76]=c[51],c[77]=c[52],c[78]=c[53],c[79]=c[54],c[80]=c[55],c[82]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),c[83]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(c[82],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,289]))?c[81]=!1:(b.i64.eq(c[82],b.i64.cast([0,0]))?c[84]=!b.i64.eq(b.i64.and_(c[83],c[76]),b.i64.cast([0,0])):(b.i64.eq(c[82],b.i64.cast([0,1]))?c[85]=!b.i64.eq(b.i64.and_(c[83],c[77]),b.i64.cast([0,0])):(b.i64.eq(c[82],b.i64.cast([0,2]))?c[86]=!b.i64.eq(b.i64.and_(c[83],c[78]),b.i64.cast([0,0])):(b.i64.eq(c[82],b.i64.cast([0,3]))?c[87]=!b.i64.eq(b.i64.and_(c[83],c[79]),b.i64.cast([0,0])):(b.i64.eq(c[82],b.i64.cast([0,4]))?c[88]=!b.i64.eq(b.i64.and_(c[83],c[80]),b.i64.cast([0,0])):c[88]=!1,c[87]=c[88]),c[86]=c[87]),c[85]=c[86]),c[84]=c[85]),c[81]=c[84]),c[75]===c[81]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),c[73]=c[75]):c[73]=!1,c[60]=c[73])})},function(a){return c[60]?c[58].set("perform_action_as_page",!0):0,c[62]=b.createArray(),b.forEach(b.db.table(14).fetch([[[c[28]]]]),function(a){a=a.item;return c[73]=(c[62].push(a.contactId),c[62])})},function(a){return c[63]=new b.Map(),c[63].set("participants",c[62]),c[63].set("send_payload",c[58]),c[49]!==void 0?c[63].set("thread_name",c[49]):0,b.db.table(312).fetch([[[c[28]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[64]=void 0:(d=b.item,c[64]=d.metadata)})},function(a){return c[63].set("thread_metadata",c[64]),b.forEach(b.db.table(9).fetch([[[c[48]]]]),function(a){var b=a.update;a.item;return b({otidOfFirstMessage:f.offlineThreadingId})})},function(a){return c[64]===void 0||!1?(b.i64.eq(c[42],b.i64.cast([0,5]))||b.i64.eq(c[42],b.i64.cast([0,26]))?(function(a){b.logger(a).mustfix(a)}("For Marketplace & community chat subthreads, thread metadata cannot be null"),a=[void 0,void 0,void 0],c[73]=a[0],c[74]=a[1],c[75]=a[2]):(c[76]=b.toJSON(c[63]),a=[c[76],b.i64.cast([0,130]),void 0],c[73]=a[0],c[74]=a[1],c[75]=a[2]),a=[c[73],c[74],c[75]],c[66]=a[0],c[67]=a[1],c[68]=a[2]):(b.i64.eq(c[42],b.i64.cast([0,5]))?(c[76]=b.toJSON(c[63]),a=[c[76],b.i64.cast([0,645]),void 0],c[73]=a[0],c[74]=a[1],c[75]=a[2]):(b.i64.eq(c[42],b.i64.cast([0,2]))?(c[79]=b.toJSON(c[63]),a=[c[79],b.i64.cast([0,787]),void 0],c[76]=a[0],c[77]=a[1],c[78]=a[2]):(c[79]=b.toJSON(c[63]),a=[c[79],b.i64.cast([0,645]),void 0],c[76]=a[0],c[77]=a[1],c[78]=a[2]),a=[c[76],c[77],c[78]],c[73]=a[0],c[74]=a[1],c[75]=a[2]),a=[c[73],c[74],c[75]],c[66]=a[0],c[67]=a[1],c[68]=a[2]),a=[c[66],c[67],c[68]],c[45]=a[0],c[46]=a[1],c[47]=a[2]}]):b.sequence([function(a){return c[59]=c[21]==null?b.i64.cast([0,1]):c[21],b.db.table(9).fetch([[[c[28]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[56]=b.i64.cast([0,1]):(e=d.item,c[68]=e.syncGroup,b.i64.neq(c[68],void 0)?c[67]=c[68]:c[67]=b.i64.cast([0,1]),c[56]=c[67])})},function(a){return c[58]=new b.Map(),c[58].set("thread_id",c[28]),c[58].set("otid",c[11]),c[58].set("source",c[22]==null?b.i64.cast([0,0]):c[22]),c[58].set("send_type",b.i64.cast([0,1])),c[58].set("sync_group",c[56]),c[58].set("mark_thread_read",c[23]),b.i64.eq(c[59],b.i64.cast([0,1]))?b.resolve(c[58].set("text",c[32])):b.i64.eq(c[59],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[30],void 0)?(c[58].set("sticker_id",c[30]),c[58].set("send_type",c[59])):0):b.i64.eq(c[59],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[67]=a[0],c[68]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[67]=a[0],c[68]=a[1])})},function(a){return c[67]!==void 0?b.i64.neq(c[68],void 0)?(c[58].set("url",c[67]),c[58].set("attribution_app_id",c[68]),c[58].set("send_type",c[59]),c[31]!==void 0?c[58].set("metadata_dataclass",c[31]):0):0:0}]):b.i64.eq(c[59],b.i64.cast([0,3]))?b.sequence([function(a){return c[58].set("text",c[32]),c[67]=b.createArray(),c[68]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[28],c[33]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[69]=a.offlineAttachmentId,c[70]=(c[67].push(b.i64.from_string(a.attachmentFbid)),c[67]),c[69]!==void 0?c[70]=(c[68].push(c[69]),c[68]):0})},function(a){return c[58].set("attachment_fbids",c[67]),b.i64.eq(c[59],b.i64.cast([0,9]))?c[58].set("offline_attachment_ids",c[68]):0,c[58].set("send_type",c[59])}]):b.i64.eq(c[59],b.i64.cast([0,9]))?b.sequence([function(a){return c[58].set("text",c[32]),c[67]=b.createArray(),c[68]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[28],c[33]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[69]=a.offlineAttachmentId,c[70]=(c[67].push(b.i64.from_string(a.attachmentFbid)),c[67]),c[69]!==void 0?c[70]=(c[68].push(c[69]),c[68]):0})},function(a){return c[58].set("attachment_fbids",c[67]),b.i64.eq(c[59],b.i64.cast([0,9]))?c[58].set("offline_attachment_ids",c[68]):0,c[58].set("send_type",c[59])}]):b.i64.eq(c[59],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[67]=void 0:(d=b.item,c[67]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[69]=void 0:(d=b.item,c[69]=d.actionUrl)})},function(a){return c[67]!==void 0?(c[58].set("text",c[32]),c[69]!==void 0?c[58].set("url",c[69]):0,c[58].set("forwarded_share_id",c[67]),c[58].set("send_type",c[59])):0}]):b.i64.eq(c[59],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[58].set("forwarded_msg_id",c[12]),c[58].set("send_type",c[59]),b.i64.neq(c[34],void 0)?c[58].set("forward_score",c[34]):0,c[58].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[59],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[67]=a[0],c[68]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[67]=a[0],c[68]=a[1])})},function(a){return c[67]!==void 0?(c[58].set("url",c[67]),c[58].set("text",c[32]),c[58].set("send_type",c[59])):0}]):b.i64.eq(c[59],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[28],c[33]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[67]=a[0],c[68]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[67]=a[0],c[68]=a[1])})},function(a){return c[67]!==void 0?(c[58].set("url",c[67]),c[58].set("text",c[32]),c[58].set("send_type",c[59])):0}]):b.resolve(0)},function(a){return c[63]=c[8]===""?void 0:c[8],c[63]!==void 0?b.i64.neq(c[13],void 0)?(c[67]=new b.Map(),c[67].set("reply_source_id",c[63]),c[67].set("reply_source_type",c[13]),c[67].set("reply_type",c[40]==null?b.i64.cast([0,0]):c[40]),c[67].set("reply_source_attachment_id",void 0),c[58].set("reply_metadata",c[67])):0:0,c[64]=c[29]===""?void 0:c[29],c[64]!==void 0?(c[67]=c[35]===""?void 0:c[35],c[67]!==void 0?(c[68]=c[36]===""?void 0:c[36],c[68]!==void 0?(c[69]=new b.Map(),c[69].set("mention_ids",c[64]),c[69].set("mention_offsets",c[67]),c[69].set("mention_lengths",c[68]),c[69].set("mention_types",c[37]===""?void 0:c[37]),c[58].set("mention_data",c[69])):0):0):0,c[38]!==void 0?c[58].set("is_forwarded",c[38]):0,c[65]=c[9]===""?void 0:c[9],c[65]!==void 0?c[58].set("platform_ref",c[65]):0,c[66]=c[10]===""?void 0:c[10],c[66]!==void 0?c[58].set("platform_token",c[66]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[59],a)})?b.i64.neq(c[39],void 0)?c[58].set("hot_emoji_size",c[39]):0:0,b.i64.neq(c[14],void 0)?c[58].set("initiating_source",c[14]):0,c[15]!==void 0?c[58].set("skip_url_preview_gen",c[15]):0,b.i64.neq(c[16],void 0)?c[58].set("rich_text_format_type",c[16]):0,b.resolve()},function(a){return c[17]!==void 0?c[58].set("text_has_links",c[17]):0,c[18]!==void 0?c[58].set("dataclass_params",c[18]):0,c[19]!==void 0?c[58].set("multitab_env",c[19]):0,c[20]!==void 0?c[58].set("metadata_dataclass",c[20]):0,b.filter(b.db.table(14).fetch([[[c[48],c[41]]]]),function(a){return b.i64.eq(a.threadKey,c[48])&&b.i64.eq(b.i64.cast([0,0]),c[50])&&b.i64.eq(a.contactId,c[41])}).next().then(function(d,e){var a=d.done;d=d.value;return a?c[60]=!1:(e=d.item,b.i64.eq(c[42],b.i64.cast([0,152]))?(c[68]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,7]))?c[69]=!1:c[69]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),c[68]),b.i64.cast([0,0])),c[70]=c[51],c[71]=c[52],c[72]=c[53],c[73]=c[54],c[74]=c[55],c[76]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),c[77]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(c[76],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,289]))?c[75]=!1:(b.i64.eq(c[76],b.i64.cast([0,0]))?c[78]=!b.i64.eq(b.i64.and_(c[77],c[70]),b.i64.cast([0,0])):(b.i64.eq(c[76],b.i64.cast([0,1]))?c[79]=!b.i64.eq(b.i64.and_(c[77],c[71]),b.i64.cast([0,0])):(b.i64.eq(c[76],b.i64.cast([0,2]))?c[80]=!b.i64.eq(b.i64.and_(c[77],c[72]),b.i64.cast([0,0])):(b.i64.eq(c[76],b.i64.cast([0,3]))?c[81]=!b.i64.eq(b.i64.and_(c[77],c[73]),b.i64.cast([0,0])):(b.i64.eq(c[76],b.i64.cast([0,4]))?c[82]=!b.i64.eq(b.i64.and_(c[77],c[74]),b.i64.cast([0,0])):c[82]=!1,c[81]=c[82]),c[80]=c[81]),c[79]=c[80]),c[78]=c[79]),c[75]=c[78]),c[69]===c[75]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),c[67]=c[69]):c[67]=!1,c[60]=c[67])})},function(a){return c[60]?c[58].set("perform_action_as_page",!0):0,c[62]=b.toJSON(c[58]),a=[c[62],b.i64.cast([0,46]),void 0],c[45]=a[0],c[46]=a[1],c[47]=a[2]}])},function(a){return a=[c[45],c[46],c[47]],c[24]=a[0],c[25]=a[1],c[26]=a[2],a}]))})},function(a){return a=[c[24],c[25],c[26]],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerSendMessageV2StoredProcedure";a.__tables__=["messages_optimistic_context","messages","threads","pending_tasks","attachments","participants","threads_optimistic_metadata"];e.exports=a}),null);
__d("LSTaskSerializerSyncThreadCapabilities",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSMailboxTaskSerializerSyncThreadCapabilitiesStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSACSExperimentCapability",[],(function(a,b,c,d,e,f){a=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});f["default"]=a}),66);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("MetaConfig")._("87"),k=c("MetaConfig")._("156");a=function(a,e,f,g){switch((i||(i=d("LSIntEnum"))).toNumber(f)){case c("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(h||(h=b("Promise"))).resolve([k]);case c("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(h||(h=b("Promise"))).resolve([!1]);case c("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(h||(h=b("Promise"))).resolve([j])}return(h||(h=b("Promise"))).resolve([!1])};a.__nop_name__="LSIsExperimentCapabilityEnabled";g["default"]=a}),98);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e){a=d("ACSCipherSuiteModule").getACSCipherSuiteByValue(d("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!a)return Promise.resolve([void 0]);b=await d("ACSTokenHmacUtil").hmac(a.macAlgorithm,new Uint8Array(e).slice(),new(d("XPlatReactTextEncoder").TextEncoder)().encode(c));return Promise.resolve([b.buffer])};a.__nop_name__="LSVoprfHmac";g.default=a}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.projectName)})},function(e){return d[0]!==void 0?c.sequence([function(e){return a[1]!==void 0?c.sequence([function(a){return d[9]=c.createArray(),d[10]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[10])}),function(a){a=a.item;return d[16]=(d[9].push(a.configId),d[9])})},function(a){return c.sequence([function(a){return d[16]=c.createArray(),d[17]=c.i64.of_int32(d[9].length),c.i64.gt(d[17],c.i64.cast([0,0]))?c.loopAsync(d[17],function(a){return d[19]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],d[19]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return d[22]=(d[16].push(d[20]),d[16])}])}):c.resolve()},function(a){return d[18]=d[16].join(","),d[11]=d[18]}])},function(e){return c.filter(c.db.table(309).fetch(),function(a){return d[9].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,0]),d[0]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[16]?c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=c.i64.cast([0,0]):(e=b.item,d[20]=e.failureCount)})},function(b){return c.forEach(c.db.table(311).fetch([[[a[0]]]]),function(a){a=a.item;return c.forEach(c.db.table(311).fetch([[[a.taskId]]]),function(a){var b=a.update;a.item;return b({failureCount:c.i64.add(d[20],c.i64.cast([0,1]))})})})},function(a){return a=[void 0,void 0,c.i64.mul(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.mod_(d[20],c.i64.cast([0,7])))),c.i64.cast([0,500]))],d[17]=a[0],d[18]=a[1],d[19]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[20]=c.createArray(),d[21]=(d[20].push("Unauthenticated Task Serializer: no valid tokens"),d[20]),d[22]=(d[20].push(a[0]),d[20]),d[23]=(d[20].push(d[0]),d[20]),d[24]=c.toJSON(d[20]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2]}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]):(f=e.item,c.sequence([function(e){return d[20]=f.tokenId,c.nativeOperation(b("LSVoprfHmac.nop"),a[2]==null?"":a[2],f.sharedSecret).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){var b=a.update;a=a.item;return b({redeemLimit:c.i64.sub(a.redeemLimit,c.i64.cast([0,1]))})})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[16]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),f.nonce).then(function(a){return a=a,d[22]=a[0],a})},function(b){return d[23]=new c.Map(),d[23].set("config_id",f.configId),d[23].set("tag",d[21]==null?"":d[21]),d[23].set("aux",d[22]==null?"":d[22]),d[23].set("project_name",d[0]),d[24]=c.toJSON(d[23]),d[25]=new c.Map(),d[25].set("payload",a[2]==null?"":a[2]),d[25].set("token",d[24]),d[26]=c.toJSON(d[25]),b=[d[26],c.i64.from_string(a[1]),void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2]}]):c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[21]=c.createArray(),d[22]=(d[21].push("Unauthenticated Task Serializer: hmac failed"),d[21]),d[23]=(d[21].push(a[0]),d[21]),d[24]=c.toJSON(d[21]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2]}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[9]=c.createArray(),d[10]=(d[9].push("Unauthenticated Task Serializer: task has no write label"),d[9]),d[11]=(d[9].push(a[0]),d[9]),d[12]=c.toJSON(d[9]),function(a){c.logger(a).mustfix(a)}(d[12]),b=[void 0,void 0,void 0],d[6]=b[0],d[7]=b[1],d[8]=b[2]}])},function(a){return a=[d[6],d[7],d[8]],d[2]=a[0],d[3]=a[1],d[4]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[6]=c.createArray(),d[7]=(d[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),d[6]),d[8]=(d[6].push(a[0]),d[6]),d[9]=c.toJSON(d[6]),function(a){c.logger(a).mustfix(a)}(d[9]),b=[void 0,void 0,void 0],d[2]=b[0],d[3]=b[1],d[4]=b[2]}])},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[0]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,1]),d[0]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[6]?c.sequence([function(a){return c.i64.neq(d[4],void 0)?c.resolve(d[8]=!0):c.sequence([function(a){return d[10]=c.createArray(),d[11]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[11])}),function(a){a=a.item;return d[15]=(d[10].push(a.configId),d[10])})},function(a){return c.sequence([function(a){return d[15]=c.createArray(),d[16]=c.i64.of_int32(d[10].length),c.i64.gt(d[16],c.i64.cast([0,0]))?c.loopAsync(d[16],function(a){return d[18]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[10],d[18]).then(function(a){return a=a,d[19]=a[0],d[20]=a[1],a})},function(a){return d[21]=(d[15].push(d[19]),d[15])}])}):c.resolve()},function(a){return d[17]=d[15].join(","),d[12]=d[17]}])},function(a){return c.filter(c.db.table(309).fetch(),function(a){return d[10].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(a,b){b=a.done;a=a.value;return b?d[13]=!0:(a.item,d[13]=!1)})},function(a){return d[8]=d[13]}])},function(a){return d[8]?c.sequence([function(a){return c.filter(c.db.table(310).fetch(),function(a){return a.projectName===d[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[10]=void 0:(b=a.item,d[10]=b.taskId)})},function(a){return d[9]=d[10]}]):c.resolve(d[9]=void 0)},function(a){return d[7]=d[9]}]):c.resolve(d[7]=void 0)},function(a){return d[5]=d[7]}]):c.resolve(d[5]=void 0)},function(a){return a=[d[2],d[3],d[4],d[5]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerUnauthenticatedTaskStoredProcedure";a.__tables__=["anonymous_task_context","secure_acs_configurations","secure_acs_tokens","acs_request_context"];e.exports=a}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerUpdateThreadName: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerUpdateThreadName: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("thread_name",e.threadName==null?"":e.threadName),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,32]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerUpdateThreadNameStoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSLogMebClientEvent.nop","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerDeleteChatHistory","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerEncryptedBackupsUploadSenderBackup","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerSyncThreadCapabilities","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return a[1]==="46"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSendMessageV2"),a[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.sequence([function(e){return a[1]==="144"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerMuteThreadV2"),a[0]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return a=[d[12],c.i64.to_string(d[13]),void 0,void 0],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}]):c.sequence([function(e){return a[1]==="146"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerRemoveThread"),a[0]).then(function(a){return a=a,d[16]=a[0],d[17]=a[1],a})},function(a){return a=[d[16],c.i64.to_string(d[17]),void 0,void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}]):c.sequence([function(e){return a[1]==="32"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUpdateThreadName"),a[0]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],d[22]=a[2],a})},function(a){return a=[d[20],c.i64.to_string(d[21]),void 0,d[22]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}]):c.sequence([function(e){return a[1]==="362"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerAcsIssueNextSync"),a[0]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],d[26]=a[2],a})},function(a){return a=[d[24],c.i64.to_string(d[25]),void 0,d[26]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}]):c.sequence([function(e){return a[1]==="50015"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),a[0]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],d[30]=a[2],a})},function(a){return a=[d[28],c.i64.to_string(d[29]),void 0,d[30]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}]):c.sequence([function(e){return a[1]==="319"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupAction"),a[0]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],d[34]=a[2],a})},function(a){return a=[d[32],c.i64.to_string(d[33]),void 0,d[34]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}]):c.sequence([function(e){return a[1]==="50026"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUpload"),a[0]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(a){return a=[d[36],c.i64.to_string(d[37]),void 0,void 0],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}]):c.sequence([function(e){return a[1]==="50042"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),a[0]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],d[42]=a[2],a})},function(a){return a=[d[40],c.i64.to_string(d[41]),void 0,d[42]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}]):c.sequence([function(e){return a[1]==="700"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),a[0]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],d[46]=a[2],a})},function(a){return a=[d[44],c.i64.to_string(d[45]),void 0,d[46]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}]):c.sequence([function(e){return a[1]==="705"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMessageIntegrityCheckV2"),a[0]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],d[50]=a[2],a})},function(a){return a=[d[48],c.i64.to_string(d[49]),void 0,d[50]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}]):c.sequence([function(e){return a[1]==="50043"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsLoopingUpload"),a[0]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],d[54]=a[2],a})},function(a){return a=[d[52],c.i64.to_string(d[53]),void 0,d[54]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}]):c.sequence([function(e){return a[1]==="50048"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsOpenUpload"),a[0]).then(function(a){return a=a,d[56]=a[0],d[57]=a[1],a})},function(a){return a=[d[56],c.i64.to_string(d[57]),void 0,void 0],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}]):c.sequence([function(e){return a[1]==="160013"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSyncThreadCapabilities"),a[0]).then(function(a){return a=a,d[60]=a[0],d[61]=a[1],d[62]=a[2],a})},function(a){return a=[d[60],c.i64.to_string(d[61]),void 0,d[62]],d[56]=a[0],d[57]=a[1],d[58]=a[2],d[59]=a[3],a}]):c.sequence([function(e){return a[1]==="903"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerDeleteChatHistory"),a[0]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],d[66]=a[2],a})},function(a){return a=[d[64],c.i64.to_string(d[65]),void 0,d[66]],d[60]=a[0],d[61]=a[1],d[62]=a[2],d[63]=a[3],a}]):c.sequence([function(e){return a[1]==="50057"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadSenderBackup"),a[0]).then(function(a){return a=a,d[68]=a[0],d[69]=a[1],d[70]=a[2],a})},function(a){return a=[d[68],c.i64.to_string(d[69]),void 0,d[70]],d[64]=a[0],d[65]=a[1],d[66]=a[2],d[67]=a[3],a}]):c.resolve((e=[a[2],a[1],void 0,void 0],d[64]=e[0],d[65]=e[1],d[66]=e[2],d[67]=e[3],e))},function(a){return a=[d[64],d[65],d[66],d[67]],d[60]=a[0],d[61]=a[1],d[62]=a[2],d[63]=a[3],a}])},function(a){return a=[d[60],d[61],d[62],d[63]],d[56]=a[0],d[57]=a[1],d[58]=a[2],d[59]=a[3],a}])},function(a){return a=[d[56],d[57],d[58],d[59]],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}])},function(a){return a=[d[52],d[53],d[54],d[55]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}])},function(a){return a=[d[48],d[49],d[50],d[51]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}])},function(a){return a=[d[44],d[45],d[46],d[47]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}])},function(a){return a=[d[40],d[41],d[42],d[43]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}])},function(a){return a=[d[36],d[37],d[38],d[39]],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}])},function(a){return a=[d[32],d[33],d[34],d[35]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}])},function(a){return a=[d[28],d[29],d[30],d[31]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}])},function(a){return a=[d[24],d[25],d[26],d[27]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}])},function(a){return a=[d[20],d[21],d[22],d[23]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}])},function(a){return a=[d[16],d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}])},function(a){return a=[d[12],d[13],d[14],d[15]],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}])},function(a){return a=[d[8],d[9],d[10],d[11]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}])},function(e){return a[3]?c.sequence([function(a){return d[9]="60009"===d[1]||"60006"===d[1]||"60008"===d[1]||"60011"===d[1]||"765"===d[1]||"1006"===d[1]||"160009"===d[1]||"761"===d[1]||"1018"===d[1]||"632"===d[1]||"384"===d[1]||"384"===d[1],d[9]?d[1]!==void 0?(d[15]=["Deidentified task is being executed through the 'identified' path. Canceling task with label: ",d[1]].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSCoreSerializeTaskStoredProcedure] ","",d[15]].join("")),d[14]=c.createArray(),void 0!==void 0?d[16]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSCoreSerializeTaskStoredProcedure",d[15],d[14],c.i64.cast([0,3]))):c.resolve():c.resolve()},function(a){return c.resolve(d[8]=!1)},function(a){return d[9]||d[8]?(a=[void 0,void 0,void 0,void 0],d[10]=a[0],d[11]=a[1],d[12]=a[2],d[13]=a[3],a):(a=[d[0],d[1],d[2],d[3]],d[10]=a[0],d[11]=a[1],d[12]=a[2],d[13]=a[3],a),a=[d[10],d[11],d[12],d[13]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3]}]):c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUnauthenticatedTask"),a[0],d[1],d[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a})},function(a){return c.i64.neq(d[11],void 0)?c.storedProcedure(b("LSForceTaskExecutionImmediately"),d[11]):c.resolve()},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,d[10]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3],a}])},function(a){return a=[d[4],d[5],d[6],d[7]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreSerializeTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSerializeTask"),e.taskId,e.taskLabel,e.taskValue,e.requiresAuthentication);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","ReQL","XPlatReactCrypto","gkx","isNativeTask","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=500,k=3e4,l=5,m=(b=c("qex")._("4835"))!=null?b:50,n=7;async function o(a,b){a=await a.lightspeed_task_context.get(b);return a==null||a.requiresAuthentication}async function p(a,b){a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b));return a==null?{context:void 0,failureCount:(h||(h=d("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:h.neg_one,pluginType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").LS_BROKER),queueName:""}:a}async function q(a,b){a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b));return a==null?0:(h||(h=d("I64"))).to_float(a.lastSyncRequestTimestampMs)}function r(a,b,c){b=(h||(h=d("I64"))).equal(a.failureCount,(h||(h=d("I64"))).zero)||b;if(b)return 0;b=(h||(h=d("I64"))).to_float(a.failureCount)>n?(h||(h=d("I64"))).to_float(a.failureCount)-n:(h||(h=d("I64"))).to_float(a.failureCount);a=Math.min((1<<Math.min(b-1,n))*j,k);b=c+a;return Math.max(b-Date.now(),0)}function s(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(h||(h=d("I64"))).add(h.lsl_(h.of_float(a[0]),32),h.of_float(a[1]))}function t(){var a=(h||(h=d("I64"))).of_float(Date.now());return h.and_(h.or_(h.lsl_(a,22),h.and_(s(),h.castExn([0,4194303]))),h.castExn([2147483647,4294967295]))}async function u(a,b){var c=t(),e=await a.network_requests.get(b,(h||(h=d("I64"))).neg_one);e==null?await a.network_requests.add({epochId:c,failureCount:(h||(h=d("I64"))).zero,lastSentTimestampMs:h.zero,lastSyncRequestTimestampMs:h.of_float(Date.now()),syncDatabaseId:h.neg_one,taskQueueName:b}):await a.network_requests.put(babelHelpers.extends({},e,{epochId:c,lastSyncRequestTimestampMs:(h||(h=d("I64"))).of_float(Date.now())}));return c}async function v(a,b){return await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b).filter(function(a){return a.epochId!=null}))!=null}function w(a,b,c){var e=(h||(h=d("I64"))).to_float(a.minTimeToSyncTimestampMs),f=Date.now();e=e-f;f=e<=0;return f?r(a,b,c):e}function x(a){return a.httpUrlOverride!=null||(h||(h=d("I64"))).to_float(a.failureCount)>n}function y(a){return a.timeoutTimestampMs!=null?(h||(h=d("I64"))).to_float(a.timeoutTimestampMs)<=Date.now():!1}function z(a){return a===90..toString()||a===130..toString()||a===153..toString()}function A(a,b,c,d,e){e=e===0?void 0:e;return{failureCount:e,label:a,payload:b,queueName:c,taskId:d}}async function B(a,b,e){a=await c("LSSerializeTaskStoredProcedure")(c("LSFactory")(a),{requiresAuthentication:e,taskId:b.taskId,taskLabel:b.context,taskValue:b.taskValue});e=a[0];var f=a[1];a[2];a=a[3];if(e==null){if(a!=null)return{minRetryDelayMs:a};return}return A(f,e,b.queueName,b.taskId,(h||(h=d("I64"))).to_float(b.failureCount))}async function C(a,b,c){if(b.context==null){await a.pending_tasks.delete(b.taskId);return}var d=y(b);if(d){await a.pending_tasks.delete(b.taskId);return}return B(a,b,c)}function D(a,b){b=b>=(c("gkx")("26373")&&a===String(207)?m:l)||z(a);return!b}async function E(a,b){var c=await a.pending_tasks.get(b.taskId);c!=null&&(h||(h=d("I64"))).equal(b.firstExecutedTimestampMs,(h||(h=d("I64"))).zero)&&await a.pending_tasks.put(babelHelpers.extends({},c,{firstExecutedTimestampMs:(h||(h=d("I64"))).of_float(Date.now())}))}async function F(a,b){if(b.length===0)return{epochId:void 0,tasks:[]};var c=[],e=b[0].httpUrlOverride,f=(await Promise.all(b.map(function(b){return o(a,b.taskId)}))).some(Boolean);for(b of b){var g=b.httpUrlOverride===e,i=await o(a,b.taskId)===f;await E(a,b);if(!g||!i)break;g=await C(a,b,f);if(g!=null&&g.payload!=null)c.push(g);else if((g==null?void 0:g.minRetryDelayMs)!=null){i=await a.pending_tasks.get(b.taskId);if(i!=null){await a.pending_tasks.put(babelHelpers.extends({},i,{failureCount:(h||(h=d("I64"))).add((i=i.failureCount)!=null?i:(h||(h=d("I64"))).zero,h.one),minTimeToSyncTimestampMs:h.add(g.minRetryDelayMs,h.of_float(Date.now()))}))}}else await a.pending_tasks.delete(b.taskId);if(!D(b.context,c.length))break}return{epochId:void 0,tasks:c}}async function G(a,b,c,d,e){e===void 0&&(e=!0);b=await F(a,b);var f=b.tasks;if(f.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:!1,workItemType:4};if(e===!0){f=await u(a,c);b.epochId=f}e=await p(a,c);return{httpUrlOverride:e.httpUrlOverride,networkPayload:b,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:x(e),workItemType:d}}async function H(a,b,e){var f=await p(a,b),g=await q(a,b);f=w(f,e,g);e=f!==0;if(e)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:f,queueName:b,skipRealtimeGateway:!1,workItemType:3}];g=[];e=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b));f=e.filter(c("isNativeTask"));if(f.length>0){f=await G(a,f,b,2,c("gkx")("4778")===!0);g.push(f)}f=e.filter(function(a){return!c("isNativeTask")(a)});if(f.length>0){e=await G(a,f,b,1);g.push(e)}return g}async function I(a,b,c){var d=!await v(a,b);return d?H(a,b,c):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:b,skipRealtimeGateway:!1,workItemType:4}]}async function a(a,b){var e=b.ignoreSoftDelay;b=b.queueName;a=await I(a,b,e);return a.map(function(a){var b;return d("LSShape").ofRecord({network_payload:d("LSShape").ofRecord({epoch_id:(b=a.networkPayload)==null?void 0:b.epochId,tasks:c("LSVec").ofArray(((b=(b=a.networkPayload)==null?void 0:b.tasks)!=null?b:[]).map(function(a){var b;return d("LSShape").ofRecord({failure_count:a.failureCount!=null?(h||(h=d("I64"))).of_float(a.failureCount):void 0,label:(b=a.label)!=null?b:void 0,payload:a.payload,queue_name:a.queueName,task_id:a.taskId})}))}),next_sync_ms:a.nextSyncMs!=null?(h||(h=d("I64"))).of_float(a.nextSyncMs):void 0,queue_name:a.queueName,skip_realtime_gateway:a.skipRealtimeGateway,work_item_type:(i||(i=d("LSIntEnum"))).ofNumber(a.workItemType)})})}a._updateTaskIfNeeded=E;a._getHeadOfNormalQueue=p;a._lastSyncRequestTimestampForQueue=q;a._exponentialBackoffForNormalQueue=r;a._generateNewEpoch=t;a._openNewEpochForQueue=u;a._isEpochOpenForQueue=v;a._calculateDelayForNormalQueue=w;a._queueShouldSkipRealtimeGateway=x;a._isNativeTask=c("isNativeTask");a._taskIsTimedOut=y;a._taskShouldStopBatching=z;a._buildTaskPayloadExpressionForNormalTaskWithParameters=A;a._buildTaskPayloadExpressionForValidatedNormalTask=B;a._buildTaskPayloadExpressionForUnvalidatedNormalTask=C;a._workForNormalQueueWithoutDelay=G;a._workForNormalQueueWithClosedEpoch=H;a._buildWorkForNormalQueue=I;a._buildNetworkPayloadShapeForTasks=F;a._canContinueBatchingForQueue=D;g.default=a}),98);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b){var d=b.fireAndForgetTask,e=b.ignoreSoftDelay,g=b.queueName;b=await a.runInTransaction(async function(a){if(d===!0){var b=await c("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(c("LSFactory")(a),{queueName:g});b=b[0];return[b]}return c("LSBeginHandlingPendingTasksForQueue2")(a,{ignoreSoftDelay:e,queueName:g})},"readwrite",void 0,void 0,f.id+":37");return b}g.default=a}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){async function e(){try{await a(b)}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to calculate work for task queue %s",b.queueName)}}if((i||(i=d("I64"))).gt(b.priority,(i||(i=d("I64"))).zero)&&c("MetaConfig")._("78")){var f=function(){e()};(h||(h=c("JSScheduler"))).scheduleLoggingPriCallback(f)}else c("promiseDone")(e())}async function k(a,b){try{await a(b)}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to calculate work for fire forget queue %s",b.queueName)}}function a(a,b){var c=new Set(),e=[],f=[];f.push(a.tables.pending_tasks.index("queueNameTaskId").subscribe(function(a,b){var f;if(b.operation==="delete"){c.add(a[0]);return}a=b.operation==="put"&&b.prevValue==null||b.operation==="add";f=b.operation==="put"&&(i||(i=d("I64"))).compare(b.value.failureCount,(f=(f=b.prevValue)==null?void 0:f.failureCount)!=null?f:(i||(i=d("I64"))).zero)>0;(a||f)&&c.add(b.value.queueName);(b.operation==="add"&&b.value.dataTraceId==null||b.value.dataTraceId==="")&&e.push(b.value)}));f.push(a.tables.network_requests.subscribe(function(a,b){a=a[0];if(a==="")return;b.operation==="delete"?c.add(a):b.value.epochId==null&&c.add(a)}));f.push(a.subscribeToCommit(function(){var f=Array.from(c);c.clear();e=[];f.forEach(async function(c){c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[c]}));c!=null&&j(b,c)})}));return f}function b(a,b){c("promiseDone")(async function(){var c=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks)),e=new Set();for(c of c){if(e.has(c.queueName))continue;e.add(c.queueName);j(b,c)}}())}function l(a,b){c("promiseDone")(async function(){var e=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_fire_and_forget_tasks));await Promise.all(e.map(function(a){return k(b,a)}));c("promiseDone")(a.runInTransaction(function(a){return Promise.all(e.map(function(b){return a.pending_fire_and_forget_tasks.delete(b.taskId)}))},"readwrite","background",void 0,f.id+":196"))}())}function e(a,b){var c=!1,d=[];d.push(a.tables.pending_fire_and_forget_tasks.subscribe(function(a,b){if(b.operation==="delete")return;a=b.operation==="put"&&b.prevValue==null||b.operation==="add";a&&(c=!0)}));d.push(a.subscribeToCommit(function(){c&&l(a,b),c=!1}));return d}g.checkQueuesWhenPendingTaskTableUpdates=a;g.checkAllPendingTasksForWork=b;g.checkAllFireForgetTasksForWork=l;g.checkQueuesWhenPendingFireForgetTaskTableUpdates=e}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSPlatformTaskSyncGroupId","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","ReQL","cr:4031","cr:6668","gkx","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=500,l=c("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),m=new Set([632,765,60011,1006,1018].map(function(a){return a.toString()}));a=function(){function a(a,b,e,f){var g=this;this.key="ls";this.$8=!1;this.$18=async function(a,b){b=await c("MWPBeginHandlingPendingTasksForQueue")(g.$1,{ignoreSoftDelay:b,queueName:a});for(a of b)await g.$17(d("LSShape").toRecord(a))};this.$1=a;this.$2=b;this.$3=e;this.$4=f;this.$8=d("LSDatabaseProviderType").isProviderPersisted(a);this.$5=new(c("LSPlatformRequestScheduler"))();this.$6=new(c("LSPlatformServerResponseHandler"))(e);this.$7=this.$9();this.$10()}var e=a.prototype;e.$11=async function(a,b){var d=a.filter(function(a){return a.label!=null&&m.has(a.label)});if(d.length<a.length){d.length>0&&c("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",d[0].label);a=await this.$2.publish(b);return a}a=d[0];d=await l.load();d=await d(babelHelpers.extends({},b,{taskLabel:a.label}));return d};e.$12=async function(a){await this.$1.runInTransaction(function(b){return c("LSHandleTaskSendFailureForQueue2")(b,a)},"readwrite",void 0,void 0,f.id+":150")};e.$13=async function(a){await this.$1.runInTransaction(function(b){return c("LSHandleTaskSendSuccessForQueue2")(b,a)},"readwrite","background",void 0,f.id+":159")};e.$14=async function(a){a=c("LSVec").toArray(a.tasks).slice(0).map(function(a){return d("LSShape").toRecord(a)});a=a[0];if(a==null)return;a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(a.task_id));return a==null?void 0:a.dataTraceId};e.$15=async function(a,e){var f=this;if(a.network_payload==null)return;var g=d("LSShape").toRecord(a.network_payload);(j||(j=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return g&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(g.tasks))});var i=this.$4;try{await Promise.all(c("LSVec").toArray(g.tasks).map(function(a){return d("LSShape").toRecord(a)}).map(function(b){var g=c("LSPlatformRequestId").generate();return f.$11([b],{databaseType:c("LSPlatformTaskSyncGroupId"),payload:d("LSJson").stringify(d("LSShape").ofRecord({label:b.label,payload:b.payload,version:i})),queueName:a.queue_name,requestId:g,syncChannel:d("LSMailboxInitialSyncCursor").taskChannel,type_:(h||(h=d("I64"))).of_int32(e)})}))}catch(a){}};e.$16=async function(a,e){if(a.network_payload==null)return;var f=d("LSShape").toRecord(a.network_payload),g=c("LSVec").toArray(f.tasks).map(function(a){return d("LSShape").toRecord(a)}),k=await this.$14(f);(j||(j=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(f.tasks))});var l=c("LSPlatformRequestId").generate(),m,n=c("qex")._("2071");if(n!=null&&n!=="default"){var o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").taskChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o)}try{m=await this.$11(g,{databaseType:c("LSPlatformTaskSyncGroupId"),payload:d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers.extends({},f,{version_id:this.$4},k==null?{}:{data_trace_id:k}))),queueName:a.queue_name,requestId:l,syncChannel:d("LSMailboxInitialSyncCursor").taskChannel,type_:(h||(h=d("I64"))).of_int32(e)})}catch(b){if(n!=null&&n!=="default"){o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").taskChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception");b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.notconnected")}b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected?(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),c("FBLogger")("messenger_web").warn("Publishing a task to the server not connected")):(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),c("FBLogger")("messenger_web").warn("Error while publishing a task for request: %s, error %s",e,JSON.stringify(b)));await this.$12(a.queue_name)}if(m!=null&&m.type==="taskresponse")try{k=m.downloadTask;var p=m.payload;l={experiments:p.ex,sp:p.sp,syncScript:p.payload,target:p.target,taskNames:g.map(function(a){return a.label}).filter(Boolean)};this.$8||c("gkx")("10470")?await this.$6.evalWhenReady(k,l):await this.$3(l);await this.$13(a.queue_name);(j||(j=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSent(f.tasks,p.payload))})}catch(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),c("FBLogger")("messenger_web").catching(b).mustfix("Encountered an error while processing a task response via realtime transport"),await this.$12(a.queue_name)}};e.decideWhatToDoWithTask=async function(a,b,e,f){var g=this,h=await c("MWPBeginHandlingPendingTasksForQueue")(a,{fireAndForgetTask:f,ignoreSoftDelay:!1,queueName:b,transportKey:e});c("promiseDone")(async function(){for(var a of h)await g.$17(d("LSShape").toRecord(a))}())};e.$17=async function(a){var e=this.$5,f=this.$18;function g(a,b){e.schedule(function(){c("promiseDone")(f(a,!1))},a,b!=null?(h||(h=d("I64"))).to_float(b):k)}var i=(h||(h=d("I64"))).to_int32(a.work_item_type);switch(i){case 1:await this.$16(a,3);break;case 5:await this.$15(a,4);break;case 3:g(a.queue_name,a.next_sync_ms);break;case 2:await b("cr:4031").handleLSWork(this.$1,a,d("CurrentMessengerUser").getAccountID());break;case 4:break;default:c("FBLogger")("messenger_web").warn("Unknown Task type of %s",i)}};e.$9=function(){var a=this,b=this.$1;return this.$2.onReconnect(function(e){if(d("LSMailboxInitialSyncCursor").isWebApp&&3===e&&c("qex")._("2082")===!0)return;c("promiseDone")(b.runInTransaction(async function(a){var b=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).bounds({gte:d("ReQL").key("")}));await Promise.all(b.map(function(b){b=b.taskQueueName;return c("LSHandleTaskSendFailureForQueue2")(a,b)}))},"readwrite",void 0,void 0,f.id+":473"));a.$10()})};e.$10=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.decideWhatToDoWithTask(a.$1,b)})};e.cleanup=function(){this.$7()};return a}();g.default=a}),98);
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="25203779942543941"}),null);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case 1:return;case 3:c("MAWEBSwitch").set(!0);return;case 2:case 4:default:c("MAWEBSwitch").set(!1);return}}function b(a){return a===4||a===3}g.setEncryptedBackupsState=a;g.eligibleForEBUX=b}),98);
__d("LSFetchBackupIds",["LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupIdsStoredProcedure] Beginning execution."),d[11]=c.i64.cast([0,0]),d[7]=d[11],d[8]=new c.Map(),d[8].set("backup_tenancy",a[0]),d[8].set("trace_id",void 0),d[9]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",c.i64.cast([0,50008]),d[9],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,d[7]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[1]=c.i64.of_float(Date.now()),d[2]=c.i64.random(),d[4]="Finishing execution. Execution time: ",d[5]=c.i64.to_string(c.i64.sub(d[1],d[0])),d[6]=" ms",d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsFetchBackupIdsStoredProcedure] ",d[3],d[4],d[3],d[5],d[3],d[6]].join("")),c.i64.eq(c.i64.mod_(d[2],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[7]=",",d[8]=c.createArray(),void 0!==void 0?d[9]=(d[8].push(void 0),d[8]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFetchBackupIdsStoredProcedure",[d[4],d[7],d[5],d[7],d[6]].join(""),d[8],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsFetchBackupIdsStoredProcedure";a.__tables__=["encrypted_backups"];e.exports=a}),null);
__d("LSFetchBackupIdsStoredProcedure",["LSFetchBackupIds","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSFetchBackupIds"),e.backupTenancy,e.traceId,e.isUiBlocking);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSIssueMessageRangeQueryTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLoadThreadPkFromThreadId","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueMessageRangeQueryTask] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[11]=c.i64.gt(a[1],c.i64.cast([0,0]))&&c.i64.gt(a[5],c.i64.cast([0,0])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1]):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1])})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[35]=void 0,c.i64.neq(d[35],void 0)?c.resolve(d[36]=d[35]):c.sequence([function(a){return d[41]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]?d[51]=(d[41].push(c.i64.cast([0,0])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[43]?d[51]=(d[41].push(c.i64.cast([0,2])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[51]=(d[41].push(c.i64.cast([0,3])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[51]=(d[41].push(c.i64.cast([0,4])),d[41]):0,d[46]=c.createArray(),d[47]=c.i64.of_int32(d[41].length),c.i64.gt(d[47],c.i64.cast([0,0]))?c.loopAsync(d[47],function(a){return d[51]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],d[51]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],a})},function(a){return d[54]=(d[46].push(d[52]),d[46])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[51]=c.createArray(),d[52]=c.i64.of_int32(d[46].length),c.i64.gt(d[52],c.i64.cast([0,0]))?c.loopAsync(d[52],function(a){return d[54]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],d[54]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[57]=(d[51].push(c.i64.to_string(d[55])),d[51])}])}):c.resolve()},function(a){return d[53]=d[51].join(","),d[48]=d[53]}])},function(a){return d[46].some(function(a){return c.i64.eq(d[29],a)})?d[49]=d[29]:d[49]=void 0,c.i64.neq(d[49],void 0)?d[50]=d[49]:d[50]=void 0,d[36]=d[50]}])},function(e){return c.i64.neq(d[36],void 0)?d[37]=d[36]:d[37]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[38]=d[28]:d[38]=c.i64.cast([0,1]),c.storedProcedure(b("LSLoadThreadPkFromThreadId"),a[0]).then(function(a){return a=a,d[39]=a[0],d[40]=a[1],a})},function(e){return c.i64.neq(d[39],void 0)?d[11]?c.sequence([function(a){return d[41]=c.i64.random(),d[42]=void 0==null?c.i64.to_string(d[41]):void 0,d[42]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[42],!0,void 0):c.resolve()},function(a){return d[42]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[42],"issue_task"):c.resolve()},function(a){return d[42]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[42],"request_type","ENCRYPTED_BACKUPS_MESSAGE_SURROUNDING_QUERY"):c.resolve()},function(e){return c.i64.eq(d[38],c.i64.cast([0,3]))?d[43]=c.i64.cast([0,4]):d[43]=c.i64.cast([0,0]),d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("request_id",d[42]),d[44].set("tam_thread_subtype",d[43]),d[44].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[23]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=new c.Map(),d[47].set("ocmf_client_state_blob",d[45]==null?"":d[45]),d[47].set("mailbox_root_key",d[46]==null?"":d[46]),d[48]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[59]=(d[48].push(a.epochId),d[48])})},function(a){return d[57]="Queried locally available epochs. Count: ",d[49]=c.i64.of_int32(d[48].length),d[58]=c.i64.to_string(d[49]),d[50]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[50],d[57],d[50],d[58]].join("")),c.resolve()},function(e){return d[51]=new c.Map(),d[51].set("device_id",d[27]),d[51].set("raw_tokens",d[47]),d[51].set("locally_available_epochs",d[48]),d[52]=new c.Map(),d[52].set("reference_timestamp",a[2]),d[52].set("server_thread_key",void 0),d[52].set("device_context",d[51]),d[52].set("source",a[6]),d[53]=new c.Map(),d[53].set("restore_context",d[44]),d[53].set("success",d[52]),d[54]=d[53].get("restore_context"),d[55]=d[54].get("act_thread_id"),d[56]=c.toJSON(d[53]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[55]].join(""),c.i64.cast([0,50031]),d[56],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.i64.gt(a[1],c.i64.cast([0,0]))?c.sequence([function(e){return a[4]!==void 0?c.sequence([function(e){return c.i64.eq(a[6],c.i64.cast([0,21]))?c.resolve(d[59]=a[4]):c.sequence([function(a){return d[60]=c.i64.random(),d[61]=void 0==null?c.i64.to_string(d[60]):void 0,d[61]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[61],!0,void 0):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[61],"issue_task"):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[61],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[59]=d[61]}])},function(a){return d[41]=d[59]}]):c.sequence([function(a){return d[59]=c.i64.random(),d[60]=void 0==null?c.i64.to_string(d[59]):void 0,d[60]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[60],!0,void 0):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[60],"issue_task"):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[60],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[41]=d[60]}])},function(e){return c.i64.eq(d[38],c.i64.cast([0,3]))?d[42]=c.i64.cast([0,4]):d[42]=c.i64.cast([0,0]),a[7]===!0?d[43]=!0:d[43]=!1,d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("request_id",d[41]),d[44].set("tam_thread_subtype",d[42]),d[44].set("reference_id",void 0),d[44].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[23]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=new c.Map(),d[47].set("ocmf_client_state_blob",d[45]==null?"":d[45]),d[47].set("mailbox_root_key",d[46]==null?"":d[46]),d[48]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[59]=(d[48].push(a.epochId),d[48])})},function(a){return d[57]="Queried locally available epochs. Count: ",d[49]=c.i64.of_int32(d[48].length),d[58]=c.i64.to_string(d[49]),d[50]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[50],d[57],d[50],d[58]].join("")),c.resolve()},function(e){return d[51]=new c.Map(),d[51].set("device_id",d[27]),d[51].set("raw_tokens",d[47]),d[51].set("locally_available_epochs",d[48]),d[52]=new c.Map(),d[52].set("reference_timestamp",a[2]),d[52].set("direction",c.i64.cast([0,1])),d[52].set("server_thread_key",void 0),d[52].set("device_context",d[51]),d[52].set("source",a[6]),d[52].set("include_offset",d[43]),d[53]=new c.Map(),d[53].set("restore_context",d[44]),d[53].set("success",d[52]),d[53].set("queue_name",void 0),d[54]=d[53].get("queue_name"),d[54]!==void 0?d[55]=d[54]:(d[59]=d[53].get("restore_context"),d[60]=d[59].get("act_thread_id"),d[55]=["encrypted_backups_restore",":",d[60]].join("")),d[56]=c.toJSON(d[53]),c.storedProcedure(b("LSIssueNewTask"),d[55],c.i64.cast([0,50030]),d[56],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(e){return a[4]!==void 0?c.sequence([function(e){return c.i64.eq(a[6],c.i64.cast([0,21]))?c.resolve(d[59]=a[4]):c.sequence([function(a){return d[60]=c.i64.random(),d[61]=void 0==null?c.i64.to_string(d[60]):void 0,d[61]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[61],!0,void 0):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[61],"issue_task"):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[61],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[59]=d[61]}])},function(a){return d[41]=d[59]}]):c.sequence([function(a){return d[59]=c.i64.random(),d[60]=void 0==null?c.i64.to_string(d[59]):void 0,d[60]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[60],!0,void 0):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[60],"issue_task"):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[60],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[41]=d[60]}])},function(e){return c.i64.eq(d[38],c.i64.cast([0,3]))?d[42]=c.i64.cast([0,4]):d[42]=c.i64.cast([0,0]),a[7]===!0?d[43]=!0:d[43]=!1,d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("request_id",d[41]),d[44].set("tam_thread_subtype",d[42]),d[44].set("reference_id",void 0),d[44].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[23]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=new c.Map(),d[47].set("ocmf_client_state_blob",d[45]==null?"":d[45]),d[47].set("mailbox_root_key",d[46]==null?"":d[46]),d[48]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[59]=(d[48].push(a.epochId),d[48])})},function(a){return d[57]="Queried locally available epochs. Count: ",d[49]=c.i64.of_int32(d[48].length),d[58]=c.i64.to_string(d[49]),d[50]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[50],d[57],d[50],d[58]].join("")),c.resolve()},function(e){return d[51]=new c.Map(),d[51].set("device_id",d[27]),d[51].set("raw_tokens",d[47]),d[51].set("locally_available_epochs",d[48]),d[52]=new c.Map(),d[52].set("reference_timestamp",a[2]),d[52].set("direction",c.i64.cast([0,2])),d[52].set("server_thread_key",void 0),d[52].set("device_context",d[51]),d[52].set("source",a[6]),d[52].set("include_offset",d[43]),d[53]=new c.Map(),d[53].set("restore_context",d[44]),d[53].set("success",d[52]),d[53].set("queue_name",void 0),d[54]=d[53].get("queue_name"),d[54]!==void 0?d[55]=d[54]:(d[59]=d[53].get("restore_context"),d[60]=d[59].get("act_thread_id"),d[55]=["encrypted_backups_restore",":",d[60]].join("")),d[56]=c.toJSON(d[53]),c.storedProcedure(b("LSIssueNewTask"),d[55],c.i64.cast([0,50030]),d[56],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(e){return d[11]?(d[43]=new c.Map(),d[43].set("error_code",c.i64.cast([0,100])),d[43].set("error_message",""),d[43].set("stored_procedure","issueMessageRangeQueryTask"),d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[45]=new c.Map(),d[45].set("restore_context",d[44]),d[45].set("failure",d[43]),d[46]=d[45].get("restore_context"),d[47]=d[46].get("act_thread_id"),d[48]=c.toJSON(d[45]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[47]].join(""),c.i64.cast([0,50031]),d[48],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[55]=new c.Map(),d[55].set("error_msg","Expected a nonempty query result"),d[55].set("code",c.i64.cast([0,3])),d[55].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[56]=c.createArray(),d[57]=(d[56].push(d[55]),d[56]),e=[void 0,d[56]],d[43]=e[0],d[44]=e[1]):(b=a.item,d[55]=new c.Map(),d[55].set("backup_id",b.backupId),d[55].set("device_public_key_blob",b.devicePublicKeyBlob),d[55].set("device_private_key_blob",b.devicePrivateKeyBlob),d[55].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[55].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[55].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[55].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[55].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[55].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[55].set("orf_client_state_v2_blob",void 0),d[55].set("orf_v2_authority_level",void 0),d[55].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[55].set("device_id",b.deviceId),d[55].set("backup_tenancy",b.backupTenancy),d[55].set("encryption_version",b.encryptionVersion),d[55].set("revision_version",b.revisionVersion),d[55].set("initialize_restore_result",void 0),d[55].set("device_creation_timestamp_sec",void 0),d[55].set("authority_level",b.authorityLevel),e=[d[55],void 0],d[43]=e[0],d[44]=e[1])})},function(a){return d[46]=new c.Map(),d[46].set("value",d[43]),d[46].set("errors",d[44]),d[47]=d[46].get("value"),d[47]!==void 0?c.sequence([function(a){return d[55]=d[47].get("backup_id"),d[56]=d[47].get("device_public_key_blob"),d[57]=d[47].get("device_private_key_blob"),d[58]=d[47].get("epoch_storage_public_key_blob"),d[59]=d[47].get("epoch_storage_private_key_blob"),d[60]=d[47].get("epoch_auth_public_key_blob"),d[61]=d[47].get("epoch_auth_private_key_blob"),d[62]=d[47].get("mailbox_root_key_blob"),d[63]=d[47].get("ocmf_client_state_blob"),d[64]=d[47].get("orf_client_state_v2_blob"),d[65]=d[47].get("orf_v2_authority_level"),d[66]=d[47].get("oblivious_validation_token_blob"),d[67]=d[47].get("device_id"),d[68]=d[47].get("backup_tenancy"),d[69]=d[47].get("encryption_version"),d[70]=d[47].get("revision_version"),d[71]=d[47].get("initialize_restore_result"),d[72]=d[47].get("device_creation_timestamp_sec"),d[73]=d[47].get("authority_level"),c.i64.neq(d[67],void 0)?c.sequence([function(a){return d[75]=void 0,c.i64.neq(d[75],void 0)?c.resolve(d[76]=d[75]):c.sequence([function(a){return d[79]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[80]?d[89]=(d[79].push(c.i64.cast([0,0])),d[79]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[81]?d[89]=(d[79].push(c.i64.cast([0,2])),d[79]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[82]?d[89]=(d[79].push(c.i64.cast([0,3])),d[79]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[83]?d[89]=(d[79].push(c.i64.cast([0,4])),d[79]):0,d[84]=c.createArray(),d[85]=c.i64.of_int32(d[79].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[89]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[79],d[89]).then(function(a){return a=a,d[90]=a[0],d[91]=a[1],a})},function(a){return d[92]=(d[84].push(d[90]),d[84])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[89]=c.createArray(),d[90]=c.i64.of_int32(d[84].length),c.i64.gt(d[90],c.i64.cast([0,0]))?c.loopAsync(d[90],function(a){return d[92]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[84],d[92]).then(function(a){return a=a,d[93]=a[0],d[94]=a[1],a})},function(a){return d[95]=(d[89].push(c.i64.to_string(d[93])),d[89])}])}):c.resolve()},function(a){return d[91]=d[89].join(","),d[86]=d[91]}])},function(a){return d[84].some(function(a){return c.i64.eq(d[69],a)})?d[87]=d[69]:d[87]=void 0,c.i64.neq(d[87],void 0)?d[88]=d[87]:d[88]=void 0,d[76]=d[88]}])},function(a){return c.i64.neq(d[76],void 0)?d[77]=d[76]:d[77]=c.i64.cast([0,0]),c.i64.neq(d[68],void 0)?d[78]=d[68]:d[78]=c.i64.cast([0,1]),d[74]=d[67]}]):c.resolve(d[74]=void 0)},function(a){return d[48]=d[74]}]):c.resolve((d[55]=d[46].get("errors"),d[56]=d[46].get("errors"),d[48]=void 0))},function(e){return d[49]=new c.Map(),d[49].set("error_code",c.i64.cast([0,100])),d[49].set("error_message",void 0==null?"":void 0),d[49].set("stored_procedure","issueMessageRangeQueryTask"),d[50]=new c.Map(),d[50].set("act_thread_id",a[0]),d[50].set("source",a[6]),d[50].set("restore_operation_type",c.i64.cast([0,2])),d[50].set("request_id",a[4]),d[50].set("device_id",d[48]),d[51]=new c.Map(),d[51].set("restore_context",d[50]),d[51].set("failure",d[49]),d[52]=d[51].get("queue_name"),d[52]!==void 0?d[53]=d[52]:(d[55]=d[51].get("restore_context"),d[56]=d[55].get("act_thread_id"),d[53]=["encrypted_backups_restore",":",d[56]].join("")),d[54]=c.toJSON(d[51]),c.storedProcedure(b("LSIssueNewTask"),d[53],c.i64.cast([0,50030]),d[54],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[42]="threak pk not found for jid",d[42]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[42]].join("")),d[43]=c.createArray(),a[4]!==void 0?d[44]=(d[43].push(a[4]),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[42],d[43],c.i64.cast([0,3]))):c.resolve()},function(a){return d[11]?d[41]=c.i64.cast([0,5]):d[41]=c.i64.cast([0,2])}])},function(a){return d[34]=!0}]):c.sequence([function(e){return d[11]?(d[37]=new c.Map(),d[37].set("error_code",c.i64.cast([0,1])),d[37].set("error_message",""),d[37].set("stored_procedure","issueMessageRangeQueryTask"),d[38]=new c.Map(),d[38].set("act_thread_id",a[0]),d[39]=new c.Map(),d[39].set("restore_context",d[38]),d[39].set("failure",d[37]),d[40]=d[39].get("restore_context"),d[41]=d[40].get("act_thread_id"),d[42]=c.toJSON(d[39]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[41]].join(""),c.i64.cast([0,50031]),d[42],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[49]=new c.Map(),d[49].set("error_msg","Expected a nonempty query result"),d[49].set("code",c.i64.cast([0,3])),d[49].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[50]=c.createArray(),d[51]=(d[50].push(d[49]),d[50]),e=[void 0,d[50]],d[37]=e[0],d[38]=e[1]):(b=a.item,d[49]=new c.Map(),d[49].set("backup_id",b.backupId),d[49].set("device_public_key_blob",b.devicePublicKeyBlob),d[49].set("device_private_key_blob",b.devicePrivateKeyBlob),d[49].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[49].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[49].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[49].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[49].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[49].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[49].set("orf_client_state_v2_blob",void 0),d[49].set("orf_v2_authority_level",void 0),d[49].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[49].set("device_id",b.deviceId),d[49].set("backup_tenancy",b.backupTenancy),d[49].set("encryption_version",b.encryptionVersion),d[49].set("revision_version",b.revisionVersion),d[49].set("initialize_restore_result",void 0),d[49].set("device_creation_timestamp_sec",void 0),d[49].set("authority_level",b.authorityLevel),e=[d[49],void 0],d[37]=e[0],d[38]=e[1])})},function(a){return d[40]=new c.Map(),d[40].set("value",d[37]),d[40].set("errors",d[38]),d[41]=d[40].get("value"),d[41]!==void 0?c.sequence([function(a){return d[49]=d[41].get("backup_id"),d[50]=d[41].get("device_public_key_blob"),d[51]=d[41].get("device_private_key_blob"),d[52]=d[41].get("epoch_storage_public_key_blob"),d[53]=d[41].get("epoch_storage_private_key_blob"),d[54]=d[41].get("epoch_auth_public_key_blob"),d[55]=d[41].get("epoch_auth_private_key_blob"),d[56]=d[41].get("mailbox_root_key_blob"),d[57]=d[41].get("ocmf_client_state_blob"),d[58]=d[41].get("orf_client_state_v2_blob"),d[59]=d[41].get("orf_v2_authority_level"),d[60]=d[41].get("oblivious_validation_token_blob"),d[61]=d[41].get("device_id"),d[62]=d[41].get("backup_tenancy"),d[63]=d[41].get("encryption_version"),d[64]=d[41].get("revision_version"),d[65]=d[41].get("initialize_restore_result"),d[66]=d[41].get("device_creation_timestamp_sec"),d[67]=d[41].get("authority_level"),c.i64.neq(d[61],void 0)?c.sequence([function(a){return d[69]=void 0,c.i64.neq(d[69],void 0)?c.resolve(d[70]=d[69]):c.sequence([function(a){return d[73]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[74]?d[83]=(d[73].push(c.i64.cast([0,0])),d[73]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[75]?d[83]=(d[73].push(c.i64.cast([0,2])),d[73]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[76]?d[83]=(d[73].push(c.i64.cast([0,3])),d[73]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[77]=a[0],a})},function(a){return d[77]?d[83]=(d[73].push(c.i64.cast([0,4])),d[73]):0,d[78]=c.createArray(),d[79]=c.i64.of_int32(d[73].length),c.i64.gt(d[79],c.i64.cast([0,0]))?c.loopAsync(d[79],function(a){return d[83]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],d[83]).then(function(a){return a=a,d[84]=a[0],d[85]=a[1],a})},function(a){return d[86]=(d[78].push(d[84]),d[78])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[83]=c.createArray(),d[84]=c.i64.of_int32(d[78].length),c.i64.gt(d[84],c.i64.cast([0,0]))?c.loopAsync(d[84],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[78],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=(d[83].push(c.i64.to_string(d[87])),d[83])}])}):c.resolve()},function(a){return d[85]=d[83].join(","),d[80]=d[85]}])},function(a){return d[78].some(function(a){return c.i64.eq(d[63],a)})?d[81]=d[63]:d[81]=void 0,c.i64.neq(d[81],void 0)?d[82]=d[81]:d[82]=void 0,d[70]=d[82]}])},function(a){return c.i64.neq(d[70],void 0)?d[71]=d[70]:d[71]=c.i64.cast([0,0]),c.i64.neq(d[62],void 0)?d[72]=d[62]:d[72]=c.i64.cast([0,1]),d[68]=d[61]}]):c.resolve(d[68]=void 0)},function(a){return d[42]=d[68]}]):c.resolve((d[49]=d[40].get("errors"),d[50]=d[40].get("errors"),d[42]=void 0))},function(e){return d[43]=new c.Map(),d[43].set("error_code",c.i64.cast([0,1])),d[43].set("error_message",void 0==null?"":void 0),d[43].set("stored_procedure","issueMessageRangeQueryTask"),d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("source",a[6]),d[44].set("restore_operation_type",c.i64.cast([0,2])),d[44].set("request_id",a[4]),d[44].set("device_id",d[42]),d[45]=new c.Map(),d[45].set("restore_context",d[44]),d[45].set("failure",d[43]),d[46]=d[45].get("queue_name"),d[46]!==void 0?d[47]=d[46]:(d[49]=d[45].get("restore_context"),d[50]=d[49].get("act_thread_id"),d[47]=["encrypted_backups_restore",":",d[50]].join("")),d[48]=c.toJSON(d[45]),c.storedProcedure(b("LSIssueNewTask"),d[47],c.i64.cast([0,50030]),d[48],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[36]="backup not found",d[36]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[36]].join("")),d[37]=c.createArray(),a[4]!==void 0?d[38]=(d[37].push(a[4]),d[37]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[36],d[37],c.i64.cast([0,3]))):c.resolve()},function(a){return d[11]?d[35]=c.i64.cast([0,5]):d[35]=c.i64.cast([0,2]),d[34]=!1}])},function(a){return d[7]=d[34]}]):c.sequence([function(e){return d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[11]?(d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,1])),d[19].set("error_message",""),d[19].set("stored_procedure","issueMessageRangeQueryTask"),d[20]=new c.Map(),d[20].set("act_thread_id",a[0]),d[21]=new c.Map(),d[21].set("restore_context",d[20]),d[21].set("failure",d[19]),d[22]=d[21].get("restore_context"),d[23]=d[22].get("act_thread_id"),d[24]=c.toJSON(d[21]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[23]].join(""),c.i64.cast([0,50031]),d[24],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[31]=new c.Map(),d[31].set("error_msg","Expected a nonempty query result"),d[31].set("code",c.i64.cast([0,3])),d[31].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[32]=c.createArray(),d[33]=(d[32].push(d[31]),d[32]),e=[void 0,d[32]],d[19]=e[0],d[20]=e[1]):(b=a.item,d[31]=new c.Map(),d[31].set("backup_id",b.backupId),d[31].set("device_public_key_blob",b.devicePublicKeyBlob),d[31].set("device_private_key_blob",b.devicePrivateKeyBlob),d[31].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[31].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[31].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[31].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[31].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[31].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[31].set("orf_client_state_v2_blob",void 0),d[31].set("orf_v2_authority_level",void 0),d[31].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[31].set("device_id",b.deviceId),d[31].set("backup_tenancy",b.backupTenancy),d[31].set("encryption_version",b.encryptionVersion),d[31].set("revision_version",b.revisionVersion),d[31].set("initialize_restore_result",void 0),d[31].set("device_creation_timestamp_sec",void 0),d[31].set("authority_level",b.authorityLevel),e=[d[31],void 0],d[19]=e[0],d[20]=e[1])})},function(a){return d[22]=new c.Map(),d[22].set("value",d[19]),d[22].set("errors",d[20]),d[23]=d[22].get("value"),d[23]!==void 0?c.sequence([function(a){return d[31]=d[23].get("backup_id"),d[32]=d[23].get("device_public_key_blob"),d[33]=d[23].get("device_private_key_blob"),d[34]=d[23].get("epoch_storage_public_key_blob"),d[35]=d[23].get("epoch_storage_private_key_blob"),d[36]=d[23].get("epoch_auth_public_key_blob"),d[37]=d[23].get("epoch_auth_private_key_blob"),d[38]=d[23].get("mailbox_root_key_blob"),d[39]=d[23].get("ocmf_client_state_blob"),d[40]=d[23].get("orf_client_state_v2_blob"),d[41]=d[23].get("orf_v2_authority_level"),d[42]=d[23].get("oblivious_validation_token_blob"),d[43]=d[23].get("device_id"),d[44]=d[23].get("backup_tenancy"),d[45]=d[23].get("encryption_version"),d[46]=d[23].get("revision_version"),d[47]=d[23].get("initialize_restore_result"),d[48]=d[23].get("device_creation_timestamp_sec"),d[49]=d[23].get("authority_level"),c.i64.neq(d[43],void 0)?c.sequence([function(a){return d[51]=void 0,c.i64.neq(d[51],void 0)?c.resolve(d[52]=d[51]):c.sequence([function(a){return d[55]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[56]?d[65]=(d[55].push(c.i64.cast([0,0])),d[55]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[57]?d[65]=(d[55].push(c.i64.cast([0,2])),d[55]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[58]?d[65]=(d[55].push(c.i64.cast([0,3])),d[55]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[59]?d[65]=(d[55].push(c.i64.cast([0,4])),d[55]):0,d[60]=c.createArray(),d[61]=c.i64.of_int32(d[55].length),c.i64.gt(d[61],c.i64.cast([0,0]))?c.loopAsync(d[61],function(a){return d[65]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[55],d[65]).then(function(a){return a=a,d[66]=a[0],d[67]=a[1],a})},function(a){return d[68]=(d[60].push(d[66]),d[60])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[65]=c.createArray(),d[66]=c.i64.of_int32(d[60].length),c.i64.gt(d[66],c.i64.cast([0,0]))?c.loopAsync(d[66],function(a){return d[68]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[60],d[68]).then(function(a){return a=a,d[69]=a[0],d[70]=a[1],a})},function(a){return d[71]=(d[65].push(c.i64.to_string(d[69])),d[65])}])}):c.resolve()},function(a){return d[67]=d[65].join(","),d[62]=d[67]}])},function(a){return d[60].some(function(a){return c.i64.eq(d[45],a)})?d[63]=d[45]:d[63]=void 0,c.i64.neq(d[63],void 0)?d[64]=d[63]:d[64]=void 0,d[52]=d[64]}])},function(a){return c.i64.neq(d[52],void 0)?d[53]=d[52]:d[53]=c.i64.cast([0,0]),c.i64.neq(d[44],void 0)?d[54]=d[44]:d[54]=c.i64.cast([0,1]),d[50]=d[43]}]):c.resolve(d[50]=void 0)},function(a){return d[24]=d[50]}]):c.resolve((d[31]=d[22].get("errors"),d[32]=d[22].get("errors"),d[24]=void 0))},function(e){return d[25]=new c.Map(),d[25].set("error_code",c.i64.cast([0,1])),d[25].set("error_message",void 0==null?"":void 0),d[25].set("stored_procedure","issueMessageRangeQueryTask"),d[26]=new c.Map(),d[26].set("act_thread_id",a[0]),d[26].set("source",a[6]),d[26].set("restore_operation_type",c.i64.cast([0,2])),d[26].set("request_id",a[4]),d[26].set("device_id",d[24]),d[27]=new c.Map(),d[27].set("restore_context",d[26]),d[27].set("failure",d[25]),d[28]=d[27].get("queue_name"),d[28]!==void 0?d[29]=d[28]:(d[31]=d[27].get("restore_context"),d[32]=d[31].get("act_thread_id"),d[29]=["encrypted_backups_restore",":",d[32]].join("")),d[30]=c.toJSON(d[27]),c.storedProcedure(b("LSIssueNewTask"),d[29],c.i64.cast([0,50030]),d[30],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[18]="backup not found",d[18]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[18]].join("")),d[19]=c.createArray(),a[4]!==void 0?d[20]=(d[19].push(a[4]),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[18],d[19],c.i64.cast([0,3]))):c.resolve()},function(a){return d[11]?d[17]=c.i64.cast([0,5]):d[17]=c.i64.cast([0,2]),d[7]=!1}])},function(a){return d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[14]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRangeQueryTask] ",d[10],d[12],d[10],d[13],d[10],d[14]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"issueMessageRangeQueryTask",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSIssueMessageRangeQueryTaskStoredProcedure",["LSIssueMessageRangeQueryTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueMessageRangeQueryTask"),e.threadId,e.numMessages,e.startSortKey,e.isPointQuery,e.traceId,e.newerNumMessages,e.source,e.includeOffset);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWChatEncryptedBackupsLogging",["MWEBODSCategory","MWEBODSEntityKey.enum","ODS","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=a.cancelEndPoint,d=a.event,e=a.instanceKey;a=a.source;a!=null&&c("QPLUserFlow").addAnnotations(d,{string:{source:a}},{instanceKey:e});c("QPLUserFlow").addPoint(d,"cancel",{instanceKey:e});c("QPLUserFlow").addAnnotations(d,{string:{cancel_end_point:b}},{instanceKey:e});c("QPLUserFlow").endCancel(d,{instanceKey:e})}function a(a){var b=a.event,d=a.instanceKey,e=a.onClose;a=a.source;a!=null&&c("QPLUserFlow").addAnnotations(b,{string:{source:a}},{instanceKey:d});i({cancelEndPoint:"dialog_x_button",event:b,instanceKey:d});e()}function b(a){var b=a.annotations,e=a.event,f=a.instanceKey;a=a.odsEntityName;c("QPLUserFlow").addPoint(e,"success",{instanceKey:f});c("QPLUserFlow").endSuccess(e,{annotations:b,instanceKey:f});a&&(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),a,c("MWEBODSEntityKey.enum").SUCCESS)}function e(a){var b=a.annotations,e=a.errorName,f=a.event,g=a.instanceKey,i=a.odsEntityKey;a=a.odsEntityName;c("QPLUserFlow").addPoint(f,"failure",{instanceKey:g});c("QPLUserFlow").endFailure(f,e,{annotations:b,instanceKey:g});a&&(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),a,i!=null?i:c("MWEBODSEntityKey.enum").FAIL)}g.cancelFlow=i;g.closeDialogCancelFlow=a;g.endSuccess=b;g.endFailure=e}),98);
__d("LSProcessBackupIds",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] Beginning execution."),c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1487]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[12]].join("")),d[11]=c.createArray(),void 0!==void 0?d[13]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[12],d[11],c.i64.cast([0,3]))):c.resolve()}])},function(e){return c.db.table(172).fetch([[[c.i64.cast([0,1])]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1488]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[12]].join("")),d[11]=c.createArray(),void 0!==void 0?d[13]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[12],d[11],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[1]=c.i64.cast([0,0])}]):(f=e.item,c.sequence([function(e){return d[11]=f.backupId,d[10]=f.authorityLevel,c.i64.eq(d[10],c.i64.cast([0,20]))?c.resolve(d[9]=c.i64.cast([0,1])):c.sequence([function(e){return c.i64.eq(d[10],c.i64.cast([0,80]))?c.sequence([function(e){return c.i64.eq(d[11],void 0)?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1492]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!0:d[15]=!1,d[15]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[17]].join("")),d[16]=c.createArray(),void 0!==void 0?d[18]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[17],d[16],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[13]=c.i64.cast([0,2])}]):c.sequence([function(e){return c.i64.eq(d[11],c.i64.cast([-1,4294967295]))?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[18]].join("")),d[17]=c.createArray(),void 0!==void 0?d[19]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[18],d[17],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[14]=c.i64.cast([-1,4294967295])}]):c.sequence([function(e){return c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.backupId,d[11])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1490]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[20]].join("")),d[19]=c.createArray(),void 0!==void 0?d[21]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[20],d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,4])}]):(e.item,c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1491]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[20]].join("")),d[19]=c.createArray(),void 0!==void 0?d[21]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[20],d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,3])}]))})},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}]):c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[16]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[16]].join("")),d[15]=c.createArray(),void 0!==void 0?d[17]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[16],d[15],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[12]=c.i64.cast([-1,4294967295])}])},function(a){return d[9]=d[12]}])},function(a){return d[1]=d[9]}]))})},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsProcessBackupIdsStoredProcedure",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsProcessBackupIdsStoredProcedure";a.__tables__=["encrypted_backups","secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSProcessBackupIdsStoredProcedure",["LSProcessBackupIds","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSProcessBackupIds"),e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWEncryptedBackupsProcessBackupIdsDEPRECATED",["FBLogger","LSFactory","LSIntEnum","LSProcessBackupIdsStoredProcedure","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","Promise","QPLEvent","QPLUserFlow","ReQL","WebSession","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("gkx")("23914");function l(a){if(k){var e=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((i||(i=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:e,processBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});return a.runInTransaction(function(a){return c("LSProcessBackupIdsStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":53").then(function(a){a=(j||(j=d("LSIntEnum"))).unwrapIntEnum(a[0]);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,"EB_STATE_"+a+".");d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent});return a})}else return(h||(h=b("Promise"))).resolve(0)}function a(a,b){return a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(d){if(d!=null){c("promiseDone")(l(a),b,function(a){c("FBLogger")("wmi_eb").catching(a).info("Error in db transaction")});return}})})}g.processBackupIdsStoredProcedure=l;g.subscribeToEncryptedBackupsRow=a}),98);
__d("isInstamadilloEB",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("670")===!0}g["default"]=a}),98);
__d("MWEncryptedBackupsListenForChangesToBackupStateInitPath",["EBAPIWorkerCheck","I64","LSAuthorityLevel","LSDataTraceType","LSEncryptedBackupsBackupTenancy","LSFactory","LSFetchBackupIdsStoredProcedure","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWMainTraceUtils","MAWOfflineQueueStatus","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsProcessBackupIdsDEPRECATED","Promise","QPLEvent","QPLUserFlow","ReQL","WAJids","WATagsLogger","WebSession","gkx","isInstamadilloEB","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=c("gkx")("23961"),n=c("qex")._("121")===!0;function a(a){function b(){var b=d("ReQL").fromTableAscending(a.tables.encrypted_backups),e=b.subscribe(function(a,b){if(b.operation==="delete"||!(j||(j=d("I64"))).equal(b.value.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;e();c("QPLUserFlow").getActiveFlowIDs().includes((l||(l=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))&&d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent})});b=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((l||(l=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:b,fetchBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});c("promiseDone")(a.runInTransaction(function(a){return c("LSFetchBackupIdsStoredProcedure")(c("LSFactory")(a),{backupTenancy:(k||(k=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION),isUiBlocking:!1})},"readwrite",void 0,void 0,f.id+":93"),function(){return p(a)})}(n||c("isInstamadilloEB")())&&b();var e=d("ReQL").fromTableAscending(a.tables.encrypted_backups_status_trigger);return e.subscribe(b)}function o(a){return a.runInTransaction(function(a){var e=d("MAWOfflineQueueStatus").getAllThreadsWithOfflineQueueIncomplete();return(i||(i=b("Promise"))).all(e.map(function(b){var e=d("WAJids").threadIdForChatJid(b),f=d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("MAWMainTraceUtils").startTraceWithTxn(a,(j||(j=d("I64"))).of_float(Date.now()),f,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE)));e={isPointQuery:!1,newerNumMessages:j.zero,numMessages:j.of_int32(20),source:k.ofNumber(c("LSMEBTaskCreationSource").UNKNOWN),threadId:e,traceId:f};d("WATagsLogger").TAGS(["labyrinth_web","eb_prefetch",f]).LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[EB Prefetch] Issuing message range query for thread "," with params ",""])),b,JSON.stringify(e));d("MAWEBRestoreTrackingUtils").markEBRestoreFrontloaded(c("LSMEBTaskCreationSource").UNKNOWN,f,!1);return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),e)}))},"readonly",void 0,void 0,f.id+":122")}function p(a){var b=d("MAWOfflineQueueStatus").isOfflineQueueComplete();m&&!b&&c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),function(b){if(d("EBAPIWorkerCheck").runningInWorker())return;b===3&&c("promiseDone")(o(a))})}e={listenForChangesToBackupState:a,preloadEBData:p};g["default"]=e}),98);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var e=this;this.$1=a;this.$2=b;this.$3=new(c("LSPlatformRequestScheduler"))();this.$4=d("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!1)});this.$5=d("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!0)});this.$7()}var b=a.prototype;b.$6=async function(a,b,c,d){await this.$2.decideWhatToDoWithTask(a,b,c,d)};b.$7=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.$6(a.$1,b)})};b.cleanup=function(){this.$4.forEach(function(a){return a()}),this.$5.forEach(function(a){return a()}),this.$2.cleanup()};return a}();g.default=a}),98);
__d("getMWLSRegion",["MessengerWebRegion"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("MessengerWebRegion").regionNullable;return a==null?"":a}g["default"]=a}),98);
__d("EBLS",["EBDB","EBDBEbsmApi","EBEpochChangeListener","EBIsEbEnabledSubscriber","EBLogger","EBReadyNotifier","EBReenrollmentTriggerListener","EBWorkerAddDeviceUtils","I64","LSAuthorityLevel","LSDataTraceFlushDeferred","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSDefaultSyncGroups","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSInternetConnectionState","LSJSEBInMemoryStorage","LSMetadata","LSPlatformDeviceId","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSPlatformRealtimeTransport","LSPlatformTaskSystemTransport","LSReStoreWrapper","LSVersion","MAWBridge","MAWEBLSInWorkerSwitch","MAWEncryptedBackupsStateManager","MAWLSVaultingHooks","MAWVaultMaterialsStorage","MWEncryptedBackupsListenForChangesToBackupStateInitPath","MWEncryptedBackupsProcessBackupIdsDEPRECATED","MWPlatformTaskSystem","MqttEnv","QPLUserFlow","ReQL","ServerAppID","WAAssertUnreachable","WAResolvable","WAWaitForUserUnblocked","cr:7533","emptyFunction","err","getMWLSRegion","gkx","nullthrows","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d("EBLogger").EBLogger().tags(["EBLS"]),C=c("qpl")._(521478817,"2806");function a(){return G()}var D,E,F;function G(){return D?D.promise:H({copyKeys:!0,getNewDB:!1}).promise}function H(a){D!=null&&!D.isSettled&&D.reject(c("err")("LSClient is not settled"));E!=null&&!E.isSettled&&E.reject(c("err")("LSDBStorage is not settled"));var b=new(d("WAResolvable").Resolvable)();D=b;E=null;void J(a).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b}async function I(){c("QPLUserFlow").addPoint(C,"offline_queue_wait_start"),await d("WAWaitForUserUnblocked").waitForUserUnblocked(),c("QPLUserFlow").addPoint(C,"offline_queue_wait_end")}async function J(a){var b;a=a.getNewDB;d("EBReadyNotifier").resetEBReady();(b=c("QPLUserFlow")).start(C,{timeoutInMs:6e4});b.addPoint(C,"ls_storage_creation_start");a=await K(a);b.addPoint(C,"ls_storage_creation_end");b.addPoint(C,"eb_worker_add_device_skipped");b.endSuccess(C);d("EBReadyNotifier").markEBReady();B.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Initialised db"])));b={appId:c("nullthrows")(c("ServerAppID").app_id),executeGraphQLLightSpeedRequest:async function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=await d("MAWBridge").getBridge().sendAndReceive("event","executeGraphQLLightSpeedRequest",{args:b});return e},getDb:K,getEval:function(){return c("LSDatascriptEvaluatorMaybeDeferred")()},platformName:"Messenger",realtimeUnderylingTransport:function(){return Promise.resolve(function(b,a){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),a,{getInstance:d("LSDedicatedMqttChannel").getInstance(function(){return!0},(b={},b[d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter]=!1,b),function(a,b){return b},c("emptyFunction")),shutdownAndClear:d("LSDedicatedMqttChannel").shutdownAndClear})})},region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!1,syncParams:c("LSPlatformMessengerSyncParams")};B.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["created config"])));c("QPLUserFlow").addAnnotations(C,{string:{appId:b.appId}});var e=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");c("QPLUserFlow").addPoint(C,"platform_client_init_start");b=await N(a,b,e);c("QPLUserFlow").addPoint(C,"platform_client_init_end");F=O(a);await d("EBIsEbEnabledSubscriber").initIsEbEnabledPubSub(a);await d("EBEpochChangeListener").initEBEpochChangeListener(a);await d("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(a);B.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["finished init successfully"])));return b}async function K(a){a===void 0&&(a=!1);if(!a&&E!=null)return E.promise;a=new(d("WAResolvable").Resolvable)();E=a;await d("MAWVaultMaterialsStorage").setupVaultMaterials();var b={clearEbStores:d("EBDB").clearEbStores,flushEBSMtoEBDB:d("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:d("EBDBEbsmApi").rehydrateEBSMFromEBDB},e=await d("LSJSEBInMemoryStorage").makeReStorePersistence(b);e=d("LSReStoreWrapper").createLSReStore(e,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);b.updateEBSM=d("EBDBEbsmApi").updateEBSM(e);await e.runInTransaction(async function(a){await d("LSDefaultSyncGroups").seedDb(a,void 0)},"readwrite","ui",void 0,f.id+":236");a.resolve(e);return e}async function e(){if(b("cr:7533")!=null||D==null)return;await d("EBWorkerAddDeviceUtils").clearLSEBSMTables(await K())}function L(a){var b=c("MWEncryptedBackupsListenForChangesToBackupStateInitPath").listenForChangesToBackupState(a);return function(){b&&b()}}function M(a,b){var e=b==="Connected"?(z||(z=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(z||(z=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);B.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status: ",""])),b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":276"),function(){B.DEBUG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set successfully"])))},function(a){B.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set failed: ",""])),a==null?void 0:a.message);throw a})}async function N(a,e,f){B.DEBUG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting..."])));var g=await e.getEval();B.DEBUG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Getting datascript evaluator success"])));var h=g()(a);B.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Clearing epoch before resume sync..."])));B.DEBUG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Starting realtime transport"])));g=await e.realtimeUnderylingTransport();var i=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(g,e.appId,f);B.DEBUG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Starting task system"])));var j=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,i,h,e.schemaVersion));B.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Starting backup state listeners"])));var k=null;b("cr:7533")!=null?c("promiseDone")(I().then(function(a){return b("cr:7533")()}),function(b){c("QPLUserFlow").addPoint(C,"sync_system_creation_start"),k=b(a,i,h,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest),c("QPLUserFlow").addPoint(C,"sync_system_creation_end")}):c("QPLUserFlow").addPoint(C,"sync_system_creation_skipped");var l=L(a);B.DEBUG(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Watching for expired traces"])));var m;c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){m=a}));B.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Subscribing to mqtt sync status change events"])));i.onConnectionStatusChange(function(b){M(a,b)});B.DEBUG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting sucess"])));return{cleanup:function(){var a;B.DEBUG(w||(w=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync cleaning up"])));j==null||j.cleanup();i.cleanup();(a=k)==null||a.cleanup();l();m==null||m();F.forEach(function(a){return a()})},db:a}}function O(a){var b=[];if(c("gkx")("12414")){var e=function(a){d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"UpdateEBState",value:{newState:a}}]})},f=a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(b){if(b!=null){c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),e,function(a){B.catching(a).mustfix("Process backup ids failed")});return}})});b.push(f)}else{f=P(a);b.push(f)}return b}function P(a){d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state)).then(function(a){a!=null&&c("MAWEBLSInWorkerSwitch").set(Q(a))}).catch(function(a){B.catching(a).MUSTFIX(x||(x=babelHelpers.taggedTemplateLiteralLoose(["Failed to get initial state for EBLS Switch"])))});return a.tables.secure_encrypted_backups_client_state.subscribe(function(a,b){B.DEBUG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state changed. operation: ",""])),b.operation);switch(b.operation){case"delete":c("MAWEBLSInWorkerSwitch").set(!1);break;case"add":case"put":c("MAWEBLSInWorkerSwitch").set(Q(b.value));break;default:b.operation;throw c("WAAssertUnreachable")(b.operation)}})}function Q(a){var b=a.authorityLevel;a=a.backupTenancy;if(b==null)return!1;a=a!=null?a:(z||(z=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION);return(A||(A=d("I64"))).equal(a,(z||(z=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))&&(A||(A=d("I64"))).equal(b,(z||(z=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}g.init=a;g.genLSClient=G;g.getLSStorage=K;g.clearEBSMStorage=e;g.platformClientInit=N}),98);
__d("LSEagerlyLoadOnMessenger",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.eagerlyLoadOnMessenger=a}),66);
__d("LSDatascriptEvaluatorMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorMaybeEagerly");function a(){return d("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(h).load()}g["default"]=a}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DASM:1,JS:2,JSON:3});c=a;f["default"]=c}),66);
__d("WAGetHashFromProtocolMsgId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.externalId+"_"+a.author+"_"+a.chat}f.getHashFromProtocolMsgId=a}),66);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBODSUtils","ODS","QPLUserFlow","QuickPerformanceLogger","WACommsConnectionState","WAExceededStorageQuota","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={ERROR_FETCHING_DB_MESSAGE:"error_fetching_db_message",FAILED_TO_ACK_MESSAGE:"failed_to_ack_message",FAILED_TO_CONSTRUCT_ECHO_MESSAGE:"failed_to_construct_echo_message",MESSAGE_UPLOAD_TIMEOUT:"message_upload_timeout",RUNTIME_ERROR:"runtime_error"};function a(a,b,e,f,g,h,j,k,m){g===void 0&&(g=!1);h===void 0&&(h=!1);k===void 0&&(k="unknown");m===void 0&&(m=0);if(!c("MAWEBSwitch").isEnabled())return;c("QPLUserFlow").start(c("qpl")._(521481602,"829"),{annotations:{bool:{eb_switch:c("MAWEBSwitch").isEnabled(),eb_upload_queue:!0,fromUploadQueue:g,is_retroactive_upload:h,middleware_init:!1},"int":{attachmentsSize:j!=null?j:0,instanceKey:f,retryCount:m},string:{comms_status:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected",externalId:a,msgType:b,payloadType:k,triggerType:e}},instanceKey:f,timeoutInMs:c("justknobx")._("1405")});l(f,"upload_tracking_started");(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").START);d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+(b!=null?b:"unknown"));g=d("MAWMsgType").isMAWSupportedMediaType(b!=null?b:"Text")?"media":"non-media";d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+g)}function k(a){return a==null?{string:{comms_status_on_failure:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"}}:babelHelpers["extends"]({},a,{string:babelHelpers["extends"]({},a.string,{comms_status_on_failure:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"})})}function b(a,b,c,d){switch(a){case"success":n(b,c,d);break;case"fail":m(b,c,d);break;case"point":l(b,c,d);break}}function l(a,b,d){d&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),d,{instanceKey:a}),c("QPLUserFlow").addPoint(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function e(a,b){var e;c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(b),{instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:b==null||(e=b.string)==null?void 0:e.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").CANCEL)}function m(a,b,e){var f;c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(e),{instanceKey:a});c("QPLUserFlow").endFailure(c("qpl")._(521481602,"829"),b,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null||(f=e.string)==null?void 0:f.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").FAIL)}function n(a,b,c){l(a,b),o(a,c)}function o(a,b){b&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),b,{instanceKey:a}),c("QPLUserFlow").endSuccess(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},instanceKey:a}),(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").SUCCESS)}function f(a,b,e){var f;l(a,b);e&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),e,{instanceKey:a});c("QPLUserFlow").endTimeout(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null||(f=e.string)==null?void 0:f.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").TIMEOUT)}function p(a,b,d){var e=c("qpl")._(521481602,"829");l(a,b);d&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(e,d,{instanceKey:a});(h||(h=c("QuickPerformanceLogger"))).markerEnd(e,52,a,h.currentTimestamp())}function q(){return d("WAHashStringToNumber").hashStringToNumber(d("MAWExternalId").generateExternalId())}function r(a,b){b===void 0&&(b=0);return d("WAHashStringToNumber").hashStringToNumber(d("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(a)+"_"+d("WAGlobals").getMyDeviceJid()+"_"+b)}function s(a){return c("MAWEBSwitch").isEnabled()&&d("MAWMsgType").isEBSupportedMsgType(a.type)&&a.ack>=d("MAWAckLevel").ACK.sent&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)}function t(a){return{addAnnotations:function(b){u(a,b)},addPoint:function(b,c){l(a,b,c)},endFail:function(b,c){m(a,b,c)},endSuccess:function(b){o(a,b)},getQPLAttrs:function(){return{event:c("qpl")._(521481602,"829"),instanceKey:a}},isActive:function(){return!0}}}function u(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function v(a,b){return a.get(b)}function w(a,b,c,d,e){b=v(b,c);if(b!=null)switch(a){case"success":n(b,d,e);break;case"fail":m(b,d,e);break;case"point":l(b,d,e);break}}g.EBUploadTrackingWorkerFailurePoints=j;g.startUploadTracking=a;g.handleBridgeEbUploadTrackingQPL=b;g.addPointWorkerOnly=l;g.endCancelWorkerOnly=e;g.endFailWorkerOnly=m;g.endSuccessWorkerOnly=n;g.endTimeoutWorkerOnly=f;g.endRetryWorkerOnly=p;g.genInstanceKeyOnly=q;g.genInstanceKeyForUploadQueue=r;g.isUploadSupported=s;g.makeEBWorkerQplFlowFromInstanceKey=t;g.addAnnotationsForEBWorkerQplFlow=u;g.getUploadTrackingInstanceKey=v;g.addUploadTrackingByType=w}),98);
__d("WADbRegistrationApi",["WADbSignal","WAJids","WALogger","WASignalDB","err"],(function(a,b,c,d,e,f,g){"use strict";var h;f=function(a,b){return d("WASignalDB").getDb().runInTransaction(["contacts"],"readwrite",async function(c){var d=await c.stores.contacts.get(a);if(d!=null)return c.stores.contacts.bulkPut([babelHelpers.extends({},d,{icdcInfo:b})]);else return c.stores.contacts.bulkPut([{contactJid:a,dhash:null,icdcInfo:b}])},d("WASignalDB").signalOp("saveICDC"))};function a(a){return d("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(b){return b.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.deviceId,value:{deviceId:a}}])},d("WASignalDB").signalOp("saveDeviceId"))}function b(a,b){return d("WASignalDB").getDb().runInTransaction(["meta","signedPrekey"],"readwrite",async function(c){var e;await Promise.all([c.stores.meta.bulkPut([{key:(e=d("WADbSignal")).MetaKeysEnum.deviceUUID,value:{deviceUUID:b.deviceUUID}},{key:e.MetaKeysEnum.fbid,value:{fbid:a}},{key:e.MetaKeysEnum.regId,value:{regId:b.signalRegInfo.regId}},{key:e.MetaKeysEnum.identityKeyPair,value:{identityKeyPair:b.signalRegInfo.identityKeyPair}},{key:e.MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:b.signalRegInfo.signedPreKey.keyId}},{key:e.MetaKeysEnum.registrationVersion,value:{registrationVersion:b.registrationVersion}},{key:e.MetaKeysEnum.authKeyPair,value:{authKeyPair:b.signalRegInfo.authKeyPair}},{key:e.MetaKeysEnum.deviceRegUnixTime,value:{deviceRegUnixTime:b.registrationUnixTime}}]),c.stores.signedPrekey.bulkPut([b.signalRegInfo.signedPreKey])])},d("WASignalDB").signalOp("saveRegistrationMeta"))}var i=function(a,b){var c=b.sessionId;return d("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(a){return a.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.lastSessionDeviceWasLinkedTo,value:{lastSessionDeviceWasLinkedTo:c}}])},d("WASignalDB").signalOp("saveLastSessionDeviceWasLinkedTo"))};function e(){return d("WASignalDB").getDb().runInTransaction(["meta"],"readonly",async function(a){a=await a.stores.meta.bulkGet([(a=d("WADbSignal")).MetaKeysEnum.fbid,a.MetaKeysEnum.deviceId,a.MetaKeysEnum.cat,a.MetaKeysEnum.regId,a.MetaKeysEnum.identityKeyPair,a.MetaKeysEnum.authKeyPair]);var b=a[0],e=a[1],f=a[2],g=a[3],i=a[4];a=a[5];d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["worker: got db data"])));b=b==null?void 0:b.value.fbid;e=e==null?void 0:e.value.deviceId;f=f==null?void 0:f.value.cat;g=g==null?void 0:g.value.regId;i=i==null?void 0:i.value.identityKeyPair;a=a==null?void 0:a.value.authKeyPair;if(b==null)throw c("err")("fbid not set");if(e==null)throw c("err")("deviceId not set");if(f==null)throw c("err")("fbCat not set");if(g==null||i==null)throw c("err")("regInfo not set");return{deviceJid:d("WAJids").toDeviceJid(d("WAJids").toMsgrUserJid(b),e),fbCat:f.encrypted_serialized_cat,regInfo:{authKeyPair:a,regId:g,staticKeyPair:i},userJid:d("WAJids").toMsgrUserJid(b)}},d("WASignalDB").signalOp("loadAllRegistrationMeta"))}g.saveICDC=f;g.saveDeviceId=a;g.saveRegistrationMeta=b;g.saveLastSessionDeviceWasLinkedTo=i;g.loadAllRegistrationMetaInTransaction=e}),98);/*FB_PKG_DELIM*/
__d("EntMessageReplyType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:0,BUMP:1});f["default"]=a}),66);
__d("LSHotEmojiSize",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});f["default"]=a}),66);
__d("LSMessageReplySourceTypeV2",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});f["default"]=a}),66);
__d("LSMessageSendStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});f["default"]=a}),66);
__d("LSReplyMessageAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});f["default"]=a}),66);
__d("LSThreadMediaGalleryGroup",[],(function(a,b,c,d,e,f){a=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});f["default"]=a}),66);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(a,b,c,d,e,f,g){"use strict";var h,i={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function a(a){return a>0}function b(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(0);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(1);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(2);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(5);default:return(h||(h=d("LSIntEnum"))).ofNumber(4)}}function e(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NONE);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SERVER_RECEIVED);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").RETRIABLE_ERROR);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}g.ACK=i;g.isMsgAuthoritative=a;g.levelToMessagingSendStatusV2=b;g.levelToMessagingSendStatus=e}),98);
__d("MAWAdminMsgType",[],(function(a,b,c,d,e,f){"use strict";a="currentUserAddedDevice";b="participantAddedDevice";c="currentUserRemovedDevice";d="participantRemovedDevice";e="currentUserUpdatedDevice";var g="participantUpdatedDevice",h="participantAddedYou",i="participantAddedYouAndOneUser",j="participantAddedYouAndMoreThanOneUsers",k="unknowUserAddedYou",l="unknowUserAddedYouAndOneUser",m="unknowUserAddedYouAndMoreThanOneUser",n="unknownUserAddedOneUser",o="unknownUserAddedTwoUser",p="unknownUserAddedMoreThanTwoUser",q="participantAddedOneUser",aa="participantAddedTwoUser",ba="participantAddedMoreThanTwoUser",ca="currentUserRemovedOneParticipant",da="currentUserRemovedTwoParticipant",ea="currentUserRemovedMoreThanTwoParticipant",fa="currentUserAddedOneParticipant",ga="currentUserAddedTwoParticipant",r="currentUserAddedMoreThanTwoParticipant",ha="participantRemovedYou",ia="participantRemovedYouAndOneUser",ja="participantRemovedYouAndMoreThanOneUsers",ka="unknowUserRemovedYou",la="unknowUserRemovedYouAndOneUser",ma="unknowUserRemovedYouAndMoreThanOneUser",na="unknownUserRemovedOneUser",oa="unknownUserRemovedTwoUser",pa="unknownUserRemovedMoreThanTwoUser",qa="participantRemovedOneUser",ra="participantRemovedTwoUser",sa="participantRemovedMoreThanTwoUser",ta="participantLeftGroup",ua="currentUserLeftGroup",va="participantCustomizeParticipantNickname",wa="participantClearParticipantNickname",xa="participantCustomizeCurrentUserNickname",ya="currentUserSetOwnNickname",za="currentUserClearOwnNickname",Aa="currentUserClearParticipantNickname",Ba="participantSetOwnNickname",Ca="participantClearOwnNickname",Da="participantClearCurrentUserNickname",Ea="currentUserCustomizeNickname",Fa="currentUserNamedGroup",Ga="unkonwnUserNamedGroup",Ha="participantNamedGroup",Ia="currentUserCustomizeHotlike",Ja="participantCustomizeHotlike",Ka="currentUserCustomizeTheme",La="currentUserCustomizeAITheme",Ma="currentUserCustomizePhoto",Na="participantCustomizeTheme",Oa="participantCustomizeAITheme",Pa="participantCustomizePhoto",Qa="currentUserSetAddModeAdminOnly",Ra="currentUserSetAddModeAllMembers",Sa="participantSetAddModeAdminOnly",Ta="participantSetAddModeAllMembers",Ua="serverSetAddModeAdminOnly",Va="serverSetAddModeAllMembers",s="currentUserPinnedMessage",t="currentUserUnpinnedMessage",u="participantPinnedMessage",v="participantUnpinnedMessage",w="currentUserLimitSharingDisabled",x="currentUserLimitSharingEnabled",y="participantLimitSharingDisabled",z="participantLimitSharingEnabled",A="cutoverThreadAdminMessage",B="cutoverIGDThreadAdminMessage",C="cutoverRollbackAdminMessage",D="dualThreadCutoverAdminMessage",E="e2eeThreadDescription",F="e2eeThreadUKOSAAdminMessage",Wa="debugMsg",Xa="reachabilityError",Ya="twoUsersConnected",Za="twoUsersConnectedOneMSplit",G="CurrentUserCreatedPoll",H="ParticipantCreatedPoll",I="CurrentUserAddedPollOption",J="ParticipantAddedPollOption",K="CurrentUserAddedMultiplePollOptions",L="ParticipantAddedMultiplePollOptions",M="CurrentUserAddedPollVote",N="ParticipantAddedPollVote",O="CurrentUserAddedMultiplePollVotes",P="ParticipantAddedMultiplePollVotes",Q="CurrentUserRemovedPollVote",R="ParticipantRemovedPollVote",S="CurrentUserRemovedMultiplePollVotes",T="ParticipantRemovedMultiplePollVotes",U="CurrentUserMixedPollUpdate",V="ParticipantMixedPollUpdate",W="CurrentUserChangedPollVote",X="ParticipantChangedPollVote",Y="CurrentUserChangedMultiplePollVotes",Z="ParticipantChangedMultiplePollVotes",$="PollUnsentUpdate";r={CURRENT_USER_ADDED_DEVICE:a,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:r,CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:K,CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:O,CURRENT_USER_ADDED_ONE_PARTICIPANT:fa,CURRENT_USER_ADDED_POLL_OPTION:I,CURRENT_USER_ADDED_POLL_VOTE:M,CURRENT_USER_ADDED_TWO_PARTICIPANTS:ga,CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:Y,CURRENT_USER_CHANGED_POLL_VOTE:W,CURRENT_USER_CLEAR_OWN_NICKNAME:za,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:Aa,CURRENT_USER_CREATED_POLL:G,CURRENT_USER_CUSTOMIZE_AI_THEME:La,CURRENT_USER_CUSTOMIZE_HOTLIKE:Ia,CURRENT_USER_CUSTOMIZE_NICKNAME:Ea,CURRENT_USER_CUSTOMIZE_PHOTO:Ma,CURRENT_USER_CUSTOMIZE_THEME:Ka,CURRENT_USER_LEFT_GROUP:ua,CURRENT_USER_LIMIT_SHARING_DISABLED:w,CURRENT_USER_LIMIT_SHARING_ENABLED:x,CURRENT_USER_MIXED_POLL_UPDATE:U,CURRENT_USER_NAMED_GROUP:Fa,CURRENT_USER_PINNED_MESSAGE:s,CURRENT_USER_REMOVED_DEVICE:c,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:ea,CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:S,CURRENT_USER_REMOVED_ONE_PARTICIPANT:ca,CURRENT_USER_REMOVED_POLL_VOTE:Q,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:da,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:Qa,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:Ra,CURRENT_USER_SET_OWN_NICKNAME:ya,CURRENT_USER_UNPINNED_MESSAGE:t,CURRENT_USER_UPDATED_DEVICE:e,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:B,CUTOVER_ROLLBACK_ADMIN_MESSAGE:C,CUTOVER_THREAD_ADMIN_MESSAGE:A,DEBUG_MSG:Wa,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:D,E2EE_THREAD_DESCRIPTION:E,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:F,PARTICIPANT_ADDED_DEVICE:b,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:ba,PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:L,PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:P,PARTICIPANT_ADDED_ONE_USER:q,PARTICIPANT_ADDED_POLL_OPTION:J,PARTICIPANT_ADDED_POLL_VOTE:N,PARTICIPANT_ADDED_TWO_USER:aa,PARTICIPANT_ADDED_YOU:h,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:j,PARTICIPANT_ADDED_YOU_AND_ONE_USER:i,PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:Z,PARTICIPANT_CHANGED_POLL_VOTE:X,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:Da,PARTICIPANT_CLEAR_OWN_NICKNAME:Ca,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:wa,PARTICIPANT_CREATED_POLL:H,PARTICIPANT_CUSTOMIZE_AI_THEME:Oa,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:xa,PARTICIPANT_CUSTOMIZE_HOTLIKE:Ja,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:va,PARTICIPANT_CUSTOMIZE_PHOTO:Pa,PARTICIPANT_CUSTOMIZE_THEME:Na,PARTICIPANT_LEFT_GROUP:ta,PARTICIPANT_LIMIT_SHARING_DISABLED:y,PARTICIPANT_LIMIT_SHARING_ENABLED:z,PARTICIPANT_MIXED_POLL_UPDATE:V,PARTICIPANT_NAMED_GROUP:Ha,PARTICIPANT_PINNED_MESSAGE:u,PARTICIPANT_REMOVED_DEVICE:d,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:sa,PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:T,PARTICIPANT_REMOVED_ONE_USER:qa,PARTICIPANT_REMOVED_POLL_VOTE:R,PARTICIPANT_REMOVED_TWO_USER:ra,PARTICIPANT_REMOVED_YOU:ha,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:ja,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:ia,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:Sa,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:Ta,PARTICIPANT_SET_OWN_NICKNAME:Ba,PARTICIPANT_UNPINNED_MESSAGE:v,PARTICIPANT_UPDATED_DEVICE:g,POLL_UNSENT_UPDATE:$,REACHABILITY_ERROR:Xa,SERVER_SET_ADD_MODE_ADMIN_ONLY:Ua,SERVER_SET_ADD_MODE_ALL_MEMBERS:Va,TWO_USERS_CONNECTED:Ya,TWO_USERS_CONNECTED_ONE_MSPLIT:Za,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:p,UNKNOWN_USER_ADDED_ONE_USER:n,UNKNOWN_USER_ADDED_TWO_USER:o,UNKNOWN_USER_ADDED_YOU:k,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:m,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:l,UNKNOWN_USER_NAMED_GROUP:Ga,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:pa,UNKNOWN_USER_REMOVED_ONE_USER:na,UNKNOWN_USER_REMOVED_TWO_USER:oa,UNKNOWN_USER_REMOVED_YOU:ka,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:ma,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:la};f.CURRENT_USER_ADDED_DEVICE=a;f.CURRENT_USER_PINNED_MESSAGE=s;f.CURRENT_USER_UNPINNED_MESSAGE=t;f.PARTICIPANT_PINNED_MESSAGE=u;f.PARTICIPANT_UNPINNED_MESSAGE=v;f.CURRENT_USER_LIMIT_SHARING_DISABLED=w;f.CURRENT_USER_LIMIT_SHARING_ENABLED=x;f.PARTICIPANT_LIMIT_SHARING_DISABLED=y;f.PARTICIPANT_LIMIT_SHARING_ENABLED=z;f.CUTOVER_THREAD_ADMIN_MESSAGE=A;f.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=B;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=C;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=D;f.E2EE_THREAD_DESCRIPTION=E;f.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=F;f.CURRENT_USER_CREATED_POLL=G;f.PARTICIPANT_CREATED_POLL=H;f.CURRENT_USER_ADDED_POLL_OPTION=I;f.PARTICIPANT_ADDED_POLL_OPTION=J;f.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS=K;f.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS=L;f.CURRENT_USER_ADDED_POLL_VOTE=M;f.PARTICIPANT_ADDED_POLL_VOTE=N;f.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES=O;f.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES=P;f.CURRENT_USER_REMOVED_POLL_VOTE=Q;f.PARTICIPANT_REMOVED_POLL_VOTE=R;f.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES=S;f.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES=T;f.CURRENT_USER_MIXED_POLL_UPDATE=U;f.PARTICIPANT_MIXED_POLL_UPDATE=V;f.CURRENT_USER_CHANGED_POLL_VOTE=W;f.PARTICIPANT_CHANGED_POLL_VOTE=X;f.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES=Y;f.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES=Z;f.POLL_UNSENT_UPDATE=$;f.ADMIN_MSG_TYPE=r}),66);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(a,b,c,d,e,f,g){"use strict";a="emptySnippet";b="currentUserCreatedGroup";c="participantCreatedGroup";e="unknownUserCreatedGroup";f="currentUserGotPromoted";var h="currentUserGotDemoted",i="participantGotPromoted",j="participantGotDemoted",k="participantPromotedYou",l="participantDemotedYou",m="currentUserPromotedParticipant",n="currentUserDemotedParticipant",o="participantDemotedParticipant",p="participantPromotedParticipant",q="participantSelfDemoted",r="currentUserSelfDemoted",s="currentUserSendText",t="currentUserSendImage",u="currentUserSendVideo",v="currentUserSendAudio",w="currentUserSendGif",x="currentUserSendSticker",y="participantSendText",z="participantSendTextInGroup",A="participantSendImage",B="participantSendVideo",C="participantSendAudio",D="participantSendGif",E="participantSendSticker",F="unavailableSnippet",G="unknownUserEphemeralSettingTurnedOnSeconds",H="unknownUserEphemeralSettingTurnedOnMinutes",I="unknownUserEphemeralSettingTurnedOnHours",J="unknownUserEphemeralSettingTurnedOnDays",K="youEphemeralSettingTurnedOnSeconds",L="youEphemeralSettingTurnedOnMinutes",M="youEphemeralSettingTurnedOnHours",N="youEphemeralSettingTurnedOnDays",O="participantEphemeralSettingTurnedOnSeconds",P="participantEphemeralSettingTurnedOnMinutes",Q="participantEphemeralSettingTurnedOnHours",R="participantEphemeralSettingTurnedOnDays",S="unknownUserEphemeralSettingChangeSeconds",T="unknownUserEphemeralSettingChangeMinutes",U="unknownUserEphemeralSettingChangeHours",V="unknownUserEphemeralSettingChangeDays",W="youEphemeralSettingChangeSeconds",X="youEphemeralSettingChangeMinutes",Y="youEphemeralSettingChangeHours",aa="youEphemeralSettingChangeDays",ba="participantEphemeralSettingChangeSeconds",ca="participantEphemeralSettingChangeMinutes",da="participantEphemeralSettingChangeHours",ea="participantEphemeralSettingChangeDays",fa="unknownUserEphemeralSettingTurnedOff",ga="youEphemeralSettingTurnedOff",ha="participantEphemeralSettingTurnedOff",ia="ephemeralSettingsAutoReset",ja="currentUserUnsentMessage",ka="participantUnsentMessage",la="participantReactMessage",ma="participantReactMessageInGroup",Z="unknownUserEphemeralTakeScreenshot",na="unknownUserEphemeralRecordScreen",oa="youEphemeralTakeScreenshot",pa="youEphemeralRecordScreen",qa="participantEphemeralTakeScreenshot",ra="participantEphemeralRecordScreen",sa="icdcAlertAdminMessage",ta="yourDeviceICDCAlertAdminMessage",$="currentUserSendAttachment",ua="participantSendAttachment",va="currentUserSentPost",wa="currentUserSentReel",xa="currentUserSentStory",ya="currentUserSentEvent",za="currentUserMentionedStoryIG",Aa="currentUserReceivedStoryMentionIG",Ba="participantSentPost",Ca="participantSentReel",Da="participantSentStory",Ea="participantSentEvent",Fa="currentUserSentStoryHighlight",Ga="participantSentStoryHighlight",Ha="currentUserMissedAudioCall",Ia="participantMissedAudioCall",Ja="currentUserMissedVideoCall",Ka="participantMissedVideoCall",La="currentUserAudioCalled",Ma="participantAudioCalled",Na="currentUserVideoCalled",Oa="participantVideoCalled",Pa="currentUserStartedGroupAudioCall",Qa="participantStartedGroupAudioCall",Ra="currentUserStartedGroupVideoCall",Sa="participantStartedGroupVideoCall",Ta="currentUserBumpedOwnMessage",Ua="currentUserBumpedMessage",Va="participantBumpedOwnMessage",Wa="participantBumpedParticipantMessage",Xa="participantBumpedCurrentUserMessage",Ya="userSendUnavailableMessage",Za="userSendEncryptedMessage",$a="currentUserSendUnrenderableMessage",ab="participantSendUnrenderableMessage",bb="currentUserSendLocationFallback",cb="participantSendLocation",db="currentUserSendLiveLocationFallback",eb="participantSendLiveLocation",fb="currentUserSendLocation",gb="participantSendLocation",hb="currentUserSendPollCreationFallback",ib="participantSendPollCreation",jb="currentUserSendContactShareFallback",kb="participantSendContactShareFallback",lb="currentUserSendContactShare",mb="participantSendContactShare",nb="currentUserSendAIContactShare",ob="participantSendAIContactShare",pb="currentUserSendStoryMentionFallback",qb="currentUserSendStoryMention",rb="participantSendStoryMention",sb="participantSendStoryMentionFallback",tb="currentUserSendPostMentionFallback",ub="participantSendPostMentionFallback",vb="currentUserSendMemoriesShare",wb="participantSendMemoriesShare",xb="currentUserSendPostMention",yb="participantSendPostMention",zb="currentUserSendNoteMentionFallback",Ab="participantSendNoteMentionFallback",Bb="messengerMemoryEncryptedMessageFallback",Cb="rtcXMAMessageFallback",Db="metaAISendMessageFallback",Eb="currentUserSendBumpMessageFallback",Fb="participantSendBumpMessageFallback",Gb="participantSendBumpMessageOriginalUnavailable",Hb="currentUserSendStickerReceiverFetchMessageFallback",Ib="participantSendStickerReceiverFetchMessageFallback",Jb="viewOncePhotoMessageFallback",Kb="viewOnceVideoMessageFallback",Lb="unavailableStory",Mb="currentUserLimitSharingDisabled",Nb="currentUserLimitSharingEnabled",Ob="participantLimitSharingDisabled",Pb="participantLimitSharingEnabled";d=babelHelpers["extends"]({},d("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:La,CURRENT_USER_BUMPED_MESSAGE:Ua,CURRENT_USER_BUMPED_OWN_MESSAGE:Ta,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_DEMOTED_PARTICIPANT:n,CURRENT_USER_GOT_DEMOTED:h,CURRENT_USER_GOT_PROMOTED:f,CURRENT_USER_LIMIT_SHARING_DISABLED:Mb,CURRENT_USER_LIMIT_SHARING_ENABLED:Nb,CURRENT_USER_MENTIONED_STORY_IG:za,CURRENT_USER_MISSED_AUDIO_CALL:Ha,CURRENT_USER_MISSED_VIDEO_CALL:Ja,CURRENT_USER_PROMOTED_PARTICIPANT:m,CURRENT_USER_RECEIVED_STORY_MENTION_IG:Aa,CURRENT_USER_SELF_DEMOTED:r,CURRENT_USER_SEND_AI_CONTACT_SHARE:nb,CURRENT_USER_SEND_ATTACHMENT:$,CURRENT_USER_SEND_AUDIO:v,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:Eb,CURRENT_USER_SEND_CONTACT_SHARE:lb,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:jb,CURRENT_USER_SEND_GIF:w,CURRENT_USER_SEND_IMAGE:t,CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:db,CURRENT_USER_SEND_LOCATION:fb,CURRENT_USER_SEND_LOCATION_FALLBACK:bb,CURRENT_USER_SEND_MEMORIES_SHARE:vb,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:zb,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:hb,CURRENT_USER_SEND_POST_MENTION:xb,CURRENT_USER_SEND_POST_MENTION_FALLBACK:tb,CURRENT_USER_SEND_STICKER:x,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Hb,CURRENT_USER_SEND_STORY_MENTION:qb,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:pb,CURRENT_USER_SEND_TEXT:s,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:$a,CURRENT_USER_SEND_VIDEO:u,CURRENT_USER_SENT_EVENT:ya,CURRENT_USER_SENT_POST:va,CURRENT_USER_SENT_REEL:wa,CURRENT_USER_SENT_STORY:xa,CURRENT_USER_SENT_STORY_HIGHLIGHT:Fa,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:Pa,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ra,CURRENT_USER_UNSENT_MESSAGE:ja,CURRENT_USER_VIDEO_CALLED:Na,EMPTY_SNIPPET:a,EPHEMERAL_SETTINGS_AUTO_RESET:ia,ICDC_ALERT_ADMIN_MESSAGE:sa,MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:Bb,META_AI_SEND_MESSAGE_FALLBACK:Db,PARTICIPANT_AUDIO_CALLED:Ma,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:Xa,PARTICIPANT_BUMPED_OWN_MESSAGE:Va,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Wa,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_DEMOTED_PARTICIPANT:o,PARTICIPANT_DEMOTED_YOU:l,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ra,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:ea,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:da,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:ca,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:ba,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ha,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:R,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:P,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:qa,PARTICIPANT_GOT_DEMOTED:j,PARTICIPANT_GOT_PROMOTED:i,PARTICIPANT_LIMIT_SHARING_DISABLED:Ob,PARTICIPANT_LIMIT_SHARING_ENABLED:Pb,PARTICIPANT_MISSED_AUDIO_CALL:Ia,PARTICIPANT_MISSED_VIDEO_CALL:Ka,PARTICIPANT_PROMOTED_PARTICIPANT:p,PARTICIPANT_PROMOTED_YOU:k,PARTICIPANT_REACT_MESSAGE:la,PARTICIPANT_REACT_MESSAGE_IN_GROUP:ma,PARTICIPANT_SELF_DEMOTED:q,PARTICIPANT_SEND_AI_CONTACT_SHARE:ob,PARTICIPANT_SEND_ATTACHMENT:ua,PARTICIPANT_SEND_AUDIO:C,PARTICIPANT_SEND_BUMP_MESSAGE:Fb,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:Gb,PARTICIPANT_SEND_CONTACT_SHARE:mb,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:kb,PARTICIPANT_SEND_GIF:D,PARTICIPANT_SEND_IMAGE:A,PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:eb,PARTICIPANT_SEND_LOCATION:gb,PARTICIPANT_SEND_LOCATION_FALLBACK:cb,PARTICIPANT_SEND_MEMORIES_SHARE:wb,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:Ab,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:ib,PARTICIPANT_SEND_POST_MENTION:yb,PARTICIPANT_SEND_POST_MENTION_FALLBACK:ub,PARTICIPANT_SEND_STICKER:E,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ib,PARTICIPANT_SEND_STORY_MENTION:rb,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:sb,PARTICIPANT_SEND_TEXT:y,PARTICIPANT_SEND_TEXT_IN_GROUP:z,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:ab,PARTICIPANT_SEND_VIDEO:B,PARTICIPANT_SENT_EVENT:Ea,PARTICIPANT_SENT_POST:Ba,PARTICIPANT_SENT_REEL:Ca,PARTICIPANT_SENT_STORY:Da,PARTICIPANT_SENT_STORY_HIGHLIGHT:Ga,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:Qa,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Sa,PARTICIPANT_UNSENT_MESSAGE:ka,PARTICIPANT_VIDEO_CALLED:Oa,RTC_XMA_FALLBACK:Cb,UNAVAILABLE_SNIPPET:F,UNAVAILABLE_STORY:Lb,UNKNOWN_USER_CREATED_GROUP:e,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:na,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:V,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:U,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:T,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:S,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:fa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:J,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:I,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:H,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:G,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:Z,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:Za,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:Ya,VIEW_ONCE_PHOTO_MESSAGE:Jb,VIEW_ONCE_VIDEO_MESSAGE:Kb,YOU_EPHEMERAL_RECORD_SCREEN:pa,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:aa,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:Y,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:X,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:W,YOU_EPHEMERAL_SETTING_TURNED_OFF:ga,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:N,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:M,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:L,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:K,YOU_EPHEMERAL_TAKE_SCREENSHOT:oa,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:ta});g.CURRENT_USER_CREATED_GROUP=b;g.CURRENT_USER_SEND_TEXT=s;g.CURRENT_USER_SEND_IMAGE=t;g.CURRENT_USER_SEND_VIDEO=u;g.CURRENT_USER_SEND_AUDIO=v;g.CURRENT_USER_SEND_GIF=w;g.CURRENT_USER_SEND_STICKER=x;g.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=G;g.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=Z;g.CURRENT_USER_SEND_ATTACHMENT=$;g.LOCALIZATION_TYPE=d}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:a=b[0];c=b[1];e=b[2];return{contactIds:[a],contents:[c,e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:a=b[0];c=b[1];b[2];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:e=b[0];a=b[1];c=b[2];b[3];return{contactIds:[e],contents:[a,c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWAnimatedImageThumbnailStore",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){return(a=g.get(a))!=null?a:null}function b(a,b){g.set(a,b)}f.getThumbnailSpec=a;f.setThumbnailSpec=b}),66);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof self.BigInt==="function",i=c("justknobx")._("3427")*1e3;function a(a,b){var e=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);a=d("MAWSendQplToServer").startQplUserFlow(c("qpl")._(1056840460,"718"),{bool:{has_big_int_support:h},string:{preprocess_type:a}},e,i);b&&a.addAnnotations({"int":{input_file_size:b.size},string:{mimetype:b.type}});return a}g.startMediaPreProcessQpl=a}),98);
__d("WABlobToArrayBuffer",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof a))};e.onerror=function(){var a;d((a=e.error)!=null?a:c("err")("blobToArrayBuffer got unknown error"))};e.readAsArrayBuffer(a)})}g.blobToArrayBuffer=a}),98);
__d("WABlobToImage",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c;return new(g||(g=b("Promise")))(function(b,d){c=new Image();var e=URL.createObjectURL(a),f=function(){return URL.revokeObjectURL(e)};c.onload=function(){b({image:c,releaseImageMemory:f})};c.onerror=function(){f(),d("loadBlobToImage error")};c.src=e})}f.blobToImage=a}),66);
__d("WACalculateBoundOutputSize",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b!=null?g(a.width,a.height,b.width,b.height):{outputWidth:a.width,outputHeight:a.height}}function g(a,b,c,d){var e=a,f=b;a>b?a>c&&(f*=c/e,e=c):f>d&&(e*=d/f,f=d);return{outputWidth:Math.round(Math.max(e,1)),outputHeight:Math.round(Math.max(f,1))}}f.calculateBoundOutputSize=a}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS(["decodeImage"]);c=typeof self.createImageBitmap==="function"&&typeof self.OffscreenCanvas==="function";e=c?a:b;async function a(a,b){j.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),a.name);a=await self.createImageBitmap(a);var c=a.width,e=a.height;b=d("WACalculateBoundOutputSize").calculateBoundOutputSize({width:c,height:e},b);var f=b.outputWidth;b=b.outputHeight;var g=new self.OffscreenCanvas(f,b);g=k({canvas:g,inputWidth:c,inputHeight:e,outputWidth:f,outputHeight:b,image:a});return g}async function b(a,b){j.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),a.name);a=await d("WABlobToImage").blobToImage(a);var c=a.image;a=a.releaseImageMemory;var e=c.width,f=c.height;b=d("WACalculateBoundOutputSize").calculateBoundOutputSize({width:e,height:f},b);var g=b.outputWidth;b=b.outputHeight;var h=document.createElement("canvas");h=k({canvas:h,inputWidth:e,inputHeight:f,outputWidth:g,outputHeight:b,image:c});a();return h}function k(a){var b=a.canvas,c=a.image,d=a.inputWidth,e=a.inputHeight,f=a.outputWidth;a=a.outputHeight;b.width=f;b.height=a;var g=b.getContext("2d");g.fillStyle="rgb(255,255,255)";g.fillRect(0,0,b.width,b.height);g.drawImage(c,0,0,d,e,0,0,f,a);b=g.getImageData(0,0,f,a);return b}g.canDecodeWithoutDOM=c;g.decodeImage=e;g.decodeImageWithoutDOM=a;g.decodeImageWithDOM=b}),98);
__d("WAByteArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=null,g=new(h||(h=b("Promise")))(function(a,b){f=setTimeout(function(){b(new(d("WACustomError").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])["finally"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);
__d("WAMediaWasmWorkerClient",["WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WATagsLogger","WorkerBundleResource","WorkerClient","WorkerMessagePort"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=d("WATagsLogger").TAGS(["WAMediaWasmWorkerClient"]);c=d("WorkerBundleResource").createDedicatedWebWorker(c("WAMediaWasmWorkerResource"));var x=new(d("WorkerMessagePort").WorkerSyncedMessagePort)(c,"WAMediaWasmWorker");d("WorkerClient").init(x);w.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["initiated."])));x.addMessageListener("log",function(a){var b=a.logType;a=a.message;switch(b){case"dev":w.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),a);break;case"error":w.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),a);break;default:b}});function a(a){var b=a.input;a=a.eventFlow;return A({operation:"webpCheck",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function b(a){var b=a.input;a=a.eventFlow;w.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"])));return A({operation:"mp4RepairMux",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function e(a){var b=a.imageData,c=a.quality,e=a.useHdScanConfig;a=a.eventFlow;return A({operation:"progressiveJpegEncode",input:d("WAByteArray").uint8ArrayToBuffer(b.data),height:b.height,width:b.width,quality:c,useHdScanConfig:e},a)}async function f(a){var b=a.file,c=a.quality,d=a.useHdScanConfig,e=a.eventFlow;a=a.maxOutputResolution;var f=await b.arrayBuffer();return A({operation:"progressiveJpegEncodeWithFile",input:f,fileName:b.name,fileType:b.type,quality:c,useHdScanConfig:d,maxOutputWidth:a==null?void 0:a.width,maxOutputHeight:a==null?void 0:a.height},e)}function y(a){w.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),a),x.postMessage({type:"prewarm",operation:a})}var z=function(){var a=0;return function(){return++a}}();async function A(a,b){var c=z();w.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),c);var e=await B(b);if(!e.success)return e;e=e.value;var f=e.onMessageOnce("mediaOperationResponse",function(a){return a.requestId===c}),g=a.input?[a.input]:void 0;e.postMessage(babelHelpers.extends({},a,{requestId:c,type:"mediaOperationRequest"}),g);b==null||b.addPoint("sent_request_to_media_worker_start");e=await f;a=e.output;if(a.success){w.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),c);b==null||b.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:a.value.isOpfsSyncSupported}});return d("WAResultOrError").makeResult(a.value.bytes)}w.ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),c,a.error.errorMessage);b==null||b.addPoint("sent_request_to_media_worker_fail");return d("WAResultOrError").makeError(a.error.errorType)}function B(a){a==null||a.addPoint("get_connected_worker_port_start");var b=3e4;return d("WAPromiseTimeout").promiseTimeout(x.fullyConnected,b).then(function(b){a==null||a.addPoint("get_connected_worker_port_end");return d("WAResultOrError").makeResult(b)}).catch(function(b){a==null||a.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:b instanceof d("WACustomError").TimeoutError?"timeout":"runtime-error"}});if(b instanceof d("WACustomError").TimeoutError)return d("WAResultOrError").makeError("worker-connection-timeout");w.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),b);return d("WAResultOrError").makeError("worker-connection-runtime-error")})}async function C(a){var b=a.file,c=a.maxDimension,e=a.thumbnailBlobByteSizeLimitBytes;a=a.thumbnailQualityPercentageWhenAboveByteSizeLimit;var f=z();w.LOG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),f);var g=await B();if(!g.success)return g;g=g.value;var h=g.onMessageOnce("mediaGenerateImageThumbnailResponse",function(a){return a.requestId===f}),i=await b.arrayBuffer(),j=i?[i]:void 0;g.postMessage({input:i,fileName:b.name,fileType:b.type,maxDimension:c,requestId:f,thumbnailBlobByteSizeLimitBytes:e,thumbnailQualityPercentageWhenAboveByteSizeLimit:a,type:"mediaGenerateImageThumbnailRequest"},j);g=await h;w.LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),f,g.output.success);if(g.output.success)return d("WAResultOrError").makeResult(g.output.value);w.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),f,g.output.error.errorMessage);return Promise.reject(g.output.error.errorMessage)}async function D(a,b){w.LOG(t||(t=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var c=z(),e=await B();if(!e.success)return d("WAResultOrError").makeError({errorName:"port-init",errorMessage:e.error});e=e.value;var f=e.onMessageOnce("mediaStorageShadowTestResponse",function(a){return a.requestId===c});e.postMessage({input:a,requestId:c,storageType:b,type:"mediaStorageShadowTestRequest"});e=await f;a=e.output;if(a.success){w.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),c);return d("WAResultOrError").makeResult(a.value)}w.ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),b,a.error);return d("WAResultOrError").makeError({errorName:a.error.errorName,errorMessage:a.error.errorMessage})}g.webpCheckInWorker=a;g.mp4RepairMuxInWorker=b;g.progressiveJpegEncodeInWorker=e;g.progressiveJpegEncodeInWorkerWithFile=f;g.prewarmMediaWasmWorker=y;g.getConnectedWorkerPortWithTimeout=B;g.generateImageThumbnailInWorker=C;g.runMediaStorageShadowTestWasmWorker=D}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","cometIsMimeTypeForMedia","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=12e4,p=d("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),q=85,r=["image/heic"];function b(a,b,e,f){f===!0?f={height:c("justknobx")._("187"),width:c("justknobx")._("187")}:f={height:c("justknobx")._("2144"),width:c("justknobx")._("2144")};var g;b?g=a.type==="image/webp"?Promise.resolve(a):t(a,"image/webp",b,e,f):g=a.type==="image/gif"?Promise.resolve(a):t(a,"image/jpeg",!1,e,f);e=a.type==="image/gif";return e?g.then(function(a){return Promise.all([d("MAWGetImageSpec").getImageSpec(a),a])}).then(async function(c){var e=c[0];c=c[1];return{file:c,imageSpec:e,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(c),thumbnailUrlAndSpec:null,type:s(a,b)}}):g.then(function(b){return Promise.all([w(a,c("justknobx")._("2033")),d("MAWGetImageSpec").getImageSpec(b),b])}).then(async function(c){var e=c[0],f=c[1];c=c[2];return Promise.resolve({file:c,imageSpec:f,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(c),thumbnailUrlAndSpec:e,type:s(a,b)})})}async function e(b,e){var f=a.URL.createObjectURL(b),g=e===!0?c("justknobx")._("2545"):c("justknobx")._("2033");g=await d("MAWImageUtils").urlToThumbnailSpec(f,g);var h={height:g.height,width:g.width};return{file:b,imageSpec:h,thumbnailSpec:g,type:s(b,e),url:f}}function s(a,b){return b===!0?"sticker":a.type==="image/gif"?"animated_image":"image"}async function t(a,b,c,e,f){p.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),a.name);var g=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",a);g.addAnnotations({int:{total_number_of_files:e!=null?e:1},string:{targetMimetype:b}});var j=function(){return u(a,b,q,c,f).then(function(a){return a.success?a.value:Promise.reject("runtime-error")}).catch(function(a){p.MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(a));g.addPoint("native_encode_failure",{string:{native_encode_error:a.toString()}});return null})};e=b==="image/jpeg"?await d("WAPromiseTimeout").promiseTimeout(v(a,q,g,f).then(function(a){return a.success?a.value:Promise.reject(a.error)}),o).catch(function(a){a instanceof d("WACustomError").TimeoutError?g.addPoint("mozjpeg_encode_timeout"):g.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:a.toString()}});return j()}):await j();if(e==null){g.endFail("unable_to_transcode_image");throw p.mustfixThrow("unable to transcode image")}g.endSuccess({int:{compressed_file_size:e.size}});return e}function f(b,c){b=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToThumbnail(b,c)}function u(b,c,e,f,g){p.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var h=a.URL.createObjectURL(b),i=b.name;return d("MAWImageUtils").urlToFile(h,c,e,f,g).then(function(a){a=a.blob;p.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),a.size);return d("WAResultOrError").makeResult(new File([a],i,{type:c}))})}async function v(a,b,c,e){p.DEBUG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),a.name);d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode");c.addPoint("prewarm_worker_started");var f;d("WADecodeImage").canDecodeWithoutDOM&&(f=await d("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:c,file:a,maxOutputResolution:e,quality:b,useHdScanConfig:!0}));if(f==null||!f.success&&f.error==="decode-image-error"){e=await d("WADecodeImage").decodeImageWithDOM(a,e).catch(function(a){c.addPoint("image_decode_failure");throw a});c.addPoint("image_decode_success");f=await d("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:c,imageData:e,quality:b,useHdScanConfig:!0})}if(!f.success)return f;c.addPoint("pjpeg_encode_success");p.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),f.value.byteLength);return d("WAResultOrError").makeResult(new File([f.value],a.name,{type:"image/jpeg"}))}function w(b,e){var f=async function(){var c=a.URL.createObjectURL(b),f=await d("MAWImageUtils").urlToThumbnail(c,e);a.URL.revokeObjectURL(c);return f};if(!d("WADecodeImage").canDecodeWithoutDOM)return f();var g=c("justknobx")._("2338")*1024,h=c("justknobx")._("2340");return d("WAPromiseTimeout").promiseTimeout(d("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:b,maxDimension:e,thumbnailBlobByteSizeLimitBytes:g,thumbnailQualityPercentageWhenAboveByteSizeLimit:h}).then(function(a){if(!a.success)throw p.mustfixThrow("urlToFileInWorker error: "+a.error);return{height:a.value.height,jpegThumbnail:a.value.blob,width:a.value.width}}).catch(function(a){p.catching(a).MUSTFIX(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"])));throw a}),o).catch(function(a){return f()})}function x(a){if(a==="image/gif"||a==="image/webp")return!0;return!d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)?!1:!r.includes(a)}g.imagePreprocess=b;g.optimisticImagePreprocess=e;g.getJpegThumbnailInfo=f;g.generateImageThumbnailInWorkerWithFallback=w;g.isSupportedImageFileType=x}),98);
__d("WAWebDataUrlToBlob",["err"],(function(a,b,c,d,e,f,g){var h=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function a(a){var b=a.match(h);if(!b)throw c("err")("invalid data URI");var d=b[2]?b[1]:"text/plain"+(b[3]||";charset=US-ASCII"),e=!!b[4];a=a.slice(b[0].length);e?b=atob(a):b=decodeURIComponent(a);e=new ArrayBuffer(b.length);a=new Uint8Array(e);for(e=0;e<b.length;e+=1)a[e]=b.charCodeAt(e);return new Blob([a],{type:d})}g.dataURLtoBlob=a}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="image/jpeg",j=100,k=c("justknobx")._("2338")*1024,l=c("justknobx")._("2340"),m=c("justknobx")._("2545");function n(a,d){d===void 0&&(d=!0);var e;return new(h||(h=b("Promise")))(function(b,f){e=new Image();var g=/^(?:data|blob):/.test(a);d&&!g&&e.setAttribute("crossOrigin","anonymous");e.onload=b;e.onabort=function(){f(function(){throw c("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL")})};e.onerror=function(){f(function(){throw c("FBLogger")("messenger_web").mustfixThrow("Wrong blob type")})};e.src=a}).then(function(){return e})}function o(a,c,e,f){e===void 0&&(e=!1);if(a.toBlob)return new(h||(h=b("Promise")))(function(b){var d=f==null?void 0:f/100;a.toBlob(b,c,d)}).then(function(d){var f=k,g=l/100;return e&&d.size>=f?new(h||(h=b("Promise")))(function(b){a.toBlob(b,c,g)}):d});else{var g;d("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var i=(g=d("WAWebDataUrlToBlob").dataURLtoBlob)!=null?g:window.dataURLtoBlob;return(h||(h=b("Promise"))).resolve(i(a.toDataURL(c))).then(function(d){var f=k,g=l/100;return e&&d.size>=f?(h||(h=b("Promise"))).resolve(i(a.toDataURL(c,g))):d})}}function p(a,e,f,g,i){return n(a).then(function(a){var b=a.naturalWidth,c=a.naturalHeight,h=d("WACalculateBoundOutputSize").calculateBoundOutputSize({height:c,width:b},i),j=h.outputHeight,k=h.outputWidth;h=document.createElement("canvas");h.width=k;h.height=j;var l=h.getContext("2d");g!==!0&&r(h);l.drawImage(a,0,0,b,c,0,0,k,j);return o(h,e,!1,f).then(function(a){return{blob:a,height:j,width:k}})})["catch"](function(a){return(h||(h=b("Promise"))).reject(a!=null?a:c("err")("Error loading image from URL"))})}function a(a,b){return n(a).then(function(a){var c=document.createElement("canvas"),e=a.naturalWidth,f=a.naturalHeight,g=c.getContext("2d");f=s(f,e,b);c.width=f.width;c.height=f.height;var h=c.width,j=c.height;q(c);g.drawImage(a,0,0,h,j);return o(c,i,!0).then(function(a){return d("WABlobToArrayBuffer").blobToArrayBuffer(a).then(function(a){return{height:j,jpegThumbnail:a,width:h}})})})}function e(a,b){return n(a).then(function(a){a=s(a.naturalHeight,a.naturalWidth,b);return{height:a.height,width:a.width}})}function q(a){var b=a.getContext("2d");b.fillStyle="rgb(247,247,247)";b.fillRect(0,0,a.width,a.height)}function r(a){var b=a.getContext("2d");b.fillStyle="rgb(255,255,255)";b.fillRect(0,0,a.width,a.height)}function s(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c/b,b=c):a>c&&(b*=c/a,a=c);return{height:Math.round(Math.max(a,1)),width:Math.round(Math.max(b,1))}}function f(a){return n(a).then(function(a){return{height:a.naturalHeight,width:a.naturalWidth}})}function t(a,e,f){var g=d("MAWAnimatedImageThumbnailStore").getThumbnailSpec(a);if(g)return(h||(h=b("Promise"))).resolve(g);g=p(a,"image/gif");return g==null||e==null||f==null?null:g.then(function(b){b=new File([b.blob],"gif",{type:"image/gif"});return d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(b,Math.max(f,e)).then(function(b){d("MAWAnimatedImageThumbnailStore").setThumbnailSpec(a,b);return b})})["catch"](function(a){throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF",a)})}function u(a){var c=a==null?void 0:a.file,e=a==null?void 0:a.width,f=a==null?void 0:a.height;if(c==null||e==null||f==null)return(h||(h=b("Promise"))).resolve(a);var g=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(c.type,!0);g=g.mediaType;return g!==d("MAWDbMedia").MEDIA_TYPE.GIF?(h||(h=b("Promise"))).resolve(a):d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(c,Math.max(e,f)).then(function(a){var b=new File([a.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:b,height:a.height,width:a.width}})}g.TYPE_JPEG=i;g.IMG_THUMB_MAX_EDGE=j;g.STICKER_THUMBNAIL_MAX_SIZE=m;g.canvasToBlob=o;g.urlToFile=p;g.urlToThumbnail=a;g.urlToThumbnailSpec=e;g.boundHeightWidth=s;g.urlToImageSpec=f;g.generateGIFThumbnail=t;g.generatePreviewBlobForShare=u}),98);
__d("MAWGetImageSpec",["MAWImageUtils"],(function(a,b,c,d,e,f,g){"use strict";function b(b,c){var e=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToFile(e,c!=null?c:b.type).then(function(a){var b=a.height;a=a.width;return{height:b,width:a}})}async function c(b){b=a.URL.createObjectURL(b);var c=await d("MAWImageUtils").urlToImageSpec(b);a.URL.revokeObjectURL(b);return c}g.getImageSpec_DEPRECATED=b;g.getImageSpec=c}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15418")||d("MAWMpsGating").isFullMpsEnabled()}g.isQuotedMessagesInLsEnabled=a}),98);
__d("WAHashUtils",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function b(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function c(a){return a}function e(a){return a}function f(a){return""+a.slice(0,3)}g.toPlaintextHash=a;g.toCiphertextHash=b;g.stringToPlaintextHash=c;g.toHashedPlaintextHash=e;g.sanitisePlaintextHash=f}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.author,e=a.msgId;c=d("WAJids").authorToUserId(c,b);b=(b=a.quote)==null||(b=b.content.msgContent)==null?void 0:b.content;a=(a=a.quote)==null?void 0:a.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:a!=null?a*1e3:void 0,replyMessageText:b,replySourceId:e,replyToUserId:c}}g["default"]=a}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return;if(a.isForwarded===!0&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType))return{replyToMsgId:a.msgId,replyToUserId:d("WAJids").authorToUserId(a.author,b),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null};if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var c=a.threadJid;c=d("WAJids").interpretAsUserJid(c);var e;c!=null&&(e=d("WAJids").userIdFromJid(c));return d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)?{mentionedUserId:e!=null?e:b,replyType:"FB_POST_MENTION",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null}:{mentionedUserId:e!=null?e:b,replyType:"FB_STORY_MENTION",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null}}if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType))return;c=(c=a.quote)==null?void 0:c.content;if(c==null)return;var f=c.author,g=c.expirationTs,h=c.mediaId,i=c.msgContent,j=c.msgId,k=c.plaintextHash,l=c.sourceId,m=c.ts,n=c.type;c=c.xmaMessageType;f=d("WAJids").authorToUserId(f,b);if(n===d("WAMsgType").NOTE_REPLY)return{noteContent:i==null?void 0:i.content,replyMediaExpirationTimestampMs:g!=null?d("WATimeUtils").castToMillisTime(g*1e3):void 0,replyToMsgId:a.msgId,replyToUserId:f,replyType:"LIGHTWEIGHT_STATUS"};if(n===d("MAWMsgType").MSG_TYPE.XMA&&d("MAWXMAUtils").isXMAStoryReply(c)){if(l==null)return;b=d("MAWXMAUtils").isXMAStoryProducerReply(c);return b?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:h!=null?h:void 0,storyMediaPlaintextHash:k,storyMsgType:h!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:f,storyUrl:l,timestampMs:m!=null?d("WATimeUtils").castUnixTimeToMillisTime(m):null}:{replyType:"STORY",storyMediaPlaintextHash:k,storyOwnerId:f,storyUrl:l,timestampMs:m!=null?d("WATimeUtils").castUnixTimeToMillisTime(m):null}}if(j!=null)return{isBumpMsg:a.type===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:j,replyType:"MESSAGE"}}function k(a,b,e){var f,g;f=((f=a.quote)==null?void 0:f.content.type)===d("WAMsgType").NOTE_REPLY;if(f)return c("getReplyContentForNoteReply")(a,e);f=(f=a.quote)==null?void 0:f.content;if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var h=a.author,i=a.mediaId,j=a.msgId,k=d("WAJids").authorToUserId(h,e);if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var l=a.threadJid,m;l!=null&&(m=d("WAJids").interpretAsUserJid(l));m!=null&&(k=d("WAJids").userIdFromJid(m))}i!=null&&a.plaintextHash==null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content");return{isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),isIGStoryMention:d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(a.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),isStoryHighlightShare:d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),isStoryReply:d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType),replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:i,replyPlaintextHash:(l=a.plaintextHash)!=null?l:void 0,replySenderIsMe:h===d("WAJids").AUTHOR_ME||k===e,replySourceId:j,replySourceTimestampMs:a.sortOrderMs,replyStatusType:i!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:k}}if(f==null||(f==null?void 0:f.msgId)==null&&(f==null?void 0:f.sourceId)==null)return;l=f||{};h=l.author;j=l.mediaId;a=l.msgId;i=l.plaintextHash;k=l.sourceId;var n=l.specialTextSize,o=l.ts,p=l.type;l=l.xmaMessageType;o=o!=null?o*1e3:void 0;g=f.type===d("MAWMsgType").MSG_TYPE.TEXT||d("MAWXMAUtils").isXMAExternalLinkShare(l)?(g=f.msgContent)==null?void 0:g.content:void 0;var q=d("WAJids").authorToUserId(h,e),r=f.type===d("MAWMsgType").MSG_TYPE.TEXT?f.msgContent.mentionedJids:void 0;h=h===d("WAJids").AUTHOR_ME||q===e;e=b||{};b=e.replyMediaId;var s=e.replyMediaPreviewHeight,t=e.replyMediaPreviewWidth,u=e.replyMediaUrlFallback,v=e.replyPlaintextHash;e=e.replyXMAId;if(d("MAWXMAUtils").isXMAStoryReply(l)){return{isStoryProducerReply:d("MAWXMAUtils").isXMAStoryProducerReply(l),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(l),isStoryReply:!0,replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:j,replyPlaintextHash:(f=v!=null?d("WAHashUtils").stringToPlaintextHash(v):i)!=null?f:void 0,replySenderIsMe:h,replySourceId:k,replySourceTimestampMs:o,replyStatusType:j!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:q}}i=d("MAWImageUtils").boundHeightWidth(s,t,96*.8);f=i.height;k=i.width;return{isIGXMAPostShare:d("MAWXMAUtils").isIGXMAPostShare(l),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(l),isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:p===d("MAWMsgType").MSG_TYPE.STICKER?f:s,replyMediaPreviewWidth:p===d("MAWMsgType").MSG_TYPE.STICKER?k:t,replyMediaUrlFallback:u,replyMentionedJids:r,replyMessageText:g,replyPlaintextHash:v!=null?d("WAHashUtils").stringToPlaintextHash(v):void 0,replySenderIsMe:h,replySourceId:a,replySourceTimestampMs:o,replyStatusType:n===1||n===2||n===3?d("MAWMsgType").MSG_TYPE.STICKER:p,replyToUserId:q,replyXMAId:e}}function a(a){a=a.specialTextSize;switch(a){case 1:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL);case 2:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM);case 3:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE)}}function l(a){if(c("justknobx")._("3424")&&a==="media_restore")return"EncryptedBackupsMedia";switch(a){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return void 0}}function b(a,b,e){var f,g,i=d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid());f=((f=a.isForwarded)!=null?f:!1)&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER;g=(g=a.forwardingScore)!=null?g:0;var m=d("MAWDbMsg").getCanonicalTsFromMsg(a),n=k(a,b,i),o=j(a,i),p=d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType),q=d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),r=d("MAWXMAUtils").isXMAExternalLinkShare(a.xmaMessageType),s=d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),t=d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),u=d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),v=d("MAWXMAUtils").isXMAPostPrivateReply(a.xmaMessageType),w=d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),x=a.messageExpirationTs!=null&&a.messageExpirationTs<=d("WATimeUtils").unixTime(),y=d("MAWDbMsg").getSortOrderWithFallback(a),z=a.externalId,A=l(a.source);(b==null?void 0:b.replyPlaintextHash)!==(n==null?void 0:n.replyPlaintextHash)&&c("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(b==null?void 0:b.replyPlaintextHash)==null,(n==null?void 0:n.replyPlaintextHash)==null,a.type);b=(b==null?void 0:b.replyPlaintextHash)!=null?d("WAHashUtils").stringToPlaintextHash(b==null?void 0:b.replyPlaintextHash):(b=n==null?void 0:n.replyPlaintextHash)!=null?b:void 0;switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:var B=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:a.msgContent.commands,content:B,editCount:a.editCount,ephemeralDurationInSec:(B=a.ephemeralSetting)==null?void 0:B.ephemeralExpirationInSec,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,mentionedJids:a.msgContent.mentionedJids,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,specialTextSize:a.specialTextSize,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,ephemeralDurationInSec:(B=a.ephemeralSetting)==null?void 0:B.ephemeralExpirationInSec,externalId:z,forwardingScore:g,groupId:a.groupId,groupIndex:a.groupIndex,groupSize:a.groupSize,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type,unsupportedType:a.msgContent.subtype});case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:e,ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return{_META_loaded_as_quoted_msg:e,ack:a.ack,adminContent:(B=a.msgContent)==null||(B=B.adminMsgContent)==null?void 0:B.map(function(a){return a==="Facebook User"?"0":a}),adminType:(B=a.msgContent)==null?void 0:B.adminType,adminVersion:(B=a.msgContent)==null?void 0:B.version,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,originalTs:a.originalTs,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.XMA:var C;B=(B=a.msgContent)==null?void 0:B.content;C=B!=null?d("MAWVault").isVaulted(B)?(C=a.msgContent)==null?void 0:C.content:d("MAWVault").vault(B):void 0;r&&C==null&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));B=C;return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:(r=a.msgContent)==null?void 0:r.commands,content:B,ephemeralDurationInSec:(C=a.ephemeralSetting)==null?void 0:C.ephemeralExpirationInSec,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isCollapsed:a.isCollapsed,isExpiredMsg:x,isExpiredXmaMsg:a.isExpiredXmaMsg,isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:t,isForwarded:f,isIGStoryMention:s,isMsgHighlightsTabFriendUpdatesReply:w,isPostPrivateReply:v,isStoryHighlightShare:u,isStoryReaction:q,isStoryShare:p,mentionedJids:(n=a.msgContent)==null?void 0:n.mentionedJids,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type,xmaMessageType:a.xmaMessageType});default:return c("WAAssertUnreachable")(a.type)}}g.getSpecialTextSize=a;g.convertDbMsgSourceToLSTransportKey=l;g.createBridgeMsg=b}),98);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWVault","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!0);var c=a,e=d("MAWCurrentUser").getID(),f=a.author,g=a.externalId,h=a.msgId,i=a.threadJid;if(i==null)return null;var j=c.content;c=c.sortOrderMs;i={chatJid:i,externalId:g,msg:{msgId:h,sender:d("WAJids").authorToUserId(f,e),ts:a.canonicalTs},sortOrderMs:c};g=j;return babelHelpers["extends"]({},i,{msg:babelHelpers["extends"]({},i.msg,{content:g!=null?d("MAWVault").isVaulted(g)?b?g:d("MAWVault").unvault(g):b?d("MAWVault").vault(g):g:void 0})})}b="message_content_search";c="non_message_content_search";g.createBridgeSearchMsg=a;g.MESSAGE_CONTENT_SEARCH=b;g.NON_MESSAGE_CONTENT_SEARCH=c}),98);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){c("FBLogger")("messenger_web").catching(b).mustfix("Cannot convert string to i64: %s",a)}}g.stringToI64Opt=a}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return null;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return c("LSXmaContentType").FB_FEED_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return c("LSXmaContentType").FB_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return c("LSXmaContentType").FB_STORY_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return c("LSXmaContentType").FB_STORY_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return c("LSXmaContentType").FB_FEED_VIDEO_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return c("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return c("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return c("LSXmaContentType").FB_EVENT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return c("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return c("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return c("LSXmaContentType").FB_SHORT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return c("LSXmaContentType").MSG_LOCATION_SHARING;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return c("LSXmaContentType").MSG_LOCATION_SHARING_V2;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return c("LSXmaContentType").FB_POST_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return c("LSXmaContentType").MSG_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return c("LSXmaContentType").MSG_AI_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return c("LSXmaContentType").MSG_MEMORIES_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return c("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return c("LSXmaContentType").RTC_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return c("LSXmaContentType").RTC_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return c("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return c("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return c("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}g.convertExtendedContentTypeToLSXmaContentType=a}),98);
__d("MNLSXMALayoutType",[],(function(a,b,c,d,e,f){a=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28});f["default"]=a}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21});f["default"]=a}),66);
__d("MessagingAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});f["default"]=a}),66);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Random","ReQL","WAArmadilloXMA.pb","WAJids","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a,b,c,e,f,g){var i=b.ctas,j=b.defaultCTA,m=k(b.targetId,b.targetType),q=(h||(h=d("I64"))).of_int32(d("Random").uint32());if(j!=null){var r=n(j,q,e,c,f,m,b.targetType);await p(a,r,q,g.defaultCta)}r=d("MAWXMAUtils").isFBXMAPostMention(b.targetType)&&b.author===d("WAJids").AUTHOR_ME;b=[];i!=null&&!r&&(b=await Promise.all(i.map(function(b,d){var h=l(q,d);b=o(b,h,e,c,f,m);d=d===0?g.attachmentCta1:d===1?g.attachmentCta2:d===2?g.attachmentCta3:void 0;return p(a,b,h,d)})));return{attachmentCta1Id:b.length>0?b[0]:void 0,attachmentCta2Id:b.length>1?b[1]:void 0,attachmentCta3Id:b.length>2?b[2]:void 0,defaultCtaId:j==null?void 0:q}}function j(a){var b="xma_web_url";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b="xma_rtc_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b="xma_rtc_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b="xma_rtc_missed_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b="xma_rtc_missed_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:b="igd_web_post_share";break}return b}function k(a,b){return d("MAWXMAUtils").isFBXMAPostMention(b)?void 0:a!=null?d("MAWBridgeUIEventDataValidation").stringToI64Opt(a):void 0}function l(a,b){return(h||(h=d("I64"))).add(a,h.of_int32(b+1))}function m(a,b,c,e,f,g,i){i===void 0&&(i="xma_web_url");var j=a.actionUrl,k=a.nativeUrl;return{actionContentBlob:void 0,actionUrl:j!=null?j:k,attachmentFbid:f,attachmentIndex:(h||(h=d("I64"))).zero,ctaId:b,enableExtensions:!1,extensionHeightType:void 0,messageId:c,nativeUrl:k!=null?k:j,platformToken:void 0,targetId:g!=null?g:void 0,threadKey:e,title:(f=a.title)!=null?f:"Tap to view status update",type_:i!=null?i:"xma_web_url",urlWebviewType:void 0}}function n(a,b,c,d,e,f,g){g=j(g);return m(a,b,c,d,e,f,g)}function o(a,b,c,d,e,f){var g;switch(a.ctaType){case"contact_sharing_profile":g="contact_sharing_profile";break;case"contact_sharing_message":g="contact_sharing_message";break}return m(a,b,c,d,e,f,g)}async function p(a,b,c,d){d!=null?await a.attachment_ctas.upsert([d.ctaId],b):await a.attachment_ctas.add(b);return c}async function b(a,b,c){var e=null,f={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};e=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,c));e!=null&&(f.defaultCta=await q(a,e.defaultCtaId),f.attachmentCta1=await q(a,e.attachmentCta1Id),f.attachmentCta2=await q(a,e.attachmentCta2Id),f.attachmentCta3=await q(a,e.attachmentCta3Id));return[e,f]}function q(a,b){return b==null?Promise.resolve(void 0):(a=d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachment_ctas).getKeyRange(b)))!=null?a:void 0}function e(a,b,e,f,g,j,k,l,m){var n,o,p,q=(h||(h=d("I64"))).zero,w=r(a),x=d("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(a.targetType);x=x?(h||(h=d("I64"))).of_int32(x):void 0;n=(n=a==null||(o=a.defaultCTA)==null?void 0:o.actionUrl)!=null?n:a==null||(p=a.defaultCTA)==null?void 0:p.nativeUrl;a.defaultPreviewMediaId!=null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+a.targetType+"."+(a.defaultPreviewMediaPlaintextHash!=null?"true":"false"));m=c("gkx")("11351")||d("MAWMpsGating").isFullMpsEnabled();return{accessibilitySummaryText:void 0,actionUrl:n!=null?n:void 0,attachmentCta1Id:g,attachmentCta2Id:j,attachmentCta3Id:k,attachmentFbid:e,attachmentIndex:h.zero,attachmentLoggingType:void 0,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:h.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:t(a.ctas,1),cta1Type:s(a.ctas,1),cta2Title:t(a.ctas,2),cta2Type:s(a.ctas,2),cta3Title:t(a.ctas,3),cta3Type:s(a.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:l,defaultCtaTitle:(n=a.defaultCTA)==null?void 0:n.title,defaultCtaType:w.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:a.filesize!=null?(h||(h=d("I64"))).of_int32(a.filesize):void 0,gatingTitle:a.overlayTitle,gatingType:a.overlayIconGlyph!=null?String(a.overlayIconGlyph):void 0,hasMedia:a.hasMedia!=null?a.hasMedia:!1,hasXma:!0,hasXmaFavicon:m?a.faviconPlaintextHash!=null:a.faviconMediaId!=null,hasXmaHeaderImage:m?a.headerMediaPlaintextHash!=null:a.headerMediaId!=null,hasXmaPreview:m?a.defaultPreviewMediaPlaintextHash!=null:a.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:a.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines!=null?(h||(h=d("I64"))).of_int32(a.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:a.maxTitleNumOfLines!=null?(h||(h=d("I64"))).of_int32(a.maxTitleNumOfLines):void 0,messageId:f,miniPreview:void 0,offlineAttachmentId:(g=a.offlineAttachmentId)!=null?g:e,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:w.height,previewHeightLarge:a.previewHeightLarge!=null?(h||(h=d("I64"))).of_int32(a.previewHeightLarge):void 0,previewImageDecorationType:v(a.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:w.width,previewWidthLarge:a.previewWidthLarge!=null?(h||(h=d("I64"))).of_int32(a.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:a.subtitleText,targetId:void 0,threadKey:b,timestampMs:q,titleText:a.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:x,xmaDataclass:a.xmaDataclass,xmaFaviconFbid:m?a.faviconPlaintextHash:c("gkx")("8162")?(j=a.faviconPlaintextHash)!=null?j:(k=a.faviconMediaId)==null?void 0:k.toString():(l=a.faviconMediaId)==null?void 0:l.toString(),xmaHeaderImageFbid:m?a.headerMediaPlaintextHash:c("gkx")("8162")?(n=a.headerMediaPlaintextHash)!=null?n:(f=a.headerMediaId)==null?void 0:f.toString():(g=a.headerMediaId)==null?void 0:g.toString(),xmaLayoutType:a.xmaLayoutType!=null?u(a.xmaLayoutType):void 0,xmaPreviewFbid:m?a.defaultPreviewMediaPlaintextHash:c("gkx")("8162")?(e=a.defaultPreviewMediaPlaintextHash)!=null?e:(w=a.defaultPreviewMediaId)==null?void 0:w.toString():(b=a.defaultPreviewMediaId)==null?void 0:b.toString(),xmasTemplateType:a.xmaLayoutType!=null?u(a.xmaLayoutType):void 0}}function r(a){var b;switch(a.targetType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:b={height:(h||(h=d("I64"))).of_int32(108),width:(h||(h=d("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:b={xmaContentType:"xma_rtc_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:b={xmaContentType:"xma_rtc_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_group_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_group_video"};break;default:b={height:a.previewHeight!=null?(h||(h=d("I64"))).of_int32(a.previewHeight):void 0,width:a.previewWidth!=null?(h||(h=d("I64"))).of_int32(a.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return b}function s(a,b){if(a==null)return;a=a[b-1];if(a==null)return;b=a.buttonType;a=a.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return b===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}function t(a,b){if(a==null)return;a=a[b-1];if(a!=null)return a.title}function u(a){return a===0||a!==3?(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SINGLE):(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)}function v(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").COLLAGE);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").REEL);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}}g.addAttachmentCtas=a;g.maybeBridgeToLSTargetId=k;g.getCtaIdFromDefaultCtaId=l;g.composeDefaultAttachmentCta=n;g.composeAttachmentCta=o;g.getExistingAttachmentAndAttachmentCtas=b;g.composeAttachmentXMA=e}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){if(a==null)return void 0;switch(a){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function a(a,b,c){var e,f,g,j,k=b.author,l=b.contentRef,m=b.ctas,n=b.defaultCTA,o=b.defaultPreviewMediaId,p=b.defaultPreviewMediaPlaintextHash,q=b.faviconMediaId,r=b.faviconPlaintextHash,s=b.headerMediaId,t=b.headerMediaPlaintextHash,u=b.headerTitle,v=b.maxSubtitleNumOfLines,w=b.maxTitleNumOfLines,x=b.msgId,y=b.offlineAttachmentId,z=b.overlayIconGlyph,A=b.overlayTitle,B=b.subtitleText,C=b.targetId,D=b.targetType,E=b.targetUsername,F=b.threadJid,G=b.titleText,H=b.xmaDataclass,I=b.xmaId;b=b.xmaLayoutType;a!=null&&a.mediaType!==d("MAWDbMedia").IMAGE&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),a.mediaType);C!=null&&d("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(C,D);var J=c.hasMedia,K=c.hasXmaFaviconMedia;c=c.hasXmaHeaderMedia;return{author:k,contentRef:l,ctas:m==null?void 0:m.filter(function(a){return a.ctaType!=null}),defaultCTA:n,defaultPreviewMediaId:o,defaultPreviewMediaPlaintextHash:p,duration:null,faviconMediaId:q,faviconPlaintextHash:r,filesize:a==null?void 0:a.size,hasMedia:J,hasXmaFaviconMedia:K,hasXmaHeaderMedia:c,headerMediaId:s,headerMediaPlaintextHash:t,headerTitle:u,maxSubtitleNumOfLines:v,maxTitleNumOfLines:w,mediaType:a==null?void 0:a.mediaType,msgId:x,offlineAttachmentId:y,overlayIconGlyph:z,overlayTitle:A,playableUrlMimeType:i(a==null?void 0:a.mediaType),previewHeight:a==null||(e=a.validatedImageInfo)==null?void 0:e.jpegThumbnailHeight,previewHeightLarge:a==null||(f=a.validatedImageInfo)==null?void 0:f.height,previewUrlMimeType:i(a==null?void 0:a.mediaType),previewWidth:a==null||(g=a.validatedImageInfo)==null?void 0:g.jpegThumbnailWidth,previewWidthLarge:a==null||(j=a.validatedImageInfo)==null?void 0:j.width,subtitleText:B,targetId:C,targetType:D,targetUsername:E,threadJid:F,titleText:G,ts:a==null?void 0:a.ts,xmaDataclass:H,xmaId:I,xmaLayoutType:b}}function b(a,b){var c=a.msgId;a=a.threadJid;return{msgId:c,threadJid:a,xmaId:b}}function c(a,b){var c=a.msgId;a=a.threadJid;return{msgId:c,threadJid:a,xmaId:b}}g.mediaTypeToMimeType=i;g.createBridgeXMA=a;g.createBridgeXMAShareExpired=b;g.createBridgeXMAShareTombstoned=c}),98);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";e={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0};var h={messageComposerDrafts:e,snippets:e},i=null,j=function(a,b,e){var f="maw_cache_service";b=new(d("WormEAR").WormEAR)(e,f,b);a=new(d("WormIDbDriver").WormIDbDriver)(a,f,e,b,d("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:l});return new(d("Worm").WormDatabase)(a,c("qpl")._(1056840657,"2716"))};function k(){if(i!==null)return i;i=new Promise(async function(a,b){try{var e=j(d("MAWIndexedDbMetadata").MAWcacheServiceDbName(d("MAWCurrentUser").getID()),d("WAHex").parseHex(c("MessengerWebInitData").accountKeyV2),h);await e.init();a(e)}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),i=null,b(a)}});return i}function l(a){if(a instanceof d("WormEAR").DecryptionError){var b=a;c("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",b.store);c("promiseDone")(k().then(function(a){return a.runInTransaction([b.store],"readwrite",function(a){return a.stores[b.store].clear()},"delete-corrupted-entity")}).then(function(){c("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",b.store)}).catch(function(a){c("FBLogger")("MAWCacheService").catching(a).mustfix("Failed to delete corrupted store %s, err: %s",b.store,a.message)}))}}function a(a){return a.map(function(a){a[0];a=a[1];return a})}async function b(){var a=await k();return a.dump({snippets:{customFields:{id:d("WormDump").wormNonSensitiveField,key:d("WormDump").wormNonSensitiveField,timestamp:d("WormDump").wormNonSensitiveField,value:function(a){var b;return{snippet:(b=d("WormDump")).wormRedact(a.snippet),snippetMsgAckLevel:b.wormNonSensitiveField(a.snippetMsgAckLevel),snippetMsgId:b.wormNonSensitiveField(a.snippetMsgId),snippetNewestIncomingMsgs:b.wormNonSensitiveField(a.snippetNewestIncomingMsgs),snippetReactionId:b.wormRedact(a.snippetReactionId)}}}}})}g.getOrSetupMAWCacheDB=k;g.convertCacheValueToDBRawValue=a;g.getDbDump=b}),98);
__d("MAWCacheServiceQPL",["ExecutionEnvironment","MAWCurrentUser","MAWQplProxy","QPLUserFlow","performanceAbsoluteNow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set(),k=new Set(),l=3e3,m=c("qpl")._(1056836703,"2955");function a(a,b){var e=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(e){if(k.has(a))return;o(a);d("MAWQplProxy").startQplUserFlow(m,{},{callBridgeWithTimestamp:!0,providedInstanceKey:a})}else{if(j.has(a))return;n(a);c("QPLUserFlow").start(m,{annotations:{string:{service:b}},instanceKey:a})}}function n(a){j.add(a)}function o(a){k.add(a)}function b(a,b,e){var f=q(e),g=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(g){if(!k.has(a))return;d("MAWQplProxy").sendQplPointThroughBridge(m,"worker@"+f+b,{instanceKey:a},!0)}else{if(!j.has(a))return;var n=(i||(i=c("performanceAbsoluteNow")))();e==="realtime-update"?window.setTimeout(function(){c("QPLUserFlow").addPoint(m,"ui@"+b,{instanceKey:a,timestamp:n})},l):c("QPLUserFlow").addPoint(m,"ui@"+b,{instanceKey:a})}}function e(a,b){var e=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(e){if(!k.has(a))return;d("MAWQplProxy").sendQPLAnnotationsThroughBridge(m,b,a)}else{if(!j.has(a))return;c("QPLUserFlow").addAnnotations(m,b,{instanceKey:a})}}function f(a){var b=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(b){if(!k.has(a))return;k["delete"](a);d("MAWQplProxy").sendQPLSuccessThroughBridge(m,{},a,!0)}else{if(!j.has(a))return;var e=(i||(i=c("performanceAbsoluteNow")))();window.setTimeout(function(){j["delete"](a),c("QPLUserFlow").endSuccess(m,{instanceKey:a,timestamp:e})},l)}}function p(a,b,e){e=q(e);var f=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(f){if(!k.has(a))return;d("MAWQplProxy").sendQPLFailThroughBridge(m,"worker@"+e+b,{},a,!0)}else{if(!j.has(a))return;var g=(i||(i=c("performanceAbsoluteNow")))();window.setTimeout(function(){j["delete"](a),c("QPLUserFlow").endFailure(m,"ui@"+b,{instanceKey:a,timestamp:g})},l);j["delete"](a)}}function q(a){return a?a.replace(/-/g,"_")+"_":""}function r(a){return d("MAWCurrentUser").isEmployee()||d("MAWCurrentUser").isTestUser()?a:void 0}e={addAnnotationsQPL:e,addPointQPL:b,endFailureQPL:p,endSuccessQPL:f,redactKeysForNonEmployee:r,registerInstanceKeyInUI:n,registerInstanceKeyInWorker:o,startQPL:a};g["default"]=e}),98);
__d("MAWCacheServiceUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="maw_cache_service_broadcast",i=typeof window!=="undefined"?window:self;d=function(){if(!i.BroadcastChannel){c("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser");return null}return new i.BroadcastChannel(h)};e={concurrency:1,maxConcurrency:1,maxThrottleMs:500};function a(a){return"maw-cache-service-"+a}function b(a,b){var c=new Set(),d=[];a.forEach(function(a){var e=b(a);if(c.has(e)){d.push(a);return}c.add(e)});return d}g.MAW_CACHE_SERVICE_BROADCAST_CHANNEL=h;g.globalScope=i;g.getMAWCacheServiceBroadcastChannel=d;g.SCHEDULER_CONFIG=e;g.getSchedulerName=a;g.findDuplicates=b}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}function b(a){return(h||(h=d("I64"))).of_float(a)}function c(a){return(h||(h=d("I64"))).to_float(a)}g.unsafeCoerceToEditMsgHistoryId=a;g.convertToEditMsgHistoryId64=b;g.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a,b){a=(a+b).split("");return Math.abs(a.reduce(function(a,b){b=b.charCodeAt(0);a=(a<<5)-a+b;a&=a;return a},0))}f.convertStringToOptionHash=a;f.convertOptionHashToString=b;f.generateStableIdFromOptionHash=c}),66);
__d("MAWDbXMA",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}function b(a){return a}function c(a){return(h||(h=d("I64"))).to_float(a)}g.convertNumbersToXMAIds=a;g.convertNumberToXMAId=b;g.convertXMAId64ToXMAId=c}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15740")}g.isFbProfileDirectoryItemXmaEnabled=a}),98);
__d("MAWIsLiveLocationXmaEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("3758")===!0}g.isLiveLocationXmaEnabled=a}),98);
__d("MAWJobDefinitions",["MAWExternalId","MWPBumpEntityKey","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";var h=["s2sInstanceKey","s2sUserFlowQPLEvent"],i=["scheduleConfig"];function a(a){return a}function b(a){return a}f={acceptGroupInvite:function(a,b,c,d,e,f){f=k(f);return{args:{chatJid:a,inviteCode:d,invitedParticipantUserId:c,inviteExpirationTs:e,inviterUserId:b},scheduleConfig:f!=null?f:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(a,b,c,d){d=k(d);return{args:{group:a,s2sInstanceKey:c,users:b},scheduleConfig:d!=null?d:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(a,b){b=k(b);return{args:{msgIds:a},scheduleConfig:b!=null?b:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(a,b,c,d,e,f,g,h){f=k(h);return{args:{downloadType:e,hash:b,metricInstanceKeys:g,msgType:d,protocolMsgId:a,qplEntryPoint:c},scheduleConfig:f!=null?f:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(a,b,c,e,f,g,i){i=k(i);c=c!=null?c:{};var j=c.s2sInstanceKey;c.s2sUserFlowQPLEvent;c=babelHelpers.objectWithoutPropertiesLoose(c,h);return{args:{args:c,chatJid:a,ephemeralSetting:e,externalId:f!=null?f:d("MAWExternalId").generateExternalId(),isFirstMsg:g,protocolMsgId:b,s2sInstanceKey:j},scheduleConfig:i!=null?i:void 0,type:"forwardMsg"}},getSpams:function(a){a=k(a);return{args:void 0,scheduleConfig:a!=null?a:void 0,type:"getSpams"}},handleFutureproofMsg:function(a){a=k(a);return{args:{},scheduleConfig:a!=null?a:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(a){a=k(a);return{args:void 0,scheduleConfig:a!=null?a:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(a,b){var c=a.chatJid,d=a.context,e=a.frxParams,f=a.frxTags,g=a.msgs,h=a.reportedMessageId,i=a.spamFlow;a=a.userJid;b=k(b);return{args:{chatJid:c,context:d,frxParams:e,frxTags:f,msgs:g,reportedMessageId:h,spamFlow:i,userJid:a},scheduleConfig:b!=null?b:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(a,b){var c=a.actorID;a=a.taskID;b=k(b);return{args:{actorID:c,taskID:a},scheduleConfig:b!=null?b:void 0,type:"igdSendMsg"}},leaveGroups:function(a,b){b=k(b);return{args:{groups:a},scheduleConfig:b!=null?b:void 0,type:"leaveGroups"}},markThreadAsRead:function(a,b,c,d,e,f){f=k(f);return{args:{chatJid:a,isBlocked:c,isReadReceiptsDisabled:e,isRestricted:d,relationship:b},scheduleConfig:f!=null?f:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(a,b,c,d,e,f,g,h,i,j){i=k(i);return{args:{chatJid:c,context:f,frxParams:g,frxTags:e,isIgd:d,openMsgs:j,reportedMessageId:h,spamFlow:b,userJid:a},scheduleConfig:i!=null?i:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(a,b){b=k(b);return{args:{appDataExternalId:a},scheduleConfig:b!=null?b:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(a,b,c,d,e,f,g,h,i,j,l,m,n,o,p){n=k(n);return{args:{deanonApiPayload:o,hasMoreAfter:e,hasMoreBefore:d,instanceKey:j,isMediaGalleryRestore:p,isPointQuery:f,messages:c,minMsgId:g,optimisticMsgs:l,startSortKey:i,taskSource:m,threadId:b,traceId:h,transportKey:a},scheduleConfig:n!=null?n:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(a,b,c,d,e,f,g,h,i,j,l,m,n,o,p,q){m=k(m);return{args:{chatJid:q,deanonApiPayload:o,echoMessages:a,hasMoreAfter:f,hasMoreBefore:e,instanceKey:l,isMediaGalleryRestore:p,isPointQuery:g,messages:d,minMsgId:h,referenceTimestamp:j,requestId:i,taskSource:n,threadId:c,transportKey:b},scheduleConfig:m!=null?m:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(a,b){b=k(b);return{args:a,scheduleConfig:b!=null?b:void 0,type:"revokeMsgs"}},sendAppData:function(a,b,c){c=k(c);return{args:{args:a,externalId:b!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:c!=null?c:void 0,type:"sendAppData"}},sendBumpMsg:function(a,b,c,e){e=k(e);return{args:{args:b,chatJid:a,externalId:c!=null?c:d("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(a,b,c){c=k(c);return{args:{args:a,externalId:b!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:c!=null?c:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x){s=k(s);return{args:{args:{duration:j,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:i,jpegThumbnailWidth:h,mediaGroupMetadata:x,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:c,source:t,width:f},attachmentType:w,chatJid:a,externalId:r!=null?r:d("MAWExternalId").generateExternalId(),file:b},scheduleConfig:s!=null?s:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y){s=k(s);return{args:{args:{duration:j,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:i,jpegThumbnailWidth:h,mediaGroupMetadata:y,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:w,source:t,width:f},attachmentType:x,chatJid:a,externalId:r!=null?r:d("MAWExternalId").generateExternalId(),mimeType:b,plaintext:c},scheduleConfig:s!=null?s:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(a,b){b=k(b);return{args:{appDataExternalId:a},scheduleConfig:b!=null?b:void 0,type:"sendWrittenAppData"}},sendXMAShareMsg:function(a,b,c,e,f,g,h,i,j,l){g.xmaMessageType===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH&&j.contentRef==null&&d("MWPBumpEntityKey").bumpEntityKey("maw.sendXMAShareMsg","content_ref_null_for_rf_xma");l=k(l);return{args:{args:g,associatedMsgContent:f,associatedMsgContentExternalId:i!=null?i:d("MAWExternalId").generateExternalId(),chatJid:a,faviconFile:e,headerFile:c,previewFile:b,xmaArgs:j,xmaMsgExternalId:h!=null?h:d("MAWExternalId").generateExternalId()},scheduleConfig:l!=null?l:void 0,type:"sendXMAShareMsg"}},setGroupMemberAddMode:function(a,b,c){c=k(c);return{args:{groupJid:a,memberAddMode:b},scheduleConfig:c!=null?c:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(a,b,c){c=k(c);return{args:{group:a,subject:b},scheduleConfig:c!=null?c:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(a,b){b=k(b);return{args:{qplInstanceKey:a},scheduleConfig:b!=null?b:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(a,b,c,d){d=k(d);return{args:{backupEntFbid:b,deliveryObjectId:a,traceId:c},scheduleConfig:d!=null?d:void 0,type:"updateBackupEntFbidForMedia"}}};function c(a,b){return j(a,b)}function j(a,b){var c=b.scheduleConfig,e=babelHelpers.objectWithoutPropertiesLoose(b,i);c={args:{},scheduleConfig:c,type:a};b.externalIdJob&&(c.args.externalId=d("MAWExternalId").generateExternalId());c.args=babelHelpers["extends"]({},c.args,e);b.uniqueJob&&(c.uniqKey=a);return c}function k(a){if(a==null)return;return{jobId:a.jobId,maxTimeoutMs:a.maxTimeoutMs,priority:a.priority}}function e(a){return{otid:a.toplevelProtobuf.messageId,supplementalProtobufs:new Map(a.supplementalProtobufs.entries().map(function(a){var b=a[0];a=a[1];return[b,{decryptedProtobuf:a.payload,protobufTimestampMS:a.timestampMs}]})),tags:a.tags,toplevelProtobuf:{decryptedProtobuf:a.toplevelProtobuf.payload,protobufTimestampMS:a.toplevelProtobuf.timestampMs}}}g.toThreadJidPrimaryId=a;g.toEncodedEchoMessage=b;g.jobSerializers=f;g.createStartJobInfo=c;g.createStartJobInfoGeneric=j;g.serializeJobScheduledConfig=k;g.mpsMessageToEncryptedBackupsMessage=e}),98);
__d("MAWMainTraceUtils",["I64","LSRequestId"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("LSRequestId").generate()}async function b(a,b,c,e,f,g,i){await a.data_trace_meta.add({contextOne:f,contextThree:i,contextTwo:g,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:b,predefinedId:void 0,shouldFlush:!1,traceId:c,traceType:e})}g.createTraceId=a;g.startTraceWithTxn=b}),98);
__d("MAWMediaManagerUiIntegrationCheck",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a;return(a=c("qex")._("4221"))!=null?a:!1}g.getIsMediaManagerUiIntegrationEnabled=a}),98);
__d("MAWMessageDropError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="MAWMessageDropError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.MAWMessageDropError=a}),66);
__d("MAWMessageParseError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="MAWMessageParseError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.MAWMessageParseError=a}),66);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,c,e,f,g){if(a===d("MAWMsgType").MSG_TYPE.TEXT)if(b)return(i||(i=d("LSIntEnum"))).ofNumber(8192);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.IMAGE||a===d("MAWMsgType").MSG_TYPE.VIDEO||a===d("MAWMsgType").MSG_TYPE.RAVEN)return(i||(i=d("LSIntEnum"))).ofNumber(2);else if(a===d("MAWMsgType").MSG_TYPE.PTT)return(i||(i=d("LSIntEnum"))).ofNumber(4);else if(a===d("MAWMsgType").MSG_TYPE.FUTUREPROOF)return k(f);else if(a===d("MAWMsgType").MSG_TYPE.CIPHERTEXT)return(i||(i=d("LSIntEnum"))).ofNumber(65536);else if(a===d("MAWMsgType").MSG_TYPE.UNAVAILABLE)return(i||(i=d("LSIntEnum"))).ofNumber(262144);else if(a===d("MAWMsgType").MSG_TYPE.GIF)return(i||(i=d("LSIntEnum"))).ofNumber(16384);else if(a===d("MAWMsgType").MSG_TYPE.STICKER)return(i||(i=d("LSIntEnum"))).ofNumber(4096);else if(a===d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE)return(i||(i=d("LSIntEnum"))).ofNumber(64);else if(a===d("MAWMsgType").MSG_TYPE.XMA)if(c!=null&&c)return(i||(i=d("LSIntEnum"))).ofNumber(256);else return g===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(i||(i=d("LSIntEnum"))).ofNumber(536870912):(i||(i=d("LSIntEnum"))).ofNumber(1024);else if(a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE)if(!e)return(i||(i=d("LSIntEnum"))).ofNumber(33554432);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH)return(i||(i=d("LSIntEnum"))).ofNumber(134217728);else return(i||(i=d("LSIntEnum"))).ofNumber(1)}function k(a){switch(a){case"liveLocationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(i||(i=d("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(i||(i=d("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(i||(i=d("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(i||(i=d("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(i||(i=d("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(i||(i=d("LSIntEnum"))).ofNumber(17179869184);default:return(i||(i=d("LSIntEnum"))).ofNumber(131072)}}function e(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function f(a,b){var e=a.replyAttachmentType;if(e==null)return!1;b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);return b&&a.replyAttachmentId==null?!1:(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO))}function l(a){return(j||(j=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function m(a){return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a.displayedContentTypes)}function n(a){a=a.displayedContentTypes;if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(32)))return!0;else return!1}function o(a){return(j||(j=d("I64"))).lt(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))}function p(a){a=a.displayedContentTypes;return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1024),a)||d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a)}function q(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(65536))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(131072))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(524288))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4294967296))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1048576))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2097152))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4194304))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2147483648))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8388608))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16777216))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1073741824))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8589934592))?!0:(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(262144))}var r=(b=b("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),s=b({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),t=b({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2});b=b({IMAGE:0,VIDEO:1});g.text=(h=d("MAWMsgType")).MSG_TYPE.TEXT;g.image=h.MSG_TYPE.IMAGE;g.video=h.MSG_TYPE.VIDEO;g.ptt=h.MSG_TYPE.PTT;g.unsent=h.MSG_TYPE.REVOKED;g.gif=h.MSG_TYPE.GIF;g.bumpExistingMessage=h.MSG_TYPE.BUMP_EXISTING_MESSAGE;g.getDisplayedContentTypes=a;g.isMediaMsg=e;g.isMediaReplyAttachmentType=f;g.isReceiverFetchMsg=l;g.isReceiverFetchXMAMsg=m;g.isAdminMsg=n;g.isOptimistic=o;g.isXMAMsg=p;g.isPlaceholder=q;g.MAWRavenActionNotifType=r;g.MAWRavenMsgEphemeralMediaState=s;g.MAWRavenMsgEphemeralType=t;g.MAWRavenMsgMediaType=b}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};e.name="ConsumerApplication";e.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,h.TYPES.MESSAGE,j]};f.name="ConsumerApplication$Payload";f.internalSpec={content:[1,h.TYPES.MESSAGE,m],applicationData:[2,h.TYPES.MESSAGE,l],signal:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,i],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};i.name="ConsumerApplication$SubProtocolPayload";i.internalSpec={futureProof:[1,h.TYPES.ENUM,(d=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};j.name="ConsumerApplication$Metadata";j.internalSpec={specialTextSize:[1,h.TYPES.ENUM,a]};k.name="ConsumerApplication$Signal";k.internalSpec={};l.name="ConsumerApplication$ApplicationData";l.internalSpec={revoke:[1,h.TYPES.MESSAGE,v],__oneofs__:{applicationContent:["revoke"]}};m.name="ConsumerApplication$Content";m.internalSpec={messageText:[1,h.TYPES.MESSAGE,d.MessageTextSpec],imageMessage:[2,h.TYPES.MESSAGE,I],contactMessage:[3,h.TYPES.MESSAGE,A],locationMessage:[4,h.TYPES.MESSAGE,D],extendedTextMessage:[5,h.TYPES.MESSAGE,C],statusTextMessage:[6,h.TYPES.MESSAGE,B],documentMessage:[7,h.TYPES.MESSAGE,F],audioMessage:[8,h.TYPES.MESSAGE,H],videoMessage:[9,h.TYPES.MESSAGE,G],contactsArrayMessage:[10,h.TYPES.MESSAGE,z],liveLocationMessage:[11,h.TYPES.MESSAGE,y],stickerMessage:[12,h.TYPES.MESSAGE,E],groupInviteMessage:[13,h.TYPES.MESSAGE,x],viewOnceMessage:[14,h.TYPES.MESSAGE,w],reactionMessage:[16,h.TYPES.MESSAGE,u],pollCreationMessage:[17,h.TYPES.MESSAGE,s],pollUpdateMessage:[18,h.TYPES.MESSAGE,r],editMessage:[19,h.TYPES.MESSAGE,n],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}};n.name="ConsumerApplication$EditMessage";n.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageTextSpec],timestampMs:[3,h.TYPES.INT64]};o.name="ConsumerApplication$PollAddOptionMessage";o.internalSpec={pollOption:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};p.name="ConsumerApplication$PollVoteMessage";p.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES],senderTimestampMs:[2,h.TYPES.INT64]};q.name="ConsumerApplication$PollEncValue";q.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};r.name="ConsumerApplication$PollUpdateMessage";r.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,d.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,q],addOption:[3,h.TYPES.MESSAGE,q]};s.name="ConsumerApplication$PollCreationMessage";s.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],selectableOptionsCount:[4,h.TYPES.UINT32]};t.name="ConsumerApplication$Option";t.internalSpec={optionName:[1,h.TYPES.STRING]};u.name="ConsumerApplication$ReactionMessage";u.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],reactionMetadataDataclassData:[5,h.TYPES.STRING],style:[6,h.TYPES.INT32]};v.name="ConsumerApplication$RevokeMessage";v.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec]};w.name="ConsumerApplication$ViewOnceMessage";w.internalSpec={imageMessage:[1,h.TYPES.MESSAGE,I],videoMessage:[2,h.TYPES.MESSAGE,G],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}};x.name="ConsumerApplication$GroupInviteMessage";x.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.MESSAGE,d.MessageTextSpec]};y.name="ConsumerApplication$LiveLocationMessage";y.internalSpec={location:[1,h.TYPES.MESSAGE,L],accuracyInMeters:[2,h.TYPES.UINT32],speedInMps:[3,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,h.TYPES.UINT32],caption:[5,h.TYPES.MESSAGE,d.MessageTextSpec],sequenceNumber:[6,h.TYPES.INT64],timeOffset:[7,h.TYPES.UINT32]};z.name="ConsumerApplication$ContactsArrayMessage";z.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};A.name="ConsumerApplication$ContactMessage";A.internalSpec={contact:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};B.name="ConsumerApplication$StatusTextMesage";B.internalSpec={text:[1,h.TYPES.MESSAGE,C],textArgb:[6,h.TYPES.FIXED32],backgroundArgb:[7,h.TYPES.FIXED32],font:[8,h.TYPES.ENUM,b]};C.name="ConsumerApplication$ExtendedTextMessage";C.internalSpec={text:[1,h.TYPES.MESSAGE,d.MessageTextSpec],matchedText:[2,h.TYPES.STRING],canonicalUrl:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],title:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],previewType:[7,h.TYPES.ENUM,c]};D.name="ConsumerApplication$LocationMessage";D.internalSpec={location:[1,h.TYPES.MESSAGE,L],address:[2,h.TYPES.STRING]};E.name="ConsumerApplication$StickerMessage";E.internalSpec={sticker:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};F.name="ConsumerApplication$DocumentMessage";F.internalSpec={document:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],fileName:[2,h.TYPES.STRING]};G.name="ConsumerApplication$VideoMessage";G.internalSpec={video:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};H.name="ConsumerApplication$AudioMessage";H.internalSpec={audio:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],ptt:[2,h.TYPES.BOOL]};I.name="ConsumerApplication$ImageMessage";I.internalSpec={image:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};J.name="ConsumerApplication$InteractiveAnnotation";J.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,K],location:[2,h.TYPES.MESSAGE,L],__oneofs__:{action:["location"]}};K.name="ConsumerApplication$Point";K.internalSpec={x:[1,h.TYPES.DOUBLE],y:[2,h.TYPES.DOUBLE]};L.name="ConsumerApplication$Location";L.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};M.name="ConsumerApplication$MediaPayload";M.internalSpec={protocol:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=i;g.ConsumerApplication$MetadataSpec=j;g.ConsumerApplication$SignalSpec=k;g.ConsumerApplication$ApplicationDataSpec=l;g.ConsumerApplication$ContentSpec=m;g.ConsumerApplication$EditMessageSpec=n;g.ConsumerApplication$PollAddOptionMessageSpec=o;g.ConsumerApplication$PollVoteMessageSpec=p;g.ConsumerApplication$PollEncValueSpec=q;g.ConsumerApplication$PollUpdateMessageSpec=r;g.ConsumerApplication$PollCreationMessageSpec=s;g.ConsumerApplication$OptionSpec=t;g.ConsumerApplication$ReactionMessageSpec=u;g.ConsumerApplication$RevokeMessageSpec=v;g.ConsumerApplication$ViewOnceMessageSpec=w;g.ConsumerApplication$GroupInviteMessageSpec=x;g.ConsumerApplication$LiveLocationMessageSpec=y;g.ConsumerApplication$ContactsArrayMessageSpec=z;g.ConsumerApplication$ContactMessageSpec=A;g.ConsumerApplication$StatusTextMesageSpec=B;g.ConsumerApplication$ExtendedTextMessageSpec=C;g.ConsumerApplication$LocationMessageSpec=D;g.ConsumerApplication$StickerMessageSpec=E;g.ConsumerApplication$DocumentMessageSpec=F;g.ConsumerApplication$VideoMessageSpec=G;g.ConsumerApplication$AudioMessageSpec=H;g.ConsumerApplication$ImageMessageSpec=I;g.ConsumerApplication$InteractiveAnnotationSpec=J;g.ConsumerApplication$PointSpec=K;g.ConsumerApplication$LocationSpec=L;g.ConsumerApplication$MediaPayloadSpec=M}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={NONE:0,LQ_4K:1,HQ_4K:2};b={NONE:0,GIPHY:1,TENOR:2};c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4};e={UNKNOWN:0,OPUS:1};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={};f.name="WAMediaTransport";f.internalSpec={integral:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,l],ancillary:[2,h.TYPES.MESSAGE,i]};i.name="WAMediaTransport$Ancillary";i.internalSpec={fileLength:[1,h.TYPES.UINT64],mimetype:[2,h.TYPES.STRING],thumbnail:[3,h.TYPES.MESSAGE,j],objectId:[4,h.TYPES.STRING]};j.name="WAMediaTransport$Ancillary$Thumbnail";j.internalSpec={jpegThumbnail:[1,h.TYPES.BYTES],downloadableThumbnail:[2,h.TYPES.MESSAGE,k],thumbnailWidth:[3,h.TYPES.UINT32],thumbnailHeight:[4,h.TYPES.UINT32]};k.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail";k.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],thumbnailScansSidecar:[7,h.TYPES.BYTES],thumbnailScanLengths:[8,h.FLAGS.REPEATED|h.TYPES.UINT32]};l.name="WAMediaTransport$Integral";l.internalSpec={fileSha256:[1,h.TYPES.BYTES],mediaKey:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64]};m.name="ImageTransport";m.internalSpec={integral:[1,h.TYPES.MESSAGE,o],ancillary:[2,h.TYPES.MESSAGE,n]};n.name="ImageTransport$Ancillary";n.internalSpec={height:[1,h.TYPES.UINT32],width:[2,h.TYPES.UINT32],scansSidecar:[3,h.TYPES.BYTES],scanLengths:[4,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[5,h.TYPES.BYTES],hdType:[6,h.TYPES.ENUM,a],memoriesConceptScores:[7,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.FLOAT],memoriesConceptIds:[8,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};o.name="ImageTransport$Integral";o.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};p.name="VideoTransport";p.internalSpec={integral:[1,h.TYPES.MESSAGE,r],ancillary:[2,h.TYPES.MESSAGE,q]};q.name="VideoTransport$Ancillary";q.internalSpec={seconds:[1,h.TYPES.UINT32],caption:[2,h.TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],gifPlayback:[3,h.TYPES.BOOL],height:[4,h.TYPES.UINT32],width:[5,h.TYPES.UINT32],sidecar:[6,h.TYPES.BYTES],gifAttribution:[7,h.TYPES.ENUM,b],accessibilityLabel:[8,h.TYPES.STRING],isHd:[9,h.TYPES.BOOL]};r.name="VideoTransport$Integral";r.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};s.name="AudioTransport";s.internalSpec={integral:[1,h.TYPES.MESSAGE,w],ancillary:[2,h.TYPES.MESSAGE,t]};t.name="AudioTransport$Ancillary";t.internalSpec={seconds:[1,h.TYPES.UINT32],avatarAudio:[2,h.TYPES.MESSAGE,u]};u.name="AudioTransport$Ancillary$AvatarAudio";u.internalSpec={poseId:[1,h.TYPES.UINT32],avatarAnimations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations";v.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],animationsType:[7,h.TYPES.ENUM,c]};w.name="AudioTransport$Integral";w.internalSpec={transport:[1,h.TYPES.MESSAGE,f],audioFormat:[2,h.TYPES.ENUM,e]};x.name="DocumentTransport";x.internalSpec={integral:[1,h.TYPES.MESSAGE,z],ancillary:[2,h.TYPES.MESSAGE,y]};y.name="DocumentTransport$Ancillary";y.internalSpec={pageCount:[1,h.TYPES.UINT32]};z.name="DocumentTransport$Integral";z.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};A.name="StickerTransport";A.internalSpec={integral:[1,h.TYPES.MESSAGE,C],ancillary:[2,h.TYPES.MESSAGE,B]};B.name="StickerTransport$Ancillary";B.internalSpec={pageCount:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],width:[3,h.TYPES.UINT32],firstFrameLength:[4,h.TYPES.UINT32],firstFrameSidecar:[5,h.TYPES.BYTES],mustacheText:[6,h.TYPES.STRING],isThirdParty:[7,h.TYPES.BOOL],receiverFetchId:[8,h.TYPES.STRING],accessibilityLabel:[9,h.TYPES.STRING]};C.name="StickerTransport$Integral";C.internalSpec={transport:[1,h.TYPES.MESSAGE,f],isAnimated:[2,h.TYPES.BOOL],receiverFetchId:[3,h.TYPES.STRING]};D.name="ContactTransport";D.internalSpec={integral:[1,h.TYPES.MESSAGE,F],ancillary:[2,h.TYPES.MESSAGE,E]};E.name="ContactTransport$Ancillary";E.internalSpec={displayName:[1,h.TYPES.STRING]};F.name="ContactTransport$Integral";F.internalSpec={vcard:[1,h.TYPES.STRING],downloadableVcard:[2,h.TYPES.MESSAGE,f],__oneofs__:{contact:["vcard","downloadableVcard"]}};g.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=a;g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=b;g.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c;g.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=e;g.WAMediaTransportSpec=f;g.WAMediaTransport$AncillarySpec=i;g.WAMediaTransport$Ancillary$ThumbnailSpec=j;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=k;g.WAMediaTransport$IntegralSpec=l;g.ImageTransportSpec=m;g.ImageTransport$AncillarySpec=n;g.ImageTransport$IntegralSpec=o;g.VideoTransportSpec=p;g.VideoTransport$AncillarySpec=q;g.VideoTransport$IntegralSpec=r;g.AudioTransportSpec=s;g.AudioTransport$AncillarySpec=t;g.AudioTransport$Ancillary$AvatarAudioSpec=u;g.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=v;g.AudioTransport$IntegralSpec=w;g.DocumentTransportSpec=x;g.DocumentTransport$AncillarySpec=y;g.DocumentTransport$IntegralSpec=z;g.StickerTransportSpec=A;g.StickerTransport$AncillarySpec=B;g.StickerTransport$IntegralSpec=C;g.ContactTransportSpec=D;g.ContactTransport$AncillarySpec=E;g.ContactTransport$IntegralSpec=F}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(a,b,c,d,e,f,g){function a(a){if(a==null||a.text==null||a.mentions==null||a.mentions.length===0)return a;var b=a.text,c=[],e=[],f=0;for(var g of a.mentions){var h=g.offset,i=g.length,j=g.mentionedJid,k=g.mentionType;if(k!==d("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||h==null||i==null||j==null)continue;e.push(j+"@msgr");c.push(b.substring(f,h));c.push("@"+j+"@msgr");f=h+i}if(e.length===0)return a;c.push(b.substring(f));return babelHelpers["extends"]({},a,{text:c.join(""),mentionedJid:e,mentions:[]})}g["default"]=a}),98);
__d("WAMedia",[],(function(a,b,c,d,e,f){"use strict";a="Image";b="Video";c="Ptt";d="Gif";e="Sticker";var g="DocumentFile",h={IMAGE:a,VIDEO:b,PTT:c,GIF:d,STICKER:e,DOCUMENT_FILE:g};f.IMAGE=a;f.VIDEO=b;f.PTT=c;f.GIF=d;f.STICKER=e;f.DOCUMENT_FILE=g;f.MEDIA_TYPE=h}),66);
__d("WAMediaHdType",[],(function(a,b,c,d,e,f,g){"use strict";a=0;b=1;c=2;d={HD_TYPE_NONE:a,HD_TYPE_LQ_4K:b,HD_TYPE_HQ_4K:c};g.HD_TYPE_NONE=a;g.HD_TYPE_LQ_4K=b;g.HD_TYPE_HQ_4K=c;g.HD_TYPE=d}),98);
__d("MAWParseBumpExistingMessageMsg",["FBLogger","WAMessageKey","WAParseConsumerMessageProtocol","WAParseProtocolUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.chat,e=a.content,f=a.meta;a=a.metadata;e=e.bumpExistingMessage;if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("bumpExistingMessage has no content");e=e.key;if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("bumpExistingMessage has no message key");var g=d("WAParseConsumerMessageProtocol").interpretAsNonSystemAuthor(f.id.author);g=d("WAMessageKey").extractProtocolMessageId(b,g,e);e=g.author;g=g.externalId;a=d("WAParseProtocolUtils").parseEphemerality(f,a);var h=a.deleteTs,i=a.ephemeralSetting;a=a.expirationTs;h={ack:f.ack,deleteTs:h,ephemeralSetting:i,expirationTs:a,id:{author:f.id.author,chat:f.id.chat,externalId:f.id.externalId},quote:{content:{author:e,externalId:g,ts:null,type:"Unavailable"},remoteJid:b},reportingMeta:f.reportingMeta,sentTs:f.sentTs,serverTs:f.serverTs,ts:f.serverTs,type:"BumpExistingMessage"};return{contentTypeForLogging:"bumpExistingMessage",unstoredMedia:null,unstoredMsg:h,unstoredQuotedMedia:null,unstoredXMA:null}}g["default"]=a}),98);
__d("MAWParseNetworkVerificationMsg",["MAWMessageDropError","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){d("WALogger").EXPECTED_ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Web does not support network verification code"])));throw new(d("MAWMessageDropError").MAWMessageDropError)("Web does not support network verification")}g.parseNetworkVerificationMsg=a}),98);
__d("MAWParseNoteReplyMsg",["FBLogger","MAWJids","MAWMsgType","WAGlobals","WAJids","WALongInt","WAMediaTransport.pb","WAMsgType","WAParseMediaTransportProtocol","WAParseProtocolUtils","WAParseReadOnlyMetadataDataclassToUnsafeObject","WATimeUtils","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=a.content,f=a.ebTimestampMs,g=a.meta;a=a.metadata;e=e.noteReplyMessage;if(h(a))return"noteMention";if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no content");b=(b=e.noteText)==null?void 0:b.text;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no note text");var i=e.noteTimestampMs!=null?d("WATimeUtils").castMilliSecondsToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e.noteTimestampMs)):void 0,j=d("MAWJids").toUserJid(g.id.author),k=d("MAWJids").toUserJid(g.id.chat);j=k===j?d("WAJids").AUTHOR_ME:k;k=d("WAParseProtocolUtils").parseEphemerality(g,a);a=k.deleteTs;var l=k.ephemeralSetting;k=k.expirationTs;a={ack:g.ack,deleteTs:a,ebTimestampMs:f,ephemeralSetting:l,expirationTs:k,forwardingScore:g.forwardingScore,id:{author:g.id.author,chat:g.id.chat,externalId:g.id.externalId},quote:{content:{author:j,expirationTs:i,externalId:g.id.externalId,msgContent:{content:b},ts:g.serverTs,type:d("WAMsgType").NOTE_REPLY},remoteJid:g.id.chat},ts:g.serverTs};var m,n;l=(f=e.textContent)==null?void 0:f.text;k=e.stickerContent;j=e.videoContent;if(l!=null){i=babelHelpers["extends"]({msgContent:{content:l},type:d("MAWMsgType").MSG_TYPE.TEXT},a);b=i}else if(k!=null){f=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,k==null?void 0:k.payload);m=d("WAParseMediaTransportProtocol").parseStickerMsg(f,g.ts);if(m){e=babelHelpers["extends"]({mediaId:m.plaintextHash,type:d("MAWMsgType").MSG_TYPE.STICKER},a);b=e}else{if(((l=f.integral)==null?void 0:l.receiverFetchId)!=null)if(d("WAGlobals").getConfig().isStickerReceiverFetchEnabled()){n=d("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(f);if(n==null)throw c("FBLogger")("messenger_web").mustfixThrow("consumerMessage has no sticker receiver fetch info");i=babelHelpers["extends"]({type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH},a);b=i}else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage sticker receiver fetch is not enabled");else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage sticker has no media")}}else if(j!=null){var o,p;k=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,j==null?void 0:j.payload);e=k==null||(o=k.integral)==null||(o=o.transport)==null||(o=o.ancillary)==null?void 0:o.mimetype;l=(k==null||(p=k.ancillary)==null?void 0:p.gifPlayback)===!0&&e==="image/gif";m=d("WAParseMediaTransportProtocol").parseVideoMsg(k,g.ts,l);if(m&&l){f=babelHelpers["extends"]({mediaId:m.plaintextHash,type:d("MAWMsgType").MSG_TYPE.GIF},a);b=f}else if(!m)throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage video has no media");else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage video is not a gif")}else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no valid content");return{contentTypeForLogging:"noteReplyMessage",unstoredMedia:m,unstoredMsg:b,unstoredQuotedMedia:null,unstoredReceiverFetchInfo:n,unstoredXMA:null}}function h(a){var b;a=c("WAParseReadOnlyMetadataDataclassToUnsafeObject")(a);return(a==null||(b=a.note_metadata)==null?void 0:b.message_type)==="MENTION"}g["default"]=a}),98);
__d("MAWParseRavenActionNotificationMsg",["FBLogger","MAWMsg","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e,f=a.content;a=a.meta;b=(b=f.ravenActionNotifMessage)==null?void 0:b.actionType;b=d("MAWMsg").MAWRavenActionNotifType.cast(b);e=(e=f.ravenActionNotifMessage)==null?void 0:e.actionTimestamp;var g;if(e!=null){e=Number(e);e>d("WATimeUtils").MAX_INT?g=d("WATimeUtils").castMilliSecondsToUnixTime(e):g=d("WATimeUtils").castToUnixTime(e)}f=((e=f.ravenActionNotifMessage)==null||(e=e.key)==null?void 0:e.id)!=null?d("WAStanzaUtils").toStanzaId((e=f.ravenActionNotifMessage)==null||(e=e.key)==null?void 0:e.id):null;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when getting actionType for RavenNotificationMessage "+a.id.externalId);if(g==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when getting actionTimestamp for RavenNotificationMessage "+a.id.externalId);if(f==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when getting ravenActionToMsgExternalId for RavenNotificationMessage "+a.id.externalId);e={ack:a.ack,actionTimestamp:g,actionType:b,id:a.id,ravenActionToMsgExternalId:f,sentTs:a.sentTs,serverTs:a.serverTs,ts:a.serverTs,type:"RavenAction"};return{unstoredMedia:null,unstoredMsg:e,unstoredQuotedMedia:null,unstoredXMA:null}}g.parseRavenActionNotificationMessage=a}),98);
__d("MAWParseSubprotocolVersionConsts",[],(function(a,b,c,d,e,f){"use strict";a=2;b=2;c=1;d=2;e=1;var g=1;f.ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION=a;f.XMA_PREVIEW_SUBPROTOCOL_VERSION=b;f.XMA_FAVICON_SUBPROTOCOL_VERSION=c;f.XMA_HEADER_SUBPROTOCOL_VERSION=d;f.RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION=e;f.RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION=g}),66);
__d("MAWParseRavenMsg",["FBLogger","MAWMsg","MAWMsgType","MAWParseSubprotocolVersionConsts","WALogger","WAMediaTransport.pb","WAParseMediaTransportProtocol","WAParseProtocolUtils","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.content,e=a.ebTimestampMs,f=a.meta;a=a.metadata;b=b.ravenMessageMsgr;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Raven message payload has no content");var g=d("MAWMsg").MAWRavenMsgEphemeralType.cast(b.ephemeralType);if(g==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when casting ephemeralType for Raven message");var j=void 0,k=void 0;if(b.imageMessage)(b.imageMessage.version==null||b.imageMessage.version<d("MAWParseSubprotocolVersionConsts").RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["\n        received image messsage version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION),j=d("WAParseMediaTransportProtocol").decodeImageTransport(b.imageMessage.payload,f.ts,"image"),k=d("MAWMsg").MAWRavenMsgMediaType.IMAGE;else if(b.videoMessage){(b.videoMessage.version==null||b.videoMessage.version<d("MAWParseSubprotocolVersionConsts").RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["\n        received video messsage version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION);b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").VideoTransportSpec,b.videoMessage.payload);j=d("WAParseMediaTransportProtocol").parseVideoMsg(b,f.ts,!1);k=d("MAWMsg").MAWRavenMsgMediaType.VIDEO}else throw c("FBLogger")("messenger_web").mustfixThrow("Error unsupported Raven message type");if(j==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error Raven message has no associated image or video");b=d("WAParseProtocolUtils").parseEphemerality(f,a);a=b.deleteTs;var l=b.ephemeralSetting;b=b.expirationTs;a={ack:f.ack,deleteTs:a,ebTimestampMs:e,ephemeralSetting:l,expirationTs:b,id:f.id,mediaId:j.plaintextHash,ravenEphemeralMediaState:g===d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT?d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:g,ravenMediaType:k,reportingMeta:f.reportingMeta,sentTs:f.sentTs,serverTs:f.serverTs,ts:f.ts,type:d("MAWMsgType").MSG_TYPE.RAVEN};return{unstoredMedia:j,unstoredMsg:a,unstoredQuotedMedia:null,unstoredXMA:null}}g.parseRavenMessage=a}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h,i;a={ES_OPEN:1,ES_CLOSE:2};b={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23};c={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};e={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2};f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2};var j={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={};k.name="Armadillo";k.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,m],metadata:[2,h.TYPES.MESSAGE,l]};l.name="Armadillo$Metadata";l.internalSpec={};m.name="Armadillo$Payload";m.internalSpec={content:[1,h.TYPES.MESSAGE,E],applicationData:[2,h.TYPES.MESSAGE,r],signal:[3,h.TYPES.MESSAGE,o],subProtocol:[4,h.TYPES.MESSAGE,n],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};n.name="Armadillo$SubProtocolPayload";n.internalSpec={futureProof:[1,h.TYPES.ENUM,(i=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};o.name="Armadillo$Signal";o.internalSpec={encryptedBackupsSecrets:[1,h.TYPES.MESSAGE,p],__oneofs__:{signal:["encryptedBackupsSecrets"]}};p.name="Armadillo$Signal$EncryptedBackupsSecrets";p.internalSpec={backupId:[1,h.TYPES.UINT64],serverDataId:[2,h.TYPES.UINT64],epoch:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,q],tempOcmfClientState:[4,h.TYPES.BYTES],mailboxRootKey:[5,h.TYPES.BYTES],obliviousValidationToken:[6,h.TYPES.BYTES]};q.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch";q.internalSpec={id:[1,h.TYPES.UINT64],anonId:[2,h.TYPES.BYTES],rootKey:[3,h.TYPES.BYTES],status:[4,h.TYPES.ENUM,a]};r.name="Armadillo$ApplicationData";r.internalSpec={metadataSync:[1,h.TYPES.MESSAGE,D],aiBotResponse:[2,h.TYPES.MESSAGE,t],messageHistoryDocumentMessage:[3,h.TYPES.MESSAGE,s],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}};s.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage";s.internalSpec={document:[1,h.TYPES.MESSAGE,i.SubProtocolSpec]};t.name="Armadillo$ApplicationData$AIBotResponseMessage";t.internalSpec={summonToken:[1,h.TYPES.STRING],messageText:[2,h.TYPES.STRING],serializedExtras:[3,h.TYPES.STRING]};u.name="Armadillo$ApplicationData$MetadataSyncAction";u.internalSpec={actionTimestamp:[1,h.TYPES.INT64],chatAction:[101,h.TYPES.MESSAGE,x],messageAction:[102,h.TYPES.MESSAGE,v],__oneofs__:{actionType:["chatAction","messageAction"]}};v.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction";v.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],messageDelete:[101,h.TYPES.MESSAGE,w],__oneofs__:{action:["messageDelete"]}};w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete";w.internalSpec={};x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction";x.internalSpec={chatId:[1,h.TYPES.STRING],chatArchive:[101,h.TYPES.MESSAGE,A],chatDelete:[102,h.TYPES.MESSAGE,z],chatRead:[103,h.TYPES.MESSAGE,y],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}};y.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead";y.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],read:[2,h.TYPES.BOOL]};z.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete";z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C]};A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive";A.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],archived:[2,h.TYPES.BOOL]};B.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage";B.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],timestamp:[2,h.TYPES.INT64]};C.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange";C.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,B]};D.name="Armadillo$ApplicationData$MetadataSyncNotification";D.internalSpec={actions:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,u]};E.name="Armadillo$Content";E.internalSpec={commonSticker:[1,h.TYPES.MESSAGE,O],screenshotAction:[3,h.TYPES.MESSAGE,K],extendedContentMessage:[4,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,h.TYPES.MESSAGE,N],ravenActionNotifMessage:[6,h.TYPES.MESSAGE,M],extendedMessageContentWithSear:[7,h.TYPES.MESSAGE,L],imageGalleryMessage:[8,h.TYPES.MESSAGE,J],paymentsTransactionMessage:[10,h.TYPES.MESSAGE,F],bumpExistingMessage:[11,h.TYPES.MESSAGE,I],noteReplyMessage:[13,h.TYPES.MESSAGE,H],ravenMessageMsgr:[14,h.TYPES.MESSAGE,N],networkVerificationMessage:[15,h.TYPES.MESSAGE,G],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}};F.name="Armadillo$Content$PaymentsTransactionMessage";F.internalSpec={transactionId:[1,h.TYPES.UINT64],amount:[2,h.TYPES.STRING],currency:[3,h.TYPES.STRING],paymentStatus:[4,h.TYPES.ENUM,b],extendedContentMessage:[5,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec]};G.name="Armadillo$Content$NetworkVerificationMessage";G.internalSpec={codeText:[1,h.TYPES.STRING]};H.name="Armadillo$Content$NoteReplyMessage";H.internalSpec={noteId:[1,h.TYPES.STRING],noteText:[2,h.TYPES.MESSAGE,i.MessageTextSpec],noteTimestampMs:[3,h.TYPES.INT64],textContent:[4,h.TYPES.MESSAGE,i.MessageTextSpec],stickerContent:[5,h.TYPES.MESSAGE,i.SubProtocolSpec],videoContent:[6,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}};I.name="Armadillo$Content$BumpExistingMessage";I.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};J.name="Armadillo$Content$ImageGalleryMessage";J.internalSpec={images:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i.SubProtocolSpec]};K.name="Armadillo$Content$ScreenshotAction";K.internalSpec={screenshotType:[1,h.TYPES.ENUM,c]};L.name="Armadillo$Content$ExtendedContentMessageWithSear";L.internalSpec={searId:[1,h.TYPES.STRING],payload:[2,h.TYPES.BYTES],nativeUrl:[3,h.TYPES.STRING],searAssociatedMessage:[4,h.TYPES.MESSAGE,i.SubProtocolSpec],searSentWithMessageId:[5,h.TYPES.STRING]};M.name="Armadillo$Content$RavenActionNotifMessage";M.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],actionTimestamp:[2,h.TYPES.INT64],actionType:[3,h.TYPES.ENUM,e]};N.name="Armadillo$Content$RavenMessage";N.internalSpec={ephemeralType:[1,h.TYPES.ENUM,f],imageMessage:[2,h.TYPES.MESSAGE,i.SubProtocolSpec],videoMessage:[3,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}};O.name="Armadillo$Content$CommonSticker";O.internalSpec={stickerType:[1,h.TYPES.ENUM,j]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=a;g.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=b;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=c;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=e;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=j;g.ArmadilloSpec=k;g.Armadillo$MetadataSpec=l;g.Armadillo$PayloadSpec=m;g.Armadillo$SubProtocolPayloadSpec=n;g.Armadillo$SignalSpec=o;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=p;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=q;g.Armadillo$ApplicationDataSpec=r;g.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=s;g.Armadillo$ApplicationData$AIBotResponseMessageSpec=t;g.Armadillo$ApplicationData$MetadataSyncActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=B;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=C;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=D;g.Armadillo$ContentSpec=E;g.Armadillo$Content$PaymentsTransactionMessageSpec=F;g.Armadillo$Content$NetworkVerificationMessageSpec=G;g.Armadillo$Content$NoteReplyMessageSpec=H;g.Armadillo$Content$BumpExistingMessageSpec=I;g.Armadillo$Content$ImageGalleryMessageSpec=J;g.Armadillo$Content$ScreenshotActionSpec=K;g.Armadillo$Content$ExtendedContentMessageWithSearSpec=L;g.Armadillo$Content$RavenActionNotifMessageSpec=M;g.Armadillo$Content$RavenMessageSpec=N;g.Armadillo$Content$CommonStickerSpec=O}),98);
__d("MAWParseScreenshotActionMsg",["FBLogger","MAWExternalId","MAWMsgType","WAAckLevel","WAArmadilloApplication.pb","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.content;a=a.meta;b=b.screenshotAction;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("screenshotAction has no content");b=b.screenshotType;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Missing screenshot type in payload");if(![d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING].includes(b))throw c("FBLogger")("messenger_web").mustfixThrow("Received unexpected screenshot action type");b={ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a.id.chat,externalId:d("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:[],adminType:"youEphemeralTakeScreenshot",screenshotActionType:b},ts:a.serverTs,type:d("MAWMsgType").EPHEMERAL_SCREENSHOT_ACTION};return{contentTypeForLogging:"screenshotAction",unstoredMedia:null,unstoredMsg:b,unstoredQuotedMedia:null,unstoredXMA:null}}g.parseEphemeralScreenshotActionProtocol=a}),98);
__d("MAWParseArmadilloProtocol",["FBLogger","MAWMessageParseError","MAWMsgType","MAWParseBumpExistingMessageMsg","MAWParseNetworkVerificationMsg","MAWParseNoteReplyMsg","MAWParseRavenActionNotificationMsg","MAWParseRavenMsg","MAWParseScreenshotActionMsg","MAWParseXMAProtocol","WAArmadilloApplication.pb","WAHex","WALogger","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b={unstoredMedia:null,unstoredMsg:null,unstoredQuotedMedia:null,unstoredXMA:null};var j=new Map([["screenshotAction",d("MAWParseScreenshotActionMsg").parseEphemeralScreenshotActionProtocol],["extendedContentMessage",d("MAWParseXMAProtocol").parseXMAProtocol],["paymentsTransactionMessage",d("MAWParseXMAProtocol").parseXMAProtocol],["noteReplyMessage",c("MAWParseNoteReplyMsg")],["bumpExistingMessage",c("MAWParseBumpExistingMessageMsg")],["ravenMessageMsgr",d("MAWParseRavenMsg").parseRavenMessage],["ravenActionNotifMessage",d("MAWParseRavenActionNotificationMsg").parseRavenActionNotificationMessage],["networkVerificationMessage",d("MAWParseNetworkVerificationMsg").parseNetworkVerificationMsg]]);function a(a,b,c,e,f,g){b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAArmadilloApplication.pb").ArmadilloSpec,b);b=(b=b.payload)==null?void 0:b.content;if(!b)throw new(d("MAWMessageParseError").MAWMessageParseError)("parse_armadillo_protocol_error:: empty_payload_content");var m=l(b);try{var n=j.get(m),o=null;if(n!=null){n=n({chat:a,content:b,ebTimestampMs:g,meta:c,metadata:f,protobuf:e});if(typeof n!=="string")return n;else o=n}d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MAWParseArmadilloProtocol - handling futureproof message for contentType: ",""])),m);return{contentTypeForLogging:m,unstoredMedia:null,unstoredMsg:{ack:c.ack,id:c.id,msgContent:{protobuf:d("WAHex").bytesToBuffer(e),subtype:o!=null?o:k(m)},reportingMeta:c.reportingMeta,sentTs:c.sentTs,serverTs:c.serverTs,ts:c.ts,type:d("MAWMsgType").MSG_TYPE.FUTUREPROOF},unstoredQuotedMedia:null,unstoredXMA:null}}catch(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["MAWParseArmadilloProtocol - Dropping message. contentType: ",", reason: ",""])),m,a);throw new(d("MAWMessageParseError").MAWMessageParseError)("parse_armadillo_protocol_error:: contentType:: "+m+" reason:: "+a)}}function k(a){switch(a){case"bumpExistingMessage":return"bumpMessage";default:return null}}function l(a){var b=Object.keys(a).filter(function(a){return a!=="$$unknownFieldCount"});if(b.length!==1)throw c("FBLogger")("messenger_web").mustfixThrow(JSON.stringify(a)+" armadillo payload content should only have one field");a=b[0];return a}g.EMPTY_CONTENT=b;g.parseArmadilloProtocol=a;g.parseOneOfContentType=l}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return!1;a=JSON.parse(a);if(a==null)return!1;a=a.content;if(a==null||(a==null?void 0:a.__typename)!=="XMSGXmaSingleContent")return!1;a=a.custom_template_data;if(a==null||(a==null?void 0:a.__typename)!=="XMSGXmaLocationTemplateData")return!1;a=a.location_metadata;return a==null||(a==null?void 0:a.__typename)!=="XMSGXmaLiveLocationMetadata"?!1:!0}f.isDataclassLiveLocationXMA=a}),66);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)throw c("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var b=d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(a);if(b)return h(a);b=JSON.parse(a);a=b.layout_config;if(a==null||typeof a.collapsible_id!=="number")throw c("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return a.collapsible_id}function h(a){a=JSON.parse(a);a=(a=a.content)==null?void 0:a.custom_template_data;if((a==null?void 0:a.__typename)!=="XMSGXmaLocationTemplateData"||a==null)throw c("FBLogger")("messenger_web").mustfixThrow("Live location metadata or session_id is missing");return parseInt(a.location_metadata.session_id,10)}g.parseCollapsibleIdFromXMADataClass=a}),98);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","MAWIsLiveLocationXmaEnabled","MWXMAV2IsDataclassLiveLocationXMA","WAArmadilloXMA.pb","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set([(b=d("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);function a(a){var b=a.fbTargetType,e=a.silentExposure;a=a.xmaDataclass;if(b!=null&&h.has(b))return!0;e=e!=null?e:!1;switch(b){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return e?c("gkx")("9338"):c("gkx")("9339");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return a!=null&&d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(a)?d("MAWIsLiveLocationXmaEnabled").isLiveLocationXmaEnabled():!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return d("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:c("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(b));return!1}}g.FB_FULLY_SUPPORTED_TARGET_TYPES=h;g.isFBSupportedTargetType=a}),98);
__d("MAWXMALoggingUtils",["WAArmadilloXMA.pb","objectEntries"],(function(a,b,c,d,e,f,g){"use strict";var h=c("objectEntries")(d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function a(a){return a!=null?h.get(a):void 0}g.getXmaTargetTypeStringFromEnum=a}),98);
__d("MWXMAV2IsCollapsibleXMA",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return!1;var b;try{b=JSON.parse(a)}catch(a){c("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass");return!1}if(b==null)return!1;var e=b.layout_config;return(e==null?void 0:e.collapsible_id)==null&&!d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(a)?!1:!0}g.isCollapsibleXMA=a}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2};b={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3};c={};e={};f={};var i={},j={},k={},l={},m={},n={},o={};c.name="MessageApplication";c.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,j],metadata:[2,h.TYPES.MESSAGE,e]};e.name="MessageApplication$Metadata";e.internalSpec={forwardingScore:[5,h.TYPES.UINT32],isForwarded:[6,h.TYPES.BOOL],businessMetadata:[7,h.TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],frankingKey:[8,h.TYPES.BYTES],frankingVersion:[9,h.TYPES.INT32],quotedMessage:[10,h.TYPES.MESSAGE,f],threadType:[11,h.TYPES.ENUM,a],readonlyMetadataDataclass:[12,h.TYPES.STRING],groupId:[13,h.TYPES.STRING],groupSize:[14,h.TYPES.UINT32],groupIndex:[15,h.TYPES.UINT32],botResponseId:[16,h.TYPES.STRING],collapsibleId:[17,h.TYPES.STRING],secondaryOtid:[18,h.TYPES.STRING],chatEphemeralSetting:[1,h.TYPES.MESSAGE,o],ephemeralSettingList:[2,h.TYPES.MESSAGE,i],ephemeralSharedSecret:[3,h.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}};f.name="MessageApplication$Metadata$QuotedMessage";f.internalSpec={stanzaId:[1,h.TYPES.STRING],remoteJid:[2,h.TYPES.STRING],participant:[3,h.TYPES.STRING],payload:[4,h.TYPES.MESSAGE,j]};i.name="MessageApplication$Metadata$EphemeralSettingMap";i.internalSpec={chatJid:[1,h.TYPES.STRING],ephemeralSetting:[2,h.TYPES.MESSAGE,o]};j.name="MessageApplication$Payload";j.internalSpec={coreContent:[1,h.TYPES.MESSAGE,n],signal:[2,h.TYPES.MESSAGE,m],applicationData:[3,h.TYPES.MESSAGE,l],subProtocol:[4,h.TYPES.MESSAGE,k],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}};k.name="MessageApplication$SubProtocolPayload";k.internalSpec={futureProof:[1,h.TYPES.ENUM,d.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,h.TYPES.MESSAGE,d.SubProtocolSpec],businessMessage:[3,h.TYPES.MESSAGE,d.SubProtocolSpec],paymentMessage:[4,h.TYPES.MESSAGE,d.SubProtocolSpec],multiDevice:[5,h.TYPES.MESSAGE,d.SubProtocolSpec],voip:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],armadillo:[7,h.TYPES.MESSAGE,d.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}};l.name="MessageApplication$ApplicationData";l.internalSpec={};m.name="MessageApplication$Signal";m.internalSpec={};n.name="MessageApplication$Content";n.internalSpec={};o.name="MessageApplication$EphemeralSetting";o.internalSpec={ephemeralExpiration:[2,h.TYPES.UINT32],ephemeralSettingTimestamp:[3,h.TYPES.INT64],ephemeralityType:[5,h.TYPES.ENUM,b],isEphemeralSettingReset:[4,h.TYPES.BOOL]};g.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=a;g.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=b;g.MessageApplicationSpec=c;g.MessageApplication$MetadataSpec=e;g.MessageApplication$Metadata$QuotedMessageSpec=f;g.MessageApplication$Metadata$EphemeralSettingMapSpec=i;g.MessageApplication$PayloadSpec=j;g.MessageApplication$SubProtocolPayloadSpec=k;g.MessageApplication$ApplicationDataSpec=l;g.MessageApplication$SignalSpec=m;g.MessageApplication$ContentSpec=n;g.MessageApplication$EphemeralSettingSpec=o}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c,e=a.payload;if(e==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(d("decodeProtobuf").getUnknownFields(a.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};e=e.subProtocol;if(e==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(d("decodeProtobuf").getUnknownFields(e)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:e.futureProof};e=[];b=(b=a.payload)==null||(b=b.subProtocol)==null?void 0:b.consumerMessage;c=(c=a.payload)==null||(c=c.subProtocol)==null?void 0:c.armadillo;a=(a=a.payload)==null||(a=a.subProtocol)==null?void 0:a.multiDevice;if(b!=null){if(b.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};e.push({payload:new Uint8Array(b.payload),type:"success",subprotocolType:"consumerMessage"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};e.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"armadillo"})}if(a!=null){if(a.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};e.push({payload:new Uint8Array(a.payload),type:"success",subprotocolType:"multiDevice"})}return e.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+e.length}:e[0]}g.parseMessageApplication=a}),98);
__d("MAWParseXMAProtocol",["FBLogger","MAWMsgType","MAWODSProxy","MAWParseArmadilloProtocol","MAWParseCollapsibleIdFromXMADataClass","MAWParseSubprotocolVersionConsts","MAWParseXMAFBConfig","MAWXMALoggingUtils","MWXMAV2IsCollapsibleXMA","MWXMAV2IsDataclassLiveLocationXMA","WAArmadilloXMA.pb","WAGetPlatformFromStanzaId","WAHex","WAJids","WALogger","WAMedia","WAMsgApplication.pb","WAOdsEnums","WAParseConsumerMessageProtocol","WAParseMediaTransportProtocol","WAParseMessageApplication","WAParseProtocolUtils","WAStanzaUtils","WATimeUtils","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var aa=["actionContentBlob"],h,i,j,k,l,m,n,o,p,q,r,s,t,u=new Set([d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY]);function v(a,b){return a==null||a.payload==null?void 0:d("WAParseMediaTransportProtocol").decodeImageTransport(a.payload,b,"xma-image")}function ba(a,b,e,f,g){if(b==null||b.payload==null)return null;b.version!==d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION&&d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[XMA] received associated message with incorrect version ",""])),b.version);b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMsgApplication.pb").MessageApplicationSpec,b.payload);b=d("WAParseMessageApplication").parseMessageApplication(b);if(b.type==="error")throw c("FBLogger")("messenger_web").mustfixThrow("XMA contains unparseable message application.");b=b;if(b.subprotocolType!=="consumerMessage")throw c("FBLogger")("messenger_web").mustfixThrow("XMA contains incorrect message application type: "+b.subprotocolType);return d("WAParseConsumerMessageProtocol").parseConsumerMessageProtocol(a,b.payload,e,f,g)}var w="https://www.instagram.com/stories/",x="https://www.instagram.com/reel/",y="https://www.instagram.com/tv/",z="https://www.instagram.com/_n/profile_shop?",A="https://www.instagram.com/",B="https://www.alpha.facebook.com/share/",C="https://m.facebook.com/share/",D="https://www.facebook.com/share/",E="https://m.alpha.facebook.com/share/",F="https://facebook.com/share/",G="https://www.alpha.facebook.com/stories/",H="https://www.facebook.com/stories/",I="https://fb.gg/",J="https://www.facebook.com/",K="https://m.facebook.com/",L="https://www.alpha.facebook.com/",M="https://m.alpha.facebook.com/",N="https://facebook.com/",O="https://fb.watch/",P="https://www.facebook.com/l.php",Q="https://m.facebook.com/l.php",R="https://www.alpha.facebook.com/l.php",S="https://m.alpha.facebook.com/l.php",T="https://facebook.com/l.php",U="https://l.facebook.com/l.php",V="https://facebook.com/events/",W="https://www.facebook.com/events/",X="https://www.alpha.facebook.com/events/",Y="https://m.facebook.com/events/",ca="https://m.alpha.facebook.com/events/",da="fb-messenger://payments/receipt?product_id=",ea="messenger://location_share",fa="http://m.me/",ga=":",ha="http://",ia="https://";function a(a){var b=a.chat,e=a.content,f=a.ebTimestampMs,g=a.meta,h=a.metadata;a=a.protobuf;var n=d("MAWParseArmadilloProtocol").parseOneOfContentType(e);n=n==="paymentsTransactionMessage";var o=null;if(n){var p;o=(p=e.paymentsTransactionMessage)==null?void 0:p.extendedContentMessage}else o=e.extendedContentMessage;if(o==null&&n)return"paymentsTransactionMessage";if(o==null)throw c("FBLogger")("messenger_web").mustfixThrow("extendedContentMessage has no content");p=o;e=p.targetType;p=p.xmaDataclass;var q=d("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(g.id.externalId);p!=null&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_dataclass.exists."+(e!=null?e:"null")});if(e==null||!d("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:e,xmaDataclass:p}))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:{ack:g.ack,id:g.id,msgContent:{protobuf:d("WAHex").bytesToBuffer(a),subtype:ka(e,p,n)},reportingMeta:g.reportingMeta,sentTs:g.sentTs,serverTs:g.serverTs,ts:g.ts,type:d("MAWMsgType").MSG_TYPE.FUTUREPROOF},unstoredQuotedMedia:null,unstoredXMA:null,xmaTargetTypeForLogging:e};n=d("WAParseProtocolUtils").parseEphemerality(g,h);var r=n.deleteTs,s=n.ephemeralSetting;n=n.expirationTs;var t=d("WAParseProtocolUtils").enhanceReportingMeta(g,h),w=o,x=w.associatedMessage,y=w.commands,z=w.contentRef,A=w.ctas,B=w.favicon,C=w.headerImage,D=w.headerTitle,E=w.maxSubtitleNumOfLines,F=w.maxTitleNumOfLines,G=w.mentionedJid,H=w.messageText,I=w.overlayDescription,J=w.overlayIconGlyph,K=w.overlayTitle,L=w.previews,M=w.sentWithMessageId,N=w.subtitleText,O=w.targetId,P=w.targetUsername,Q=w.titleText;w=w.xmaLayoutType;x!=null&&(x.version==null||x.version<d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["\n      received associatedMessage version is older than expected "," as expected. "])),d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION);C!=null&&(C.version==null||C.version<d("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["\n    received headerImage version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION);B!=null&&(B.version==null||B.version<d("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["\n    received favicon version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION);L.every(function(a){(a.version==null||a.version<d("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(l||(l=babelHelpers.taggedTemplateLiteralLoose(["\n      received previews version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)});o=o.targetExpiringAtSec!=null?d("WATimeUtils").castLongIntToUnixTime(o.targetExpiringAtSec):void 0;var R=x!=null&&M!=null?[d("WAStanzaUtils").toStanzaId(M),g.id.externalId]:[g.id.externalId,void 0],S=R[0];R=R[1];var T=[];if(L!=null)for(var U=0;U<L.length;U++){var V,W=v(L[U],g.ts);W!=null&&!((e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE||e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE)&&W.mediaType===d("WAMedia").MEDIA_TYPE.IMAGE&&((V=W.validatedImageInfo)==null?void 0:V.height)===1&&((V=W.validatedImageInfo)==null?void 0:V.width)===1)&&T.push(W)}V=v(C,g.ts);W=v(B,g.ts);L=(U=d("WAParseConsumerMessageProtocol").parsedQuotedConsumerMessage(h))!=null?U:void 0;var X;if(d("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(p))try{X=d("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(p)}catch(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_validation."+q+"."+(e||0)+".error"});throw c("FBLogger")("messenger_web").mustfixThrow("Unexpected error trying to parse collapsible ID: "+a.message)}C=babelHelpers["extends"]({collapsibleId:X,deleteTs:r,ebTimestampMs:f,ephemeralSetting:s,expirationTs:n,id:babelHelpers["extends"]({},g.id,{externalId:S}),quote:L,reportingMeta:t,type:d("MAWMsgType").MSG_TYPE.XMA},g);B=A.map(function(a){a.actionContentBlob;a=babelHelpers.objectWithoutPropertiesLoose(a,aa);return a});U=B.slice(1);e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE&&A.length===1&&(U=B);q=e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT;r={author:g.id.author,commands:y,contentRef:z,ctas:U,defaultCTA:B[0],externalId:S,faviconMediaId:q?V==null?void 0:V.plaintextHash:W==null?void 0:W.plaintextHash,headerMediaId:q?W==null?void 0:W.plaintextHash:V==null?void 0:V.plaintextHash,headerTitle:D,isTombstoned:o!=null?d("WATimeUtils").unixTime()>o:!1,maxSubtitleNumOfLines:E,maxTitleNumOfLines:F,mentionedJids:G.map(d("WAJids").validateUserJid).filter(Boolean),overlayDescription:I,overlayIconGlyph:J,overlayTitle:K,previewMediaIds:T.length>0?T.map(function(a){return a.plaintextHash}):void 0,sentWithMessage:H,subtitleText:N,targetExpiringAtSec:o,targetId:O,targetType:e,targetUsername:P,threadJid:b,titleText:Q,xmaDataclass:p,xmaLayoutType:w};var Y;if(x!=null&&M==null)throw c("FBLogger")("messenger_web").mustfixThrow("XMA associatedMessage cannot be received without sentWithMessageId field");x!=null&&R!=null&&(Y=ba(b,x,g,a,h));n=(s=(f=Y)==null?void 0:f.unstoredMedia)!=null?s:null;L=u.has(e);if(n!=null&&!L){t=d("MAWXMALoggingUtils").getXmaTargetTypeStringFromEnum(e);d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"assoc_msg_media_"+(t!=null?t:"unknown")});throw c("FBLogger")("messenger_web").mustfixThrow("XMA associated msg cannot have additioinal dbMedia")}z=(y=(A=Y)==null?void 0:A.unstoredMsg)!=null?y:null;R!=null&&z!=null&&(d("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["ExternalId: "," textId: ",""])),S,R),z.id=babelHelpers["extends"]({},z.id,{externalId:R}),C.id=babelHelpers["extends"]({},z.id,{externalId:S}),r.externalId=S);if(L&&n!=null&&((z==null?void 0:z.type)==="Gif"||(z==null?void 0:z.type)==="Sticker"))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:C,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:n,unstoredAssociatedMsg:z,unstoredFavicon:q?T[0]:W,unstoredHeaderMedia:V,unstoredPreviews:T.length>0?T:void 0,xma:r},xmaTargetTypeForLogging:e};if(z!=null&&z.type!=="Text")throw c("FBLogger")("messenger_web").mustfixThrow('XMA associated msg cannot have type different from "Text". Received type: '+z.type);return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:C,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:z,unstoredFavicon:q?T[0]:W,unstoredHeaderMedia:V,unstoredPreviews:T.length>0&&!q?T:void 0,xma:r},xmaTargetTypeForLogging:e}}function ja(a){var b=a.ebRestore,c=a.hasActionUrl,e=a.hasNativeUrl,f=a.isActionUrlValid,g=a.isNativeUrlValid;a=a.targetType;!g&&!f?d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action and native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c):g&&!f?d("WALogger").ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c):f&&!g&&d("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c)}function b(a,b,c){var d=a.nativeUrl;a=a.actionUrl;var e=Z(d,b,c),f=Z(a,b,c);ja({ebRestore:c,hasActionUrl:a!=null,hasNativeUrl:d!=null,isActionUrlValid:f,isNativeUrlValid:e,targetType:b});return e&&f}function ka(a,b,c){c===void 0&&(c=!1);if(a==null)return null;if(c)return"paymentsTransactionMessage";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(b)?"liveLocationMessage":"locationMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}function Z(a,b,c,e){e===void 0&&(e=!1);if(a==null)return!0;if(oa(a,b)===!1){c!=null&&c&&!e&&d("WALogger").ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid url prefix during XMA restore"])));return!1}if(!pa(a)){c!=null&&c&&!e&&d("WALogger").ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid message text during XMA restore"])));return!1}return!0}function la(a){return a.startsWith(B)||a.startsWith(C)||a.startsWith(D)||a.startsWith(E)||a.startsWith(F)}function ma(a){return a.startsWith(P)||a.startsWith(Q)||a.startsWith(R)||a.startsWith(S)||a.startsWith(T)||a.startsWith(U)}function $(a){return a.startsWith(J)||a.startsWith(K)||a.startsWith(L)||a.startsWith(M)||a.startsWith(N)}function na(a){return a.startsWith(V)||a.startsWith(W)||a.startsWith(X)||a.startsWith(Y)||a.startsWith(ca)}function oa(a,b){if(a==null)return!0;switch(b){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return a.startsWith(w);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return a.startsWith(x);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:return a.startsWith(y);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:return a.startsWith(z);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_PROFILE_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_IG_MEDIA_SHARE:return a.startsWith(A);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return a.startsWith(H)||a.startsWith(G)||la(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return $(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return a.startsWith(I);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return($(a)||a.startsWith(O))&&!ma(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return a.startsWith(ea);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:return na(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return na(a)||la(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return $(a)||a.startsWith(fa);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_EXTERNAL_LINK:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:if(a.includes(ga)&&(!a.startsWith(ha)&&!a.startsWith(ia))){b=a.indexOf("://");b===-1&&d("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(['S410301 The url is invalid. It contains a colon separator, but not "://"'])));return!1}break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_RECEIVER_FETCH:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.DATACLASS_SENDER_COPY:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_P2P_PAYMENT:return a.startsWith(da)}return!0}function pa(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);switch(c){case"\u202c":case"\u202d":case"\u202e":d("WALogger").ERROR(t||(t=babelHelpers.taggedTemplateLiteralLoose(["S410301 The url contains RTL characters"])));return!1;default:break}}return!0}g.SUPPORTED_XMA_ASSOC_MEDIA_TARGET_TYPES=u;g.kIGStoryCtaPrefix=w;g.kIGClipsCtaPrefix=x;g.kIGTVCtaPrefix=y;g.kIGShopCtaPrefix=z;g.kIGDefaultCtaPrefix=A;g.kFBStoryCtaPrefix=H;g.kFBGamingCustomUpdateCtaPrefix=I;g.kFBDefaultWWWCtaPrefix=J;g.kFBEventCtaPrefix=V;g.kMSGP2PPaymentUrlPrefix=da;g.kMessengerLocationSharePrefix=ea;g.kHttpPrefix=ha;g.parseXMAProtocol=a;g.isValidCTA=b;g.getUnsupportedMessageType=ka;g.isURLValid=Z}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.name="Subprotocol";a.internalSpec={payload:[1,d("WAProtoConst").TYPES.BYTES],version:[2,d("WAProtoConst").TYPES.INT32]};g.SubprotocolSpec=a}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.name="BackupMessage";a.internalSpec={metadata:[1,(e=d("WAProtoConst")).TYPES.MESSAGE,b],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}};b.name="BackupMessage$Metadata";b.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32]};c.name="BackupMessage$Metadata$FrankingMetadata";c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]};g.BackupMessageSpec=a;g.BackupMessage$MetadataSpec=b;g.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.name="LocallyTransformedMessage";a.internalSpec={pollUpdateMessage:[1,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{content:["pollUpdateMessage"]}};b.name="LocallyTransformedMessage$PollUpdateAdminMessage";b.internalSpec={pollCreationMessageId:[1,d("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,d("WAProtoConst").TYPES.STRING]};g.LocallyTransformedMessageSpec=a;g.LocallyTransformedMessage$PollUpdateAdminMessageSpec=b}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2});e=a({UNSET:0,CHANGED:1,REMOVED:2});f=a({UNSET:0,PINNED:1,UNPINNED:2});b=a({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2});var h=a({UNSET:0,ADDED:1,REMOVED:2});a=a({UNSET:0,ADDED:1,REMOVED:2});var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={};i.name="MiTransportAdminMessage";i.internalSpec={chatThemeChanged:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,w],nicknameChanged:[2,d.TYPES.MESSAGE,v],groupParticipantChanged:[3,d.TYPES.MESSAGE,u],groupAdminChanged:[4,d.TYPES.MESSAGE,t],groupNameChanged:[5,d.TYPES.MESSAGE,s],groupMembershipAddModeChanged:[6,d.TYPES.MESSAGE,r],messagePinned:[7,d.TYPES.MESSAGE,q],groupImageChanged:[8,d.TYPES.MESSAGE,p],quickReactionChanged:[9,d.TYPES.MESSAGE,o],linkCta:[10,d.TYPES.MESSAGE,m],iconChanged:[11,d.TYPES.MESSAGE,l],disappearingSettingChanged:[12,d.TYPES.MESSAGE,k],limitSharingChanged:[13,d.TYPES.MESSAGE,j],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged"]}};j.name="MiTransportAdminMessage$LimitSharingChanged";j.internalSpec={sharingType:[1,d.TYPES.ENUM,c]};k.name="MiTransportAdminMessage$DisappearingSettingChanged";k.internalSpec={disappearingSettingDurationSeconds:[1,d.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,d.TYPES.INT32]};l.name="MiTransportAdminMessage$IconChanged";l.internalSpec={threadIcon:[1,d.TYPES.STRING]};m.name="MiTransportAdminMessage$LinkCta";m.internalSpec={ukOsaAdminText:[1,d.TYPES.MESSAGE,n],__oneofs__:{content:["ukOsaAdminText"]}};n.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText";n.internalSpec={initiatorUserId:[2,d.TYPES.STRING]};o.name="MiTransportAdminMessage$QuickReactionChanged";o.internalSpec={emojiName:[1,d.TYPES.STRING]};p.name="MiTransportAdminMessage$GroupImageChanged";p.internalSpec={action:[1,d.TYPES.ENUM,e]};q.name="MiTransportAdminMessage$MessagePinned";q.internalSpec={action:[1,d.TYPES.ENUM,f]};r.name="MiTransportAdminMessage$GroupMembershipAddModeChanged";r.internalSpec={mode:[1,d.TYPES.ENUM,b]};s.name="MiTransportAdminMessage$GroupNameChanged";s.internalSpec={groupName:[1,d.TYPES.STRING]};t.name="MiTransportAdminMessage$GroupAdminChanged";t.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,h]};u.name="MiTransportAdminMessage$GroupParticipantChanged";u.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,a]};v.name="MiTransportAdminMessage$NicknameChanged";v.internalSpec={targetUserId:[1,d.TYPES.STRING],nickname:[2,d.TYPES.STRING]};w.name="MiTransportAdminMessage$ChatThemeChanged";w.internalSpec={themeName:[1,d.TYPES.STRING],themeEmoji:[2,d.TYPES.STRING],themeType:[3,d.TYPES.INT32]};g.MiTransportAdminMessage$LimitSharingChanged$SharingType=c;g.MiTransportAdminMessage$GroupImageChanged$Action=e;g.MiTransportAdminMessage$MessagePinned$Action=f;g.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=b;g.MiTransportAdminMessage$GroupAdminChanged$Action=h;g.MiTransportAdminMessage$GroupParticipantChanged$Action=a;g.MiTransportAdminMessageSpec=i;g.MiTransportAdminMessage$LimitSharingChangedSpec=j;g.MiTransportAdminMessage$DisappearingSettingChangedSpec=k;g.MiTransportAdminMessage$IconChangedSpec=l;g.MiTransportAdminMessage$LinkCtaSpec=m;g.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=n;g.MiTransportAdminMessage$QuickReactionChangedSpec=o;g.MiTransportAdminMessage$GroupImageChangedSpec=p;g.MiTransportAdminMessage$MessagePinnedSpec=q;g.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=r;g.MiTransportAdminMessage$GroupNameChangedSpec=s;g.MiTransportAdminMessage$GroupAdminChangedSpec=t;g.MiTransportAdminMessage$GroupParticipantChangedSpec=u;g.MiTransportAdminMessage$NicknameChangedSpec=v;g.MiTransportAdminMessage$ChatThemeChangedSpec=w}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2});c=b("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3});e=b("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2});f={};b={};var h={},i={},j={};f.name="TransportEvent";f.internalSpec={placeholder:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,j],event:[2,d.TYPES.MESSAGE,b],__oneofs__:{content:["placeholder","event"]}};b.name="TransportEvent$Event";b.internalSpec={deviceChange:[1,d.TYPES.MESSAGE,i],icdcAlert:[2,d.TYPES.MESSAGE,h],__oneofs__:{event:["deviceChange","icdcAlert"]}};h.name="TransportEvent$Event$IcdcAlert";h.internalSpec={type:[1,d.TYPES.ENUM,a]};i.name="TransportEvent$Event$DeviceChange";i.internalSpec={type:[1,d.TYPES.ENUM,c],deviceName:[2,d.TYPES.STRING],devicePlatform:[3,d.TYPES.STRING],deviceModel:[4,d.TYPES.STRING]};j.name="TransportEvent$Placeholder";j.internalSpec={type:[1,d.TYPES.ENUM,e]};g.TransportEvent$Event$IcdcAlert$Type=a;g.TransportEvent$Event$DeviceChange$Type=c;g.TransportEvent$Placeholder$Type=e;g.TransportEventSpec=f;g.TransportEvent$EventSpec=b;g.TransportEvent$Event$IcdcAlertSpec=h;g.TransportEvent$Event$DeviceChangeSpec=i;g.TransportEvent$PlaceholderSpec=j}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a instanceof ArrayBuffer)return a;else return d("WAByteArray").uint8ArrayToBuffer(a)}var i=function(a){var b;this.kind="imageTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(b=a.image)==null?void 0:b.payload);this.caption=a.caption},j=function(a){var b;this.kind="audioTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(b=a.audio)==null?void 0:b.payload);this.ptt=a.ptt},k=function(a){var b;this.kind="videoTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=a.video)==null?void 0:b.payload);this.caption=a.caption},l=function(a){var b;this.kind="documentTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=a.document)==null?void 0:b.payload);this.fileName=a.fileName},m=function(a){this.kind="stickerTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(a=a.sticker)==null?void 0:a.payload)},n=function(a){var b=this,e;this.kind="extendedContentMessage";this.favicon=(e=c("memoize"))(function(){var a;return((a=b.payload)==null||(a=a.favicon)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null||(a=a.favicon)==null?void 0:a.payload)});this.headerImage=e(function(){var a;return((a=b.payload)==null||(a=a.headerImage)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null||(a=a.headerImage)==null?void 0:a.payload)});this.previews=e(function(){var a;return(a=(a=b.payload)==null||(a=a.previews)==null?void 0:a.map(function(a){return d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,a.payload)}))!=null?a:[]});this.associatedMessage=e(function(){var a=b.payload.associatedMessage;return(a==null?void 0:a.payload)==null?null:new q(a.payload)});this.payload=a},o=function(){function a(a){this.kind="armadillo",this.bytes=h(a),this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloApplication.pb").ArmadilloSpec,a),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var b=a.prototype;b.extendedContentMessage=function(){var a;a=(a=this.payload)==null||(a=a.content)==null?void 0:a.extendedContentMessage;return a==null?null:new n(a)};return a}(),p=function(a){var b=this,e;this.kind="consumerApplication";this.imageMessage=(e=c("memoize"))(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.imageMessage;if(a==null)return;return new i(a)});this.audioMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.audioMessage;if(a==null)return;return new j(a)});this.videoMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.videoMessage;if(a==null)return;return new k(a)});this.documentMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.documentMessage;if(a==null)return;return new l(a)});this.stickerMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.stickerMessage;if(a==null)return;return new m(a)});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a);this.payload=this.proto.payload;this.metadata=this.proto.metadata},q=function(){function a(a){var b=this;this.kind="messageApplication";this.subProtocol=c("memoize")(function(){var a=d("WAParseMessageApplication").parseMessageApplication(b.proto);if(a.payload!=null){var c=a.payload;switch(a.subprotocolType){case"consumerMessage":return new p(c);case"armadillo":return new o(c);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:a.subprotocolType}}});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a)}var b=a.prototype;b.consumerMessage=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="consumerApplication"?null:a};b.armadillo=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="armadillo"?null:a};return a}(),r=function(a){this.kind="transportEvent",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloTransportEvent.pb").TransportEventSpec,a)},s=function(a){this.kind="locallyTransformedMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,a)},t=function(a){this.kind="adminMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,a)},u="SKIP_CACHE",v=function(){function a(a,b){var e=this;this.payload=c("memoize")(function(){if(e.proto.encryptedTransportEvent!=null)return new r(c("nullthrows")(e.proto.encryptedTransportEvent.payload));else if(e.proto.encryptedTransportLocallyTransformedMessage!=null)return new s(c("nullthrows")(e.proto.encryptedTransportLocallyTransformedMessage.payload));else if(e.proto.encryptedTransportMessage!=null)return new q(c("nullthrows")(e.proto.encryptedTransportMessage));else if(e.proto.miTransportAdminMessage!=null)return new t(c("nullthrows")(e.proto.miTransportAdminMessage.payload));throw c("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")});this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a)}var b=a.prototype;b.encryptedTransportMessage=function(){var a=this.payload();if(a.kind!=="messageApplication")return;return a};b.encryptedTransportEvent=function(){var a=this.payload();if(a.kind!=="transportEvent")return;return a};b.locallyTransformedMessage=function(){var a=this.payload();if(a.kind!=="locallyTransformedMessage")return;return a};b.adminMessage=function(){var a=this.payload();if(a.kind!=="adminMessage")return;return a};return a}();v.create=c("memoizeWithArgsWeak")(function(a){return new v(a,u)});g.DeserializedImageMessage=i;g.DeserializedAudioMessage=j;g.DeserializedVideoMessage=k;g.DeserializedDocumentMessage=l;g.DeserializedStickerMessage=m;g.DeserializedExtendedContentMessage=n;g.DeserializedConsumerApplication=p;g.DeserializedMessageApplication=q;g.DeserializedTransportEvent=r;g.DeserializedLocallyTransformedMessage=s;g.DeserializedAdminMessage=t;g.DeserializedBackupMessage=v}),98);
__d("MpsToBridgeMessageId",["MAWDbMsg","MpsTypes","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("nullthrows")(d("MAWDbMsg").toMsgId(a+"_"+b+"_m"))}function b(a){a=a.split("_");var b=a[0];a=a[1];return{messageId:d("MpsTypes").toMessageId(a),threadId:d("MpsTypes").toThreadId(b)}}g.mpsToBridgeMsgId=a;g.bridgeMsgIdToMps=b}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAJids").createJidUtils({platform:"msgr"});a=function(){function a(a,b){this.message=a,this.topLevel=b}a.fromTopLevel=function(b){return new a(b,b)};a.fromSupplemental=function(b,e){var f=d("MAWProtobufDeserializers").DeserializedBackupMessage.create(b.payload);f={messageId:b.messageId,payload:b.payload,senderId:c("nullthrows")((f=f.proto.metadata)==null?void 0:f.senderId),threadId:e.threadId,timestampMs:b.timestampMs};return new a(f,e)};var b=a.prototype;b.getChatJid=function(){return d("WAJids").unsafeCoerceToChatJid(this.message.threadId)};b.getExternalId=function(){return this.message.messageId};b.getMsgId=function(){return d("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)};b.getSenderJid=function(){return h.toUserJid(this.message.senderId)};b.topLevelMetadata=function(){return a.fromTopLevel(this.topLevel)};b.isAuthorMe=function(){return d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())===this.message.senderId};b.getAuthor=function(){return this.isAuthorMe()?d("WAJids").AUTHOR_ME:this.getSenderJid()};b.getUnixTs=function(){return d("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)};b.deserialize=function(){return d("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)};return a}();g.MpsMessageToBridgeWrapper=a}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("I64"))).of_string("4194303");function a(){return(h||(h=d("I64"))).to_string(j())}function j(){var a=d("XPlatReactCrypto").getRandomValues(new Uint8Array(8));a=new DataView(a.buffer);a=(h||(h=d("I64"))).add(h.lsl_(h.of_int32(a.getUint32(0)),32),h.of_int32(a.getUint32(4)));return k(Date.now(),a)}function k(a,b){return(h||(h=d("I64"))).and_(h.or_(h.lsl_(h.of_float(a),22),h.and_(b,i)),h.max_int)}function b(a){var b=j(),c=[];for(var e=0;e<a.length;e++)c.push([a[e],(h||(h=d("I64"))).to_string(b)]),b=l(b);return c}function l(a,b){b===void 0&&(b=(h||(h=d("I64"))).one);var c=m(a);a=n(a);return k(c,(h||(h=d("I64"))).add(a,b))}function m(a){return(h||(h=d("I64"))).to_float(h.lsr_(a,22))}function n(a){return(h||(h=d("I64"))).and_(a,i)}g.createOfflineThreadingID=a;g.createForItemsInOrder=b;g.createNewFromExisting=l;g.extractTimestamp=m}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("WAMediaQplHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null||a<0||a>1e3*1024*1024)return"invalid_size";else if(a===0)return"size equal to 0KB";else if(a<=1*1024)return"size lower than 1 KB";else if(a<=50*1024)return"size between 1 KB and 50 KB";else if(a<=100*1024)return"size between 50 KB and 100 KB";else if(a<=500*1024)return"size between 100 KB and 500 KB";else if(a<=1*1024*1024)return"size between 500 KB and 1 MB";else if(a<=2*1024*1024)return"size between 1 MB and 2 MB";else if(a<=5*1024*1024)return"size between 2 MB and 5 MB";else if(a<=10*1024*1024)return"size between 5 MB and 10 MB";else if(a<=20*1024*1024)return"size between 10 MB and 20 MB";else if(a<=25*1024*1024)return"size between 20 MB and 25 MB";else if(a<=30*1024*1024)return"size between 25 MB and 30 MB";else if(a<=50*1024*1024)return"size between 30 MB and 50 MB";else if(a<=75*1024*1024)return"size between 50 MB and 75 MB";else if(a<=100*1024*1024)return"size between 75 MB and 100 MB";else return"size above 100 MB"}f.convertIntegerSizeToStringBucket=a}),66);
__d("WAPREList",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",CREATE_GROUP:"create_group",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DELETE_THREAD:"delete_thread",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",EBDB_INIT:"ebdb_init",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",REMOVE_PARTICIPANTS:"remove_participants",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});f.PRE_METRIC=a}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;c=6e4;e=18e4;f=10*60*1e3;var k=0;function a(){var c=[];function e(a){c.push(a)}function b(){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),c.length=0}function a(a){c.length===0&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),a.name,a.stage),c.forEach(function(b){b(a)})}return{subscribe:e,notify:a,clear:b}}a=a();var l=a.notify,m=a.clear;a=a.subscribe;var n;"FinalizationRegistry"in self&&"WeakRef"in self&&(n=new FinalizationRegistry(function(a){var b=a.event;a=a.eventFlow;if(a.isActive())try{d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),b)}catch(a){}}));var o=new Set([d("WAPREList").PRE_METRIC.SEND_MESSAGE,d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function b(a,b,c,d){c==null&&k++;var e=c!=null?c:k,f="open";c==null?l({name:a,stage:"START",instanceKey:e,annotations:b,timeoutInMs:d}):l({name:a,stage:"RESUME",instanceKey:e,annotations:b});var g;function h(){if(g!=null){var a=g.deref();if(a!=null){var b;(b=n)==null||b.unregister(a)}}}d={addPoint:function(c,b){l({name:a,stage:"POINT",reason:c,instanceKey:e,annotations:b})},addAnnotations:function(b){l({name:a,stage:"ANNOTATE",instanceKey:e,annotations:b})},endSuccess:function(b){l({name:a,stage:"SUCCESS",instanceKey:e,annotations:b}),f="closed",h()},endCancel:function(b){l({name:a,stage:"CANCEL",instanceKey:e,annotations:b}),h()},endFail:function(c,b){l({name:a,stage:"FAIL",reason:c,instanceKey:e,annotations:b}),f="closed",h()},getFlowDetails:function(){return{name:a,instanceKey:e}},isActive:function(){return f==="open"}};n&&!o.has(a)&&c==null&&(n.register(d,{event:a,eventFlow:{endCancel:d.endCancel,isActive:d.isActive}}),g=new WeakRef(d));return d}g.QPL_DEFAULT_TIMEOUT_IN_MS=c;g.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=e;g.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=f;g.clear=m;g.subscribe=a;g.startMetric=b}),98);
__d("WAWaitForUserUnblocked",["WAResolvable","WorkerScheduler"],(function(a,b,c,d,e,f,g){"use strict";f=2*60*1e3;var h=new(d("WAResolvable").Resolvable)(),i=d("WorkerScheduler").makeScheduler("offline-queue",{concurrency:1,maxConcurrency:1,defaultSamplingRate:1e3,timeToStuckMs:f});function a(){h.resolveWasCalled()&&(h=new(d("WAResolvable").Resolvable)(),j())}function j(){void i.runTask({name:"offline-queue",fn:function(){return h.promise},priority:d("WorkerScheduler").BLOCKING_PRIORITY})}function b(){return h.promise}function c(){h.resolve()}function e(){return!h.resolveWasCalled()}g.maybeResetWaitForUserUnblocked=a;g.markOfflineQueueAsStarted=j;g.waitForUserUnblocked=b;g.unblockUser=c;g.isStillWaitingForUserUnblocked=e}),98);
__d("getMediaTypeFromConsumerMessage",["WAMediaTransport.pb","decodeProtobuf","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e,f=a==null||(b=a.payload)==null?void 0:b.content;if((f==null?void 0:f.audioMessage)!=null)return"ptt";if((f==null?void 0:f.videoMessage)!=null){var g,h,i,j=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,f==null||(g=f.videoMessage)==null||(g=g.video)==null?void 0:g.payload);return(j==null||(h=j.ancillary)==null?void 0:h.gifPlayback)===!0||(j==null||(i=j.ancillary)==null?void 0:i.gifAttribution)!=null?"gif":"video"}if((f==null?void 0:f.documentMessage)!=null)return"document";if((f==null?void 0:f.stickerMessage)!=null)return"sticker";if((f==null?void 0:f.imageMessage)!=null)return"image";j=a==null||(e=a.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;if(j!=null&&c("qex")._("310")===!0)return"xma-image";return}g.getMediaTypeFromConsumerMessage=a}),98);
__d("isMWBumpMessage",["EntMessageReplyType","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP))}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("AudioSettingsVolumeSetting",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",QUIET:"quiet"});f["default"]=a}),66);
__d("AutoplayRulesEngine",[],(function(a,b,c,d,e,f){"use strict";var g=-2,h=-1;a=function(){function a(a){this.$1=g,this.$2=a}var b=a.prototype;b.evaluateAutoplay=function(a,b){b=b();var c=h;if(a)for(var d=0;d<this.$2.length;d++){var e=this.$2[d](a);if(e!=="SKIP"){b=e;c=d;break}}this.$1=c;return b};b.getIndexOfLastWinningRule=function(){return this.$1};b.getRules=function(){return this.$2};return a}();f["default"]=a}),66);
__d("CVCv3DisabledPlayerOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});f["default"]=a}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({LIVE_BEEPER:"live_beeper"});f["default"]=a}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1856513");b=d("FalcoLoggerInternal").create("cvc_v3_http_event",a);e=b;g["default"]=e}),98);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$1=a,this.$2=c("guid")(),this.$3=(b!=null?b:"null")+"::"+(d!=null?d:"null"),this.$4=null,this.$5=null}var b=a.prototype;b.isValidSubscription=function(){return!!this.$1};b.makeCVCv3StateUpdate=function(a,b,c,e){var f=null;a!=null&&!Number.isNaN(a)&&b!=null&&!Number.isNaN(b)&&(f={m:e,pf:Math.floor((b-a)*d("DateConsts").MS_PER_SEC),s:c,sa:Math.floor(a*d("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};b.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return babelHelpers["extends"]({},a,e)};b.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};b.clearAnyPreviousContext=function(){this.$4=null};b.logHttpRequestSuccess=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpRequestFailure=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logHttpRequestTimeout=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpResponseBad=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logDebugInfo=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:a,countable_id:b.$1}})};return a}();g["default"]=a}),98);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("CometAudioManagerContexts").AudioApiContext);return a}g.useAudioApi=a}),98);
__d("CometVideoPlayerInstreamAdsFeedContextCardContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext({isWatchTab:!1,onNodeChangeFunc:null});function a(){return i(j)}g.CometVideoPlayerInstreamAdsFeedContextCardContext=j;g.useCometVideoPlayerInstreamAdsFeedContextCardContext=a}),98);
__d("CometVideoPlayerNextgendashAvailability",[],(function(a,b,c,d,e,f){a=Object.freeze({AVAILABLE:"AVAILABLE",UNAVAILABLE_NEXTGENDASH_GK:"UNAVAILABLE_NEXTGENDASH_GK",UNAVAILABLE_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5",UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER",UNAVAILABLE_FROM_JS_NEXTGENDASH_GK:"UNAVAILABLE_FROM_JS_NEXTGENDASH_GK",UNAVAILABLE_FROM_JS_NOT_DESIRED:"UNAVAILABLE_FROM_JS_NOT_DESIRED"});f["default"]=a}),66);
__d("makeAudioSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b+"::"+a}f["default"]=a}),66);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","createVideoStateHook","makeAudioSymbol","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useContext,k=b.useEffect,l=b.useId,m=b.useMemo,n=b.useRef,o=b.useState;e=d("createVideoStateHook").createVideoStateHook();var p=e.stateHook,q=200;function r(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=o(function(){return a.getCurrentState().volume}),e=b[0],f=b[1],g=m(function(){return c("CometThrottle")(function(a){f(a)},q,{trailing:!0})},[]);k(function(){var b=a.subscribe(function(){var b=a.getCurrentState().volume;g(b)});g(a.getCurrentState().volume);return function(){b.remove(),g.cancel()}},[a,g]);return e}function a(){var a=p(!1),b=a[0],e=a[1],f=l(),g=(i||(i=d("VideoPlayerHooks"))).useInstanceKey(),h=m(function(){return c("makeAudioSymbol")(f,g)},[f,g]),q=d("CometAudioManagerHooks").useAudioApi(),s=n(q);k(function(){s.current=q},[q]);var t=i.useController(),u=i.useLastPlayReason(),v=i.useLastMuteReason(),w=i.useMuted(),x=r(),y=c("usePrevious")(x),z=i.usePaused(),A=j(d("CometAudioManagerContexts").CometAudioLocalScopeContext),B=j(d("CometAudioManagerContexts").CometAudioGroupContext),C=d("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),D=i.useVolumeSetting(),E=m(function(){return(B==null?void 0:B.groupID)||d("CometAudioManagerContexts").makeAudioGroupID()},[B==null?void 0:B.groupID]);a=o(!0);var F=a[0],G=a[1],H=m(function(){return{audioLocalScope:A,controller:t,groupID:E,instanceKey:g,lastMuteReason:v,lastPlayReason:u,muted:w,paused:z,previousVolume:y,symbol:h,videoPlayerPortalingPlaceInfo:C,volume:x}},[A,t,E,g,v,u,w,z,y,h,C,x]);k(function(){if(D!=null&&b!==!0){t.setVolume(D);e(!0);return}},[t,b,e,D]);a=m(function(){return B||{allowSound:F,groupID:E,setAllowSound:G}},[B,F,E,G]);var I=n(a);k(function(){q&&q.register(H,I.current);return function(){q&&q.unregister(h,E)}},[q,H,E,h]);k(function(){q&&q.update(H)},[q,H]);k(function(){!F&&s.current&&t.setMuted(!0,"audio_manager_initiated")},[F,s,t]);return null}g["default"]=a}),98);
__d("VideoPlayerAutoplayHooks",["VideoPlayerAutoplayContexts","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("VideoPlayerAutoplayContexts").AutoplayApiContext);if(a==null)throw c("unrecoverableViolation")("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?","comet_video_player");return a}function b(){return i(d("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}g.useAutoplayApi=a;g.useVideoAutoplayLocalScope=b}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";d=(a=b("cr:1453865"))!=null?a:{useVideoPlayerDebugAPI:c("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:c("emptyFunction"),useVideoPlayerDebugInfo:c("emptyFunction").thatReturns(null)};g["default"]=d}),98);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(a,b,c,d,e,f){"use strict";function a(){return"ALLOW"}a.displayName="evaluateVideoAutoplayDefaultRule";f["default"]=a}),66);
__d("makeSelectedAutoplayVideoSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b+"::"+a}f["default"]=a}),66);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(8),e=j(a),f;b[0]!==a?(f=function(){return new(c("AutoplayRulesEngine"))(a)},b[0]=a,b[1]=f):f=b[1];f=k(f);var g=f[0],h=f[1],l;b[2]!==a?(f=function(){e.current!==a&&h(function(){return new(c("AutoplayRulesEngine"))(a)})},l=[a],b[2]=a,b[3]=f,b[4]=l):(f=b[3],l=b[4]);i(f,l);b[5]!==g?(f=function(){e.current=g.getRules()},l=[g],b[5]=g,b[6]=f,b[7]=l):(f=b[6],l=b[7]);i(f,l);return g}g["default"]=a}),98);
__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],(function(a,b,c,d,e,f,g){"use strict";var h;g.useVideoPlayerExtendedPassiveViewabilityInfo=(h||(h=d("VideoPlayerHooks"))).useVideoPlayerExtendedPassiveViewabilityInfo;g.useVideoPlayerPassiveViewabilityInfo=h.useVideoPlayerPassiveViewabilityInfo;g.useVideoPlayerViewabilityInfo=h.useVideoPlayerViewabilityInfo}),98);
__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useInterval"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState,j=5e3;function a(){var a=d("react-compiler-runtime").c(2),b=k,e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=b(),a[0]=e):e=a[0];e=i(e);var f=e[0],g=e[1];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){return g(b())},a[1]=e):e=a[1];c("useInterval")(e,j);return f}function k(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))}g["default"]=a}),98);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerShakaGlobalConfig","VideoPlayerViewabilityHooks","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.startTransition,k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o=b.useState;function a(a){var b=(i||(i=d("VideoPlayerHooks"))).useAdClientToken(),e=i.useAutoplayGatingResult(),f=i.useBroadcastStatus(),g=i.useEnded(),h=i.useIsFrozenPassive(),p=i.useLastPauseReason(),q=i.useLastPlayReason(),r=i.useMuted(),s=i.usePaused(),t=k(c("HiddenSubtreePassiveContext")),u=!b;a=(a==null?void 0:a.noPauseOnBlurOrFocus)===!0||d("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1);a=c("useIsBackgrounded")({noPauseOnBlurOrFocus:a,scrollTerminatesHiddenOrBlurred:u});var v=a.isDocumentHidden,w=a.isDocumentHiddenOrBlurred,x=c("useVideoPlayerBandwidthEstimate")(),y=d("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),z=d("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo();u=o(t.getCurrentState().backgrounded);var A=u[0],B=u[1];a=o(t.getCurrentState().hidden);var C=a[0],D=a[1];l(function(){var a=function(){j(function(){var a=t.getCurrentState();D(a.hidden);B(a.backgrounded)})},b=t.subscribeToChanges(a);a();return function(){b.remove()}},[t,B,D]);u=o(function(){return h.getCurrentState()});var E=u[0],F=u[1];l(function(){var a=h.subscribeToChanges(function(a){F(a)}),b=h.getCurrentState();F(b);return function(){a.remove()}},[h,F]);var G=m(function(){return{adClientToken:b,autoplayGatingResult:e,bandwidthEstimate:x,broadcastStatus:f,controllerIsFrozen:E,currentSubtreeIsBackgrounded:A,currentSubtreeIsHidden:C,ended:g,hiddenSubtreePassive:t,isDocumentHidden:v,isDocumentHiddenOrBlurred:w,isFrozenPassive:h,lastPauseReason:p,lastPlayReason:q,muted:r,paused:s,videoPlayerExtendedPassiveViewabilityInfo:z,videoPlayerPassiveViewabilityInfo:y}},[b,e,x,f,E,A,C,g,t,v,w,h,p,q,r,s,z,y]);a=o(G);var H=a[0],I=a[1],J=n(H);l(function(){J.current=H},[H]);l(function(){var a=!1;for(var b in G)if(Object.prototype.hasOwnProperty.call(G,b)&&G[b]!==J.current[b]){a=!0;break}a&&I(G)},[G,I]);return H}g["default"]=a}),98);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","react-compiler-runtime","useAutoplayRulesEngine","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.useContext,k=b.useEffect,l=b.useId;b.useMemo;var m=b.useRef,n=b.useState;function a(){var a=d("react-compiler-runtime").c(72),b=l(),e=(i||(i=d("VideoPlayerHooks"))).useCanAutoplay(),f=i.useInstanceKey(),g;a[0]!==b||a[1]!==f?(g=c("makeSelectedAutoplayVideoSymbol")(b,f),a[0]=b,a[1]=f,a[2]=g):g=a[2];b=g;var h=b,o=m(h);a[3]!==h?(g=function(){o.current=h},b=[h],a[3]=h,a[4]=g,a[5]=b):(g=a[4],b=a[5]);k(g,b);var p=j(c("HiddenSubtreePassiveContext")),q=i.useController(),r=m(!1),s=d("useConcurrentAutoplayManagementAPI").useAutoplayControlID();a[6]!==s||a[7]!==q?(g=function(){d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[ASSUME CONTROL] "+s),q.registerControllingComponent(s)},b=[q,s],a[6]=s,a[7]=q,a[8]=g,a[9]=b):(g=a[8],b=a[9]);k(g,b);var t=i.useVideoPlayerPassiveViewabilityInfo();a[10]!==q?(g=q.getCurrentState(),a[10]=q,a[11]=g):g=a[11];b=g;g=b.paused;var u=m(g),v=d("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),w=m(v);a[12]!==v?(b=function(){w.current=v},g=[v],a[12]=v,a[13]=b,a[14]=g):(b=a[13],g=a[14]);k(b,g);a[15]!==q||a[16]!==t?(b=function(){var a=q.getCurrentState(),b=a.lastPlayReason;a=a.paused;var d=u.current;u.current=a;var e=t==null?void 0:t.getCurrent();if(e){e=e.visiblePercentage;a=!a&&a!==d;d=e<c("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&e>0;w.current.disableScrollBeforePlayWhenOffscreen!==!0&&a&&b==="user_initiated"&&d&&(r.current=!0)}},a[15]=q,a[16]=t,a[17]=b):b=a[17];var x=b,y=m(x);a[18]!==x?(g=function(){y.current=x},b=[x],a[18]=x,a[19]=g,a[20]=b):(g=a[19],b=a[20]);k(g,b);a[21]!==q||a[22]!==x?(g=function(){var a=q.subscribe(function(){x()});return function(){a.remove()}},b=[q,x],a[21]=q,a[22]=x,a[23]=g,a[24]=b):(g=a[23],b=a[24]);k(g,b);a[25]!==v.noPauseOnBlurOrFocus?(g={noPauseOnBlurOrFocus:v.noPauseOnBlurOrFocus},a[25]=v.noPauseOnBlurOrFocus,a[26]=g):g=a[26];var z=c("useVideoAutoplayState")(g),A=c("useAutoplayRulesEngine")(v.autoplayLocalRules),B=e==="allow"?c("evaluateVideoAutoplayDefaultAllowRule"):c("evaluateVideoAutoplayDefaultIgnoreRule");a[27]!==B?(b=function(){return B},a[27]=B,a[28]=b):b=a[28];g=n(b);b=g[0];var C=g[1];g=n(null);var D=g[0],E=g[1];a[29]!==A||a[30]!==B||a[31]!==z?(g=function(){return A.evaluateAutoplay(z,B)},a[29]=A,a[30]=B,a[31]=z,a[32]=g):g=a[32];g=n(g);var F=g[0],G=g[1];g=n(null);var H=g[0],I=g[1],J=m(F),K=d("VideoPlayerAutoplayHooks").useAutoplayApi(),L=m(K),M;a[33]!==K?(g=function(){L.current=K},M=[K],a[33]=K,a[34]=g,a[35]=M):(g=a[34],M=a[35]);k(g,M);var N=e!=="dangerously_disable_autoplay_management";a[36]!==K||a[37]!==v||a[38]!==q||a[39]!==p||a[40]!==f||a[41]!==N||a[42]!==h?(g=function(){K.register(h,f,v,q,p,N);c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:J.current}});return function(){K.unregister(h),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:J.current}})}},M=[K,v,q,p,f,N,h],a[36]=K,a[37]=v,a[38]=q,a[39]=p,a[40]=f,a[41]=N,a[42]=h,a[43]=g,a[44]=M):(g=a[43],M=a[44]);k(g,M);a[45]!==K||a[46]!==s||a[47]!==A||a[48]!==q||a[49]!==B||a[50]!==p||a[51]!==D||a[52]!==H||a[53]!==h||a[54]!==z||a[55]!==t?(e=function(){var a=function(){var a=A.evaluateAutoplay(z,B);J.current=a;var b=A.getRules(),e=A.getIndexOfLastWinningRule(),f=e>=0?b[e]:B;b=t&&t.getCurrent();e=q.getCurrentState();e=e.paused;(H===null||H!==a)&&(G(a),I(a));if(a==="PAUSE"&&!e&&q.isControllingComponent(s)){e=!0;y.current();if(r.current){r.current=!1;var g=b==null?void 0:b.positionToViewport;g&&q.scrollIntoView(g.top<0);e=!1}if(e){g="[PAUSE] via short-circuit on "+f.name+".";d("CoreVideoPlayerAutoplayClientUtils").log(o.current,g);q.pause("autoplay_initiated");c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:a}})}}(D===null||D!==f)&&(C(function(){return f}),E(function(){return f}),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:a}}));d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[DECISION: "+a+"] from "+f.name);b&&K.update(h,a,b)},b=p.subscribeToChanges(function(a){p.getCurrentState().hidden||p.getCurrentState().backgrounded?q.isControllingComponent(s)||q.unregisterControllingComponent(s):q.registerControllingComponent(s)}),e=t?t.subscribe(function(){p.getCurrentState().hidden||p.getCurrentState().backgrounded?q.isControllingComponent(s)||q.unregisterControllingComponent(s):q.registerControllingComponent(s),a()}):null;a();return function(){b.remove(),e&&e.remove()}},g=[K,s,A,q,B,p,D,H,C,G,E,I,h,z,t],a[45]=K,a[46]=s,a[47]=A,a[48]=q,a[49]=B,a[50]=p,a[51]=D,a[52]=H,a[53]=h,a[54]=z,a[55]=t,a[56]=e,a[57]=g):(e=a[56],g=a[57]);k(e,g);a[58]!==s||a[59]!==F||a[60]!==q?(M=function(){var a=q.isControllingComponent(s),b=q.getCurrentState();b=b.paused;d("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(F,J.current,b,a)&&(d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[PAUSE] the video for "+F),q.pause("autoplay_initiated"),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:L.current.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:F}}))},e=[F,q,s],a[58]=s,a[59]=F,a[60]=q,a[61]=M,a[62]=e):(M=a[61],e=a[62]);k(M,e);a[63]!==s||a[64]!==q?(g=function(){return function(){d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[RELEASE CONTROL] "+s),q.unregisterControllingComponent(s)}},M=[q,s],a[63]=s,a[64]=q,a[65]=g,a[66]=M):(g=a[65],M=a[66]);k(g,M);a[67]!==b||a[68]!==F||a[69]!==v||a[70]!==h?(e={applicableRule:b,autoplayApiRef:L,autoplayDecision:F,autoplayLocalScope:v,symbol:h},a[67]=b,a[68]=F,a[69]=v,a[70]=h,a[71]=e):e=a[71];c("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition(e);return null}g["default"]=a}),98);
__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),c=a.children,e=a.isDesktopPictureInPicture,f=a.isFullscreen;a=a.videoPlayerPassiveViewabilityInfo;var g;b[0]!==c||b[1]!==f?(g=i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:f,children:c}),b[0]=c,b[1]=f,b[2]=g):g=b[2];b[3]!==e||b[4]!==g?(c=i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext.Provider,{value:e,children:g}),b[3]=e,b[4]=g,b[5]=c):c=b[5];b[6]!==c||b[7]!==a?(f=i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:a,children:c}),b[6]=c,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("useBlockCappedListItemWhenPlayingVideo",["CappedListItemContext","err","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b){var e;b=d("react-compiler-runtime").c(4);var f=(e=i(c("CappedListItemContext")))==null?void 0:e.registerBlocker,g;b[0]!==a||b[1]!==f?(e=function(){if(!f)return;var b=null,c=null,d=function(){var d=a.getCurrentState().playing;if(d!==b){b=d;c&&(c(),c=null);if(d){var e;c=f({reason:"playing_video",source:e})}}};d();var e=a.subscribe(d);return function(){e.remove(),c&&(c(),c=null)}},g=[a,f],b[0]=a,b[1]=f,b[2]=e,b[3]=g):(e=b[2],g=b[3]);j(e,g)}g["default"]=a}),98);
__d("useDisableVirtualizationWhenPlayingVideo",["VirtualizationContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b){var e=d("react-compiler-runtime").c(5),f=i(c("VirtualizationContext")),g,h;e[0]!==f||e[1]!==a||e[2]!==b?(g=function(){if(f==null)return;var c=f.createFlag,d=f.createPin,e=null,g=null,h=function(){g==null&&(g=c("HAS_PLAYER","playerInstanceKey: "+b));var f=a.getCurrentState();f.playing||f.stalling?e||(e=d("player "+b+" is playing")):f.isFullscreen?e||(e=d("player "+b+" is fullscreen")):(e==null||e(),e=null)};h();var i=a.subscribe(h);return function(){i.remove(),g==null||g(),g=null,e==null||e(),e=null}},h=[a,b,f],e[0]=f,e[1]=a,e[2]=b,e[3]=g,e[4]=h):(g=e[3],h=e[4]);j(g,h)}g["default"]=a}),98);
__d("wrapWithContextProviders",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){return b.reduceRight(function(a,b){return b(a)},a)}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return function(c){return i.jsx(a.Provider,{value:b,children:c})}}g.wrapWithContextProviders=a;g.makeRenderProviderFn=b}),98);
__d("VideoPlayerComponentContainer.react",["CometSSRRenderingStateHooks","CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:6094","react","react-compiler-runtime","setTimeout","stylex","useBlockCappedListItemWhenPlayingVideo","useDisableVirtualizationWhenPlayingVideo","wrapWithContextProviders"],(function(a,b,c,d,e,f,g){"use strict";var h=["children"],i,j,k,l,m=j||(j=d("react"));e=j;e.useCallback;var n=e.useEffect,o=e.useRef,p=e.useState,q={"default":{height:"x5yr21d",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},hiddenCursor:{cursor:"xjfk50j",$$css:!0}};function r(a){var b=d("react-compiler-runtime").c(10),e=o(a),f,g;b[0]!==a?(f=function(){e.current=a},g=[a],b[0]=a,b[1]=f,b[2]=g):(f=b[1],g=b[2]);n(f,g);f=p(!1);g=f[0];var h=f[1];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){var a=null;return{cleanup:function(){a&&a()},pingNotIdle:function(){a&&a();h(!1);var b=c("setTimeout")(function(){h(!0)},e.current);a=function(){c("clearTimeout")(b),a=null}}}},b[3]=f):f=b[3];f=p(f);f=f[0];var i=f.cleanup;f=f.pingNotIdle;var j,k;b[4]!==i?(j=function(){return i},k=[i],b[4]=i,b[5]=j,b[6]=k):(j=b[5],k=b[6]);n(j,k);b[7]!==g||b[8]!==f?(j={isIdle:g,pingNotIdle:f},b[7]=g,b[8]=f,b[9]=j):j=b[9];return j}function s(){var a=d("react-compiler-runtime").c(18),b=p(!1),c=b[0],e=b[1];b=r(3e3);var f=b.isIdle,g=b.pingNotIdle;a[0]!==g?(b=function(){e(!0),g()},a[0]=g,a[1]=b):b=a[1];b=b;var h;a[2]!==g?(h=function(){e(!1),g()},a[2]=g,a[3]=h):h=a[3];h=h;var i;a[4]!==g?(i=function(){e(!0),g()},a[4]=g,a[5]=i):i=a[5];i=i;var j;a[6]!==g?(j=function(){g()},a[6]=g,a[7]=j):j=a[7];j=j;var k;a[8]!==g?(k=function(){g()},a[8]=g,a[9]=k):k=a[9];k=k;var l;a[10]!==c||a[11]!==f||a[12]!==j||a[13]!==b||a[14]!==h||a[15]!==i||a[16]!==k?(l={isHovering:c,isIdle:f,onMouseDown:j,onMouseEnter:b,onMouseLeave:h,onMouseMove:i,onMouseUp:k},a[10]=c,a[11]=f,a[12]=j,a[13]=b,a[14]=h,a[15]=i,a[16]=k,a[17]=l):l=a[17];return l}function aa(a){var b=d("react-compiler-runtime").c(16);a=a.children;var e=s(),f=e.isHovering,g=e.isIdle,h=e.onMouseDown,j=e.onMouseEnter,n=e.onMouseLeave,o=e.onMouseMove;e=e.onMouseUp;var p=(l||(l=d("VideoPlayerHooks"))).useIsFullscreen();p=p&&g&&q.hiddenCursor;var r;b[0]!==p?(r=(i||(i=c("stylex")))(q["default"],p),b[0]=p,b[1]=r):r=b[1];b[2]!==a||b[3]!==g?(p=m.jsx((k||(k=d("VideoPlayerContexts"))).VideoPlayerMouseIdleContext.Provider,{value:g,children:a}),b[2]=a,b[3]=g,b[4]=p):p=b[4];b[5]!==f||b[6]!==p?(a=m.jsx((k||(k=d("VideoPlayerContexts"))).VideoPlayerMouseHoverContext.Provider,{value:f,children:p}),b[5]=f,b[6]=p,b[7]=a):a=b[7];b[8]!==h||b[9]!==j||b[10]!==n||b[11]!==o||b[12]!==e||b[13]!==r||b[14]!==a?(g=m.jsx("div",babelHelpers["extends"]({className:r},c("CometVisualCompletionAttributes").IGNORE,{onMouseDown:h,onMouseEnter:j,onMouseLeave:n,onMouseMove:o,onMouseUp:e,children:a})),b[8]=h,b[9]=j,b[10]=n,b[11]=o,b[12]=e,b[13]=r,b[14]=a,b[15]=g):g=b[15];return g}function a(a){var e=d("react-compiler-runtime").c(76),f,g;e[0]!==a?(f=a.children,g=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g):(f=e[1],g=e[2]);a=g;var i=a.adClientToken,j=a.audioAvailabilityInfo,l=a.autoplayGatingResult,n=a.broadcastStatus,o=a.canAutoplay,p=a.controller,q=a.dimensions,r=a.initialTracePolicy,s=a.instanceKey,t=a.isDesktopPictureInPicture,u=a.isFullscreen,v=a.isNCSR,w=a.isPremiumMusicVideo,x=a.lastMuteReason,y=a.lastPauseReason,z=a.lastPlayReason,A=a.videoFBID,B=a.videoPixelsAspectRatio,C=a.videoPlayerPassiveViewabilityInfo,D=a.videoState;a=a.volumeSetting;var E=D.activeCaptions,F=D.activeEmsgBoxes,G=D.availableAudioTracks,H=D.availableVideoQualities,I=D.availableVideoTracks,J=D.bufferEnd,K=D.captionDisplayStyle,L=D.captionsLoaded,M=D.captionsVisible,N=D.currentAudioTrackID,O=D.currentVideoQuality,P=D.currentVideoTrackID,Q=D.duration,R=D.ended,S=D.error,T=D.inbandCaptionsAutogenerated,U=D.inPlayStalling,V=D.isAbrEnabled,W=D.isLiveRewindActive,X=D.isLiveRewindAvailable,Y=D.lastPlayedTimeMs,Z=D.latencyLevel,ba=D.loopCount,ca=D.loopCurrent,da=D.muted,ea=D.paused,fa=D.playerVersion,ga=D.playing,ha=D.seekableRanges,ia=D.seeking,ja=D.selectedVideoQuality,ka=D.stalling,la=D.streamInterrupted,ma=D.targetAudioTrack,na=D.targetPlaybackRate,oa=D.targetVideoQuality,pa=D.volume;D=D.watchTimeMs;var $;e[3]!==f?($=m.jsx(aa,{children:f}),e[3]=f,e[4]=$):$=e[4];f=$;e[5]!==p||e[6]!==g||e[7]!==C?($={controller:p,coreVideoStates:g,videoPlayerPassiveViewabilityInfo:C},e[5]=p,e[6]=g,e[7]=C,e[8]=$):$=e[8];b("cr:6094")(s,$);if(e[9]!==E||e[10]!==F||e[11]!==i||e[12]!==j||e[13]!==l||e[14]!==G||e[15]!==H||e[16]!==I||e[17]!==n||e[18]!==J||e[19]!==o||e[20]!==K||e[21]!==L||e[22]!==M||e[23]!==p||e[24]!==N||e[25]!==O||e[26]!==P||e[27]!==q||e[28]!==Q||e[29]!==R||e[30]!==S||e[31]!==U||e[32]!==T||e[33]!==r||e[34]!==s||e[35]!==V||e[36]!==t||e[37]!==u||e[38]!==W||e[39]!==X||e[40]!==v||e[41]!==w||e[42]!==x||e[43]!==y||e[44]!==z||e[45]!==Y||e[46]!==Z||e[47]!==ba||e[48]!==ca||e[49]!==da||e[50]!==ea||e[51]!==fa||e[52]!==ga||e[53]!==ha||e[54]!==ia||e[55]!==ja||e[56]!==ka||e[57]!==la||e[58]!==ma||e[59]!==na||e[60]!==oa||e[61]!==A||e[62]!==B||e[63]!==C||e[64]!==pa||e[65]!==a||e[66]!==D||e[67]!==f){e[69]!==t||e[70]!==u||e[71]!==C?(g=function(a){return m.jsx(c("VideoPlayerViewabilityProvider.react"),{isDesktopPictureInPicture:t,isFullscreen:u,videoPlayerPassiveViewabilityInfo:C,children:a})},e[69]=t,e[70]=u,e[71]=C,e[72]=g):g=e[72];$=d("wrapWithContextProviders").wrapWithContextProviders(f,[d("wrapWithContextProviders").makeRenderProviderFn((k||(k=d("VideoPlayerContexts"))).VideoFBIDContext,A),d("wrapWithContextProviders").makeRenderProviderFn(k.StallingContext,ka),d("wrapWithContextProviders").makeRenderProviderFn(k.PlayingContext,ga),d("wrapWithContextProviders").makeRenderProviderFn(k.InPlayStallingContext,U),d("wrapWithContextProviders").makeRenderProviderFn(k.BufferEndContext,J),d("wrapWithContextProviders").makeRenderProviderFn(k.LastMuteReasonContext,x),d("wrapWithContextProviders").makeRenderProviderFn(k.LastPlayReasonContext,z),d("wrapWithContextProviders").makeRenderProviderFn(k.LastPauseReasonContext,y),d("wrapWithContextProviders").makeRenderProviderFn(k.PausedContext,ea),d("wrapWithContextProviders").makeRenderProviderFn(k.CurrentAudioTrackIDContext,N),d("wrapWithContextProviders").makeRenderProviderFn(k.CurrentVideoTrackIDContext,P),d("wrapWithContextProviders").makeRenderProviderFn(k.CurrentVideoQualityContext,O),d("wrapWithContextProviders").makeRenderProviderFn(k.MutedContext,da),d("wrapWithContextProviders").makeRenderProviderFn(k.TargetAudioTrackContext,ma),d("wrapWithContextProviders").makeRenderProviderFn(k.VolumeContext,pa),d("wrapWithContextProviders").makeRenderProviderFn(k.SelectedVideoQualityContext,ja),d("wrapWithContextProviders").makeRenderProviderFn(k.SeekingContext,ia),d("wrapWithContextProviders").makeRenderProviderFn(k.DurationContext,Q),d("wrapWithContextProviders").makeRenderProviderFn(k.EndedContext,R),d("wrapWithContextProviders").makeRenderProviderFn(k.ErrorContext,S),d("wrapWithContextProviders").makeRenderProviderFn(k.DimensionsContext,q||null),d("wrapWithContextProviders").makeRenderProviderFn(k.InstanceKeyContext,s),d("wrapWithContextProviders").makeRenderProviderFn(k.ControllerContext,p),d("wrapWithContextProviders").makeRenderProviderFn(k.AvailableAudioTracksContext,G),d("wrapWithContextProviders").makeRenderProviderFn(k.AvailableVideoQualitiesContext,H),d("wrapWithContextProviders").makeRenderProviderFn(k.AvailableVideoTracksContext,I),d("wrapWithContextProviders").makeRenderProviderFn(k.PlayerVersionContext,fa),d("wrapWithContextProviders").makeRenderProviderFn(k.IsAbrEnabledContext,V),d("wrapWithContextProviders").makeRenderProviderFn(k.TargetVideoQualityContext,oa),d("wrapWithContextProviders").makeRenderProviderFn(k.PlaybackRateContext,na),d("wrapWithContextProviders").makeRenderProviderFn(k.CanAutoplayContext,o),d("wrapWithContextProviders").makeRenderProviderFn(k.VolumeSettingContext,a),d("wrapWithContextProviders").makeRenderProviderFn(k.AutoplayGatingResultContext,l),d("wrapWithContextProviders").makeRenderProviderFn(k.BroadcastStatusContext,n),d("wrapWithContextProviders").makeRenderProviderFn(k.LoopCountContext,ba),d("wrapWithContextProviders").makeRenderProviderFn(k.LoopCurrentContext,ca),d("wrapWithContextProviders").makeRenderProviderFn(k.AdClientTokenContext,i),d("wrapWithContextProviders").makeRenderProviderFn(k.ActiveCaptionsContext,E),d("wrapWithContextProviders").makeRenderProviderFn(k.CaptionsVisibleContext,M),d("wrapWithContextProviders").makeRenderProviderFn(k.CaptionDisplayStyleContext,K),d("wrapWithContextProviders").makeRenderProviderFn(k.CaptionsLoadedContext,L),d("wrapWithContextProviders").makeRenderProviderFn(k.InbandCaptionsAutogeneratedContext,T),d("wrapWithContextProviders").makeRenderProviderFn(k.StreamInterruptedContext,la),d("wrapWithContextProviders").makeRenderProviderFn(k.WatchTimeContext,D),d("wrapWithContextProviders").makeRenderProviderFn(k.LastPlayedTimeContext,Y),d("wrapWithContextProviders").makeRenderProviderFn(k.SeekableRangesContext,ha),d("wrapWithContextProviders").makeRenderProviderFn(k.LatencyLevelContext,Z),d("wrapWithContextProviders").makeRenderProviderFn(k.IsLiveRewindActiveContext,W),d("wrapWithContextProviders").makeRenderProviderFn(k.IsLiveRewindAvailableContext,X),d("wrapWithContextProviders").makeRenderProviderFn(k.AudioAvailabilityInfoContext,j),d("wrapWithContextProviders").makeRenderProviderFn(k.IsNCSRContext,v),d("wrapWithContextProviders").makeRenderProviderFn(k.IsPremiumMusicVideoContext,w),d("wrapWithContextProviders").makeRenderProviderFn(k.InitialTracePolicyContext,r),d("wrapWithContextProviders").makeRenderProviderFn(k.ActiveEmsgBoxesContext,F),d("wrapWithContextProviders").makeRenderProviderFn(k.VideoPixelsAspectRatioContext,B!=null?B:null),g]);e[9]=E;e[10]=F;e[11]=i;e[12]=j;e[13]=l;e[14]=G;e[15]=H;e[16]=I;e[17]=n;e[18]=J;e[19]=o;e[20]=K;e[21]=L;e[22]=M;e[23]=p;e[24]=N;e[25]=O;e[26]=P;e[27]=q;e[28]=Q;e[29]=R;e[30]=S;e[31]=U;e[32]=T;e[33]=r;e[34]=s;e[35]=V;e[36]=t;e[37]=u;e[38]=W;e[39]=X;e[40]=v;e[41]=w;e[42]=x;e[43]=y;e[44]=z;e[45]=Y;e[46]=Z;e[47]=ba;e[48]=ca;e[49]=da;e[50]=ea;e[51]=fa;e[52]=ga;e[53]=ha;e[54]=ia;e[55]=ja;e[56]=ka;e[57]=la;e[58]=ma;e[59]=na;e[60]=oa;e[61]=A;e[62]=B;e[63]=C;e[64]=pa;e[65]=a;e[66]=D;e[67]=f;e[68]=$}else $=e[68];g=$;c("useBlockCappedListItemWhenPlayingVideo")(p,s);c("useDisableVirtualizationWhenPlayingVideo")(p,s);E=d("CometSSRRenderingStateHooks").useIsServerRenderingOrHydrating();F=E?void 0:s;e[73]!==g||e[74]!==F?(i=m.jsx("div",{"data-instancekey":F,"data-testid":void 0,children:g}),e[73]=g,e[74]=F,e[75]=i):i=e[75];return i}f=m.memo(a);g["default"]=f}),98);
__d("VideoPlayerFullscreenController",["CometFullScreen","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.current!=null&&d("CometFullScreen").getFullScreenElement()===a.current}function a(a){var b=[];function e(){b.forEach(function(a){a()})}var f=null;return{getIsFullscreen:function(){return h(a)},requestSetIsFullscreen:function(b,e){var f=a.current;if(f==null)throw c("unrecoverableViolation")("Requested full screen while the element is not present","comet_video_player");d("CometFullScreen").isSupported()?b!==h(a)&&(b===!0?d("CometFullScreen").requestFullScreen(f):b===!1&&d("CometFullScreen").exitFullScreen()):b&&e!=null&&typeof e.webkitEnterFullScreen==="function"?e.webkitEnterFullScreen():!b&&e!=null&&typeof e.webkitExitFullScreen==="function"&&e.webkitExitFullscreen()},subscribe:function(a){b.length===0&&f==null&&(f=d("CometFullScreen").subscribeToFullScreenChangeEvent(e));b.push(a);return{remove:function(){c("removeFromArray")(b,a),b.length===0&&f!=null&&(f(),f=null)}}}}}g.createFullscreenController=a}),98);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","react-compiler-runtime","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;f=h||d("react");var i=f.useEffect,j=f.useState;function a(a,b){var e=d("react-compiler-runtime").c(5),f=c("usePrevious")(a),g,h;e[0]!==a||e[1]!==f||e[2]!==b?(g=function(){a!==f&&(f!==null&&f&&!a&&b(d("GlobalVideoPortsID").makeVideoID()))},h=[a,f,b],e[0]=a,e[1]=f,e[2]=b,e[3]=g,e[4]=h):(g=e[3],h=e[4]);i(g,h)}function b(a,b){var c=j(null),e=c[0];c=c[1];a!==e&&(e!==null&&e&&!a&&b(d("GlobalVideoPortsID").makeVideoID()),c(a))}var k=c("gkx")("24382")?b:a;function e(a){var b=d("react-compiler-runtime").c(11),c=a.portalingEnabled;a=a.portalingFromVideoID;var e=d("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),f=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),g=d("GlobalVideoPortsContexts").useGlobalVideoPortsState(),h=f!=null&&g!=null,n=(h||e!=null)&&(c||a!=null),o=j(m);o=o[0];var p=j(l),q=p[0];p=p[1];c=n&&c&&a!=null;a=c&&a!=null?a:q;k(c,p);b[0]!==h||b[1]!==n||b[2]!==e?(q=function(){n&&!h&&e&&e()},c=[h,n,e],b[0]=h,b[1]=n,b[2]=e,b[3]=q,b[4]=c):(q=b[3],c=b[4]);i(q,c);b[5]!==n||b[6]!==a||b[7]!==f||b[8]!==g||b[9]!==o?(p={canBecomePortableLater:n,currentVideoID:a,globalVideoPortsManager:f,globalVideoPortsState:g,thisPlaceID:o},b[5]=n,b[6]=a,b[7]=f,b[8]=g,b[9]=o,b[10]=p):p=b[10];return p}function l(){return d("GlobalVideoPortsID").makeVideoID()}function m(){return d("GlobalVideoPortsID").makePlaceID()}g.useRegenerateUniqueVideoID_exportedForTest=k;g.useVideoPlayerPortalingPlaceState=e}),98);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","getOwnObjectValues","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useEffect,l=b.useRef,m=b.useState;function a(a){var b=a.coreVideoPlayerMetaData,e=a.currentPlaceID,f=a.currentVideoID,g=a.fullscreenController,h=a.globalVideoPortsManager,n=a.globalVideoPortsState_DEPRECATED,o=a.implementations,p=a.isFullscreen,q=a.portablePlaceMetaData,r=a.previousPlaceMetaData,s=a.renderComponents,t=a.renderPlaceholder,u=a.thisPlaceID,v=a.trackingDataEncrypted,w=a.trackingNodes,x=a.viewportMarginsForViewability;a=m(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var y=a[0],z=l(null);k(function(){h.addOrUpdatePlace({coreVideoPlayerMetaData:b,fullscreenController:g,implementations:o,injectCoreVideoStatesRef:z,isFullscreen:p,portablePlaceContainer:y,portablePlaceID:u,portablePlaceMetaData:q,portableVideoID:f,renderComponents:s,renderPlaceholder:t,trackingDataEncrypted:v,trackingNodes:w,viewportMarginsForViewability:x})},[].concat(c("getOwnObjectValues")(b),[f,g,p,h,y],c("getOwnObjectValues")(q||{}),[s,t,u,v,w,x]));k(function(){return function(){h.removePlace({portablePlaceID:u})}},[h,u]);a=j(c("BaseContextualLayerAnchorRootContext"));var A=l(null);return i.jsxs(c("BaseContextualLayerAnchorRootContext").Provider,{value:p?A:a,children:[i.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:y},u),i.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:n!=null?(a=(a=h.getCurrentPlaceStateForVideo(n,f))==null?void 0:a.portablePlaceID)!=null?a:null:e,currentVideoID:f,injectCoreVideoStatesRef:z,previousPlaceMetaData:n!=null?(e=(a=h.getPortableVideoState(n,f))==null?void 0:a.previousPlaceMetaData)!=null?e:null:r,renderComponents:s,thisPlaceID:u}),i.jsx("div",{ref:A})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","react","react-compiler-runtime","recoverableViolation","useStable","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=["implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","renderComponents","renderPlaceholder"],i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useEffect,n=b.useState,o={bottom:0,left:0,right:0,top:0};function p(a){var b=d("react-compiler-runtime").c(5),c=a.ref,e=a.children,f=a.debugRole;a=a.testid;var g;b[0]!==e||b[1]!==f||b[2]!==c||b[3]!==a?(g=k.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:f,ref:c,testid:void 0,children:e}),b[0]=e,b[1]=f,b[2]=c,b[3]=a,b[4]=g):g=b[4];return g}function a(a){var b=d("react-compiler-runtime").c(77),e,f,g,j,r,s,t;b[0]!==a?(f=a.implementations,g=a.portalingEnabled,j=a.portalingFromVideoID,r=a.portalingPlaceMetaData,s=a.renderComponents,t=a.renderPlaceholder,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=j,b[5]=r,b[6]=s,b[7]=t):(e=b[1],f=b[2],g=b[3],j=b[4],r=b[5],s=b[6],t=b[7]);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=[],b[8]=a):a=b[8];m(q,a);b[9]!==j?(a=j!=null?d("GlobalVideoPortsID").ensureVideoID(j):null,b[9]=j,b[10]=a):a=b[10];a=a;j!=null&&a==null&&c("recoverableViolation")("The provided portalingFromVideoID ("+String(j)+") does not look like such an ID. The video player will not use portaling until a valid ID is provided","comet_video_player");b[11]!==g||b[12]!==a?(j={portalingEnabled:g,portalingFromVideoID:a},b[11]=g,b[12]=a,b[13]=j):j=b[13];g=d("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState(j);a=g.canBecomePortableLater;j=g.currentVideoID;var u=g.globalVideoPortsManager,v=g.globalVideoPortsState;g=g.thisPlaceID;var w=l(c("BaseViewportMarginsContext")),x=(i||(i=c("useUnsafeRef_DEPRECATED")))(null),y;b[14]!==x?(y=function(){return d("VideoPlayerFullscreenController").createFullscreenController(x)},b[14]=x,b[15]=y):y=b[15];var z=c("useStable")(y);b[16]!==z?(y=z.getIsFullscreen(),b[16]=z,b[17]=y):y=b[17];y=n(y);var A=y[0],B=y[1],C;b[18]!==z?(y=function(){var a=z.subscribe(function(){var a=z.getIsFullscreen();B(a)});B(z.getIsFullscreen());return function(){a.remove()}},C=[z,B],b[18]=z,b[19]=y,b[20]=C):(y=b[19],C=b[20]);m(y,C);y=l(c("CometTrackingNodesContext"));b[21]!==y?(C=y.join(""),b[21]=y,b[22]=C):C=b[22];y=C;C=l(c("CometTrackingCodeContext"));C=(C=C.encrypted_tracking[0])!=null?C:"";w=A?o:w;var D="comet-video-player-place"+(e.videoFBID!=null?"-vid-"+e.videoFBID:"");if(!a){b[23]!==e||b[24]!==w||b[25]!==z||b[26]!==f||b[27]!==A||b[28]!==s||b[29]!==C||b[30]!==y?(a=k.jsx(c("CoreVideoPlayer.react"),babelHelpers["extends"]({},e,{fullscreenController:z,implementations:f,isFullscreen:A,renderWithCoreVideoStates:s,trackingDataEncrypted:C,trackingNodes:y,viewportMarginsForViewability:w})),b[23]=e,b[24]=w,b[25]=z,b[26]=f,b[27]=A,b[28]=s,b[29]=C,b[30]=y,b[31]=a):a=b[31];var E;b[32]!==j||b[33]!==a||b[34]!==g?(E=k.jsx(d("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:g,currentVideoID:j,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:g,children:a}),b[32]=j,b[33]=a,b[34]=g,b[35]=E):E=b[35];b[36]!==E||b[37]!==D||b[38]!==x?(a=k.jsx(p,{debugRole:null,ref:x,testid:void 0,children:E}),b[36]=E,b[37]=D,b[38]=x,b[39]=a):a=b[39];return a}if(u&&v){if(b[40]!==j||b[41]!==u||b[42]!==v){E=(a=(E=u.getCurrentPlaceStateForVideo(v,j))==null?void 0:E.portablePlaceID)!=null?a:null;b[40]=j;b[41]=u;b[42]=v;b[43]=E}else E=b[43];if(b[44]!==j||b[45]!==u||b[46]!==v){a=(a=(a=u.getPortableVideoState(v,j))==null?void 0:a.previousPlaceMetaData)!=null?a:null;b[44]=j;b[45]=u;b[46]=v;b[47]=a}else a=b[47];b[48]!==e||b[49]!==j||b[50]!==w||b[51]!==z||b[52]!==u||b[53]!==f||b[54]!==A||b[55]!==r||b[56]!==s||b[57]!==t||b[58]!==a||b[59]!==E||b[60]!==g||b[61]!==C||b[62]!==y?(v=k.jsx(c("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:e,currentPlaceID:E,currentVideoID:j,fullscreenController:z,globalVideoPortsManager:u,globalVideoPortsState_DEPRECATED:null,implementations:f,isFullscreen:A,portablePlaceMetaData:r,previousPlaceMetaData:a,renderComponents:s,renderPlaceholder:t,thisPlaceID:g,trackingDataEncrypted:C,trackingNodes:y,viewportMarginsForViewability:w}),b[48]=e,b[49]=j,b[50]=w,b[51]=z,b[52]=u,b[53]=f,b[54]=A,b[55]=r,b[56]=s,b[57]=t,b[58]=a,b[59]=E,b[60]=g,b[61]=C,b[62]=y,b[63]=v):v=b[63];b[64]!==v||b[65]!==D||b[66]!==x?(w=k.jsx(p,{debugRole:null,ref:x,testid:void 0,children:v}),b[64]=v,b[65]=D,b[66]=x,b[67]=w):w=b[67];return w}else{f=(u=e.videoPixelsAspectRatio)!=null?u:null;b[68]!==j||b[69]!==t||b[70]!==f||b[71]!==g?(A=k.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:j,previousPlaceMetaData:null,renderPlaceholder:t,thisPlaceID:g,videoPixelsAspectRatio:f}),b[68]=j,b[69]=t,b[70]=f,b[71]=g,b[72]=A):A=b[72];b[73]!==A||b[74]!==D||b[75]!==x?(r=k.jsx(p,{debugRole:null,ref:x,testid:void 0,children:A}),b[73]=A,b[74]=D,b[75]=x,b[76]=r):r=b[76];return r}}function q(){return r}function r(){}g["default"]=a}),98);
__d("VideoPlayerTracePolicyContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext;c={initialTracePolicy:null,routeTracePolicy:null};var j=b.createContext(c);function a(){return i(j)}g.VideoPlayerTracePolicyContext=j;g.useVideoPlayerTracePolicy=a}),98);
__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(12),c=a.children,e=a.initialTracePolicy,f=a.routeTracePolicy;a=k(e);var g=a[0],h=a[1];a=k(f);var l=a[0],m=a[1],n;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==l?(a=function(){g!==e&&h(e),l!==f&&m(f)},n=[e,f,g,l],b[0]=e,b[1]=f,b[2]=g,b[3]=l,b[4]=a,b[5]=n):(a=b[4],n=b[5]);j(a,n);b[6]!==g||b[7]!==l?(a={initialTracePolicy:g,routeTracePolicy:l},b[6]=g,b[7]=l,b[8]=a):a=b[8];b[9]!==c||b[10]!==a?(n=i.jsx(d("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:a,children:c}),b[9]=c,b[10]=a,b[11]=n):n=b[11];return n}g["default"]=a}),98);
__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder"],i,j=i||(i=d("react"));i.useCallback;function a(a){var b=d("react-compiler-runtime").c(22),e,f,g,i,k,l,m;b[0]!==a?(e=a.children,g=a.implementations,i=a.portalingEnabled,k=a.portalingFromVideoID,l=a.portalingPlaceMetaData,m=a.portalingRenderPlaceholder,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=k,b[6]=l,b[7]=m):(e=b[1],f=b[2],g=b[3],i=b[4],k=b[5],l=b[6],m=b[7]);b[8]!==e?(a=function(a){return j.jsx(c("VideoPlayerComponentContainer.react"),babelHelpers["extends"]({},a,{children:e}))},b[8]=e,b[9]=a):a=b[9];a=a;var n;b[10]!==f||b[11]!==g||b[12]!==i||b[13]!==k||b[14]!==l||b[15]!==m||b[16]!==a?(n=j.jsx(c("VideoPlayerPortalingPlace.react"),babelHelpers["extends"]({},f,{implementations:g,portalingEnabled:i,portalingFromVideoID:k,portalingPlaceMetaData:l,renderComponents:a,renderPlaceholder:m})),b[10]=f,b[11]=g,b[12]=i,b[13]=k,b[14]=l,b[15]=m,b[16]=a,b[17]=n):n=b[17];b[18]!==f.initialTracePolicy||b[19]!==f.routeTracePolicy||b[20]!==n?(g=j.jsx(c("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:f.initialTracePolicy,routeTracePolicy:f.routeTracePolicy,children:n}),b[18]=f.initialTracePolicy,b[19]=f.routeTracePolicy,b[20]=n,b[21]=g):g=b[21];return g}g["default"]=a}),98);
__d("Duration.react",["ServerTime","clearTimeout","react","react-strict-dom","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=500,k=1e3,l=60,m=60;a=function(a){function b(b){b=a.call(this,b)||this;b.state={duration:0};return b}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.UNSAFE_componentWillMount=function(){this.$2()};e.componentWillUnmount=function(){c("clearTimeout")(this.$1)};e.$2=function(){var a=this,b;this.props.useLocalTime?b=Date.now():b=d("ServerTime").getMillis();this.setState({duration:Math.max(b-this.props.startTime,0)});this.$1=c("setTimeout")(function(){return a.$2()},j)};e.render=function(){var a=Math.floor(this.state.duration/k),b=a%l;a=Math.floor(a/l);var c=a%m;a=Math.floor(a/m);var e="";a>0&&(e=a+":");a=c+":";a.length<3&&e.length>0&&(a="0"+a);c=""+b;c.length<2&&(c="0"+c);return i.jsxs(d("react-strict-dom").html.span,{children:[e,a,c]})};return b}(i.Component);a.defaultProps={useLocalTime:!1};g["default"]=a}),98);
__d("FDSResizeUpFilled20Icon",["cr:14081"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14081")}),98);
__d("FDSResizeUpFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("517763"),20);b=a;g["default"]=b}),98);
__d("GamingVideoBackLink.react",["fbt","ix","CometImage.react","CometPressable.react","XCometGamingControllerRouteBuilder","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=i("370949"),m=c("XCometGamingControllerRouteBuilder").buildURL({});function a(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"Go to Facebook Gaming"),a[0]=b):b=a[0];var e=b;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx(c("CometPressable.react"),{linkProps:{url:m},children:function(a){a=a.hovered;return k.jsxs("div",babelHelpers["extends"]({className:"x78zum5 x1q0g3np"},{children:[k.jsx("span",babelHelpers["extends"]({},{0:{className:"x3nfvp2 x1qo4wvw xbyyjgo x1d8287x x19991ni xl405pv"},1:{className:"x3nfvp2 x1hc1fzr x1d8287x x19991ni xl405pv"}}[!!a<<0],{children:k.jsx(c("CometImage.react"),{alt:h._(/*BTDS*/"Close"),src:l})})),k.jsx("div",babelHelpers["extends"]({},{0:{className:"x1s85apg"},1:{className:"xe2km65 x1lliihq xf159sx x1n2onr6 x1bvjpef xndqk7f"}}[!!a<<0],{children:e}))]}))}}),a[1]=b):b=a[1];return b}g["default"]=a}),226);
__d("GraphQLVideoAutoplayGatingResult",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a=a!=null?a:"unknown";b=b?b:null;return{autoplayGatingResult:a,autoplaySetting:b,canAutoplay:c!=null?c:!1}}f.makeGraphQLVideoAutoplayGatingResult=a}),66);
__d("GraphQLVideoDRMInfo",["isEmptyObject"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.fairplay_cert,d=a.graph_api_video_license_uri,e=a.video_license_uri_map;a=a.widevine_cert;b={fairplayCert:b,graphApiVideoLicenseUri:d!=null?d:null,videoLicenseUriMap:e,widevineCert:a};return b.graphApiVideoLicenseUri===null&&c("isEmptyObject")(b.videoLicenseUriMap)?null:b}g.makeGraphQLVideoDRMInfo=a}),98);
__d("GraphQLVideoP2PSettings",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["HiveJava","HiveJS","StatsJS"]);function a(a){return(a=g.cast(a))!=null?a:null}f.HiveTechOrder=g;f.hiveTechOrderOrNull=a}),66);
__d("InstreamVideoAdBreaksPlayer_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayer_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"InstreamExtraConfig",kind:"LinkedField",name:"instream_extra_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"instream_halo_delay_time_seconds",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{args:null,documentName:"InstreamVideoAdBreaksPlayer_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayerImpl_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("InstreamVideoAdBreaksPlayer.react",["CometPlaceholder.react","CometRelay","InstreamVideoAdBreaksPlayer_video.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(11),f=a.playerFormat,g=a.subOrigin;a=a.video;a=d("CometRelay").useFragment(h!==void 0?h:h=b("InstreamVideoAdBreaksPlayer_video.graphql"),a);var i=a.id,k=a.instream_extra_config;a=a.instream_video_ad_breaks_comet;k=k==null?void 0:k.instream_halo_delay_time_seconds;var l;e[0]!==k?(l={instreamHaloDelayTimeSeconds:k},e[0]=k,e[1]=l):l=e[1];e[2]!==a||e[3]!==f||e[4]!==g||e[5]!==l||e[6]!==i?(k={instreamExtraConfig:l,instreamVideoAdBreaksComet:a,playerFormat:f,subOrigin:g,videoFBID:i},e[2]=a,e[3]=f,e[4]=g,e[5]=l,e[6]=i,e[7]=k):k=e[7];e[8]!==a||e[9]!==k?(f=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(d("CometRelay").MatchContainer,{match:a,props:k})}),e[8]=a,e[9]=k,e[10]=f):f=e[10];return f}g["default"]=a}),98);
__d("LatencySensitiveType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NORMAL:0,LOW:1,ULTRA_LOW:2});c=a;f["default"]=c}),66);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.values(c("CVCv3DisabledPlayerOrigins")),i=Object.values(c("CVCv3DisabledPlayerSubOrigins")),j=10;a=function(){function a(a,b,d,e,f,g){var j=this;this.$1=new(c("CVCv3SubscriptionHelper"))(a,b,d);this.$5=f;this.$6=null;this.$9=null;this.$10=!this.$1.isValidSubscription();this.$3=null;this.$2=null;a=b!=null?h.includes(b):!1;f=d!=null?i.includes(d):!1;!a&&!f&&(this.$3=e,this.$11=g,this.$4=e.subscribe(function(){if(j.$3==null){j.$1.logDebugInfo("empty_video_controller");return}var a=j.$3.getCurrentState();a.playing?j.$12(a):j.$13()}))}var b=a.prototype;b.$12=function(a){if(this.$3==null){this.$1.logDebugInfo("empty_video_controller");return}if(a.playing){if(this.$2==null){a=this.$3.getPlayheadPosition();a>=0&&(this.$2=a)}}else this.$2=null;this.$14(0)};b.stopUnifiedCVC=function(){this.$13()};b.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null};b.$13=function(){c("clearTimeout")(this.$8),c("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null};b.$15=function(){c("clearTimeout")(this.$7),this.$7=null};b.$16=function(){this.$9=null,this.$15(),this.$14(0)};b.$14=function(a){var b=this;if(this.$3==null||this.$8!=null||this.$9!=null||this.$10)return;this.$8=c("setTimeout")(function(){b.$8=null;var a=b.$17();if(a==null){b.$1.logDebugInfo("empty_request");return}b.$9=a;var e=Date.now(),f=!1;c("promiseDone")(a,function(c){if(a!==b.$9)return;b.$9=null;if(c!=null){c=b.$1.processUnifiedResponse(c);b.$18(c,e)}else b.$1.logHttpResponseBad("null payload",Date.now()-e)},function(a){f=!0,b.$1.logHttpRequestFailure(a!=null?JSON.stringify(a):null,Date.now()-e)});b.$7=c("setTimeout")(function(){f||b.$1.logHttpRequestTimeout(Date.now()-e),b.$16()},j*d("DateConsts").MS_PER_SEC)},a)};b.$18=function(a,b){this.$15();b=Date.now()-b;a.d!=null?(this.$1.logHttpRequestSuccess(b),this.$11!=null&&this.$11(a.d)):this.$1.logHttpResponseBad("no data field",b);if(a.a!=null){b=a.a.t;switch(b){case"p":b=a.a.pi;b==null&&(b=j);this.$14(b*d("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}};b.$17=function(){var a=this.$19();if(a==null)return null;a={d:JSON.stringify(a)};return c("cometAsyncFetch")(c("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:a,method:"POST"})};b.$19=function(){if(this.$3==null)return null;var a={};this.$6!=null&&(a.lc=this.$6);this.$5&&(a.ls=!0);var b=0,c=0;this.$2!=null&&(b=this.$2,c=this.$3.getPlayheadPosition());var d=this.$3.getCurrentState();b=this.$1.makeUnifiedVideoCVCUpdate(b,c,this.$20(d),d.muted,a);return b};b.$20=function(a){if(a.playing||a.seeking)return"playing";else if(a.ended)return"ended";else if(a.paused)return"paused";else return"unknown"};b.testing_setLastStartPosition=function(a){this.$2=a};b.testing_makeUnifiedStateUpdate=function(){return this.$19()};b.testing_handleUnifiedResponse=function(a){return this.$18(a,Date.now())};return a}();g["default"]=a}),98);
__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react"));g["default"]=a}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});g["default"]=b}),98);
__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","oz-player/utils/OzErrorUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.state={error:null},b.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);b.getDerivedStateFromError=function(a){return{error:c("getErrorSafe")(a)}};var e=b.prototype;e.componentDidCatch=function(a,b){b=b.componentStack;var e=c("getErrorSafe")(a);e.componentStack=b;b=this.props;var f=b.description,g=b.onError;b=b.project;a=d("oz-player/utils/OzErrorUtils").isOzError(a)?a.getType():a!=null&&typeof a.name==="string"?a.name:e.name;try{e.name=a}catch(a){}a="VideoPlayerErrorBoundary caught an "+a;f!=null&&(a=a+" ("+f+")");f=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE","OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"];var h=["Network failure:","Network failure.","HTTP error.","Bad URL timestamp","URL signature expired","No license for com.widevine.alpha","OZ_DRM_MANAGER: Endpoint returned error: DEVICE_CERTIFICATE_REVOKED"];f=f.every(function(a){return e.name!==a})&&h.every(function(a){return!e.message.startsWith(a)});h=c("FBLogger")(b==null?"comet_video_player":b).catching(e);["OZ_DRM_MANAGER","OZ_JAVASCRIPT_NATIVE","OZ_INITIALIZATION"].includes(e.name)&&(h=h.addToCategoryKey(e.message));f?h.fatal(a):h.warn(a);g!=null&&g(e)};e.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.error;return c?typeof a==="function"?a(c):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","CometLink.react","FDSText.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1),b=c("gkx")("20836")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":"https://www.facebook.com/help/396404120401278/list";a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("FDSText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:j.jsx(c("CometLink.react"),{href:b,target:"_blank",children:h._(/*BTDS*/"Learn more")})}),a[0]=b):b=a[0];return b}g["default"]=a}),226);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["FDSText.react","VideoPlayerFallbackLearnMoreLink.react","cr:2324","cr:4149","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(21),f=a.background,g=a.debugError,h=a.message,j=a.showDebugWithoutError;a=a.showLearnMoreLink;j=j===void 0?!0:j;a=a===void 0?!0:a;var k;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={className:"x6s0dn4 xatbrnm x9f619 x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x2vl965 x1a8lsjc xe2zdcy x1n2onr6 xh8yej3"},e[0]=k):k=e[0];var l;e[1]!==f?(l={0:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox"},1:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox x1vjfegm"}}[!!(f!=null)<<0],e[1]=f,e[2]=l):l=e[2];var m;e[3]===Symbol["for"]("react.memo_cache_sentinel")?(m={className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w"},e[3]=m):m=e[3];e[4]!==h?(m=i.jsx("div",babelHelpers["extends"]({},m,{children:i.jsx(c("FDSText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:h})})),e[4]=h,e[5]=m):m=e[5];e[6]!==a?(h=a&&i.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w"},{children:i.jsx(c("VideoPlayerFallbackLearnMoreLink.react"),{})})),e[6]=a,e[7]=h):h=e[7];e[8]!==g||e[9]!==j?(a=(g!=null||j)&&i.jsxs(i.Fragment,{children:[b("cr:4149")?i.jsx(b("cr:4149"),{error:g}):null,b("cr:2324")?i.jsx(b("cr:2324"),{error:g}):null]}),e[8]=g,e[9]=j,e[10]=a):a=e[10];e[11]!==l||e[12]!==m||e[13]!==h||e[14]!==a?(g=i.jsxs("div",babelHelpers["extends"]({},l,{children:[m,h,a]})),e[11]=l,e[12]=m,e[13]=h,e[14]=a,e[15]=g):g=e[15];e[16]!==f?(j=f!=null&&i.jsx("div",babelHelpers["extends"]({className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy"},{children:f})),e[16]=f,e[17]=j):j=e[17];e[18]!==j||e[19]!==g?(l=i.jsxs("div",babelHelpers["extends"]({},k,{children:[g,j]})),e[18]=j,e[19]=g,e[20]=l):l=e[20];return l}g["default"]=a}),98);
__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.background,f=a.debugError,g=a.message,i=a.showDebugWithoutError;a=a.showLearnMoreLink;var k;b[0]!==g?(k=g!=null?g:h._(/*BTDS*/"Sorry, we're having trouble with playing this video."),b[0]=g,b[1]=k):k=b[1];g=k;b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==i||b[6]!==a?(k=j.jsx(c("VideoPlayerFallbackCoverImplWithoutRetry.react"),{background:e,debugError:f,message:g,showDebugWithoutError:i,showLearnMoreLink:a}),b[2]=e,b[3]=f,b[4]=g,b[5]=i,b[6]=a,b[7]=k):k=b[7];return k}g["default"]=a}),226);
__d("VideoPlayerFullscreenControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerHooks","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||d("react");function a(a){var b=d("react-compiler-runtime").c(18),e=a.onPress,f=a.onUserInteraction,g=a.shouldUnmute,j=a.showTooltip;a=a.useOutlineIcons;j=j===void 0?!0:j;a=a===void 0?!1:a;var m=(k||(k=d("VideoPlayerHooks"))).useController(),n=k.useIsFullscreen(),o=k.useLastMuteReason(),p;b[0]!==n?(p=n?h._(/*BTDS*/"Exit full-screen"):h._(/*BTDS*/"Enter full-screen"),b[0]=n,b[1]=p):p=b[1];p=p;var q;b[2]!==m||b[3]!==n||b[4]!==o||b[5]!==e||b[6]!==f||b[7]!==g?(q=function(){e&&e(),m.requestSetIsFullscreen(!n),g===!0&&o!=="user_initiated"&&m.setMuted(!1,"product_initiated"),f&&f({name:"video_fullscreen_button",type:"happened"})},b[2]=m,b[3]=n,b[4]=o,b[5]=e,b[6]=f,b[7]=g,b[8]=q):q=b[8];q=q;var r;b[9]!==a?(r=a?d("fbicon")._(i("528442"),20):d("fbicon")._(i("517758"),20),b[9]=a,b[10]=r):r=b[10];r=r;var s;b[11]!==a?(s=a?d("fbicon")._(i("595830"),20):d("fbicon")._(i("517763"),20),b[11]=a,b[12]=s):s=b[12];a=s;s=n?r:a;r=j?p:null;b[13]!==p||b[14]!==q||b[15]!==s||b[16]!==r?(a=l.jsx(c("VideoPlayerControlIcon.react"),{icon:s,label:p,onPress:q,tooltip:r}),b[13]=p,b[14]=q,b[15]=s,b[16]=r,b[17]=a):a=b[17];return a}g["default"]=a}),226);
__d("VideoPlayerIMFMetadataContext",["react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j={imfExpectedFromEmsg:!1,specInlineJson:null},k=b.createContext(j);k.displayName="VideoPlayerIMFMetadataContext";e=k.Provider;function a(){var a=i(k);if(a===j)throw c("unrecoverableViolation")("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.","comet_video_player");return a}g.VideoPlayerIMFMetadataContextProvider=e;g.useVideoPlayerIMFMetadataFromContext=a}),98);
__d("VideoPlayerOzImplLazyImportTemporaryModuleJustForGating.react",["deferredLoadComponent","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerOzImplementationV2.react").__setRef("VideoPlayerOzImplLazyImportTemporaryModuleJustForGating.react"));g["default"]=a}),98);
__d("getAvailableMimeCodecsFromDashManifest",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=/^(audio|video)\/.*$/;return b.test(a)}function a(a,b){var c=[];b=b?window.ManagedMediaSource:window.MediaSource;if(a!=null){var d=/mimeType=\"([^\"]*)\"[^\>]*codecs=\"([^\"]*)\"/g,e=/codecs=\"([^\"]*)\"[^\>]*mimeType=\"([^\"]*)\"/g,f,h=[];while(f=d.exec(a))h.push([f[1],f[2]]);while(f=e.exec(a))h.push([f[2],f[1]]);for(d of h){f=d[0];a=d[1];e=f+'; codecs="'+a+'"';h=f.startsWith("audio")?"audio":f.startsWith("video")?"video":"other";var i=!0,j=!1;g(e)&&(j=!0,i=b?b.isTypeSupported(e):!1);c.push({codecs:a,isRequiredForPlayback:j,isTypeSupported:i,mimeCodec:e,mimeType:f,representationType:h})}}return c}f["default"]=a}),66);
__d("VideoPlayerOzImplementationData",["err","getAvailableMimeCodecsFromDashManifest"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.canUseOz,d=a.dashManifestUrl,e=a.dashManifestUrlOverride_DO_NOT_USE,f=a.dashManifestXmlString,g=a.experimentationConfig,h=a.initialAudioUserPreferredLanguage;a=a.minQualityPreference;if(b!==!0){var i=c("err")("canUseOz="+String(b));i.name="GotCanUseOz/"+String(b);return i}b=e!=null?null:f==null||f===""?null:f;i=e!=null?e:d==null||d===""?null:d;if(b==null&&i==null){f=c("err")("Got no manifest XML and no URL to it");f.name="GotNoManifestOrURL";return f}e=g.getBool("enable_managed_media_source",!1);if(e){if(!window.ManagedMediaSource){d=c("err")("window.ManagedMediaSource is missing");d.name="GotMissingManagedMediaSourceAPI";return d}}else if(!window.MediaSource){f=c("err")("window.MediaSource is missing");f.name="GotMissingMediaSourceAPI";return f}if(b!=null){d=c("getAvailableMimeCodecsFromDashManifest")(b,e).filter(function(a){return a.isRequiredForPlayback});f=d.filter(function(a){return!a.isTypeSupported});if(f.length>0){e=c("err")("%s out of %s codecs in DASH manifest required for playback are unsupported: %s",String(f.length),String(d.length),d.map(function(a){return a.mimeType+"/"+a.codecs+"="+(a.isTypeSupported?"yes":"no")}).join(", "));e.name="GotManifestWithUnsupportedCodecs";return e}}return{experimentationConfig:g,initialAudioUserPreferredLanguage:h!=null?h:null,initialVideoVariant:{lang:h!=null?h:null,role:null},manifest:b,manifestUrl:i,minQualityPreference:a!=null?a:null}}g.makeOzImplementationData=a}),98);
__d("VideoPlayerOzWWWConfig",[],(function(a,b,c,d,e,f){"use strict";var g="oz_www_";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getBool=function(a,b){return this.$1.getBool(g+a,b)};b.getNumber=function(a,b){return this.$1.getNumber(g+a,b)};b.getString=function(a,b){return this.$1.getString(g+a,b)};b.setContext=function(a,b){this.$1.setContext(a,b)};b.getAllContexts=function(){return this.$1.getAllContexts()};return a}();f["default"]=a}),66);
__d("VideoPlayerProgressiveImplementationData",["err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return/\.mpd(\?|$)/.test(a)}function a(a){var b=a.hdSrc,d=a.hdSrcPreferred;a=a.sdSrc;if(b==null&&a==null){var e=c("err")("Both HD and SD browser-native URLs are not available");e.name="GotNoBrowserNativeURLs";return e}if(a==null){e=c("err")("Browser-native SD URL is not available");e.name="GotNoBrowserNativeSDURL";return e}e=h(a);var f=b!=null&&h(b);if(e||f){e=c("err")("HD or SD browser-native URL points to a DASH manifest");e.name="GotBrowserNativeURLsPointToDASH";return e}return{hdSrc:b,hdSrcPreferred:d,sdSrc:a}}g.makeProgressiveImplementationData=a}),98);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!==null&&a.indexOf(".m3u8")!==-1}function a(a){var b=a.getPlayingVideoInfo;a=a.setUserSelectedVideoQuality;function d(){var a=b(),c="progressive_SD",d="progressive_HD";return a==null?null:h(a.hdSrc)||h(a.sdSrc)?null:a.hdSrc!=null&&a.playingSrc===a.hdSrc?d:a.sdSrc!=null&&a.playingSrc===a.sdSrc?c:null}return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAvailableAudioTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableAudioTracks)!=null?a:[]},getAvailableVideoQualities:function(){var a;return(a=(a=b())==null?void 0:a.availableQualities)!=null?a:[]},getAvailableVideoTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableVideoTracks)!=null?a:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingAudioRepresentationID:function(){if(c("gkx")("440"))return d();else return null},getCurrentPlayingAudioTrackID:function(){var a;return(a=(a=b())==null?void 0:a.playingAudioTrackID)!=null?a:null},getCurrentPlayingVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentPlayingVideoRepresentationID:function(){if(c("gkx")("440"))return d();else return"oep_hd"},getCurrentTargetVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var a=b();return a==null?"progressive":h(a.hdSrc)||h(a.sdSrc)?"hls":"progressive"},getTargetAudioTrack:function(){return null},getUserSelectedVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.selectedQuality)!=null?a:"notselected"},getUserSelectedVideoVariant:function(){return null},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentations:function(){return null},isDrm:function(){var a;return((a=b())==null?void 0:a.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isLiveRewindAvailable:function(){return!1},isMixedCodecManifest:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(a){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:a,setUserSelectedVideoVariant:function(a){}}}g.createVideoPlayerProgressiveImplementationEngineExtrasAPI=a}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(a,b,c,d,e,f){"use strict";var g="hd",h="sd";function a(a){var b=[];a.sdSrc!=null&&b.push(h);a.hdSrc!=null&&b.push(g);var c=[],d=[],e=a.hdSrcPreferred&&a.hdSrc!=null?g:h;return babelHelpers["extends"]({},a,{availableAudioTracks:c,availableQualities:b,availableVideoTracks:d,playingAudioTrackID:null,playingQuality:null,playingSrc:null,selectedQuality:e,targetQuality:e,targetSrc:null})}function b(a,b){var c=a.hdSrc,d=a.sdSrc,e,f;b==="notselected"||b==="auto"?(e=d!=null?h:c!=null?g:h,f=d!=null?d:c!=null?c:null):b===g&&c!=null?(e=g,f=c):b===h&&d!=null?(e=h,f=d):(e=h,f=null);f===""&&(f=null);return babelHelpers["extends"]({},a,{selectedQuality:b,targetQuality:e,targetSrc:f})}function c(a,b,c){return babelHelpers["extends"]({},a,{playingQuality:b,playingSrc:c})}f.createResolvedVideoInfoProgressive=a;f.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=b;f.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=c}),66);
__d("videoUrlUtils",[],(function(a,b,c,d,e,f){"use strict";b=1<<31;var g=~b,h=b+1;function i(a){a=a|0;return Math.max(h,Math.min(a,g))}function j(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(i(a)*1e3):null}function k(){return i(Date.now()/1e3)}var l={OE:"oe"};function m(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(l.OE);a=a==null?void 0:j(a);return{expirationDate:a}}function a(a){a=m(a);a=a.expirationDate;return a!=null&&a<=new Date(k()*1e3)}f.DEFAULT_UNIXTIME=b;f.MAX_INT=g;f.parseCdnUrlParams=m;f.isCdnUrlExpired=a}),66);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","Promise","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1607","cr:1680308","emptyFunction","err","getErrorNameFromMediaErrorCode","getErrorSafe","gkx","promiseDone","unrecoverableViolation","videoUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("emptyFunction");function j(a,b,c){var e=typeof a==="object"&&a!=null&&typeof a.name==="string"?a.name:null;return d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError(["PROGRESSIVE_JAVASCRIPT_NATIVE",e].filter(Boolean).join("/"),a,b,c)}function a(a){var e=a.checkInDOM,f=a.debugLogId,g=a.handleFatalError,m=a.initialProps;a=a.setExposedStateInReact;var n={current:null},o={current:null},p={current:null},q={current:null},r=function(){var a=x(),e=o.current;if(a==null||e==null)return;a.addEventListener("error",function(){var e=a.error,f=e==null?void 0:e.code,g=c("getErrorNameFromMediaErrorCode")(f);f=e==null?void 0:e.message;var i=f==null||f===""?"Unknown media error":f,j=[],k=f!=null?d("VideoPlayerImplementationErrors").getMoreGranularErrorNameFromHTMLVideoElementErrorMessage(f):null,l=a.src;!e&&a.poster!=null&&a.poster!==""&&(i+="(possible_poster_load_failure)");if(l!==""){var m=null;(h||(h=b("Promise"))).resolve().then(function(){return window.fetch(l)}).then(function(a){var b,c=a.status;b=(b=a.headers.get("Content-Type"))!=null?b:"unknown";i=i+". Fetched video content with Status:"+c+" Content-Type:"+b;m="URL_RESPONSE_HTTP_"+c;if(c<200||c>=300)return a.text().then(function(a){j.push(a.length.toString()),i+=" Body:%s:"+a.substr(0,200)+(a.length>200?"...":"")},function(){})})["catch"](function(a){typeof a==="object"&&a!=null&&typeof a.name==="string"&&typeof a.message==="string"?(m=m!=null?m:"URL_RESPONSE_FETCH_FAILED/"+a.name,i=i+". Failed fetching video content with error: "+a.name+" "+a.message):(m=m!=null?m:"URL_RESPONSE_FETCH_FAILED",i=i+". Failed fetching video content with unknown error")})["finally"](function(){var a=c("err").apply(void 0,[i].concat(j));a.name=[g,k,m].filter(Boolean).join("/");z(a,"progressive_implementation_error_with_more_info")})}else{f=c("err").apply(void 0,[i].concat(j));f.name=[g,k,"VIDEO_ELEMENT_SRC_EMPTY"].filter(Boolean).join("/");z(f,"progressive_implementation_error_with_empty_src")}});try{var f=e.audioOnly,g=e.graphQLVideoDRMInfo,i=e.videoFBID;f===!0&&(a.style.display="none");f=g?(f=g.fairplayCert)!=null?f:null:null;if(b("cr:1680308")&&g&&f!=null&&i!=null){q.current=b("cr:1680308").newIfSupported(f,a,i,g.videoLicenseUriMap);if(q.current==null){f=c("err")("Fairplay not supported");z(f,"progressive_player_fairplay_handler_missing")}else q.current.addListener("error",function(a){a=c("err")(a.error);z(a,"progressive_player_fairplay_handler_error")})}var j=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);B.current=j;p.current=e;i=w();y({inbandCaptionsAutogeneratedFromManifest:u.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:u.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:i==null?void 0:i.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:u.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:i==null?void 0:i.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:i==null?void 0:i.sideLoadCaptionsUrlFromProps});A.dispatch({payload:{selectedVideoQuality:u.getUserSelectedVideoQuality(),streamingFormat:u.getStreamType()},type:"implementation_engine_initialized"});g=function(){j.setPlayheadPosition(m.startTimestamp)};c("UserAgent").isBrowser("IE11")?c("promiseDone")(j.getDOMLoadedMetadataPromise().then(g)):g()}catch(a){z(a,"progressive_player_create_exception")}},s=function(a,b){if(b==null)return!0;else if(a.videoFBID!==b.videoFBID){var c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",c);return!1}else if(a.hdSrc!==b.hdSrc||a.sdSrc!==b.sdSrc){c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",c);return!1}else return!1},t=function(a){var b;b={audioOnly:a.audioOnly,graphQLVideoDRMInfo:(b=a.graphQLVideoDRMInfo)!=null?b:null,hdSrc:a.hdSrc===""?null:(b=a.hdSrc)!=null?b:null,hdSrcPreferred:a.hdSrcPreferred,sdSrc:a.sdSrc===""?null:(b=a.sdSrc)!=null?b:null,videoFBID:a.videoFBID};if(!s(b,n.current))return!1;if(b.hdSrc==null&&b.sdSrc==null)throw c("unrecoverableViolation")("Empty hdSrc and sdSrc","comet_video_player");n.current=b;o.current=d("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(b);r();return!0},u=d("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){if(c("gkx")("440")){var a,b=p.current;if(!b)return null;a=(a=B.current)==null?void 0:a.getUnderlyingVideoElement().currentSrc;return babelHelpers["extends"]({},b,{playingSrc:a!=null&&a!==""?a:null})}else return p.current},setUserSelectedVideoQuality:function(a){var b=p.current;if(!b)throw c("unrecoverableViolation")("Attempt to switch quality when playingVideoInfo does not exist","comet_video_player");var e=B.current;if(!e)throw c("unrecoverableViolation")("Attempt to switch quality when videoElementAPI does not exist","comet_video_player");p.current=d("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(b,a);var f=p.current.targetSrc;if(f===null){c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",m.videoFBID==null?"":String(m.videoFBID)).warn("Received null targetSrc from setUserSelectedVideoQuality, selectedQuality: %s",String(a));return}k(f,m.expiredVideoUrlRefreshHandler).then(function(a){var b;if(((b=p.current)==null?void 0:b.targetSrc)!==f)return;l(e.getUnderlyingVideoElement(),{crossOrigin:(b=m.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING)!=null?b:m.isSpherical===!0?"anonymous":null},a);a=(b=A.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?b:0;a>0&&e.setPlayheadPosition(a);A.getCurrentState().controlledState.playbackState==="playing"&&e.play();A.dispatch({payload:{},type:"representation_changed"})})["catch"](function(a){var b;if(((b=p.current)==null?void 0:b.targetSrc)!==f)return;b=c("getErrorSafe")(a);c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",m.videoFBID==null?"":String(m.videoFBID)).catching(b).warn("Failed refreshing video URL with original error: %s",String(b))})}}),v=function(){q.current&&(q.current.destroy(),q.current=null)};e=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({checkInDOM:e,createDebugAPI:function(a){var c=a.getVideoElementAPI;a=a.loggerToVPL;return b("cr:1607")?b("cr:1607").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:u,getVideoElementAPI:c,loggerToVPL:a}):null},createVideoPlayerError:function(a,b){return j(a,b,(a=p.current)==null?void 0:a.targetSrc)},debugLog:i,debugLogId:f,destroyEngineParts:function(){v()},engineExtrasAPI:u,engineMetadata:{isAbrEnabled:!1,playerVersion:"comet_progressive",streamingFormat:"progressive"},handleFatalError:g,handleVideoElementChanged:function(a){a!=null&&r()},handleVideoInfoChange:t,initialProps:m,setExposedStateInReact:a});f=e.engine;var w=e.getCaptionsInfo,x=e.getVideoElement,y=e.handleCaptionsInfoChange,z=e.handleFatalImplementationError,A=e.machine,B=e.videoElementAPIRef;return f}function k(a,e){if(e&&d("videoUrlUtils").isCdnUrlExpired(a))return e(a).then(function(a){var d;return(d=a.refreshedUrl)!=null?d:(h||(h=b("Promise"))).reject(c("err")("Failed refreshing URL"+(a.reason!==null?" with reason: "+a.reason:"")))});else return(h||(h=b("Promise"))).resolve(a)}function l(a,b,c){b=b.crossOrigin;if(c==null||c==="")a.removeAttribute("src");else{var d=a.playbackRate;a.setAttribute("src",c);var e=null;if(b!=null){try{e=new URL(c).origin}catch(a){}if(e!=null&&location.origin!==e)switch(b){case"anonymous":case"use-credentials":a.setAttribute("crossOrigin",b);break;default:a.removeAttribute("crossOrigin");break}}a.playbackRate=d}}g.createVideoPlayerProgressiveImplementationEngine=a;g.internal_setHTMLVideoElementSrc=l}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine);a=a.reactVideoFrameAndComponents;return a}g["default"]=a}),98);
__d("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24067547472867468"}),null);
__d("VideoPlayerRelayFragmentRefetchQuery.graphql",["VideoPlayerRelay_video$normalization.graphql","VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},c={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"},e=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"playerSuborigin",variableName:"playerSuborigin"}],kind:"FragmentSpread",name:"VideoPlayerRelay_video"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{args:[{kind:"Variable",name:"VideoPlayerRelay_video$playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"VideoPlayerRelay_video$playerSuborigin",variableName:"playerSuborigin"}],fragment:b("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"),metadata:{},name:"VideoPlayerRelayFragmentRefetchQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VideoPlayerRelay_video.graphql",["VideoPlayerRelayFragmentRefetchQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["node"],operation:b("VideoPlayerRelayFragmentRefetchQuery.graphql"),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"VideoPlayerRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_podcast_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unsupported_browser_message",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LatencySensitiveConfig",kind:"LinkedField",name:"latency_sensitive_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"broadcast_latency_sensitivity",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LivePlaybackInstrumentationConfigParams",kind:"LinkedField",name:"live_playback_instrumentation_configs",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_client_triggered_trace_enabled",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_ncsr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seo_web_crawler_lookaside_url",storageKey:null},{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoImplementationsParamsRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaConfig_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerBuilder_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoAutoplayGatingResult_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoDRMInfo_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoP2PSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerCaptionsSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerLiveLatencyKnobSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioAvailabilityInfoRelay_video"},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{args:null,documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"InstreamVideoAdBreaksPlayer_video"}]},{args:null,kind:"FragmentSpread",name:"VideoPlayerVideoIsCastingCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerIMFFromVideoMetadataRelay_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerUnsupportedBrowserMessageFallback.react",["ErrorMetadata","FBLogger","VideoPlayerFallbackCover.react","err","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect;b.useMemo;var k=b.useRef;function a(a,b){var e=d("react-compiler-runtime").c(11);bb0:{if(a!=null){var f;if(e[0]!==a||e[1]!==b){var g;f=c("err")("Cannot play video: Unsupported browser message from server: %s",a);f.name="VideoPlayerUnsupportedBrowserMessageFromServer";g=(g=f.metadata)!=null?g:new(c("ErrorMetadata"))();f.metadata=g;g.addEntry("COMET_VIDEO","VIDEO_ID",b);e[0]=a;e[1]=b;e[2]=f}else f=e[2];g=f;break bb0}g=null}var h=g,l=k(!1);e[3]!==h?(f=function(){if(h!=null&&!l.current){var a;l.current=!0;(a=c("FBLogger")("comet_video_player").catching(h)).warn.apply(a,[(a=h.messageFormat)!=null?a:""].concat((a=h.messageParams)!=null?a:[]))}},e[3]=h,e[4]=f):f=e[4];e[5]!==h||e[6]!==b?(g=[h,b],e[5]=h,e[6]=b,e[7]=g):g=e[7];j(f,g);if(a!=null){e[8]!==a||e[9]!==h?(b=i.jsx(c("VideoPlayerFallbackCover.react"),{debugError:h,message:a}),e[8]=a,e[9]=h,e[10]=b):b=e[10];return b}return null}g.useVideoPlayerUnsupportedBrowserMessageFallback=a}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:13141","cr:913","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=2e4,i=new Set(),j=null;function a(a,e){e===void 0&&(e="extender"),i.add(a),j==null&&(d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null||b("cr:13141").extend(),j=c("setInterval")(function(){d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null||b("cr:13141").extend(),b("cr:913")&&new(b("cr:913"))().setClientTime(Date.now()).setWebsessionID(d("WebSession").getId()).setReason(e).log()},h))}function e(a){i["delete"](a);a=i.size;a===0&&j!=null&&(c("clearInterval")(j),j=null)}g.subscribe=a;g.unsubscribe=e}),98);
__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useId;function a(){var a=d("react-compiler-runtime").c(4),b=(i||(i=d("VideoPlayerHooks"))).usePlaying(),c=k(),e,f;a[0]!==b||a[1]!==c?(e=function(){if(b){d("WebSessionExtender").subscribe(c,"video");return function(){d("WebSessionExtender").unsubscribe(c)}}},f=[b,c],a[0]=b,a[1]=c,a[2]=e,a[3]=f):(e=a[2],f=a[3]);j(e,f);return null}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=d("VideoPlayerHooks"))).useStalling(),c=h.useStreamInterrupted(),e=h.useIsLiveRewindActive();c=c&&!e;e=b;b=c?"live_video_interrupted_overlay":e?"spinner":"none";var f;a[0]!==c||a[1]!==b||a[2]!==e?(f={liveVideoInterruptedOverlayVisible:c,loadingIndicatorType:b,spinnerVisible:e},a[0]=c,a[1]=b,a[2]=e,a[3]=f):f=a[3];return f}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","once","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),k=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),l=c("once")(function(){return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(k,{})})});function a(){var a=d("react-compiler-runtime").c(6),b=c("useVideoPlayerDefaultLoadingIndicatorsLogic")(),e=b.loadingIndicatorType;b=b.spinnerVisible;var f;a[0]!==b?(f=i.jsx(j,{isVisible:b}),a[0]=b,a[1]=f):f=a[1];b=f;var g;bb0:switch(e){case"spinner":g=b;break bb0;case"live_video_interrupted_overlay":a[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=l(),a[2]=f):f=a[2];g=f;break bb0;case"none":default:g=b}a[3]!==g||a[4]!==e?(f={loadingIndicatorElement:g,loadingIndicatorType:e},a[3]=g,a[4]=e,a[5]=f):f=a[5];return f}g["default"]=a}),98);
__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;b=d("createVideoStateHook").createVideoStateHook(null);var k=b.setterHook;e=d("createVideoStateHook").createVideoStateHook(null);var l=e.setterHook;f=e.valueHook;function a(a){var b=d("react-compiler-runtime").c(12),e=a.disableSubscription,f=a.playerFormat,g=a.subOrigin,h=a.videoFBID,m=(i||(i=d("VideoPlayerHooks"))).useIsLive(),n=i.useIsFullscreen(),o=i.useIsDesktopPictureInPicture(),p=i.useController(),q=k(),r=l(),s;b[0]!==e||b[1]!==o||b[2]!==n||b[3]!==m||b[4]!==f||b[5]!==r||b[6]!==q||b[7]!==g||b[8]!==p||b[9]!==h?(a=function(){if(e===!0){c("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:h,name:"disable_subscription"}});return}var a=new(c("UnifiedVideoCVCSubscription"))(h,c("getPlayerFormatForLogData")({isDesktopPictureInPicture:o,isFullscreen:n},f),g,p,m,function(a){r(a)});q(a);return function(){a.destroy()}},s=[o,n,m,e,f,r,q,g,p,h],b[0]=e,b[1]=o,b[2]=n,b[3]=m,b[4]=f,b[5]=r,b[6]=q,b[7]=g,b[8]=p,b[9]=h,b[10]=a,b[11]=s):(a=b[10],s=b[11]);j(a,s)}b=f;g.useVideoPlayerUnifiedCVCProvider=a;g.useVideoPlayerUnifiedCVCData=b}),98);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerHooks","VideoPlayerIMFMetadataContext","VideoPlayerInteractionOverlay.react","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:99","gkx","react","react-compiler-runtime","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useImperativeHandle;function a(a){var e=d("react-compiler-runtime").c(25),f=a.apiRef,g=a.children,h=a.disableCVCSubscription,l=a.disableLoadingIndicator,m=a.disableLogging,n=a.instreamVideoAdBreaksPlayer,o=a.playerFormat,p=a.subOrigin,q=a.videoFBID,r=a.videoPlayerIMFFromVideoMetadata;a=a.videoPlayerSpherical;l=l===void 0?!1:l;var s=(i||(i=d("VideoPlayerHooks"))).useController(),t=d("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),u,v;e[0]!==s||e[1]!==t?(u=function(){return{controller:s,portalingPlaceInfo:t}},v=[s,t],e[0]=s,e[1]=t,e[2]=u,e[3]=v):(u=e[2],v=e[3]);k(typeof f==="function"?f:null,u,v);f=m===!0||h===!0;e[4]!==o||e[5]!==p||e[6]!==f||e[7]!==q?(u={disableSubscription:f,playerFormat:o,subOrigin:p,videoFBID:q},e[4]=o,e[5]=p,e[6]=f,e[7]=q,e[8]=u):u=e[8];d("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider(u);v=c("useVideoPlayerDefaultLoadingIndicators")();m=v.loadingIndicatorElement;h=r!=null?r:null;o=l?null:m;e[9]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("gkx")("24328")?j.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,e[9]=f):f=e[9];e[10]!==g||e[11]!==n?(q=j.jsxs(c("VideoPlayerCaptionsAreaDeferred.react"),{children:[g,n]}),e[10]=g,e[11]=n,e[12]=q):q=e[12];e[13]===Symbol["for"]("react.memo_cache_sentinel")?(u=j.jsx(c("CoreVideoPlayerAutoplayClient.react"),{}),v=j.jsx(c("CoreVideoPlayerAudioClient.react"),{}),r=b("cr:1954434")?j.jsx(b("cr:1954434"),{}):null,e[13]=u,e[14]=v,e[15]=r):(u=e[13],v=e[14],r=e[15]);e[16]!==p?(l=b("cr:99")?j.jsx(b("cr:99"),{subOrigin:p}):null,e[16]=p,e[17]=l):l=e[17];e[18]===Symbol["for"]("react.memo_cache_sentinel")?(m=j.jsx(c("VideoPlayerWebSessionExtender.react"),{}),e[18]=m):m=e[18];e[19]!==l||e[20]!==h||e[21]!==o||e[22]!==q||e[23]!==a?(g=j.jsxs(d("VideoPlayerIMFMetadataContext").VideoPlayerIMFMetadataContextProvider,{value:h,children:[a,o,f,q,u,v,r,l,m]}),e[19]=l,e[20]=h,e[21]=o,e[22]=q,e[23]=a,e[24]=g):g=e[24];return g}g["default"]=a}),98);
__d("normalizeVideoPlayerLoopCount",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){b===void 0&&(b=null);d===void 0&&(d=null);var e;if(a==null){d=(b!=null?b:!1)?d!=null?d:0:0;d===-1?e=-1:d<0||!Number.isFinite(d)||Math.floor(d)!==d?e=0:d===0&&b===!0?e=-1:e=d}else if(a===-1||a===Number.POSITIVE_INFINITY)e=-1;else if(a<0||!Number.isFinite(a)||Math.floor(a)!==a)throw c("unrecoverableViolation")("Invalid loopingCount: "+a,"comet_video_player");else e=a;return e}g["default"]=a}),98);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","normalizeVideoPlayerLoopCount","react","react-compiler-runtime","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(a,b,c,d,e,f,g){"use strict";var h=["apiRef","children","disableLoadingIndicator","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerIMFFromVideoMetadata","videoPlayerSpherical"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(38),e,f,g,i,k,l,m,n,o,p,q,r;b[0]!==a?(e=a.apiRef,f=a.children,i=a.disableLoadingIndicator,k=a.implementations,l=a.instreamVideoAdBreaksPlayer,m=a.portalingEnabled,n=a.portalingFromVideoID,o=a.portalingPlaceMetaData,p=a.portalingRenderPlaceholder,q=a.videoPlayerIMFFromVideoMetadata,r=a.videoPlayerSpherical,g=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q,b[12]=r):(e=b[1],f=b[2],g=b[3],i=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],r=b[12]);a=c("usePlayerOriginRouteTracePolicy")();var s=c("useRouteProductAttribution")();s||(s=g.productAttribution);var t=g,u=t.loopCount,v=t.playerFormat,w=t.subOrigin;t=t.videoFBID;var x;b[13]!==u?(x=c("normalizeVideoPlayerLoopCount")(u),b[13]=u,b[14]=x):x=b[14];u=x;b[15]!==e||b[16]!==f||b[17]!==g.loggingConfig.disableCVCSubscription||b[18]!==g.loggingConfig.disableLogging||b[19]!==i||b[20]!==l||b[21]!==v||b[22]!==w||b[23]!==t||b[24]!==q||b[25]!==r?(x=j.jsx(c("VideoPlayerXImplSurface.react"),{apiRef:e,children:f,disableCVCSubscription:g.loggingConfig.disableCVCSubscription,disableLoadingIndicator:i,disableLogging:g.loggingConfig.disableLogging,instreamVideoAdBreaksPlayer:l,playerFormat:v,subOrigin:w,videoFBID:t,videoPlayerIMFFromVideoMetadata:q,videoPlayerSpherical:r}),b[15]=e,b[16]=f,b[17]=g.loggingConfig.disableCVCSubscription,b[18]=g.loggingConfig.disableLogging,b[19]=i,b[20]=l,b[21]=v,b[22]=w,b[23]=t,b[24]=q,b[25]=r,b[26]=x):x=b[26];b[27]!==g||b[28]!==k||b[29]!==u||b[30]!==m||b[31]!==n||b[32]!==o||b[33]!==p||b[34]!==s||b[35]!==a||b[36]!==x?(e=j.jsx(c("CoreVideoPlayerWithComponents.react"),babelHelpers["extends"]({},g,{implementations:k,loopCount:u,portalingEnabled:m,portalingFromVideoID:n,portalingPlaceMetaData:o,portalingRenderPlaceholder:p,productAttribution:s,routeTracePolicy:a,children:x})),b[27]=g,b[28]=k,b[29]=u,b[30]=m,b[31]=n,b[32]=o,b[33]=p,b[34]=s,b[35]=a,b[36]=x,b[37]=e):e=b[37];return e}g["default"]=a}),98);
__d("VideoPlayerXImplRelayWrapper.react",["VideoPlayerXImpl.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("VideoPlayerXImpl.react")}),98);
__d("XFBLatencySensitiveTypeUtils.facebook",["$InternalEnumUtils","LatencySensitiveType"],(function(a,b,c,d,e,f,g){a=d("$InternalEnumUtils").createToJSEnum(c("LatencySensitiveType"));b=d("$InternalEnumUtils").createFromJSEnum(c("LatencySensitiveType"));g.toJSEnum=a;g.fromJSEnum=b}),98);
__d("computeAspectRatio",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a!=null&&b!=null&&a!==0&&b!==0?a/b:null}f["default"]=a}),66);
__d("defaultErrorBoundaryFallback",["VideoPlayerFallbackCover.react","getVideoPlayerUserFacingErrorMessageFromError","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=c("getVideoPlayerUserFacingErrorMessageFromError")(a);return i.jsx(c("VideoPlayerFallbackCover.react"),{debugError:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getVideoPlayerAutoplayProps",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b!=null?b:"respect_user_settings";var d=b==="dangerously_always_autoplay";c=c!=null?c:"unknown";var e=a.autoplaySetting||"default_autoplay",f=e==="off";d=d||b==="respect_user_settings"&&!f&&a.canAutoplay;f=b==="do_not_autoplay"?c:a.autoplayGatingResult;c=d?"allow":b==="dangerously_disable_autoplay_management"?"dangerously_disable_autoplay_management":"deny";return{autoplayGatingResult:f,autoplaySetting:e,canAutoplay:c}}f["default"]=a}),66);
__d("useGraphQLVideoAutoplayGatingResult_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoAutoplayGatingResult_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoAutoplayGatingResult",["CometRelay","GraphQLVideoAutoplayGatingResult","react-compiler-runtime","useGraphQLVideoAutoplayGatingResult_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=d("react-compiler-runtime").c(4);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoAutoplayGatingResult_video.graphql"),a);var e;c[0]!==a.autoplay_gating_result||c[1]!==a.can_autoplay||c[2]!==a.viewer_autoplay_setting?(e=d("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(a.autoplay_gating_result,a.viewer_autoplay_setting,a.can_autoplay),c[0]=a.autoplay_gating_result,c[1]=a.can_autoplay,c[2]=a.viewer_autoplay_setting,c[3]=e):e=c[3];return e}g["default"]=a}),98);
__d("useGraphQLVideoDRMInfo_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoDRMInfo_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoDRMInfo",["CometRelay","GraphQLVideoDRMInfo","react","useGraphQLVideoDRMInfo_video.graphql","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useRef;function l(a){if(a!=null){a=m(a);return d("GraphQLVideoDRMInfo").makeGraphQLVideoDRMInfo(a)}return null}function m(a){a=JSON.parse(a)||{};var b=a.fairplay_cert,c=a.graph_api_video_license_uri,d=a.video_license_uri_map;a=a.widevine_cert;return{fairplay_cert:b,graph_api_video_license_uri:c,video_license_uri_map:d,widevine_cert:a}}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoDRMInfo_video.graphql"),a);var e=k(null),f=l(a.drm_info),g=(i||(i=c("useUnsafeRef_DEPRECATED")))(null);e.current!==a.drm_info&&(e.current=a.drm_info,g.current=f);return g.current}g["default"]=a}),98);
__d("useGraphQLVideoP2PSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoP2PSettings_video",selections:[{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveCommunityInfo",kind:"LinkedField",name:"community_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"community_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"community_name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoP2PSettings",["CometRelay","GraphQLVideoP2PSettings","recoverableViolation","useGraphQLVideoP2PSettings_video.graphql","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=null;if(a){var e,f,g,h,i;e={delay_p2p_until_play:(e=(e=a.config)==null?void 0:e.delay_p2p_until_play)!=null?e:!1,disable_hivejava_for_livevc:(e=(e=a.config)==null?void 0:e.disable_hivejava_for_livevc)!=null?e:!1};var j=a.ticket,k=a.community_info;f=(f=a.hive_initialization_options)==null?void 0:f.debug_level;g=(g=(g=a.hive_initialization_options)==null?void 0:g.hive_tech_order.map(function(a){var b=d("GraphQLVideoP2PSettings").hiveTechOrderOrNull(a);b==null&&a!=null&&c("recoverableViolation")("Invalid hive tech order: '"+a+"'","comet_video_player");return b}).filter(Boolean))!=null?g:[];h=(h=a.hive_initialization_options)==null||(h=h.hive_java)==null?void 0:h.min_version;i=(i=a.hive_initialization_options)!=null&&i.hive_java?{minVersion:h}:null;h=a.hive_initialization_options?{HiveJava:i,debugLevel:f,hiveTechOrder:g}:null;f={communityId:(a=k==null?void 0:k.community_id)!=null?a:"unknowncustomer",communityName:(i=k==null?void 0:k.community_name)!=null?i:"Unknown Customer"};b={community_info:f,config:e,hive_initialization_options:h,ticket:j}}return b}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoP2PSettings_video.graphql"),a);var e=(i||(i=c("useUnsafeRef_DEPRECATED")))(null),f=i(null);a=j((a=a.p2p_settings)!=null?a:null);var g=JSON.stringify(a);e.current!==g&&(e.current=g!=null?g:null,f.current=a!=null?a:null);return f.current}g["default"]=a}),98);
__d("useVideoImplementationsParamsRelayImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],b=[{}],c={alias:null,args:null,concreteType:"XFBVideoDeliveryFailureReason",kind:"LinkedField",name:"failure_reason",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_format",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_params",storageKey:null}],storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoImplementationsParamsRelayImpl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"CometAudioLanguageUtils_dubbingInfo"}],type:"Video",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"dubbingInfo"},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_nextgendash_availability",storageKey:null},{alias:"videoDeliveryLegacyFields",args:[{kind:"Literal",name:"negate",value:!0}],concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{alias:"dash_manifest_xml_string",args:a,kind:"ScalarField",name:"playlist",storageKey:'playlist(scrubbing_preference:"MPEG_DASH")'},{alias:"dash_manifest_url",args:a,kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:"browser_native_sd_url",args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"browser_native_hd_url",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'}],storageKey:"if_viewer_should_use_video_delivery_response(negate:true)"},{alias:"videoDeliveryResponseFragment",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{kind:"CatchField",field:{alias:"videoDeliveryResponseResult",args:[{kind:"Literal",name:"video_delivery_request",value:{dash_manifest_requests:b,dash_manifest_url_requests:b,hls_playlist_url_requests:b,progressive_url_requests:[{quality:"SD"},{quality:"HD"}]}}],concreteType:"XFBVideoDeliveryResponse",kind:"LinkedField",name:"video_delivery_response",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBDashManifestResponse",kind:"LinkedField",name:"dash_manifests",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_xml",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"XFBDashManifestUrlResponse",kind:"LinkedField",name:"dash_manifest_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_url",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"XFBProgressiveUrlResponse",kind:"LinkedField",name:"progressive_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"progressive_url",storageKey:null},c,{alias:null,args:null,concreteType:"XFBProgressiveUrlMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"quality",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBHlsPlaylistUrlResponse",kind:"LinkedField",name:"hls_playlist_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"hls_playlist_url",storageKey:null},c],storageKey:null}],storageKey:'video_delivery_response(video_delivery_request:{"dash_manifest_requests":[{}],"dash_manifest_url_requests":[{}],"hls_playlist_url_requests":[{}],"progressive_url_requests":[{"quality":"SD"},{"quality":"HD"}]})'},to:"RESULT"}],storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("useVideoImplementationsParamsRelayImpl",["CometAudioLanguageUtils","CometRelay","CometVideoPlayerNextgendashAvailability","getJSEnumSafe","react","react-compiler-runtime","useVideoImplementationsParamsRelayImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a,e){var f,g,i,j,k,l,m,n=d("react-compiler-runtime").c(20);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoImplementationsParamsRelayImpl_video.graphql"),a);var o=d("CometAudioLanguageUtils").useUserPreferredLanguage(a==null?void 0:a.dubbingInfo);(f=a.spherical_video_fallback_urls)==null||f.hd;(f=a.spherical_video_fallback_urls)==null||f.sd;(f=a.videoDeliveryLegacyFields)==null||f.dash_manifest_xml_string;(f=a.videoDeliveryLegacyFields)==null||f.dash_manifest_url;(f=a.videoDeliveryLegacyFields)==null||f.browser_native_hd_url;(f=a.videoDeliveryLegacyFields)==null||f.browser_native_sd_url;f=(f=a.videoDeliveryLegacyFields)==null?void 0:f.browser_native_hd_url;g=(g=a.videoDeliveryLegacyFields)==null?void 0:g.browser_native_sd_url;i=(i=a.videoDeliveryLegacyFields)==null?void 0:i.dash_manifest_url;j=(j=a.videoDeliveryLegacyFields)==null?void 0:j.dash_manifest_xml_string;if(n[0]!==a.comet_video_player_nextgendash_availability){var p;p=(p=c("getJSEnumSafe")(c("CometVideoPlayerNextgendashAvailability"),a.comet_video_player_nextgendash_availability))!=null?p:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER";n[0]=a.comet_video_player_nextgendash_availability;n[1]=p}else p=n[1];k=(k=a.spherical_video_fallback_urls)==null?void 0:k.hd;l=(l=a.spherical_video_fallback_urls)==null?void 0:l.sd;m=(m=a.videoDeliveryResponseFragment)==null?void 0:m.videoDeliveryResponseResult;var q;n[2]!==e.dashManifestUrlOverride_DO_NOT_USE||n[3]!==e.minQualityPreferenceOverrideFromProductSurface||n[4]!==e.preferBrowserNativeImplementation||n[5]!==e.videoPlayerShakaConfig||n[6]!==o||n[7]!==f||n[8]!==g||n[9]!==i||n[10]!==j||n[11]!==p||n[12]!==k||n[13]!==l||n[14]!==m||n[15]!==a.can_use_oz||n[16]!==a.id||n[17]!==a.is_spherical||n[18]!==a.min_quality_preference?(q={browserNativeHdUrl:f,browserNativeSdUrl:g,canUseOz:a.can_use_oz,dashManifestUrl:i,dashManifestUrlOverride_DO_NOT_USE:e.dashManifestUrlOverride_DO_NOT_USE,dashManifestXmlString:j,initialAudioUserPreferredLanguage:o,isSpherical:a.is_spherical,minQualityPreference:a.min_quality_preference,minQualityPreferenceOverrideFromProductSurface:e.minQualityPreferenceOverrideFromProductSurface,nextgendashAvailability:p,preferBrowserNativeImplementation:e.preferBrowserNativeImplementation,sphericalVideoFallbackHdUrl:k,sphericalVideoFallbackSdUrl:l,videoDeliveryResponseResult:m,videoFBID:a.id,videoPlayerShakaConfig:e.videoPlayerShakaConfig},n[2]=e.dashManifestUrlOverride_DO_NOT_USE,n[3]=e.minQualityPreferenceOverrideFromProductSurface,n[4]=e.preferBrowserNativeImplementation,n[5]=e.videoPlayerShakaConfig,n[6]=o,n[7]=f,n[8]=g,n[9]=i,n[10]=j,n[11]=p,n[12]=k,n[13]=l,n[14]=m,n[15]=a.can_use_oz,n[16]=a.id,n[17]=a.is_spherical,n[18]=a.min_quality_preference,n[19]=q):q=n[19];e=q;return e}g["default"]=a}),98);
__d("VideoPlayerShakaConfigContextProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.setContext=function(a,b){if(this.$1[a]!==b){var c;this.$1=babelHelpers["extends"]({},this.$1,(c={},c[a]=b,c))}};b.setAllContexts=function(a){this.$1=a};b.getAllContexts=function(){return this.$1};return a}();f["default"]=a}),66);
__d("VideoPlayerShakaConfig",["VideoPlayerContextSensitiveConfigResolver","VideoPlayerShakaConfigContextProvider"],(function(a,b,c,d,e,f,g){var h={};a=function(){function a(a,b,d){this.$1=new(c("VideoPlayerShakaConfigContextProvider"))(),this.$2=b||null,this.$3=new(c("VideoPlayerContextSensitiveConfigResolver"))(d),this.$3.setContexts(a||{}),a&&this.$1.setAllContexts(a)}a.setGlobalOverrideConfig=function(a){h=a};var b=a.prototype;b.setContext=function(a,b){var c=this.$1.getAllContexts();this.$1.setContext(a,b);a=this.$1.getAllContexts();c!==a&&this.$3.setContexts(a)};b.setOverrideConfig=function(a){this.$2=a};b.getBool=function(a,b){a=this.$4(a,b);return typeof a==="boolean"?a:b};b.getNumber=function(a,b){a=this.$4(a,b);return typeof a==="number"?a:b};b.getString=function(a,b){a=this.$4(a,b);return typeof a==="string"?a:b};b.getAllContexts=function(){return this.$1.getAllContexts()};b.$4=function(a,b){if(!!h&&typeof h[a]===typeof b)return h[a];if(typeof this.$3.getValue(a)===typeof b)return this.$3.getValue(a);return!!this.$2&&typeof this.$2[a]===typeof b?this.$2[a]:null};return a}();g["default"]=a}),98);
__d("prepareVideoPlayerImplementations",["ErrorMetadata","VideoPlayerOzImplementationData","VideoPlayerOzWWWConfig","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerShakaConfig","cr:8921","cr:8922","cr:9524","emptyFunction","err","getErrorSafe","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=(e=b("cr:8922"))==null?void 0:e.makeNextgendashEngineData;function a(a){var e=a.browserNativeHdUrl,f=a.browserNativeSdUrl,g=a.canUseOz,j=a.dashManifestUrl,k=a.dashManifestUrlOverride_DO_NOT_USE,l=a.dashManifestXmlString,m=a.initialAudioUserPreferredLanguage,n=a.isBroadcast,o=a.isLiveStreaming,p=a.isSpherical,q=a.minQualityPreference,r=a.minQualityPreferenceOverrideFromProductSurface,s=a.nextgendashAvailability,t=a.preferBrowserNativeImplementation,u=a.sphericalVideoFallbackHdUrl,v=a.sphericalVideoFallbackSdUrl,w=a.videoDeliveryResponseResult,x=a.videoFBID;a=a.videoPlayerShakaConfig;var y=[],z=[],A=null,B=null,C=null,D=null,E=[],F=[],G=[],H=[],I=[];if(w!=null)if(w.ok!==!0){var J=c("err")("VideoDeliveryResponse API failed: %s",JSON.stringify(w.errors.map(function(a){try{JSON.stringify(a);return a}catch(b){return String(a)}})));J.name="VideoDeliveryResponseAPIFailed";E.push(J)}else{J=w.value;w=i(F,"dash_manifests","DashManifest",J.dash_manifests,c("emptyFunction").thatReturnsTrue,function(a){return a.manifest_xml!=null&&a.manifest_xml!==""?a:null})[0];var K=i(G,"dash_manifest_urls","DashManifestURL",J.dash_manifest_urls,c("emptyFunction").thatReturnsTrue,function(a){return a.manifest_url!=null&&a.manifest_url!==""?a:null})[0],L=i(H,"progressive_urls","ProgressiveURLHD",J.progressive_urls,function(a){return((a=a.metadata)==null?void 0:a.quality)==="HD"},function(a){return a.progressive_url!=null?a:null})[0],M=i(H,"progressive_urls","ProgressiveURLSD",J.progressive_urls,function(a){return((a=a.metadata)==null?void 0:a.quality)==="SD"},function(a){return a.progressive_url!=null?a:null})[0];A=(w=w==null?void 0:w.manifest_xml)!=null?w:null;B=(w=K==null?void 0:K.manifest_url)!=null?w:null;C=(K=L==null?void 0:L.progressive_url)!=null?K:null;D=(w=M==null?void 0:M.progressive_url)!=null?w:null;if(C==null&&D==null&&c("gkx")("8034")){L=i(I,"hls_playlist_urls","HLSPlaylistURL",J.hls_playlist_urls,c("emptyFunction").thatReturnsTrue,function(a){return a.hls_playlist_url!=null?a:null})[0];C=null;D=(K=L==null?void 0:L.hls_playlist_url)!=null?K:null}}else A=l!=null?l:null,B=j!=null?j:null,C=e!=null?e:null,D=f!=null?f:null;p===!0&&(C=u!=null?u:C,D=v!=null?v:D);if(t!==!0){if(h&&b("cr:8921")&&(E.length===0&&(F.length===0||G.length===0||B!=null||A!=null))){M=h({canUseOz:g,dashManifestUrl:B,dashManifestUrlOverride_DO_NOT_USE:k,dashManifestXmlString:A,experimentationConfig:new(c("VideoPlayerShakaConfig"))(),initialAudioUserPreferredLanguage:m,minQualityPreference:q,nextgendashAvailability:s});M instanceof Error?z.push(["VideoPlayerNextgendashImplementation",M]):y.push({Component:b("cr:8921"),data:M,typename:"VideoPlayerNextgendashImplementation"})}if(E.length===0&&(F.length===0||G.length===0||B!=null||A!=null)){w=d("VideoPlayerOzImplementationData").makeOzImplementationData({canUseOz:g,dashManifestUrl:B,dashManifestUrlOverride_DO_NOT_USE:k,dashManifestXmlString:A,experimentationConfig:new(c("VideoPlayerOzWWWConfig"))(a!=null?a:new(c("VideoPlayerShakaConfig"))()),initialAudioUserPreferredLanguage:m,minQualityPreference:q});w instanceof Error?z.push(["VideoPlayerOzImplementation",w]):y.push({Component:b("cr:9524"),data:w,typename:"VideoPlayerOzImplementation"})}}else{J=c("err")("preferBrowserNativeImplementation="+String(t));J.name="VideoImplementationsPreferBrowserNative";h&&b("cr:8921")&&z.push(["VideoPlayerNextgendashImplementation",J]);z.push(["VideoPlayerOzImplementation",J])}if(E.length===0&&(H.length===0||C!=null||D!=null)){L=r!=null?r:q;K=d("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:C,hdSrcPreferred:c("gkx")("24369")||L==="HD"||L==="UHD",sdSrc:D});K instanceof Error?z.push(["VideoPlayerProgressiveImplementation",K]):y.push({Component:c("VideoPlayerProgressiveImplementationV2.react"),data:K,typename:"VideoPlayerProgressiveImplementation"})}l=y.length===0;j=[];j.push.apply(j,E);j.push.apply(j,F);j.push.apply(j,G);j.push.apply(j,H);j.push.apply(j,I);j.push.apply(j,z.map(function(a){var b,d=a[0];a=a[1];a=c("getErrorSafe")(a);d=d.replace(/^VideoPlayer/,"").replace(/(Implementation)|(Engine)$/,"")+"Engine";b=c("err").apply(void 0,["Cannot use "+d+" / "+((b=a.messageFormat)!=null?b:a.message)].concat(a.messageFormat!=null?(b=a.messageParams)!=null?b:[]:[]));b.name="VideoPlayerCannotUse"+d+"/"+a.name;return b}));e=null;if(l||c("gkx")("24370")&&j.length>0){f=new Map();for(u=0;u<j.length;++u){v=j[u];M=v.name+": "+((s=v.messageFormat)!=null?s:v.message);f.has(M)||f.set(M,v)}g=Array.from(f.values());B=[];k=[];A=[];for(a=0;a<g.length;++a){m=g[a];B.push(m.name);k.push((w=m.messageFormat)!=null?w:m.message);m.messageFormat!=null&&m.messageParams!=null&&A.push.apply(A,m.messageParams)}e=c("err").apply(void 0,[(l?p===!0?"Cannot play 360 video: ":"Cannot play video: ":p===!0?"Warning for 360 video: ":"Warning: ")+k.join(" ++ ")].concat(A));e.name=B.join("++");e.type=l?"fatal":"warn";e.project="comet_video_player";J=(t=e.metadata)!=null?t:new(c("ErrorMetadata"))();e.metadata=J;x!=null&&J.addEntry("COMET_VIDEO","VIDEO_ID",String(x));J.addEntry("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({isBroadcast:n,isLiveStreaming:o,isSpherical:p}));if(l)throw e}return{implementations:y,warning:e}}function i(a,b,c,d,e,f){e=d.filter(e);var g=e.map(function(a){return a.failure_reason==null?f(a):null}).filter(Boolean);if(e.length===0)a.push(k(b,c,d));else if(g.length===0){e=e.filter(function(a){return a.failure_reason!=null});e.length===0?a.push(l(b,c,d)):a.push.apply(a,e.map(function(a){return a.failure_reason!=null?j(b,c,a.failure_reason,a.metadata):null}).filter(Boolean))}return g}function j(a,b,d,e){try{var f;f=(f=JSON.stringify(e))!=null?f:String(e)}catch(a){f=String(e)}e=c("err").apply(void 0,["VideoDeliveryResponse "+a+" failure for "+b+": "+d.type+"; metadata=%s"+(d.message_format!=null&&d.message_format!==""?"; "+d.message_format:""),f].concat(d.message_params));e.name="VideoDeliveryResponseFailureReason/"+a+"("+b+")/"+d.type;return e}function k(a,b,d){try{d=(d=JSON.stringify(d))!=null?d:"N/A"}catch(a){d="N/A"}d=c("err")("VideoDeliveryResponse "+a+" failure for "+b+": no matching items; all items: %s",d);d.name="VideoDeliveryResponseContractViolation/"+a+"("+b+")/no_matching";return d}function l(a,b,d){try{d=(d=JSON.stringify(d))!=null?d:"N/A"}catch(a){d="N/A"}d=c("err")("VideoDeliveryResponse "+a+" failure for "+b+": no succeeded or failed items; all items: %s",d);d.name="VideoDeliveryResponseContractViolation/"+a+"("+b+")/no_success_and_failure";return d}g["default"]=a}),98);
__d("useVideoPlayerImplementations",["FBLogger","gkx","prepareVideoPlayerImplementations","react","react-compiler-runtime","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useEffect;e.useMemo;function a(a){var b=d("react-compiler-runtime").c(3),e,f;b[0]!==a?(e=function(){if(a){var b,d,e;b=(b=a.messageFormat)!=null?b:a.message;d=a.messageFormat!=null?(d=a.messageParams)!=null?d:[]:[];(e=c("FBLogger")("comet_video_player").catching(a)).warn.apply(e,[b].concat(d))}},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);i(e,f)}var j=c("gkx")("24370")?a:c("useEmptyFunction");function b(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=c("prepareVideoPlayerImplementations")(a),b[0]=a,b[1]=e):e=b[1];a=e;b=a;j(b.warning);return b}g["default"]=b}),98);
__d("useVideoImplementationsRelayImpl",["react","react-compiler-runtime","useVideoImplementationsParamsRelayImpl","useVideoPlayerImplementations"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useDebugValue;function a(a,b){var e=d("react-compiler-runtime").c(4);a=c("useVideoImplementationsParamsRelayImpl")(a,b);b=c("useVideoPlayerImplementations")(a);var f=b.implementations;b=b.warning;var g;e[0]!==f||e[1]!==a||e[2]!==b?(g={implementations:f,params:a,warning:b},e[0]=f,e[1]=a,e[2]=b,e[3]=g):g=e[3];i(g);return f}g["default"]=a}),98);
__d("useVideoImplementationsRelay",["useVideoImplementationsRelayImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoImplementationsRelayImpl")}),98);
__d("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioAvailabilityInfoRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioAvailabilityInfoRelay",["CometRelay","VideoPlayerAudioAvailabilityInfo","react","react-compiler-runtime","useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a){var c=d("react-compiler-runtime").c(3);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"),a);var e;c[0]!==a.audio_availability||c[1]!==a.muted_segments?(e=d("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityInfo({audioAvailability:a.audio_availability,mutedSegmentsUnsanitized:a.muted_segments==null?[]:a.muted_segments.map(j)}),c[0]=a.audio_availability,c[1]=a.muted_segments,c[2]=e):e=c[2];a=e;return a}function j(a){return{muteEndTimeInSec:a.mute_end_time_in_sec,muteStartTimeInSec:a.mute_start_time_in_sec}}g["default"]=a}),98);
__d("useVideoPlayerAudioSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioSettings_video",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null}],storageKey:null},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"CometAudioLanguageUtils_dubbingInfo"}],type:"Video",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"dubbingInfo"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioSettings",["AudioSettingsVolumeSetting","CometAudioLanguageUtils","CometRelay","react","react-compiler-runtime","useVideoPlayerAudioSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;var j=1;e=.5;var k=new Map([["default",j],["quiet",e]]);function a(a){var e,f=d("react-compiler-runtime").c(5);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioSettings_video.graphql"),a);e=(e=a.audio_settings)==null?void 0:e.video_volume_setting;var g="DEFAULT";bb0:switch(e){case"DEFAULT":case"QUIET":g=e;break bb0;default:}e=c("AudioSettingsVolumeSetting")[g];if(f[0]!==e){g=(g=k.get(e))!=null?g:j;f[0]=e;f[1]=g}else g=f[1];e=g;g=d("CometAudioLanguageUtils").useUserPreferredLanguage(a==null?void 0:a.dubbingInfo);f[2]!==e||f[3]!==g?(a={audioUserPreferredLanguage:g,preferredVolumeSetting:e},f[2]=e,f[3]=g,f[4]=a):a=f[4];e=a;return e}g["default"]=a}),98);
__d("useVideoPlayerCaptionsSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerCaptionsSettings_video",selections:[{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_opacity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_size",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerCaptionsSettings",["CometRelay","react-compiler-runtime","useVideoPlayerCaptionsSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i="DEFAULT",j="BLACK",k="WHITE",l="DEFAULT";function a(a){var c,e,f,g,m=d("react-compiler-runtime").c(8);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerCaptionsSettings_video.graphql"),a);c=(c=(c=a.captions_settings)==null?void 0:c.always_show_captions)!=null?c:!1;e=(e=(e=a.captions_settings)==null?void 0:e.captions_background_color)!=null?e:j;f=(f=(f=a.captions_settings)==null?void 0:f.captions_background_opacity)!=null?f:i;g=(g=(g=a.captions_settings)==null?void 0:g.captions_text_color)!=null?g:k;a=(a=(a=a.captions_settings)==null?void 0:a.captions_text_size)!=null?a:l;var n;m[0]!==e||m[1]!==f||m[2]!==g||m[3]!==a?(n={captionsBackgroundColor:e,captionsBackgroundOpacity:f,captionsTextColor:g,captionsTextSize:a},m[0]=e,m[1]=f,m[2]=g,m[3]=a,m[4]=n):n=m[4];m[5]!==c||m[6]!==n?(e={alwaysShowCaptions:c,captionDisplayStyle:n},m[5]=c,m[6]=n,m[7]=e):e=m[7];return e}g["default"]=a}),98);
__d("useVideoPlayerIMFFromVideoMetadata",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useDebugValue;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(5),c=a.isVideoBroadcast;a=a.specInlineJson;c=c===!0;var e;b[0]!==c||b[1]!==a?(e={imfExpectedFromEmsg:c,specInlineJson:a},b[0]=c,b[1]=a,b[2]=e):e=b[2];c=e;a=c;b[3]!==a?(e={useVideoPlayerIMFFromVideoMetadata:a},b[3]=a,b[4]=e):e=b[4];i(e);return a}g["default"]=a}),98);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,concreteType:"VideoIMFData",kind:"LinkedField",name:"video_imf_data",plural:!1,selections:[{args:null,documentName:"useVideoPlayerIMFFromVideoMetadataRelay_video",fragmentName:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",fragmentPropName:"video_imf_data",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"spec_inline_json",storageKey:null}],type:"VideoIMFData",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay",["CometRelay","react-compiler-runtime","useVideoPlayerIMFFromVideoMetadata","useVideoPlayerIMFFromVideoMetadataRelay_video.graphql","useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=d("react-compiler-runtime").c(4);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql"),a);var f=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"),a.video_imf_data);f=f==null?void 0:f.spec_inline_json;var g;e[0]!==f||e[1]!==a.id||e[2]!==a.is_video_broadcast?(g={isVideoBroadcast:a.is_video_broadcast,specInlineJson:f,videoID:a.id},e[0]=f,e[1]=a.id,e[2]=a.is_video_broadcast,e[3]=g):g=e[3];return c("useVideoPlayerIMFFromVideoMetadata")(g)}g["default"]=a}),98);
__d("useVideoPlayerLiveLatencyKnobSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerLiveLatencyKnobSettings_video",selections:[{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerLiveLatencyKnobSettings",["CometRelay","react-compiler-runtime","useVideoPlayerLiveLatencyKnobSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c,e=d("react-compiler-runtime").c(3);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerLiveLatencyKnobSettings_video.graphql"),a);c=(c=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_desired_latency_ms)!=null?c:0;a=(a=(a=a.broadcast_low_latency_config)==null?void 0:a.ll_latency_tolerance_ms)!=null?a:0;var f;e[0]!==c||e[1]!==a?(f={desiredLatencyMs:c,latencyToleranceMs:a},e[0]=c,e[1]=a,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("useVideoPlayerShakaConfig_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaConfig_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fbls_tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_sensitive_broadcast",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaConfig",["CometRelay","VideoPlayerConnectionQuality","VideoPlayerOzWWWGlobalConfig","VideoPlayerShakaConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useSelectedLatencySetting","useVideoPlayerShakaConfig_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useEffect,k=e.useState;function a(a,e){var f=d("react-compiler-runtime").c(17);e=e.adClientToken;var g=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerShakaConfig_video.graphql"),a),i=e!=null,m=g.is_spherical===!0,n=g.is_gaming_video===!0;e=c("useSelectedLatencySetting")((a=g.id)!=null?a:"null",g.selected_latency_setting);var o=e[0];f[0]!==i||f[1]!==n||f[2]!==m||f[3]!==o||f[4]!==g.fbls_tier||f[5]!==g.is_latency_menu_enabled||f[6]!==g.is_latency_sensitive_broadcast||f[7]!==g.is_live_streaming?(a=function(){var a;return new(c("VideoPlayerShakaConfig"))({connection_quality:d("VideoPlayerConnectionQuality").evaluate(l),content_category:n?"gaming":"general",fbls_tier:(a=g.fbls_tier)!=null&&a.startsWith("user")?"user":"general",is_ad:i,is_latency_sensitive_broadcast:g.is_latency_sensitive_broadcast===!0,is_live:g.is_live_streaming===!0,is_spherical:m,latency_level:g.is_latency_menu_enabled===!0?o:"normal",player_format:"inline",servable_via_fmbs:!1,streaming_implementation:"default"})},f[0]=i,f[1]=n,f[2]=m,f[3]=o,f[4]=g.fbls_tier,f[5]=g.is_latency_menu_enabled,f[6]=g.is_latency_sensitive_broadcast,f[7]=g.is_live_streaming,f[8]=a):a=f[8];e=k(a);var p=e[0];f[9]!==i||f[10]!==p?(a=function(){p.setContext("is_ad",i)},e=[p,i],f[9]=i,f[10]=p,f[11]=a,f[12]=e):(a=f[11],e=f[12]);j(a,e);f[13]!==m||f[14]!==p?(a=function(){p.setContext("is_spherical",m)},e=[p,m],f[13]=m,f[14]=p,f[15]=a,f[16]=e):(a=f[15],e=f[16]);j(a,e);return p}function l(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_video",selections:[{alias:"video_player_shaka_performance_logger_init2",args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerBuilder_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerBuilder_init",fragmentPropName:"init",kind:"ModuleImport"},{alias:null,args:null,kind:"ScalarField",name:"per_session_sampling_rate",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder",["CometRelay","react-compiler-runtime","useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql","useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql");function a(a){var c=d("react-compiler-runtime").c(2);a=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"),a);var e;if(c[0]!==a.video_player_shaka_performance_logger_init2){e=Symbol["for"]("react.early_return_sentinel");bb0:{var f,g=a.video_player_shaka_performance_logger_init2?d("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init2):null;f=(f=a.video_player_shaka_performance_logger_init2)==null?void 0:f.per_session_sampling_rate;if(g!=null&&f!=null){e=new g({perSessionSampleRate:f});break bb0}}c[0]=a.video_player_shaka_performance_logger_init2;c[1]=e}else e=c[1];return e!==Symbol["for"]("react.early_return_sentinel")?e:null}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",selections:[{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_player_shaka_performance_logger_should_sample",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl",["CometRelay","react-compiler-runtime","useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql","useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql");function a(a){var c=d("react-compiler-runtime").c(3);a=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"),a);var e;c[0]!==a.video_player_shaka_performance_logger_init||c[1]!==a.video_player_shaka_performance_logger_should_sample?(e=a.video_player_shaka_performance_logger_init?d("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init):null,e!=null&&a.video_player_shaka_performance_logger_should_sample===!0&&e.forceShouldSample(),c[0]=a.video_player_shaka_performance_logger_init,c[1]=a.video_player_shaka_performance_logger_should_sample,c[2]=e):e=c[2];return e}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelay",["useVideoPlayerShakaPerformanceLoggerRelayImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoPlayerShakaPerformanceLoggerRelayImpl")}),98);
__d("VideoStatusType",[],(function(a,b,c,d,e,f){a=Object.freeze({ENCODING:1,DELETED:2,ENCODED:3,UPLOADING:5,OK:6,TOO_LONG:7,ENCODE_FAILED:8,UNPUBLISHED:9,SOFT_DELETED:10,UNDISCOVERABLE:11,UPLOAD_FAILED:13,UPLOADED:14,ORIGINAL_VIDEO_DELETED:15});f["default"]=a}),66);
__d("evaluateVideoPlayerVideoStatusFallbackCover",["fbt","ErrorMetadata","VideoPlayerFallbackCover.react","VideoStatusType","err","getGraphQLEnumSafe","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.disableVideoStatusFallbackIf,d=a.overrideGkForVideoStatusFallback_EXPERIMENTAL,e=a.videoFBID;a=a.videoStatusTypeFromGraphQL;e=k({videoFBID:e,videoStatusTypeFromGraphQL:a});a=null;var f;if(d==null&&!c("gkx")("24384"))a=null,f="disabled_by_gk";else if(d===!1)a=null,f="disabled_by_gk_override";else if((b==null?void 0:b(e))===!0){a=null;f="disable_if:"+e.videoAvailabilityStatus+":"+((d=e.videoStatusTypeFromGraphQL)!=null?d:"null")}else{switch(e.videoAvailabilityStatus){case"unknown":a=null;break;case"ok":a=null;break;case"undiscoverable":a=null;break;case"unpublished":a=null;break;case"processing":b=c("gkx")("24385");a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:b?e.debugError:null,message:h._(/*BTDS*/"This video is being processed..."),showDebugWithoutError:b,showLearnMoreLink:!1});break;case"processing_failed":a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:e.debugError,message:h._(/*BTDS*/"Processing of this video failed.")});break;case"deleted":a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:e.debugError,message:h._(/*BTDS*/"This video isn't available at the moment.")});break;default:e.videoAvailabilityStatus}f=(a==null?"not_needed_for_status:":"fallback_for_status:")+e.videoAvailabilityStatus+":"+String(e.videoStatusTypeFromGraphQL)}return{fallback:a,fallbackDebug:f,videoStatus:e}}function k(a){var b=a.videoFBID;a=a.videoStatusTypeFromGraphQL;var d=[c("getGraphQLEnumSafe")(c("VideoStatusType"),6)].includes(a)?"ok":[c("getGraphQLEnumSafe")(c("VideoStatusType"),9)].includes(a)?"unpublished":[c("getGraphQLEnumSafe")(c("VideoStatusType"),11)].includes(a)?"undiscoverable":[c("getGraphQLEnumSafe")(c("VideoStatusType"),5),c("getGraphQLEnumSafe")(c("VideoStatusType"),14),c("getGraphQLEnumSafe")(c("VideoStatusType"),1),c("getGraphQLEnumSafe")(c("VideoStatusType"),3)].includes(a)?"processing":[c("getGraphQLEnumSafe")(c("VideoStatusType"),13),c("getGraphQLEnumSafe")(c("VideoStatusType"),8),c("getGraphQLEnumSafe")(c("VideoStatusType"),7)].includes(a)?"processing_failed":[c("getGraphQLEnumSafe")(c("VideoStatusType"),10),c("getGraphQLEnumSafe")(c("VideoStatusType"),2)].includes(a)?"deleted":"unknown",e=d==="ok"||d==="unpublished"||d==="undiscoverable"||d==="processing_failed"||d==="deleted"||d==="unknown",f=null;if(d!=="ok"){var g;f=c("err")("Video is now %s due to video_status_type=%s",d,a);g=(g=f.metadata)!=null?g:new(c("ErrorMetadata"))();g.addEntry("COMET_VIDEO","VIDEO_ID",b!=null?b:"");f.metadata=g;f.name="VideoPlayerVideoStatusInfo"}b={debugError:f,isTerminalStatus:e,videoAvailabilityStatus:d,videoStatusTypeFromGraphQL:a};return b}g["default"]=a}),226);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_status_type",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover",["CometRelay","evaluateVideoPlayerVideoStatusFallbackCover","react","react-compiler-runtime","useInterval","useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useDebugValue;function a(a,e,f,g){var i=d("react-compiler-runtime").c(5);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"),a);var k;i[0]!==f||i[1]!==g||i[2]!==a.id||i[3]!==a.video_status_type?(k=c("evaluateVideoPlayerVideoStatusFallbackCover")({disableVideoStatusFallbackIf:f,overrideGkForVideoStatusFallback_EXPERIMENTAL:g,videoFBID:a.id,videoStatusTypeFromGraphQL:a.video_status_type}),i[0]=f,i[1]=g,i[2]=a.id,i[3]=a.video_status_type,i[4]=k):k=i[4];f=k;c("useInterval")(e,f.videoStatus.isTerminalStatus||f.fallback==null?0:1e4);j(f);return f}g["default"]=a}),98);
__d("VideoPlayerRelay.react",["CastingStateHooks","CometPlaceholder.react","CometRelay","CometTrackingNodeProvider.react","ErrorMetadata","FBLogger","InstreamVideoAdBreaksPlayer.react","JSResourceForInteraction","VideoPlayerErrorBoundary.react","VideoPlayerRelay_video.graphql","VideoPlayerUnsupportedBrowserMessageFallback.react","VideoPlayerXImplRelayWrapper.react","XFBLatencySensitiveTypeUtils.facebook","computeAspectRatio","cr:759","defaultErrorBoundaryFallback","deferredLoadComponent","err","getVideoPlayerAutoplayProps","gkx","lazyLoadComponent","normalizeVideoPlayerLoopCount","react","react-compiler-runtime","requireDeferredForDisplay","useEmptyFunction","useGraphQLVideoAutoplayGatingResult","useGraphQLVideoDRMInfo","useGraphQLVideoP2PSettings","useVideoImplementationsRelay","useVideoPlayerAudioAvailabilityInfoRelay","useVideoPlayerAudioSettings","useVideoPlayerAvailableCaptionsLocalesFromRelay","useVideoPlayerCaptionsSettings","useVideoPlayerIMFFromVideoMetadataRelay","useVideoPlayerLiveLatencyKnobSettings","useVideoPlayerShakaConfig","useVideoPlayerShakaPerformanceLoggerBuilder","useVideoPlayerShakaPerformanceLoggerRelay","useVideoPlayerVideoStatusRelayWithFallbackCover"],(function(a,b,c,d,e,f,g){"use strict";var h=["video"],i=["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"],j,k,l=k||(k=d("react"));e=k;e.useCallback;var m=e.useEffect,n=e.useRef,o=e.useTransition,p=(f=b("cr:759"))!=null?f:c("useEmptyFunction"),q=c("gkx")("24325"),r=c("gkx")("24326"),s=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSphericalFallbackCover.react").__setRef("VideoPlayerRelay.react")),t=c("lazyLoadComponent")(c("JSResourceForInteraction")("VideoPlayerVideoIsCastingCover.react").__setRef("VideoPlayerRelay.react"));function u(a){var e=d("react-compiler-runtime").c(13),f,g;e[0]!==a?(g=a.video,f=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g):(f=e[1],g=e[2]);a=d("CometRelay").useRefetchableFragment(j!==void 0?j:j=b("VideoPlayerRelay_video.graphql"),g);var i=a[0],k=a[1];g=o();var p=g[1];e[3]!==k?(a=function(){p(function(){k({},{fetchPolicy:"network-only"})})},e[3]=k,e[4]=a):a=e[4];g=a;a=c("useVideoPlayerVideoStatusRelayWithFallbackCover")(i,g,f.disableVideoStatusFallbackIf,f.overrideGkForVideoStatusFallback_EXPERIMENTAL);var q=a.fallback,r=a.fallbackDebug,s=a.videoStatus,t=n(null);e[5]!==r||e[6]!==i||e[7]!==s||e[8]!==q?(g=function(){var a=s,b=t.current;if(q!=null&&(a.videoAvailabilityStatus!==(b==null?void 0:b.videoAvailabilityStatus)||a.videoStatusTypeFromGraphQL!==(b==null?void 0:b.videoStatusTypeFromGraphQL))){t.current=s;c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",(a=i.id)!=null?a:"").warn("VideoPlayerRelay rendered the video status fallback: %s",r)}},e[5]=r,e[6]=i,e[7]=s,e[8]=q,e[9]=g):g=e[9];m(g,void 0);if(q!=null)return q;e[10]!==f||e[11]!==i?(a=l.jsx(v,babelHelpers["extends"]({},f,{video:i})),e[10]=f,e[11]=i,e[12]=a):a=e[12];return a}function v(a){var b,e=d("react-compiler-runtime").c(102),f=a.accessToken,g=a.adClientToken,h=a.apiRef,i=a.audioOnly,j=a.autoplayGatingResult,k=a.bufferEndLimit,m=a.bypassUseCometSizeError,n=a.canAutoplay,o=a.children,u=a.disableLoadingIndicator,v=a.externalLogID,w=a.externalLogType,x=a.forceProgressive_EXPERIMENTAL,y=a.graphQLVideoDRMInfo,z=a.initialForceHD,A=a.initialTracePolicy,B=a.loadSequence,C=a.loggingConfig,D=a.loggingToSNAPLAdditionalData,E=a.loggingToVPLAdditionalData,F=a.loopCount,G=a.manifestURL_DO_NOT_USE,H=a.playerFormat,ba=a.playerOriginOverride,ca=a.portalingEnabled,da=a.portalingFromVideoID,ea=a.portalingPlaceMetaData,fa=a.portalingRenderPlaceholder,ga=a.poster,ha=a.productAttribution,ia=a.renderVideoPixelsFit,I=a.seoWebCrawlerLookasideUrl,ja=a.seoWebCrawlerVideoTracks,ka=a.source_VPL_LOGGING_HACK,la=a.startTimestamp,J=a.subOrigin,K=a.video,L=a.volumeSetting;a=a.wrapVideoPixels_EXPERIMENTAL;u=u===void 0?!1:u;x=x===void 0?!1:x;z=z===void 0?!1:z;H=H===void 0?"inline":H;var M=K.id;if(M==null||M===""){var N=c("err")("Cannot play video: Invalid video ID: %s",M===""?"an empty string":String(M));N.name="VideoPlayerInvalidVideoID";N.project="comet_video_player";throw N}N=K.dash_prefetch_experimental;var O=c("useVideoPlayerAvailableCaptionsLocalesFromRelay")(K),ma=(O==null?void 0:O.find(aa))!=null;if(e[0]!==((b=K.latency_sensitive_config)==null?void 0:b.broadcast_latency_sensitivity)){var P;b=d("XFBLatencySensitiveTypeUtils.facebook").toJSEnum((b=K.latency_sensitive_config)==null?void 0:b.broadcast_latency_sensitivity);e[0]=(P=K.latency_sensitive_config)==null?void 0:P.broadcast_latency_sensitivity;e[1]=b}else b=e[1];P=b;e[2]!==g?(b={adClientToken:g},e[2]=g,e[3]=b):b=e[3];b=c("useVideoPlayerShakaConfig")(K,b);var na=p(M),oa=c("useGraphQLVideoP2PSettings")(K),Q=c("useGraphQLVideoDRMInfo")(K);Q=y!=null?y:Q;y=!!(Q&&Q.fairplayCert!==null);x=x===!0||y||q&&!!K.is_live_streaming||r&&typeof MediaSource==="undefined";y=z?"HD":null;e[4]!==G||e[5]!==x||e[6]!==y||e[7]!==b?(z={dashManifestUrlOverride_DO_NOT_USE:G,minQualityPreferenceOverrideFromProductSurface:y,preferBrowserNativeImplementation:x,videoPlayerShakaConfig:b},e[4]=G,e[5]=x,e[6]=y,e[7]=b,e[8]=z):z=e[8];G=c("useVideoImplementationsRelay")(K,z);x=c("useVideoPlayerCaptionsSettings")(K);y=c("useVideoPlayerAudioSettings")(K);b=c("useVideoPlayerLiveLatencyKnobSettings")(K);z=b.desiredLatencyMs;b=b.latencyToleranceMs;var pa=c("useVideoPlayerAudioAvailabilityInfoRelay")(K),R=c("useGraphQLVideoAutoplayGatingResult")(K),S;e[9]!==j||e[10]!==n||e[11]!==R?(S=c("getVideoPlayerAutoplayProps")(R,n,j),e[9]=j,e[10]=n,e[11]=R,e[12]=S):S=e[12];j=S;n=c("useVideoPlayerShakaPerformanceLoggerRelay")(K);R=c("useVideoPlayerShakaPerformanceLoggerBuilder")(K);S=c("useVideoPlayerIMFFromVideoMetadataRelay")(K);var T;e[13]!==H||e[14]!==J||e[15]!==K?(T=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("InstreamVideoAdBreaksPlayer.react"),{playerFormat:H,subOrigin:J,video:K})}),e[13]=H,e[14]=J,e[15]=K,e[16]=T):T=e[16];T=T;var U=d("CastingStateHooks").useCastingVideoID(),V=d("VideoPlayerUnsupportedBrowserMessageFallback.react").useVideoPlayerUnsupportedBrowserMessageFallback(K.unsupported_browser_message,M);if(V!=null)return V;V=K.permalink_url;var W=K.spherical_video_renderer,X;e[17]!==H||e[18]!==W||e[19]!==J||e[20]!==V?(X=W?l.jsx(d("CometRelay").MatchContainer,{match:W,props:{playerFormat:H,sphericalVideoRenderer:W,subOrigin:J,videoTahoeUrl:V}}):null,e[17]=H,e[18]=W,e[19]=J,e[20]=V,e[21]=X):X=e[21];W=X;V=K.is_spherical;X=K.is_spherical_enabled;var Y=K.permalink_url;if(V===!0&&X!==!0){if(Y==null||Y===""){var Z;X=c("err")("Cannot play video: Empty permalink URL for a spherical video");X.name="VideoPlayerSphericalEmptyPermalinkURL";X.project="comet_video_player";Z=(Z=X.metadata)!=null?Z:new(c("ErrorMetadata"))();Z.addEntry("COMET_VIDEO","VIDEO_ID",M);X.metadata=Z;throw X}e[22]!==Y?(Z=l.jsx(s,{videoTahoeUrl:Y}),e[22]=Y,e[23]=Z):Z=e[23];return Z}if(U!=null&&U===M){e[24]!==K?(X=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(t,{video:K})}),e[24]=K,e[25]=X):X=e[25];return X}U=(Z=(Y=K.live_playback_instrumentation_configs)==null?void 0:Y.is_client_triggered_trace_enabled)!=null?Z:!1;e[26]!==F||e[27]!==K.is_looping||e[28]!==K.loop_count?(X=c("normalizeVideoPlayerLoopCount")(F,K.is_looping,K.loop_count),e[26]=F,e[27]=K.is_looping,e[28]=K.loop_count,e[29]=X):X=e[29];Y=X;e[30]!==K.height||e[31]!==K.width?(Z=c("computeAspectRatio")(K.width,K.height),e[30]=K.height,e[31]=K.width,e[32]=Z):Z=e[32];F=Z;X=c("gkx")("23009")?K.animated_image_caption:void 0;Z=K.is_podcast_video===!0||i;i=K.pmv_metadata!=null;V=V===!0;I=I!=null?I:K.seo_web_crawler_lookaside_url;O=((O=O==null?void 0:O.length)!=null?O:0)>0;L=L!==void 0?L:y.preferredVolumeSetting;var $;e[33]!==n||e[34]!==f||e[35]!==g||e[36]!==h||e[37]!==ma||e[38]!==pa||e[39]!==y.audioUserPreferredLanguage||e[40]!==P||e[41]!==k||e[42]!==m||e[43]!==x.alwaysShowCaptions||e[44]!==x.captionDisplayStyle||e[45]!==o||e[46]!==z||e[47]!==u||e[48]!==na||e[49]!==v||e[50]!==w||e[51]!==Q||e[52]!==oa||e[53]!==G||e[54]!==N||e[55]!==A||e[56]!==T||e[57]!==U||e[58]!==b||e[59]!==B||e[60]!==C||e[61]!==D||e[62]!==E||e[63]!==Y||e[64]!==H||e[65]!==ba||e[66]!==ca||e[67]!==da||e[68]!==ea||e[69]!==fa||e[70]!==ga||e[71]!==ha||e[72]!==ia||e[73]!==ja||e[74]!==ka||e[75]!==la||e[76]!==J||e[77]!==X||e[78]!==Z||e[79]!==i||e[80]!==V||e[81]!==I||e[82]!==O||e[83]!==L||e[84]!==K.broadcast_id||e[85]!==K.broadcast_status||e[86]!==K.broadcaster_origin||e[87]!==K.captions_url||e[88]!==K.is_live_streaming||e[89]!==K.is_live_trace_enabled||e[90]!==K.is_ncsr||e[91]!==K.is_video_broadcast||e[92]!==M||e[93]!==F||e[94]!==j.autoplayGatingResult||e[95]!==j.autoplaySetting||e[96]!==j.canAutoplay||e[97]!==S||e[98]!==R||e[99]!==W||e[100]!==a?($=l.jsx(c("VideoPlayerXImplRelayWrapper.react"),{VideoPlayerShakaPerformanceLoggerClass:n,accessToken:f,adClientToken:g,alt:X,alwaysShowCaptions:x.alwaysShowCaptions,apiRef:h,areCaptionsAutogenerated:ma,audioAvailabilityInfo:pa,audioOnly:Z,autoplayGatingResult:j.autoplayGatingResult,autoplaySetting:j.autoplaySetting,broadcastId:K.broadcast_id,broadcastLatencySensitivity:P,broadcastStatus:K.broadcast_status,broadcasterOrigin:K.broadcaster_origin,bufferEndLimit:k,bypassUseCometSizeError:m,canAutoplay:j.canAutoplay,captionDisplayStyle:x.captionDisplayStyle,children:o,desiredLatencyMs:z,disableLoadingIndicator:u,expiredVideoUrlRefreshHandler:na,externalLogID:v,externalLogType:w,graphQLVideoDRMInfo:Q,graphQLVideoP2PSettings:oa,implementations:G,initialRepresentationIds:N,initialTracePolicy:A,instreamVideoAdBreaksPlayer:T,isClientTriggeredTraceEnabled:U,isLiveStreaming:K.is_live_streaming,isLiveTraceEnabled:K.is_live_trace_enabled,isNCSR:K.is_ncsr,isPremiumMusicVideo:i,isSpherical:V,isVideoBroadcast:K.is_video_broadcast,latencyToleranceMs:b,loadSequence:B,loggingConfig:C,loggingToSNAPLAdditionalData:D,loggingToVPLAdditionalData:E,loopCount:Y,playerFormat:H,playerOriginOverride:ba,portalingEnabled:ca,portalingFromVideoID:da,portalingPlaceMetaData:ea,portalingRenderPlaceholder:fa,poster:ga,productAttribution:ha,renderVideoPixelsFit:ia,seoWebCrawlerLookasideUrl:I,seoWebCrawlerVideoTracks:ja,sideLoadCaptionsExpected:O,sideLoadCaptionsUrl:K.captions_url,source_VPL_LOGGING_HACK:ka,startTimestamp:la,subOrigin:J,userPreferenceLang:y.audioUserPreferredLanguage,videoFBID:M,videoPixelsAspectRatio:F,videoPlayerIMFFromVideoMetadata:S,videoPlayerShakaPerformanceLoggerBuilder:R,videoPlayerSpherical:W,volumeSetting:L,wrapVideoPixels_EXPERIMENTAL:a},M),e[33]=n,e[34]=f,e[35]=g,e[36]=h,e[37]=ma,e[38]=pa,e[39]=y.audioUserPreferredLanguage,e[40]=P,e[41]=k,e[42]=m,e[43]=x.alwaysShowCaptions,e[44]=x.captionDisplayStyle,e[45]=o,e[46]=z,e[47]=u,e[48]=na,e[49]=v,e[50]=w,e[51]=Q,e[52]=oa,e[53]=G,e[54]=N,e[55]=A,e[56]=T,e[57]=U,e[58]=b,e[59]=B,e[60]=C,e[61]=D,e[62]=E,e[63]=Y,e[64]=H,e[65]=ba,e[66]=ca,e[67]=da,e[68]=ea,e[69]=fa,e[70]=ga,e[71]=ha,e[72]=ia,e[73]=ja,e[74]=ka,e[75]=la,e[76]=J,e[77]=X,e[78]=Z,e[79]=i,e[80]=V,e[81]=I,e[82]=O,e[83]=L,e[84]=K.broadcast_id,e[85]=K.broadcast_status,e[86]=K.broadcaster_origin,e[87]=K.captions_url,e[88]=K.is_live_streaming,e[89]=K.is_live_trace_enabled,e[90]=K.is_ncsr,e[91]=K.is_video_broadcast,e[92]=M,e[93]=F,e[94]=j.autoplayGatingResult,e[95]=j.autoplaySetting,e[96]=j.canAutoplay,e[97]=S,e[98]=R,e[99]=W,e[100]=a,e[101]=$):$=e[101];return $}function aa(a){return a.localizedCreationMethod!=null}function a(a){var b=d("react-compiler-runtime").c(9),e,f,g;b[0]!==a?(g=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn,e=a.errorBoundaryFallback,f=babelHelpers.objectWithoutPropertiesLoose(a,i),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);a=g===void 0?!1:g;b[4]!==f?(g=l.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:13,children:l.jsx(u,babelHelpers["extends"]({},f))}),b[4]=f,b[5]=g):g=b[5];f=g;if(a)return f;g=e!=null?e:c("defaultErrorBoundaryFallback");b[6]!==f||b[7]!==g?(a=l.jsx(c("VideoPlayerErrorBoundary.react"),{description:"VideoPlayerRelayBoundary",fallback:g,children:f}),b[6]=f,b[7]=g,b[8]=a):a=b[8];return a}g["default"]=a}),98);
__d("VideoPlayerWithLiveVideoIndicator_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerWithLiveVideoIndicator_video",selections:[{alias:"breakingStatus",args:null,kind:"ScalarField",name:"breaking_status",storageKey:null},{alias:"videoId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"isPremiere",args:null,kind:"ScalarField",name:"is_premiere",storageKey:null},{alias:"liveViewerCount",args:null,kind:"ScalarField",name:"live_viewer_count_read_only",storageKey:null},{alias:"rehearsalInfo",args:null,concreteType:"LiveVideoRehearsalInfo",kind:"LinkedField",name:"rehearsal_info",plural:!1,selections:[{alias:"typeName",args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"publish_time",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerWithLiveVideoIndicator.react",["fbt","ix","CometImage.react","CometPlaceholder.react","CometRelay","CometRouteRenderType","Duration.react","FDSText.react","GamingVideoBackLink.react","VideoBroadcastStatus","VideoPlayerHooks","VideoPlayerWithLiveVideoIndicator_video.graphql","clearTimeout","cr:541","deferredLoadComponent","gkx","intlSummarizeNumber","react","react-compiler-runtime","requireDeferred","setTimeout","stylex","unrecoverableViolation","useVideoPlayerUnifiedCVCProvider"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=l||(l=d("react"));e=l;var o=e.useEffect,p=e.useRef,q=e.useState,r=c("deferredLoadComponent")(c("requireDeferred")("LiveVideoCometNuxForCVC.react").__setRef("VideoPlayerWithLiveVideoIndicator.react")),s={positionTop:{display:"x78zum5",height:"xxk0z11",insetInlineStart:"x1r4y97",position:"x10l6tqk",top:"x1tk7jg1",$$css:!0},positionTopWithCometNavOverlay:{insetInlineStart:"xx5wi7t",top:"xoyzfg9",$$css:!0},positionTopWithCometNavOverlayWorkplace:{insetInlineStart:"xx5wi7t",top:"xoyzfg9",$$css:!0}};function a(a){var e,f=d("react-compiler-runtime").c(50),g=a.hasCometNavOverlay,h=a.includeGamingBackLink,i=a.renderedInLiveProducer,l=a.shouldExpand,x=a.shouldShowPrivacyNux;a=a.video;var y=(m||(m=d("VideoPlayerHooks"))).useIsLive(),z=m.useIsLiveRewindActive(),A=m.useIsFullscreen(),B=d("CometRouteRenderType").useIsMain(),C=m.usePlaying(),D=p(null);a=d("CometRelay").useFragment(j!==void 0?j:j=b("VideoPlayerWithLiveVideoIndicator_video.graphql"),a);var E=(e=a==null?void 0:a.videoId)!=null?e:"";if(a==null||typeof E!=="string"||E==="")throw c("unrecoverableViolation")("Null video or bad videoId","comet_live_video");var F=d("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCData();e=q((e=a.liveViewerCount)!=null?e:0);var G=e[0],H=e[1];e=q(!1);var I=e[0],J=e[1];e=q(!1);var K=e[0],L=e[1],M;f[0]!==F||f[1]!==y?(e=function(){y&&F!=null&&(t(F.bs)?H(F.c):(H(0),J(!0)))},M=[F,y],f[0]=F,f[1]=y,f[2]=e,f[3]=M):(e=f[2],M=f[3]);o(e,M);f[4]!==C?(e=function(){C?(L(!0),D.current=c("setTimeout")(function(){L(!1)},3e3)):D.current&&(L(!1),c("clearTimeout")(D.current));return function(){return c("clearTimeout")(D.current)}},M=[C],f[4]=C,f[5]=e,f[6]=M):(e=f[5],M=f[6]);o(e,M);f[7]!==y||f[8]!==E?(e=function(){y&&E&&(b("cr:541")==null||b("cr:541").loadImmediately(function(a){a.LiveProducerLiveActivated(E)}))},M=[y,E],f[7]=y,f[8]=E,f[9]=e,f[10]=M):(e=f[9],M=f[10]);o(e,M);M=((e=a.rehearsalInfo)==null?void 0:e.typeName)==="LiveVideoRehearsalInfo";e=(e=a.is_gaming_video)!=null?e:!1;h=h!=null?h:!1;h=h&&B&&e;e=!y||I;if(e)return null;I=c("gkx")("22889");f[11]!==g||f[12]!==A||f[13]!==B||f[14]!==i||f[15]!==l?(e=(k||(k=c("stylex"))).props(s.positionTop,I?l!==!0&&(g||B)&&!A&&!i===!0&&s.positionTopWithCometNavOverlayWorkplace:g&&!A&&s.positionTopWithCometNavOverlay),f[11]=g,f[12]=A,f[13]=B,f[14]=i,f[15]=l,f[16]=e):e=f[16];f[17]!==h?(I=h?n.jsx(c("GamingVideoBackLink.react"),{}):null,f[17]=h,f[18]=I):I=f[18];f[19]!==z||f[20]!==M?(g={0:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v"},8:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z"},4:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1ciooss"},12:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1ciooss"},2:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1osi62z"},10:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1osi62z"},6:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1osi62z"},14:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1osi62z"},1:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},9:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"},5:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},13:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"},3:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},11:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"},7:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v x1d2osyd"},15:{className:"x6s0dn4 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xexx8yu x18d9i69 x25sj25 x1icxu4v xpz12be xof6966 xa4qsjk x18wbh7p xkewf8z x1d2osyd"}}[!!!z<<3|!!!z<<2|!!z<<1|!!M<<0],f[19]=z,f[20]=M,f[21]=g):g=f[21];A=M?"primary":"white";f[22]!==a?(B=u(a),f[22]=a,f[23]=B):B=f[23];f[24]!==K||f[25]!==z||f[26]!==l||f[27]!==a.publish_time?(i=l===!0&&K&&(a==null?void 0:a.publish_time)!=null&&!z&&w(a.publish_time),f[24]=K,f[25]=z,f[26]=l,f[27]=a.publish_time,f[28]=i):i=f[28];f[29]!==A||f[30]!==B||f[31]!==i?(h=n.jsxs(c("FDSText.react"),{color:A,type:"bodyLink4",children:[B,i]}),f[29]=A,f[30]=B,f[31]=i,f[32]=h):h=f[32];f[33]!==h||f[34]!==g?(M=n.jsx("div",babelHelpers["extends"]({},g,{"data-testid":void 0,children:h})),f[33]=h,f[34]=g,f[35]=M):M=f[35];f[36]!==G||f[37]!==a?(K=v(a,G),f[36]=G,f[37]=a,f[38]=K):K=f[38];f[39]!==M||f[40]!==K||f[41]!==e||f[42]!==I?(z=n.jsxs("div",babelHelpers["extends"]({},e,{children:[I,M,K]})),f[39]=M,f[40]=K,f[41]=e,f[42]=I,f[43]=z):z=f[43];f[44]!==x||f[45]!==E?(l=x===!0&&n.jsx(c("CometPlaceholder.react"),{fallback:null,children:n.jsx("div",babelHelpers["extends"]({className:"x1r4y97 x10l6tqk x1w1tb2m"},{children:n.jsx(r,{videoID:E})}))}),f[44]=x,f[45]=E,f[46]=l):l=f[46];f[47]!==z||f[48]!==l?(A=n.jsxs(n.Fragment,{children:[z,l]}),f[47]=z,f[48]=l,f[49]=A):A=f[49];return A}function t(a){if(a==null)return!1;switch(a){case c("VideoBroadcastStatus").LIVE:case c("VideoBroadcastStatus").LIVE_STOPPED:case c("VideoBroadcastStatus").SEAL_STARTED:return!0;default:return!1}}function u(a){if((a==null?void 0:a.isPremiere)===!0)return h._(/*BTDS*/"PREMIERE");return(a==null?void 0:a.breakingStatus)===!0?h._(/*BTDS*/"LIVE BREAKING"):h._(/*BTDS*/"LIVE")}u.displayName=u.name+" [from "+f.id+"]";function v(a,b){if(a===null||b==null||b===0)return null;a=n.jsx(c("CometImage.react"),{alt:"",src:i("411339")});a=n.jsx("span",babelHelpers["extends"]({className:"x3nfvp2 x2fvf9 x1n2onr6"},{children:a}));return n.jsxs("div",babelHelpers["extends"]({"aria-label":h._(/*BTDS*/"_j{\"*\":\"{number} people currently watching this video.\",\"_1\":\"1 person currently watching this video.\"}",[h._plural(b,"number",c("intlSummarizeNumber")(b))])},{className:"x6s0dn4 xrmyhay xjwep3j x1t39747 x1wcsgtt x1pczhz8 x9f619 x3nfvp2 x5yr21d xdzw4kq xexx8yu x18d9i69 x25sj25 x1icxu4v"},{"data-testid":void 0,role:"img",children:[a,n.jsx(c("FDSText.react"),{color:"primaryOnMedia",type:"body4",children:c("intlSummarizeNumber")(b)})]}))}v.displayName=v.name+" [from "+f.id+"]";function w(a){return n.jsx("div",babelHelpers["extends"]({className:"x3nfvp2 xdwrcjd"},{children:n.jsx(c("Duration.react"),{startTime:a*1e3,useLocalTime:!0})}))}w.displayName=w.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerX.react",["VideoPlayerErrorBoundary.react","VideoPlayerXImpl.react","defaultErrorBoundaryFallback","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e,f,g;b[0]!==a?(g=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn,e=a.errorBoundaryFallback,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);a=g===void 0?!1:g;g=f.videoPlayerSpherical!=null;var i;b[4]!==f||b[5]!==g?(i=j.jsx(c("VideoPlayerXImpl.react"),babelHelpers["extends"]({VideoPlayerShakaPerformanceLoggerClass:null,isSpherical:g},f)),b[4]=f,b[5]=g,b[6]=i):i=b[6];f=i;if(a)return f;g=e!=null?e:c("defaultErrorBoundaryFallback");b[7]!==f||b[8]!==g?(i=j.jsx(c("VideoPlayerErrorBoundary.react"),{description:"VideoPlayerX",fallback:g,children:f}),b[7]=f,b[8]=g,b[9]=i):i=b[9];return i}g["default"]=a}),98);
__d("useVideoOriginalDimensionsRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoOriginalDimensionsRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_rotation",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoOriginalDimensionsRelay",["CometRelay","computeAspectRatio","react-compiler-runtime","useVideoOriginalDimensionsRelay_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=d("react-compiler-runtime").c(7);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoOriginalDimensionsRelay_video.graphql"),a);var f=a==null?void 0:a.original_rotation;f=f==="ROTATE_LEFT"||f==="ROTATE_RIGHT";var g=f?a==null?void 0:a.original_height:a==null?void 0:a.original_width;f=f?a==null?void 0:a.original_width:a==null?void 0:a.original_height;e[0]!==f||e[1]!==g?(a=c("computeAspectRatio")(g,f),e[0]=f,e[1]=g,e[2]=a):a=e[2];a=a;var i;e[3]!==a||e[4]!==f||e[5]!==g?(i={originalAspectRatio:a,originalHeight:f,originalWidth:g},e[3]=a,e[4]=f,e[5]=g,e[6]=i):i=e[6];return i}g["default"]=a}),98);
__d("useVideoPlayerClickToPauseInteraction",["fbt","VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(5),b=(j||(j=d("VideoPlayerHooks"))).usePlaying(),c=j.useController(),e=j.useIsLive(),f;a[0]!==c?(f=function(){c.pause("user_initiated")},a[0]=c,a[1]=f):f=a[1];f=f;b=b&&!e;a[2]!==b||a[3]!==f?(e=b?{ariaLabel:h._(/*BTDS*/"Pause reel"),handler:f,overlayLabel:""}:null,a[2]=b,a[3]=f,a[4]=e):e=a[4];return e}g["default"]=a}),226);
__d("useVideoPlayerClickToPlayInteraction",["fbt","VideoPlayerHooks","react","react-compiler-runtime","useFeedClickEventHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;(i||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(9),e;b[0]!==a?(e=a===void 0?{}:a,b[0]=a,b[1]=e):e=b[1];a=e;var f=a.shouldUnmute;e=(j||(j=d("VideoPlayerHooks"))).usePaused();var g=j.useController(),i=j.useLastMuteReason();b[2]!==g||b[3]!==i||b[4]!==f?(a=function(){g.play("user_initiated"),f===!0&&i!=="user_initiated"&&g.setMuted(!1,"product_initiated")},b[2]=g,b[3]=i,b[4]=f,b[5]=a):a=b[5];a=a;a=c("useFeedClickEventHandler")(a);e=e;var k;b[6]!==e||b[7]!==a?(k=e?{ariaLabel:h._(/*BTDS*/"Play video"),handler:a,overlayLabel:""}:null,b[6]=e,b[7]=a,b[8]=k):k=b[8];return k}g["default"]=a}),226);
__d("useVideoPlayerDefaultControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useState,l=5e3;function a(a){var b=d("react-compiler-runtime").c(9),e;b[0]!==a?(e=a===void 0?{}:a,b[0]=a,b[1]=e):e=b[1];a=e;e=a.forceVisible;a=a.forceVisibleOnMount;var f=d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter(),g=f.ongoingInteractionsCount;f=f.onUserInteraction;var h=(i||(i=d("VideoPlayerHooks"))).useEnded(),m=i.useIsHovering(),n=i.usePaused(),o=i.useIsMouseIdle(),p=i.useVideoPlaybackEnded(),q=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",m&&!o,f);m=k(a===!0);var r=m[0],s=m[1];b[2]!==r||b[3]!==n?(o=function(){if(!n&&r){var a=c("setTimeout")(function(){s(!1)},l);return function(){c("clearTimeout")(a)}}},a=[r,n],b[2]=r,b[3]=n,b[4]=o,b[5]=a):(o=b[4],a=b[5]);j(o,a);e===!0||e===!1?m=e:q?m=!1:g>0||r?m=!0:n?m=h?p:!0:m=!1;b[6]!==m||b[7]!==f?(o={isControlsVisible:m,onUserInteraction:f},b[6]=m,b[7]=f,b[8]=o):o=b[8];return o}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceType",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("13");g.armadilloMessageSend=a}),98);
__d("EBReadyNotifier",["WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAResolvable").Resolvable)();function a(){h.resolve()}function b(){h.resolveWasCalled()&&(h=new(d("WAResolvable").Resolvable)())}function c(){return h.promise}g.markEBReady=a;g.resetEBReady=b;g.waitForEBReady=c}),98);
__d("LSCreateOfflineThreadingID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return c[0]=b.i64.random(),d[0]=b.i64.and_(b.i64.or_(b.i64.lsl_(a[0],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[0],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.resolve(d)}a.__sproc_name__="LSMailboxCreateOfflineThreadingIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueNewError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(6).add({errorId:void 0,taskId:a[0],errorCode:a[1],errorTitleText:a[2],errorBodyText:a[3],issuedTimestampMs:c[0],errorExtraData:a[4],presentationStyle:a[5]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewErrorStoredProcedure";a.__tables__=["user_visible_errors"];e.exports=a}),null);
__d("LSShape",["LSDict"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSDict").fromObject(a)}function b(a){return c("LSDict").shapeToRecord(a)}g.ofRecord=a;g.toRecord=b}),98);
__d("MAWBridge",["WABridge"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WABridge").getBridge()}g.getBridge=a}),98);
__d("MAWCryptoConsts",[],(function(a,b,c,d,e,f){"use strict";a=60*60;b=24*a;c=32;d=new Uint8Array(0).buffer;e=128;a=256;var g=12,h=1,i=2,j=2,k=4;b=b*30*6;var l=3,m="AES-GCM",n="HKDF",o="SHA-256";f.HKDF_SEED_LENGTH_IN_BYTES=c;f.HKDF_INFO=d;f.AES_GCM_TAG_LENGTH=e;f.AES_GCM_KEY_LENGTH=a;f.AES_GCM_IV_LENGTH_IN_BYTES=g;f.VERSION=h;f.CIPHER_ID=i;f.ADDITIONAL_DATA_LENGTH_IN_BYTES=j;f.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES=k;f.ENC_KEY_TTL=b;f.MAX_KEYCHAIN_SETUP_RETRIES=l;f.AES_GCM=m;f.HKDF=n;f.SHA256=o}),66);
__d("MAWErrorObject",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a instanceof Error)return a;else if(typeof a==="string")return c("err")(a);else return null}g.getErrorObject=a}),98);
__d("MAWIndexedDbMetadata",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="v1",i="v1",j="v1",k="v1",l="v1",m="v1";c=c("gkx")("14827")===!0?"v9":"v3";var n="messenger_web_"+h,o="messenger_web_v3",p="messenger_web_encryption_"+i,q="messenger_web_signal_"+j,r="messenger_web_signal_v3",s="messenger_web_log_"+k,t="messenger_web_ebdb_"+m,u="messenger_web_eb_minos_db_dev_"+c,v="messenger_web_fts_"+l;function a(a){return n+"_"+a}function b(a){return v+"_"+a}function d(a){return o+"_"+a}function e(a){return p+"_"+a}function f(a){return q+"_"+a}function w(a){return r+"_"+a}function x(a){return"reverb_v1_"+a}function y(a){return"persisted_queue_"+a+"_v1"}function z(a){return s+"_"+a}function A(a){return t+"_"+a}function B(a){return u+"_"+a}function C(a){return"cache_service_"+a+"_v3"}function D(a){return"debug_info_v1_"+a}g.dbName=a;g.ftsDbName=b;g.restoreDbName2=d;g.encryptionDbName=e;g.jobsDbName=f;g.signalWorm=w;g.webReverDbbName=x;g.persistedQueueDbName=y;g.logDbName=z;g.ebdbName=A;g.ebMinosDbDevName=B;g.MAWcacheServiceDbName=C;g.MAWDebugInfoDBName=D}),98);
__d("WAAssertUnreachable",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("err")("Impossible value, the default statement should never be reached for value: "+a)}g["default"]=a}),98);
__d("WAJids",["WAAssertUnreachable","err"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i="@me",j="@system",k="status@broadcast",aa="0@s.whatsapp.net",l="call",m="@g.us",n=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,ba="@call",o="@msgr",ca="msgr",p="@interop",da="interop",q=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,r=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,s=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,t=/^([1-9][0-9]{0,19})@msgr$/,u=/^([1-9][0-9]{0,19})(:0)?@msgr$/,ea="@s.whatsapp.net",fa="s.whatsapp.net",v="@s.whatsapp.net",w="s.whatsapp.net",x="lid",y="@newsletter",z=/^([1-9][0-9]{0,19})@newsletter$/,A=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,B=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,C="@lid",ga="lid",D=/^([1-9][0-9]{0,14})@lid$/,E=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,ha="@broadcast",F=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,G=/^([0-9a-fA-F]{18,32})@call$/,H="@hosted",I="hosted",J=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,K="@hosted.lid",ia="hosted.lid",L=/^([1-9][0-9]{0,14}):99@hosted.lid$/,M="@bot",ja=/^[1-9][0-9]{0,19}(:0)?@bot$/,ka="16505361212"+v,la=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function a(a){return""+a+v}function b(a){return""+a+C}function N(a){return""+a+o}function d(a){return a.endsWith(m)?a:""+a+m}function e(a){return a.endsWith(y)?a:""+a+y}function f(a){return a.endsWith(H)?a:""+a+H}function ma(a){return a.endsWith(K)?a:""+a+K}function na(){return m}function O(a){if(a.endsWith(v))return a.slice(0,-v.length);else if(a.endsWith(o))return a.slice(0,-o.length);else if(a.endsWith(p))return a.slice(0,-p.length);else if(a.endsWith(C))return a.slice(0,-C.length);else if(a.endsWith(M))return a.slice(0,-M.length);else throw c("err")('userIdFromJid called with non-user jid "'+a+'"')}function oa(a,b){return Y(O(a)+":"+b+v)}function pa(a,b){return Z(O(a)+":"+b+o)}function qa(a,b){return Ab(P(a)+":"+b+C)}function ra(a,b){return X(O(a)+":"+b+W(a))}function sa(a){return""+a+ha}function ta(a){return a.split("@")[0]}function ua(a){return a.split("@")[0]}function va(a){a=a.split("@")[0];a=a.split(":");var b=a[0];a=a[1];a=parseInt(a,10);return{userId:b,deviceID:a}}function wa(a){a=va(a);return a.deviceID}function xa(a,b){if(a===i||a===j)return b;else return ta(a)}function ya(a){return a===i||a===j?null:a}function za(a){if(a===i||a===j)return null;return!a.endsWith(v)?null:a}function Aa(a){if(!a.endsWith(v))throw c("err")('phoneNumberFromJid called with non-user jid "'+a+'"');return a.slice(0,-v.length)}function Ba(a){if(a.endsWith(v))return Aa(a);else if(a.endsWith(C))return P(a);throw c("err")('lidOrPhoneFromUserJid called with non phone or lid jid "'+a+'"')}function Ca(a){return a.endsWith(v)||a.endsWith(p)||a.endsWith(o)||a.endsWith(C)?a:null}function Da(a){return a.endsWith(v)?a:null}function Ea(a){return a===k?null:$(a)}function Fa(a){return a===k?null:$(a)}function Ga(a){return a===k?k:null}function P(a){if(!a.endsWith(C))throw c("err")('lidFromLidUserJid called with non-LidUserJid "'+a+'"');return a.slice(0,-C.length)}function Q(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":")[0];b=b.split(".")[0];a===I&&(a=w);a===ia&&(a=x);return Bb(b+"@"+a)}function Ha(a){return Q(a)}function Ia(a){return Q(a)}function Ja(a){if(a.jidType==="phoneDevice")return a.deviceJid;else if(a.jidType==="interopDevice")return a.deviceJid;else if(a.jidType==="lidDevice")return a.deviceJid;else if(a.jidType==="msgrDevice")return a.deviceJid;else if(a.jidType==="lidUser")return a.userJid;else if(a.jidType==="interopUser")return a.userJid;else if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="phoneUser")return a.userJid;else if(a.jidType==="group")return a.groupJid;else if(a.jidType==="status")return a.statusJid;else if(a.jidType==="call")return a.callJid;else if(a.jidType==="newsletter")return a.newsletterJid;else if(a.jidType==="hosted")return a.hostedDeviceJid;else if(a.jidType==="hostedLid")return a.hostedLidDeviceJid;else if(a.jidType==="bot")return a.botJid;else{a.jidType;return a.broadcastJid}}function Ka(a){return Y(O(a)+":"+h+v)}function La(a){return Z(O(a)+":"+h+o)}function Ma(a){return qa(a,h)}function Na(a){return wa(a)===h}function Oa(a){return Gb(a)}function Pa(a){return a}function R(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":");var c=b[0];b=b[1];c=c.split(".");var d=c[0];c=c[1];return{user:d,device:b,agent:c,server:a}}function Qa(a){a=R(a);var b=a.user,c=a.agent;c=c===void 0?"0":c;var d=a.device;d=d===void 0?"0":d;a=a.server;return b+"."+c+":"+d+"@"+a}function Ra(a){switch(a.jidType){case"interopUser":return a.userJid;case"lidUser":return a.userJid;case"msgrUser":return a.userJid;case"phoneUser":return a.userJid;case"group":return a.groupJid;case"status":return a.statusJid;case"interopDevice":return a.deviceJid;case"lidDevice":return a.deviceJid;case"msgrDevice":return a.deviceJid;case"phoneDevice":return a.deviceJid;case"broadcast":return a.broadcastJid;case"call":return a.callJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;case"bot":return a.botJid;default:return c("WAAssertUnreachable")(a.jidType)}}function Sa(a){if(a===l)return{jidType:"call",callJid:l};if(a===k)return{jidType:"status",statusJid:k};else if(B.test(a))return{jidType:"phoneUser",userJid:Db(a)};else if(r.test(a))return{jidType:"interopUser",userJid:Eb(a)};else if(t.test(a))return{jidType:"msgrUser",userJid:Fb(a)};else if(u.test(a)){var b=a.substr(0,a.indexOf(":"));return{jidType:"msgrUser",userJid:N(b)}}else if(A.test(a))return{jidType:"phoneDevice",deviceJid:Y(a)};else if(q.test(a))return{jidType:"interopDevice",deviceJid:zb(a)};else if(s.test(a))return{jidType:"msgrDevice",deviceJid:Z(a)};else if(n.test(a))return{jidType:"group",groupJid:a.endsWith(m)?a:""+a+m};else if(F.test(a))return{jidType:"broadcast",broadcastJid:a};else if(G.test(a))return{jidType:"call",callJid:a};else if(D.test(a))return{jidType:"lidUser",userJid:a};else if(E.test(a))return{jidType:"lidDevice",deviceJid:a};else if(z.test(a))return{jidType:"newsletter",newsletterJid:a};else if(J.test(a))return{jidType:"hosted",hostedDeviceJid:a};else if(L.test(a))return{jidType:"hostedLid",hostedLidDeviceJid:a};else if(ja.test(a))return{jidType:"bot",botJid:a};else return{jidType:"unknown"}}function Ta(a){return a==="status@broadcast"?a:null}function Ua(a){if(B.test(a)||r.test(a)||t.test(a)||D.test(a))return a;else if(u.test(a)){a=a.substr(0,a.indexOf(":"));return N(a)}else return null}function Va(a){if(D.test(a))return a;else return null}function Wa(a){return F.test(a)?a:null}function Xa(a){if(A.test(a)||s.test(a)||q.test(a)||E.test(a)||J.test(a)||L.test(a))return a;if(B.test(a))return vb(a);return ja.test(a)?wb(a):null}function Ya(a){return q.test(a)?a:null}function S(a){return n.test(a)?a:null}function Za(a){return Ta(a)||S(a)||Wa(a)?a:null}function $a(a){return G.test(a)?a:null}function ab(a){return a==="s.whatsapp.net"||a==="g.us"||a==="call"?a:null}function bb(a){return Ua(a)||S(a)}function cb(a){return z.test(a)?a:null}function db(a){return J.test(a)?a:null}function eb(a){return L.test(a)?a:null}function fb(a){return Ca(a)==null?$(a):null}function gb(a){a=R(a);var b=a.user,c=a.device;c=c===void 0?"0":c;a=a.server;return Y(b+":"+c+"@"+a)}function hb(a){if(a.endsWith(m))return a.slice(0,-m.length);else throw c("err")('groupId called with non-group jid "'+a+'"')}function ib(a){var b=Sa(a);if(b.jidType==="unknown")return a;if(b.jidType==="status")return b.statusJid;b.jidType;return Ra(b).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3")}function jb(a){return!a.includes("@")?a:a.replace(la,ib)}function T(a){if(a.endsWith(m))return $(a);else return null}function U(a,b){if(a.endsWith(v))return b.phoneUser(a);else if(a.endsWith(o))return b.msgrUser(a);else if(a.endsWith(p))return b.interopUser(a);else if(a.endsWith(C))return b.lidUser(a);else if(T(a)!=null)return b.group($(a));throw c("err")("Can not switch on chat jid "+a)}function kb(a,b){if(a.endsWith(o))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function V(a,b){if(a.endsWith(v))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function lb(a,b){return U(a,{lidUser:function(a){return b.user(a)},interopUser:function(a){return b.user(a)},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return b.user(a)},group:function(a){return b.group(a)}})}function mb(a,b){return a===k?b.status():V(a,{user:b.user,group:b.group})}function nb(a,b){return a===k?b.status():U(a,{interopUser:b.interopUser,phoneUser:b.phoneUser,msgrUser:b.msgrUser,lidUser:b.lidUser,group:b.group})}function ob(a,b){return a===k?b.multicast(k):V(a,{user:b.user,group:b.multicast})}function pb(a){return a.endsWith(C)}function qb(a){return a==="@me"}function rb(a){return a==="@system"}function sb(){return o}function tb(){return v}function ub(){return ea}function W(a){if(a.endsWith(v))return v;else if(a.endsWith(o))return o;else if(a.endsWith(C))return C;else if(a.endsWith(M))return M;else throw c("err")('userDomainFromJid called with non-user jid "'+a+'"')}function vb(a){return X(O(a)+":"+h+W(a))}function wb(a){return X(""+O(a)+W(a))}function xb(a){a=a.platform;var b=a==="msgr"?o:v;function c(a){return""+a+b}function d(){return b}return{toUserJid:c,getUserDomain:d}}function yb(a){return a}function X(a){return a}function Y(a){return a}function Z(a){return a}function zb(a){return a}function Ab(a){return a}function Bb(a){return a}function Cb(a){return a}function Db(a){return a}function Eb(a){return a}function Fb(a){return a}function $(a){return a}function Gb(a){return a}function Hb(a){return a}function Ib(a){return a}function Jb(a){return a}function Kb(a){return U(a,{group:function(a){return hb(a)},lidUser:function(a){return O(a)},interopUser:function(a){return O(a)},phoneUser:function(a){return O(a)},msgrUser:function(a){return O(a)}})}function Lb(){return ba}g.DEFAULT_DEVICE_ID=h;g.AUTHOR_ME=i;g.AUTHOR_SYSTEM=j;g.STATUS_JID=k;g.PSA_JID=aa;g.CALL_LINK_JID=l;g.MSGR_USER_DOMAIN=o;g.MSGR_USER_JID_SUFFIX=ca;g.INTEROP_DOMAIN=p;g.INTEROP_USER_JID_SUFFIX=da;g.WA_SERVER_JID_SUFFIX=fa;g.WA_USER_DOMAIN=v;g.WA_USER_JID_SUFFIX=w;g.WA_LID_SUFFIX=x;g.WA_NEWSLETTER_JID_DOMAIN=y;g.LID_DOMAIN=C;g.LID_SUFFIX=ga;g.HOSTED_DOMAIN=H;g.HOSTED_SUFFIX=I;g.HOSTED_LID_DOMAIN=K;g.HOSTED_LID_SUFFIX=ia;g.BOT_DOMAIN=M;g.SURVEY_USER_JID=ka;g.toPhoneUserJid=a;g.toLidUserJid=b;g.toMsgrUserJid=N;g.toGroupJid=d;g.toNewsletterJid=e;g.toHostedDeviceJid=f;g.toHostedLidDeviceJid=ma;g.getGroupDomain=na;g.userIdFromJid=O;g.toPhoneDeviceJid=oa;g.toMsgrDeviceJid=pa;g.toLidDeviceJid=qa;g.toDeviceJid=ra;g.toBroadcastJid=sa;g.extractUserId=ta;g.extractChatId__DANGEROUS=ua;g.extractDeviceIDParts=va;g.extractDeviceId=wa;g.authorToUserId=xa;g.authorAsUserJid=ya;g.authorAsPhoneUserJid=za;g.phoneNumberFromJid=Aa;g.lidOrPhoneFromUserJid=Ba;g.interpretAsUserJid=Ca;g.interpretAsPhoneUserJid=Da;g.asChatJid=Ea;g.asPhoneChatJid=Fa;g.asStatusJid=Ga;g.lidFromLidUserJid=P;g.extractUserJid=Q;g.extractPhoneUserJid=Ha;g.extractLidUserJid=Ia;g.extractJidFromJidWithType=Ja;g.defaultPhoneDeviceJidForUser=Ka;g.defaultMsgrDeviceJidForUser=La;g.defaultLidDeviceJidForLidUserJid=Ma;g.isPrimaryDevice=Na;g.interpretAsDeviceId=Oa;g.interpretAsNumber=Pa;g.parseJidParts=R;g.fullFormDeviceJidString=Qa;g.extractFromJid=Ra;g.interpretAndValidateJid=Sa;g.validateStatusJid=Ta;g.validateUserJid=Ua;g.validateLidUserJid=Va;g.validateBroadcastJid=Wa;g.validateDeviceJid=Xa;g.validateInteropDeviceJid=Ya;g.validateGroupJid=S;g.validateMulticastJid=Za;g.validateCallJid=$a;g.validateDomainJid=ab;g.validateChatJid=bb;g.validateNewsletterJid=cb;g.validateHostedDeviceJid=db;g.validateHostedLidDeviceJid=eb;g.asMulticastJid=fb;g.stripAgentIdFromPhoneDeviceJid=gb;g.groupIdFromJid=hb;g.sanitizeJidForLogging=ib;g.maybeSanitizeLogLineText=jb;g.interpretAsGroupJid=T;g.switchOnChatJidType=U;g.switchOnMsgrChatJidType=kb;g.switchOnPhoneChatJidType=V;g.switchOnUserChatJidType=lb;g.switchOnPhoneJidType=mb;g.switchOnJidType=nb;g.switchOnMulticastJidType=ob;g.isLidUser=pb;g.isAuthorMe=qb;g.isAuthorSystem=rb;g.getMsgrUserDomain=sb;g.getWhatsappUserDomain=tb;g.getServerDomain=ub;g.defaultDeviceJidForUser=vb;g.defaultDeviceJidForBot=wb;g.createJidUtils=xb;g.unsafeCoerceToChatJid=yb;g.unsafeCoerceToDeviceJid=X;g.unsafeCoerceToPhoneDeviceJid=Y;g.unsafeCoerceToMsgrDeviceJid=Z;g.unsafeCoerceToInteropDeviceJid=zb;g.unsafeCoerceToLidDeviceJid=Ab;g.unsafeCoerceToUserJid=Bb;g.unsafeCoerceToLidUserJid=Cb;g.unsafeCoerceToPhoneUserJid=Db;g.unsafeCoerceToInteropUserJid=Eb;g.unsafeCoerceToMsgrUserJid=Fb;g.unsafeCoerceToGroupJid=$;g.unsafeCoerceToDeviceId=Gb;g.unsafeCoerceToNewsletterJid=Hb;g.unsafeCoerceToHostedDeviceJid=Ib;g.unsafeCoerceToHostedLidDeviceJid=Jb;g.threadIdForChatJid=Kb;g.getGroupCallDomain=Lb}),98);
__d("MAWJids",["I64","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("WAJids").createJidUtils({platform:"msgr"});var i=e.toUserJid,j=function(a,b){a=(h||(h=d("I64"))).to_string(a);return b?d("WAJids").toGroupJid(a):i(a)};function a(a){return j(a,!1)}function b(a){return j(a,!0)}f=function(a){a=d("WAJids").threadIdForChatJid(a);return(h||(h=d("I64"))).of_string(a)};function c(a){return d("WAJids").unsafeCoerceToChatJid(a)}g.jidUtils=e;g.toUserJid=i;g.convertIntJidToChatJid=j;g.convertIntJidToOneToOneChatJid=a;g.convertIntJidToGroupJid=b;g.convertChatJidToIntJid=f;g.threadIdToChatJid=c}),98);
__d("MAWKeychainUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return self.crypto.getRandomValues(new Uint8Array(a))}function b(a){var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(new Uint8Array(b),a);return a+b.byteLength},0);return c.buffer}function c(a,b){return new Uint8Array([a,b]).buffer}function d(a){var b=a.length;if(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)){var c=[];for(var d=0,b=b/2;d<b;++d){var e=parseInt(a.substring(d*2,d*2+2),16);c.push(e)}return new Uint8Array(c)}else return null}f.getBufferWithRandomValuesFromLength=a;f.mergeBuffers=b;f.makeAAD=c;f.fromHexString=d}),66);
__d("MAWSubtleCrypto",[],(function(a,b,c,d,e,f){a=self.crypto;b=a&&(a.subtle||a.webkitSubtle||a.subtle);f.MAWSubtleCrypto=b}),66);
__d("MAWWebInitDataHelpers",["FBLogger","MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";function a(){return 2}function b(a){switch(a){case 2:return[c("MessengerWebInitData").accountKeyV2];case 1:return[c("MessengerWebInitData").accountKey].concat((a=c("MessengerWebInitData").additionalAccountKeysV1)!=null?a:[]);default:throw c("FBLogger")("messenger_web").mustfixThrow("Invalid format version, should never happen.")}}g.getLastAccountKeyFormatVersion=a;g.getAccountKeysString=b}),98);
__d("WABase64",["WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=43,j=47,k=61,l=45,m=95,n=3e3,o="data:image/jpeg;base64,",p=function(a){return typeof a==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)};function a(a){return q(a,i,j,!0)}function b(a,b){b===void 0&&(b=!1);return q(a,l,m,b)}function q(a,b,c,d){a=Array.isArray(a)||a instanceof ArrayBuffer?new Uint8Array(a):a;if(a.length<=n)return r(a,b,c,d);else{var e=[];for(var f=0;f<a.length;f+=n)e.push(r(a.subarray(f,f+n),b,c,d));return e.join("")}}function r(a,b,c,d){var e=Math.ceil(a.length*4/3),f=4*Math.ceil(a.length/3),g=new Array(f);for(var h=0,i=0;h<f;h+=4,i+=3){var j=a[i]<<16|a[i+1]<<8|a[i+2];g[h]=j>>18;g[h+1]=j>>12&63;g[h+2]=j>>6&63;g[h+3]=j&63}for(j=0;j<e;j++){a=g[j];a<26?g[j]=65+a:a<52?g[j]=71+a:a<62?g[j]=a-4:a===62?g[j]=b:g[j]=c}for(h=e;h<f;h++)g[h]=61;i=String.fromCharCode.apply(String,g);return d?i:i.substring(0,e)}function s(a,b,c,e){var f=a.length,g=new Int32Array(f+f%4);for(var i=0;i<f;i++){var j=a.charCodeAt(i);if(65<=j&&j<=90)g[i]=j-65;else if(97<=j&&j<=122)g[i]=j-71;else if(48<=j&&j<=57)g[i]=j+4;else if(j===b)g[i]=62;else if(j===c)g[i]=63;else if(j===e){f=i;break}else{self.ERROR!=null&&d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Found unexpected character code while decoding B64 at index ",", length ",": ",""])),i,f,j);return null}}j=g.length/4;for(b=0,c=0;b<j;b++,c+=4)g[b]=g[c]<<18|g[c+1]<<12|g[c+2]<<6|g[c+3];e=Math.floor(f*3/4);i=new Uint8Array(e);a=0;b=0;for(;b+3<=e;a++,b+=3){j=g[a];i[b]=j>>16;i[b+1]=j>>8&255;i[b+2]=j&255}switch(e-b){case 2:i[b]=g[a]>>16;i[b+1]=g[a]>>8&255;break;case 1:i[b]=g[a]>>16}return i}function e(a){a=s(a,i,j,k);if(a)return a.buffer;else throw c("err")("Base64.decode given invalid string")}function f(a,b){b===void 0&&(b=!1);a=s(a,l,m,b?k:-1);if(a)return a.buffer;else throw c("err")("Base64.decode given invalid string")}function t(a){a=a instanceof ArrayBuffer?new Uint8Array(a):s(a,i,j,k);return a&&Array.from(a)}function u(a){return Math.floor(a.length*3/4)}g.BASE64_DATA_URL_SCHEME=o;g.isBase64=p;g.encodeB64=a;g.encodeB64UrlSafe=b;g.decodeB64=e;g.decodeB64UrlSafe=f;g.decodeB64ToJsArray=t;g.sizeWhenB64Decoded=u}),98);
__d("MAWKeychainCrypto",["FBLogger","MAWCryptoConsts","MAWKeychainUtil","MAWSubtleCrypto","MAWWebInitDataHelpers","WABase64","memoizeOneWithArgs"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWKeychainUtil").makeAAD(d("MAWCryptoConsts").VERSION,d("MAWCryptoConsts").CIPHER_ID);function a(a,b,e){var f=d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES),g=e?e:h;return d("MAWSubtleCrypto").MAWSubtleCrypto.encrypt({additionalData:g,iv:new Uint8Array(f),name:d("MAWCryptoConsts").AES_GCM,tagLength:d("MAWCryptoConsts").AES_GCM_TAG_LENGTH},a,b).then(function(a){a=d("MAWKeychainUtil").mergeBuffers([g,f,a]);return d("WABase64").encodeB64(a)}).catch(function(b){throw c("FBLogger")("messenger_web").catching(b).mustfixThrow("Failed to encryptDataToStringBuffer",typeof a,a.constructor.name)})}async function b(a,b){var c;b=new Uint8Array(d("WABase64").decodeB64(b));var e=b.subarray(0,(c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES),f=b.subarray(c.ADDITIONAL_DATA_LENGTH_IN_BYTES,c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);b=b.subarray(c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);e=await d("MAWSubtleCrypto").MAWSubtleCrypto.decrypt({additionalData:e,iv:f,name:c.AES_GCM,tagLength:c.AES_GCM_TAG_LENGTH},a,b);return e}function i(a){a=d("MAWWebInitDataHelpers").getAccountKeysString(a);return a.map(function(a){var b=d("MAWKeychainUtil").fromHexString(a);if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Invalid value for account key. Is empty="+String(a.length===0)+";");return b.buffer})}function j(a){return Promise.all(i(a).map(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").AES_GCM},!1,["encrypt","decrypt"])}))}function e(){return d("WABase64").encodeB64(d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES))}async function f(a){a=d("WABase64").decodeB64(a);try{a=await d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").HKDF},!1,["deriveKey"]);return a}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to importBrowserEncryptionKey");throw a}}function k(){return d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES)}function l(a,b){var c;return d("MAWSubtleCrypto").MAWSubtleCrypto.deriveKey({hash:{name:(c=d("MAWCryptoConsts")).SHA256},info:c.HKDF_INFO,name:c.HKDF,salt:b},a,{length:c.AES_GCM_KEY_LENGTH,name:c.AES_GCM},!0,["encrypt","decrypt"]).then(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",a)})}function m(a){var b=a.slice(0,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);b=new DataView(b).getUint8(0);if(b===0){var c,e=a.slice((c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES,c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2);return{aadLengthInBytes:c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2+c.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:new DataView(e).getUint8(0),originRandomisedVersion:new DataView(a).getUint32(c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2,!0)}}return{aadLengthInBytes:d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:b}}function n(a){return m(a)}var o=c("memoizeOneWithArgs")(function(a){return j(a)});async function p(a){a=d("WABase64").decodeB64(a);a=await d("MAWSubtleCrypto").MAWSubtleCrypto.digest(d("MAWCryptoConsts").SHA256,a);return d("WABase64").encodeB64(a)}g.ADDITIONAL_DATA=h;g.encryptDataToStringBuffer=a;g.decryptDataToArrayBuffer=b;g.getAccountKeysBuffers=i;g.genAccountKeys=j;g.genBrowserEncryptionKeyString=e;g.importBrowserEncryptionKey=f;g.genDatabaseEncryptionSeed=k;g.genDatabaseEncryptionKey=l;g.getKeyVersionFromCipherData=m;g.getKeyVersionFromCipherDataString=n;g.getAccountKeys=o;g.generateHashString=p}),98);
/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-1.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){(function(a){var b=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},c=function(){throw new Error("no PRNG")},d=new Uint8Array(16),e=new Uint8Array(32);e[0]=9;var f=b(),g=b([1]),h=b([56129,1]),i=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),j=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),k=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function n(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=c&255,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=d&255}function o(a,b,c,d,e){var f,g=0;for(f=0;f<e;f++)g|=a[b+f]^c[d+f];return(1&g-1>>>8)-1}function p(a,b,c,d){return o(a,b,c,d,16)}function q(a,b,c,d){return o(a,b,c,d,32)}function r(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;var r=e,s=f,t=g,u=h,v=i,w=j,x=k,y=l,z=m,A=b,B=n,C=o,D=p,E=q,F=c,G=d,H;for(var I=0;I<20;I+=2)H=r+D|0,v^=H<<7|H>>>32-7,H=v+r|0,z^=H<<9|H>>>32-9,H=z+v|0,D^=H<<13|H>>>32-13,H=D+z|0,r^=H<<18|H>>>32-18,H=w+s|0,A^=H<<7|H>>>32-7,H=A+w|0,E^=H<<9|H>>>32-9,H=E+A|0,s^=H<<13|H>>>32-13,H=s+E|0,w^=H<<18|H>>>32-18,H=B+x|0,F^=H<<7|H>>>32-7,H=F+B|0,t^=H<<9|H>>>32-9,H=t+F|0,x^=H<<13|H>>>32-13,H=x+t|0,B^=H<<18|H>>>32-18,H=G+C|0,u^=H<<7|H>>>32-7,H=u+G|0,y^=H<<9|H>>>32-9,H=y+u|0,C^=H<<13|H>>>32-13,H=C+y|0,G^=H<<18|H>>>32-18,H=r+u|0,s^=H<<7|H>>>32-7,H=s+r|0,t^=H<<9|H>>>32-9,H=t+s|0,u^=H<<13|H>>>32-13,H=u+t|0,r^=H<<18|H>>>32-18,H=w+v|0,x^=H<<7|H>>>32-7,H=x+w|0,y^=H<<9|H>>>32-9,H=y+x|0,v^=H<<13|H>>>32-13,H=v+y|0,w^=H<<18|H>>>32-18,H=B+A|0,C^=H<<7|H>>>32-7,H=C+B|0,z^=H<<9|H>>>32-9,H=z+C|0,A^=H<<13|H>>>32-13,H=A+z|0,B^=H<<18|H>>>32-18,H=G+F|0,D^=H<<7|H>>>32-7,H=D+G|0,E^=H<<9|H>>>32-9,H=E+D|0,F^=H<<13|H>>>32-13,H=F+E|0,G^=H<<18|H>>>32-18;r=r+e|0;s=s+f|0;t=t+g|0;u=u+h|0;v=v+i|0;w=w+j|0;x=x+k|0;y=y+l|0;z=z+m|0;A=A+b|0;B=B+n|0;C=C+o|0;D=D+p|0;E=E+q|0;F=F+c|0;G=G+d|0;a[0]=r>>>0&255;a[1]=r>>>8&255;a[2]=r>>>16&255;a[3]=r>>>24&255;a[4]=s>>>0&255;a[5]=s>>>8&255;a[6]=s>>>16&255;a[7]=s>>>24&255;a[8]=t>>>0&255;a[9]=t>>>8&255;a[10]=t>>>16&255;a[11]=t>>>24&255;a[12]=u>>>0&255;a[13]=u>>>8&255;a[14]=u>>>16&255;a[15]=u>>>24&255;a[16]=v>>>0&255;a[17]=v>>>8&255;a[18]=v>>>16&255;a[19]=v>>>24&255;a[20]=w>>>0&255;a[21]=w>>>8&255;a[22]=w>>>16&255;a[23]=w>>>24&255;a[24]=x>>>0&255;a[25]=x>>>8&255;a[26]=x>>>16&255;a[27]=x>>>24&255;a[28]=y>>>0&255;a[29]=y>>>8&255;a[30]=y>>>16&255;a[31]=y>>>24&255;a[32]=z>>>0&255;a[33]=z>>>8&255;a[34]=z>>>16&255;a[35]=z>>>24&255;a[36]=A>>>0&255;a[37]=A>>>8&255;a[38]=A>>>16&255;a[39]=A>>>24&255;a[40]=B>>>0&255;a[41]=B>>>8&255;a[42]=B>>>16&255;a[43]=B>>>24&255;a[44]=C>>>0&255;a[45]=C>>>8&255;a[46]=C>>>16&255;a[47]=C>>>24&255;a[48]=D>>>0&255;a[49]=D>>>8&255;a[50]=D>>>16&255;a[51]=D>>>24&255;a[52]=E>>>0&255;a[53]=E>>>8&255;a[54]=E>>>16&255;a[55]=E>>>24&255;a[56]=F>>>0&255;a[57]=F>>>8&255;a[58]=F>>>16&255;a[59]=F>>>24&255;a[60]=G>>>0&255;a[61]=G>>>8&255;a[62]=G>>>16&255;a[63]=G>>>24&255}function s(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;e=e;f=f;g=g;h=h;i=i;j=j;k=k;l=l;m=m;b=b;n=n;o=o;p=p;q=q;c=c;d=d;var r;for(var s=0;s<20;s+=2)r=e+p|0,i^=r<<7|r>>>32-7,r=i+e|0,m^=r<<9|r>>>32-9,r=m+i|0,p^=r<<13|r>>>32-13,r=p+m|0,e^=r<<18|r>>>32-18,r=j+f|0,b^=r<<7|r>>>32-7,r=b+j|0,q^=r<<9|r>>>32-9,r=q+b|0,f^=r<<13|r>>>32-13,r=f+q|0,j^=r<<18|r>>>32-18,r=n+k|0,c^=r<<7|r>>>32-7,r=c+n|0,g^=r<<9|r>>>32-9,r=g+c|0,k^=r<<13|r>>>32-13,r=k+g|0,n^=r<<18|r>>>32-18,r=d+o|0,h^=r<<7|r>>>32-7,r=h+d|0,l^=r<<9|r>>>32-9,r=l+h|0,o^=r<<13|r>>>32-13,r=o+l|0,d^=r<<18|r>>>32-18,r=e+h|0,f^=r<<7|r>>>32-7,r=f+e|0,g^=r<<9|r>>>32-9,r=g+f|0,h^=r<<13|r>>>32-13,r=h+g|0,e^=r<<18|r>>>32-18,r=j+i|0,k^=r<<7|r>>>32-7,r=k+j|0,l^=r<<9|r>>>32-9,r=l+k|0,i^=r<<13|r>>>32-13,r=i+l|0,j^=r<<18|r>>>32-18,r=n+b|0,o^=r<<7|r>>>32-7,r=o+n|0,m^=r<<9|r>>>32-9,r=m+o|0,b^=r<<13|r>>>32-13,r=b+m|0,n^=r<<18|r>>>32-18,r=d+c|0,p^=r<<7|r>>>32-7,r=p+d|0,q^=r<<9|r>>>32-9,r=q+p|0,c^=r<<13|r>>>32-13,r=c+q|0,d^=r<<18|r>>>32-18;a[0]=e>>>0&255;a[1]=e>>>8&255;a[2]=e>>>16&255;a[3]=e>>>24&255;a[4]=j>>>0&255;a[5]=j>>>8&255;a[6]=j>>>16&255;a[7]=j>>>24&255;a[8]=n>>>0&255;a[9]=n>>>8&255;a[10]=n>>>16&255;a[11]=n>>>24&255;a[12]=d>>>0&255;a[13]=d>>>8&255;a[14]=d>>>16&255;a[15]=d>>>24&255;a[16]=k>>>0&255;a[17]=k>>>8&255;a[18]=k>>>16&255;a[19]=k>>>24&255;a[20]=l>>>0&255;a[21]=l>>>8&255;a[22]=l>>>16&255;a[23]=l>>>24&255;a[24]=m>>>0&255;a[25]=m>>>8&255;a[26]=m>>>16&255;a[27]=m>>>24&255;a[28]=b>>>0&255;a[29]=b>>>8&255;a[30]=b>>>16&255;a[31]=b>>>24&255}function t(a,b,c,d){r(a,b,c,d)}function u(a,b,c,d){s(a,b,c,d)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(a,b,c,d,e,f,g){var h=new Uint8Array(16),i=new Uint8Array(64),j;for(j=0;j<16;j++)h[j]=0;for(j=0;j<8;j++)h[j]=f[j];while(e>=64){t(i,h,g,v);for(j=0;j<64;j++)a[b+j]=c[d+j]^i[j];f=1;for(j=8;j<16;j++)f=f+(h[j]&255)|0,h[j]=f&255,f>>>=8;e-=64;b+=64;d+=64}if(e>0){t(i,h,g,v);for(j=0;j<e;j++)a[b+j]=c[d+j]^i[j]}return 0}function x(a,b,c,d,e){var f=new Uint8Array(16),g=new Uint8Array(64),h;for(h=0;h<16;h++)f[h]=0;for(h=0;h<8;h++)f[h]=d[h];while(c>=64){t(g,f,e,v);for(h=0;h<64;h++)a[b+h]=g[h];d=1;for(h=8;h<16;h++)d=d+(f[h]&255)|0,f[h]=d&255,d>>>=8;c-=64;b+=64}if(c>0){t(g,f,e,v);for(h=0;h<c;h++)a[b+h]=g[h]}return 0}function y(a,b,c,d,e){var f=new Uint8Array(32);u(f,d,e,v);e=new Uint8Array(8);for(var g=0;g<8;g++)e[g]=d[g+16];return x(a,b,c,e,f)}function z(a,b,c,d,e,f,g){var h=new Uint8Array(32);u(h,f,g,v);g=new Uint8Array(8);for(var i=0;i<8;i++)g[i]=f[i+16];return w(a,b,c,d,e,g,h)}var A=function(a){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var b,c;b=a[0]&255|(a[1]&255)<<8;this.r[0]=b&8191;c=a[2]&255|(a[3]&255)<<8;this.r[1]=(b>>>13|c<<3)&8191;b=a[4]&255|(a[5]&255)<<8;this.r[2]=(c>>>10|b<<6)&7939;c=a[6]&255|(a[7]&255)<<8;this.r[3]=(b>>>7|c<<9)&8191;b=a[8]&255|(a[9]&255)<<8;this.r[4]=(c>>>4|b<<12)&255;this.r[5]=b>>>1&8190;c=a[10]&255|(a[11]&255)<<8;this.r[6]=(b>>>14|c<<2)&8191;b=a[12]&255|(a[13]&255)<<8;this.r[7]=(c>>>11|b<<5)&8065;c=a[14]&255|(a[15]&255)<<8;this.r[8]=(b>>>8|c<<8)&8191;this.r[9]=c>>>5&127;this.pad[0]=a[16]&255|(a[17]&255)<<8;this.pad[1]=a[18]&255|(a[19]&255)<<8;this.pad[2]=a[20]&255|(a[21]&255)<<8;this.pad[3]=a[22]&255|(a[23]&255)<<8;this.pad[4]=a[24]&255|(a[25]&255)<<8;this.pad[5]=a[26]&255|(a[27]&255)<<8;this.pad[6]=a[28]&255|(a[29]&255)<<8;this.pad[7]=a[30]&255|(a[31]&255)<<8};A.prototype.blocks=function(a,b,c){var d=this.fin?0:1<<11,e,f,g,h,i,j,k,l,m,n,o,p=this.h[0],q=this.h[1],r=this.h[2],s=this.h[3],t=this.h[4],u=this.h[5],v=this.h[6],w=this.h[7],x=this.h[8],y=this.h[9],z=this.r[0],A=this.r[1],B=this.r[2],C=this.r[3],D=this.r[4],E=this.r[5],F=this.r[6],G=this.r[7],H=this.r[8],I=this.r[9];while(c>=16)e=a[b+0]&255|(a[b+1]&255)<<8,p+=e&8191,f=a[b+2]&255|(a[b+3]&255)<<8,q+=(e>>>13|f<<3)&8191,e=a[b+4]&255|(a[b+5]&255)<<8,r+=(f>>>10|e<<6)&8191,f=a[b+6]&255|(a[b+7]&255)<<8,s+=(e>>>7|f<<9)&8191,e=a[b+8]&255|(a[b+9]&255)<<8,t+=(f>>>4|e<<12)&8191,u+=e>>>1&8191,f=a[b+10]&255|(a[b+11]&255)<<8,v+=(e>>>14|f<<2)&8191,e=a[b+12]&255|(a[b+13]&255)<<8,w+=(f>>>11|e<<5)&8191,f=a[b+14]&255|(a[b+15]&255)<<8,x+=(e>>>8|f<<8)&8191,y+=f>>>5|d,e=0,f=e,f+=p*z,f+=q*(5*I),f+=r*(5*H),f+=s*(5*G),f+=t*(5*F),e=f>>>13,f&=8191,f+=u*(5*E),f+=v*(5*D),f+=w*(5*C),f+=x*(5*B),f+=y*(5*A),e+=f>>>13,f&=8191,g=e,g+=p*A,g+=q*z,g+=r*(5*I),g+=s*(5*H),g+=t*(5*G),e=g>>>13,g&=8191,g+=u*(5*F),g+=v*(5*E),g+=w*(5*D),g+=x*(5*C),g+=y*(5*B),e+=g>>>13,g&=8191,h=e,h+=p*B,h+=q*A,h+=r*z,h+=s*(5*I),h+=t*(5*H),e=h>>>13,h&=8191,h+=u*(5*G),h+=v*(5*F),h+=w*(5*E),h+=x*(5*D),h+=y*(5*C),e+=h>>>13,h&=8191,i=e,i+=p*C,i+=q*B,i+=r*A,i+=s*z,i+=t*(5*I),e=i>>>13,i&=8191,i+=u*(5*H),i+=v*(5*G),i+=w*(5*F),i+=x*(5*E),i+=y*(5*D),e+=i>>>13,i&=8191,j=e,j+=p*D,j+=q*C,j+=r*B,j+=s*A,j+=t*z,e=j>>>13,j&=8191,j+=u*(5*I),j+=v*(5*H),j+=w*(5*G),j+=x*(5*F),j+=y*(5*E),e+=j>>>13,j&=8191,k=e,k+=p*E,k+=q*D,k+=r*C,k+=s*B,k+=t*A,e=k>>>13,k&=8191,k+=u*z,k+=v*(5*I),k+=w*(5*H),k+=x*(5*G),k+=y*(5*F),e+=k>>>13,k&=8191,l=e,l+=p*F,l+=q*E,l+=r*D,l+=s*C,l+=t*B,e=l>>>13,l&=8191,l+=u*A,l+=v*z,l+=w*(5*I),l+=x*(5*H),l+=y*(5*G),e+=l>>>13,l&=8191,m=e,m+=p*G,m+=q*F,m+=r*E,m+=s*D,m+=t*C,e=m>>>13,m&=8191,m+=u*B,m+=v*A,m+=w*z,m+=x*(5*I),m+=y*(5*H),e+=m>>>13,m&=8191,n=e,n+=p*H,n+=q*G,n+=r*F,n+=s*E,n+=t*D,e=n>>>13,n&=8191,n+=u*C,n+=v*B,n+=w*A,n+=x*z,n+=y*(5*I),e+=n>>>13,n&=8191,o=e,o+=p*I,o+=q*H,o+=r*G,o+=s*F,o+=t*E,e=o>>>13,o&=8191,o+=u*D,o+=v*C,o+=w*B,o+=x*A,o+=y*z,e+=o>>>13,o&=8191,e=(e<<2)+e|0,e=e+f|0,f=e&8191,e=e>>>13,g+=e,p=f,q=g,r=h,s=i,t=j,u=k,v=l,w=m,x=n,y=o,b+=16,c-=16;this.h[0]=p;this.h[1]=q;this.h[2]=r;this.h[3]=s;this.h[4]=t;this.h[5]=u;this.h[6]=v;this.h[7]=w;this.h[8]=x;this.h[9]=y};A.prototype.finish=function(a,b){var c=new Uint16Array(10),d,e;if(this.leftover){e=this.leftover;this.buffer[e++]=1;for(;e<16;e++)this.buffer[e]=0;this.fin=1;this.blocks(this.buffer,0,16)}d=this.h[1]>>>13;this.h[1]&=8191;for(e=2;e<10;e++)this.h[e]+=d,d=this.h[e]>>>13,this.h[e]&=8191;this.h[0]+=d*5;d=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=d;d=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=d;c[0]=this.h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this.h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this.h[e]=this.h[e]&d|c[e];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;c=this.h[0]+this.pad[0];this.h[0]=c&65535;for(e=1;e<8;e++)c=(this.h[e]+this.pad[e]|0)+(c>>>16)|0,this.h[e]=c&65535;a[b+0]=this.h[0]>>>0&255;a[b+1]=this.h[0]>>>8&255;a[b+2]=this.h[1]>>>0&255;a[b+3]=this.h[1]>>>8&255;a[b+4]=this.h[2]>>>0&255;a[b+5]=this.h[2]>>>8&255;a[b+6]=this.h[3]>>>0&255;a[b+7]=this.h[3]>>>8&255;a[b+8]=this.h[4]>>>0&255;a[b+9]=this.h[4]>>>8&255;a[b+10]=this.h[5]>>>0&255;a[b+11]=this.h[5]>>>8&255;a[b+12]=this.h[6]>>>0&255;a[b+13]=this.h[6]>>>8&255;a[b+14]=this.h[7]>>>0&255;a[b+15]=this.h[7]>>>8&255};A.prototype.update=function(a,b,c){var d,e;if(this.leftover){e=16-this.leftover;e>c&&(e=c);for(d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];c-=e;b+=e;this.leftover+=e;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e);if(c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};function B(a,b,c,d,e,f){f=new A(f);f.update(c,d,e);f.finish(a,b);return 0}function C(a,b,c,d,e,f){var g=new Uint8Array(16);B(g,0,c,d,e,f);return p(a,b,g,0)}function D(a,b,c,d,e){if(c<32)return-1;z(a,0,b,0,c,d,e);B(a,16,a,32,c-32,a);for(b=0;b<16;b++)a[b]=0;return 0}function E(a,b,c,d,e){var f=new Uint8Array(32);if(c<32)return-1;y(f,0,32,d,e);if(C(b,16,b,32,c-32,f)!==0)return-1;z(a,0,b,0,c,d,e);for(f=0;f<32;f++)a[f]=0;return 0}function F(a,b){var c;for(c=0;c<16;c++)a[c]=b[c]|0}function G(a){var b,c,d=1;for(b=0;b<16;b++)c=a[b]+d+65535,d=Math.floor(c/65536),a[b]=c-d*65536;a[0]+=d-1+37*(d-1)}function H(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function I(a,c){var d,e,f=b(),g=b();for(d=0;d<16;d++)g[d]=c[d];G(g);G(g);G(g);for(c=0;c<2;c++){f[0]=g[0]-65517;for(d=1;d<15;d++)f[d]=g[d]-65535-(f[d-1]>>16&1),f[d-1]&=65535;f[15]=g[15]-32767-(f[14]>>16&1);e=f[15]>>16&1;f[14]&=65535;H(g,f,1-e)}for(d=0;d<16;d++)a[2*d]=g[d]&255,a[2*d+1]=g[d]>>8}function J(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);I(c,a);I(d,b);return q(c,0,d,0)}function K(a){var b=new Uint8Array(32);I(b,a);return b[0]&1}function L(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function M(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function N(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function O(a,b,c){var d,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=c[0],K=c[1],L=c[2],M=c[3],N=c[4],O=c[5],P=c[6],Q=c[7],R=c[8],S=c[9],T=c[10],U=c[11],V=c[12],W=c[13],X=c[14];c=c[15];d=b[0];e+=d*J;f+=d*K;g+=d*L;h+=d*M;i+=d*N;j+=d*O;k+=d*P;l+=d*Q;m+=d*R;n+=d*S;o+=d*T;p+=d*U;q+=d*V;r+=d*W;s+=d*X;t+=d*c;d=b[1];f+=d*J;g+=d*K;h+=d*L;i+=d*M;j+=d*N;k+=d*O;l+=d*P;m+=d*Q;n+=d*R;o+=d*S;p+=d*T;q+=d*U;r+=d*V;s+=d*W;t+=d*X;u+=d*c;d=b[2];g+=d*J;h+=d*K;i+=d*L;j+=d*M;k+=d*N;l+=d*O;m+=d*P;n+=d*Q;o+=d*R;p+=d*S;q+=d*T;r+=d*U;s+=d*V;t+=d*W;u+=d*X;v+=d*c;d=b[3];h+=d*J;i+=d*K;j+=d*L;k+=d*M;l+=d*N;m+=d*O;n+=d*P;o+=d*Q;p+=d*R;q+=d*S;r+=d*T;s+=d*U;t+=d*V;u+=d*W;v+=d*X;w+=d*c;d=b[4];i+=d*J;j+=d*K;k+=d*L;l+=d*M;m+=d*N;n+=d*O;o+=d*P;p+=d*Q;q+=d*R;r+=d*S;s+=d*T;t+=d*U;u+=d*V;v+=d*W;w+=d*X;x+=d*c;d=b[5];j+=d*J;k+=d*K;l+=d*L;m+=d*M;n+=d*N;o+=d*O;p+=d*P;q+=d*Q;r+=d*R;s+=d*S;t+=d*T;u+=d*U;v+=d*V;w+=d*W;x+=d*X;y+=d*c;d=b[6];k+=d*J;l+=d*K;m+=d*L;n+=d*M;o+=d*N;p+=d*O;q+=d*P;r+=d*Q;s+=d*R;t+=d*S;u+=d*T;v+=d*U;w+=d*V;x+=d*W;y+=d*X;z+=d*c;d=b[7];l+=d*J;m+=d*K;n+=d*L;o+=d*M;p+=d*N;q+=d*O;r+=d*P;s+=d*Q;t+=d*R;u+=d*S;v+=d*T;w+=d*U;x+=d*V;y+=d*W;z+=d*X;A+=d*c;d=b[8];m+=d*J;n+=d*K;o+=d*L;p+=d*M;q+=d*N;r+=d*O;s+=d*P;t+=d*Q;u+=d*R;v+=d*S;w+=d*T;x+=d*U;y+=d*V;z+=d*W;A+=d*X;B+=d*c;d=b[9];n+=d*J;o+=d*K;p+=d*L;q+=d*M;r+=d*N;s+=d*O;t+=d*P;u+=d*Q;v+=d*R;w+=d*S;x+=d*T;y+=d*U;z+=d*V;A+=d*W;B+=d*X;C+=d*c;d=b[10];o+=d*J;p+=d*K;q+=d*L;r+=d*M;s+=d*N;t+=d*O;u+=d*P;v+=d*Q;w+=d*R;x+=d*S;y+=d*T;z+=d*U;A+=d*V;B+=d*W;C+=d*X;D+=d*c;d=b[11];p+=d*J;q+=d*K;r+=d*L;s+=d*M;t+=d*N;u+=d*O;v+=d*P;w+=d*Q;x+=d*R;y+=d*S;z+=d*T;A+=d*U;B+=d*V;C+=d*W;D+=d*X;E+=d*c;d=b[12];q+=d*J;r+=d*K;s+=d*L;t+=d*M;u+=d*N;v+=d*O;w+=d*P;x+=d*Q;y+=d*R;z+=d*S;A+=d*T;B+=d*U;C+=d*V;D+=d*W;E+=d*X;F+=d*c;d=b[13];r+=d*J;s+=d*K;t+=d*L;u+=d*M;v+=d*N;w+=d*O;x+=d*P;y+=d*Q;z+=d*R;A+=d*S;B+=d*T;C+=d*U;D+=d*V;E+=d*W;F+=d*X;G+=d*c;d=b[14];s+=d*J;t+=d*K;u+=d*L;v+=d*M;w+=d*N;x+=d*O;y+=d*P;z+=d*Q;A+=d*R;B+=d*S;C+=d*T;D+=d*U;E+=d*V;F+=d*W;G+=d*X;H+=d*c;d=b[15];t+=d*J;u+=d*K;v+=d*L;w+=d*M;x+=d*N;y+=d*O;z+=d*P;A+=d*Q;B+=d*R;C+=d*S;D+=d*T;E+=d*U;F+=d*V;G+=d*W;H+=d*X;I+=d*c;e+=38*u;f+=38*v;g+=38*w;h+=38*x;i+=38*y;j+=38*z;k+=38*A;l+=38*B;m+=38*C;n+=38*D;o+=38*E;p+=38*F;q+=38*G;r+=38*H;s+=38*I;b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);a[0]=e;a[1]=f;a[2]=g;a[3]=h;a[4]=i;a[5]=j;a[6]=k;a[7]=l;a[8]=m;a[9]=n;a[10]=o;a[11]=p;a[12]=q;a[13]=r;a[14]=s;a[15]=t}function P(a,b){O(a,b,b)}function Q(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=253;e>=0;e--)P(d,d),e!==2&&e!==4&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function R(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=250;e>=0;e--)P(d,d),e!==1&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function S(a,c,d){var e=new Uint8Array(32),f=new Float64Array(80),g,i=b(),j=b(),k=b(),l=b(),m=b(),n=b();for(g=0;g<31;g++)e[g]=c[g];e[31]=c[31]&127|64;e[0]&=248;L(f,d);for(g=0;g<16;g++)j[g]=f[g],l[g]=i[g]=k[g]=0;i[0]=l[0]=1;for(g=254;g>=0;--g)c=e[g>>>3]>>>(g&7)&1,H(i,j,c),H(k,l,c),M(m,i,k),N(i,i,k),M(k,j,l),N(j,j,l),P(l,m),P(n,i),O(i,k,i),O(k,j,m),M(m,i,k),N(i,i,k),P(j,i),N(k,l,n),O(i,k,h),M(i,i,l),O(k,k,i),O(i,l,n),O(l,j,f),P(j,m),H(i,j,c),H(k,l,c);for(g=0;g<16;g++)f[g+16]=i[g],f[g+32]=k[g],f[g+48]=j[g],f[g+64]=l[g];d=f.subarray(32);c=f.subarray(16);Q(d,d);O(c,c,d);I(a,c);return 0}function T(a,b){return S(a,b,e)}function U(a,b){c(b,32);return T(a,b)}function V(a,b,c){var e=new Uint8Array(32);S(e,c,b);return u(a,d,e,v)}var W=D,X=E;function aa(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return W(a,b,c,d,g)}function ba(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return X(a,b,c,d,g)}var ca=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function da(a,b,c,d){var e=new Int32Array(16),f=new Int32Array(16),g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a[0],H=a[1],I=a[2],J=a[3],K=a[4],L=a[5],M=a[6],N=a[7],O=b[0],P=b[1],Q=b[2],R=b[3],S=b[4],T=b[5],U=b[6],V=b[7],W=0;while(d>=128){for(y=0;y<16;y++)z=8*y+W,e[y]=c[z+0]<<24|c[z+1]<<16|c[z+2]<<8|c[z+3],f[y]=c[z+4]<<24|c[z+5]<<16|c[z+6]<<8|c[z+7];for(y=0;y<80;y++){g=G;h=H;i=I;j=J;k=K;l=L;m=M;N;o=O;p=P;q=Q;r=R;s=S;t=T;u=U;V;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(K>>>14|S<<32-14)^(K>>>18|S<<32-18)^(S>>>41-32|K<<32-(41-32));B=(S>>>14|K<<32-14)^(S>>>18|K<<32-18)^(K>>>41-32|S<<32-(41-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=K&L^~K&M;B=S&T^~S&U;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=ca[y*2];B=ca[y*2+1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=e[y%16];B=f[y%16];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;w=E&65535|F<<16;x=C&65535|D<<16;A=w;B=x;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(G>>>28|O<<32-28)^(O>>>34-32|G<<32-(34-32))^(O>>>39-32|G<<32-(39-32));B=(O>>>28|G<<32-28)^(G>>>34-32|O<<32-(34-32))^(G>>>39-32|O<<32-(39-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=G&H^G&I^H&I;B=O&P^O&Q^P&Q;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;n=E&65535|F<<16;v=C&65535|D<<16;A=j;B=r;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=w;B=x;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;j=E&65535|F<<16;r=C&65535|D<<16;H=g;I=h;J=i;K=j;L=k;M=l;N=m;G=n;P=o;Q=p;R=q;S=r;T=s;U=t;V=u;O=v;if(y%16===15)for(z=0;z<16;z++)A=e[z],B=f[z],C=B&65535,D=B>>>16,E=A&65535,F=A>>>16,A=e[(z+9)%16],B=f[(z+9)%16],C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+1)%16],x=f[(z+1)%16],A=(w>>>1|x<<32-1)^(w>>>8|x<<32-8)^w>>>7,B=(x>>>1|w<<32-1)^(x>>>8|w<<32-8)^(x>>>7|w<<32-7),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+14)%16],x=f[(z+14)%16],A=(w>>>19|x<<32-19)^(x>>>61-32|w<<32-(61-32))^w>>>6,B=(x>>>19|w<<32-19)^(w>>>61-32|x<<32-(61-32))^(x>>>6|w<<32-6),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,D+=C>>>16,E+=D>>>16,F+=E>>>16,e[z]=E&65535|F<<16,f[z]=C&65535|D<<16}A=G;B=O;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[0];B=b[0];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[0]=G=E&65535|F<<16;b[0]=O=C&65535|D<<16;A=H;B=P;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[1];B=b[1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[1]=H=E&65535|F<<16;b[1]=P=C&65535|D<<16;A=I;B=Q;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[2];B=b[2];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[2]=I=E&65535|F<<16;b[2]=Q=C&65535|D<<16;A=J;B=R;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[3];B=b[3];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[3]=J=E&65535|F<<16;b[3]=R=C&65535|D<<16;A=K;B=S;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[4];B=b[4];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[4]=K=E&65535|F<<16;b[4]=S=C&65535|D<<16;A=L;B=T;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[5];B=b[5];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[5]=L=E&65535|F<<16;b[5]=T=C&65535|D<<16;A=M;B=U;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[6];B=b[6];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[6]=M=E&65535|F<<16;b[6]=U=C&65535|D<<16;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[7];B=b[7];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[7]=N=E&65535|F<<16;b[7]=V=C&65535|D<<16;W+=128;d-=128}return d}function Y(a,b,c){var d=new Int32Array(8),e=new Int32Array(8),f=new Uint8Array(256),g,h=c;d[0]=1779033703;d[1]=3144134277;d[2]=1013904242;d[3]=2773480762;d[4]=1359893119;d[5]=2600822924;d[6]=528734635;d[7]=1541459225;e[0]=4089235720;e[1]=2227873595;e[2]=4271175723;e[3]=1595750129;e[4]=2917565137;e[5]=725511199;e[6]=4215389547;e[7]=327033209;da(d,e,b,c);c%=128;for(g=0;g<c;g++)f[g]=b[h-c+g];f[c]=128;c=256-128*(c<112?1:0);f[c-9]=0;n(f,c-8,h/536870912|0,h<<3);da(d,e,f,c);for(g=0;g<8;g++)n(a,8*g,d[g],e[g]);return 0}function ea(a,c){var d=b(),e=b(),f=b(),g=b(),h=b(),i=b(),k=b(),l=b(),m=b();N(d,a[1],a[0]);N(m,c[1],c[0]);O(d,d,m);M(e,a[0],a[1]);M(m,c[0],c[1]);O(e,e,m);O(f,a[3],c[3]);O(f,f,j);O(g,a[2],c[2]);M(g,g,g);N(h,e,d);N(i,g,f);M(k,g,f);M(l,e,d);O(a[0],h,i);O(a[1],l,k);O(a[2],k,i);O(a[3],h,l)}function fa(a,b,c){var d;for(d=0;d<4;d++)H(a[d],b[d],c)}function ga(a,c){var d=b(),e=b(),f=b();Q(f,c[2]);O(d,c[0],f);O(e,c[1],f);I(a,e);a[31]^=K(d)<<7}function ha(a,b,c){var d,e;F(a[0],f);F(a[1],g);F(a[2],g);F(a[3],f);for(e=255;e>=0;--e)d=c[e/8|0]>>(e&7)&1,fa(a,b,d),ea(b,a),ea(a,a),fa(a,b,d)}function ia(a,c){var d=[b(),b(),b(),b()];F(d[0],k);F(d[1],l);F(d[2],g);O(d[3],k,l);ha(a,d,c)}function ja(a,d,e){var f=new Uint8Array(64),g=[b(),b(),b(),b()];e||c(d,32);Y(f,d,32);f[0]&=248;f[31]&=127;f[31]|=64;ia(g,f);ga(a,g);for(e=0;e<32;e++)d[e+32]=a[e];return 0}var ka=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function la(a,b){var c,d,e,f;for(d=63;d>=32;--d){c=0;for(e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*ka[e-(d-32)],c=Math.floor((b[e]+128)/256),b[e]-=c*256;b[e]+=c;b[d]=0}c=0;for(e=0;e<32;e++)b[e]+=c-(b[31]>>4)*ka[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*ka[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=b[d]&255}function ma(a){var b=new Float64Array(64),c;for(c=0;c<64;c++)b[c]=a[c];for(c=0;c<64;c++)a[c]=0;la(a,b)}function na(a,c,d,e){var f=new Uint8Array(64),g=new Uint8Array(64),h=new Uint8Array(64),i,j=new Float64Array(64),k=[b(),b(),b(),b()];Y(f,e,32);f[0]&=248;f[31]&=127;f[31]|=64;var l=d+64;for(i=0;i<d;i++)a[64+i]=c[i];for(i=0;i<32;i++)a[32+i]=f[32+i];Y(h,a.subarray(32),d+32);ma(h);ia(k,h);ga(a,k);for(i=32;i<64;i++)a[i]=e[i];Y(g,a,d+64);ma(g);for(i=0;i<64;i++)j[i]=0;for(i=0;i<32;i++)j[i]=h[i];for(i=0;i<32;i++)for(c=0;c<32;c++)j[i+c]+=g[i]*f[c];la(a.subarray(32),j);return l}function oa(a,c){var d=b(),e=b(),h=b(),j=b(),k=b(),l=b(),n=b();F(a[2],g);L(a[1],c);P(h,a[1]);O(j,h,i);N(h,h,a[2]);M(j,a[2],j);P(k,j);P(l,k);O(n,l,k);O(d,n,h);O(d,d,j);R(d,d);O(d,d,h);O(d,d,j);O(d,d,j);O(a[0],d,j);P(e,a[0]);O(e,e,j);J(e,h)&&O(a[0],a[0],m);P(e,a[0]);O(e,e,j);if(J(e,h))return-1;K(a[0])===c[31]>>7&&N(a[0],f,a[0]);O(a[3],a[0],a[1]);return 0}function pa(a,c,d,e){var f,g=new Uint8Array(32),h=new Uint8Array(64),i=[b(),b(),b(),b()],j=[b(),b(),b(),b()];if(d<64)return-1;if(oa(j,e))return-1;for(f=0;f<d;f++)a[f]=c[f];for(f=0;f<32;f++)a[f+32]=e[f];Y(h,a,d);ma(h);ha(i,j,h);ia(j,c.subarray(32));ea(i,j);ga(g,i);d-=64;if(q(c,0,g,0)){for(f=0;f<d;f++)a[f]=0;return-1}for(f=0;f<d;f++)a[f]=c[f+64];return d}var qa=32,ra=24,sa=32,ta=16,ua=32,va=32,wa=32,xa=32,ya=32,za=ra,Aa=sa,Ba=ta,Z=64,Ca=32,Da=64,Ea=32,Fa=64;a.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:z,crypto_stream:y,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:B,crypto_onetimeauth_verify:C,crypto_verify_16:p,crypto_verify_32:q,crypto_secretbox:D,crypto_secretbox_open:E,crypto_scalarmult:S,crypto_scalarmult_base:T,crypto_box_beforenm:V,crypto_box_afternm:W,crypto_box:aa,crypto_box_open:ba,crypto_box_keypair:U,crypto_hash:Y,crypto_sign:na,crypto_sign_keypair:ja,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:qa,crypto_secretbox_NONCEBYTES:ra,crypto_secretbox_ZEROBYTES:sa,crypto_secretbox_BOXZEROBYTES:ta,crypto_scalarmult_BYTES:ua,crypto_scalarmult_SCALARBYTES:va,crypto_box_PUBLICKEYBYTES:wa,crypto_box_SECRETKEYBYTES:xa,crypto_box_BEFORENMBYTES:ya,crypto_box_NONCEBYTES:za,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Ba,crypto_sign_BYTES:Z,crypto_sign_PUBLICKEYBYTES:Ca,crypto_sign_SECRETKEYBYTES:Da,crypto_sign_SEEDBYTES:Ea,crypto_hash_BYTES:Fa,gf:b,D:i,L:ka,pack25519:I,unpack25519:L,M:O,A:M,S:P,Z:N,pow2523:R,add:ea,set25519:F,modL:la,scalarmult:ha,scalarbase:ia};function Ga(a,b){if(a.length!==qa)throw new Error("bad key size");if(b.length!==ra)throw new Error("bad nonce size")}function Ha(a,b){if(a.length!==wa)throw new Error("bad public key size");if(b.length!==xa)throw new Error("bad secret key size")}function $(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ia(a){for(var b=0;b<a.length;b++)a[b]=0}a.randomBytes=function(a){var b=new Uint8Array(a);c(b,a);return b};a.secretbox=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(sa+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+sa]=a[f];D(e,d,d.length,b,c);return e.subarray(ta)};a.secretbox.open=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(ta+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+ta]=a[f];if(d.length<32)return null;return E(e,d,d.length,b,c)!==0?null:e.subarray(sa)};a.secretbox.keyLength=qa;a.secretbox.nonceLength=ra;a.secretbox.overheadLength=ta;a.scalarMult=function(a,b){$(a,b);if(a.length!==va)throw new Error("bad n size");if(b.length!==ua)throw new Error("bad p size");var c=new Uint8Array(ua);S(c,a,b);return c};a.scalarMult.base=function(a){$(a);if(a.length!==va)throw new Error("bad n size");var b=new Uint8Array(ua);T(b,a);return b};a.scalarMult.scalarLength=va;a.scalarMult.groupElementLength=ua;a.box=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox(b,c,d)};a.box.before=function(a,b){$(a,b);Ha(a,b);var c=new Uint8Array(ya);V(c,a,b);return c};a.box.after=a.secretbox;a.box.open=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox.open(b,c,d)};a.box.open.after=a.secretbox.open;a.box.keyPair=function(){var a=new Uint8Array(wa),b=new Uint8Array(xa);U(a,b);return{publicKey:a,secretKey:b}};a.box.keyPair.fromSecretKey=function(a){$(a);if(a.length!==xa)throw new Error("bad secret key size");var b=new Uint8Array(wa);T(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};a.box.publicKeyLength=wa;a.box.secretKeyLength=xa;a.box.sharedKeyLength=ya;a.box.nonceLength=za;a.box.overheadLength=a.secretbox.overheadLength;a.sign=function(a,b){$(a,b);if(b.length!==Da)throw new Error("bad secret key size");var c=new Uint8Array(Z+a.length);na(c,a,a.length,b);return c};a.sign.open=function(a,b){$(a,b);if(b.length!==Ca)throw new Error("bad public key size");var c=new Uint8Array(a.length);a=pa(c,a,a.length,b);if(a<0)return null;b=new Uint8Array(a);for(a=0;a<b.length;a++)b[a]=c[a];return b};a.sign.detached=function(b,c){b=a.sign(b,c);c=new Uint8Array(Z);for(var d=0;d<c.length;d++)c[d]=b[d];return c};a.sign.detached.verify=function(a,b,c){$(a,b,c);if(b.length!==Z)throw new Error("bad signature size");if(c.length!==Ca)throw new Error("bad public key size");var d=new Uint8Array(Z+a.length),e=new Uint8Array(Z+a.length),f;for(f=0;f<Z;f++)d[f]=b[f];for(f=0;f<a.length;f++)d[f+Z]=a[f];return pa(e,d,d.length,c)>=0};a.sign.keyPair=function(){var a=new Uint8Array(Ca),b=new Uint8Array(Da);ja(a,b);return{publicKey:a,secretKey:b}};a.sign.keyPair.fromSecretKey=function(a){$(a);if(a.length!==Da)throw new Error("bad secret key size");var b=new Uint8Array(Ca);for(var c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}};a.sign.keyPair.fromSeed=function(a){$(a);if(a.length!==Ea)throw new Error("bad seed size");var b=new Uint8Array(Ca),c=new Uint8Array(Da);for(var d=0;d<32;d++)c[d]=a[d];ja(b,c,!0);return{publicKey:b,secretKey:c}};a.sign.publicKeyLength=Ca;a.sign.secretKeyLength=Da;a.sign.seedLength=Ea;a.sign.signatureLength=Z;a.hash=function(a){$(a);var b=new Uint8Array(Fa);Y(b,a,a.length);return b};a.hash.hashLength=Fa;a.verify=function(a,b){$(a,b);if(a.length===0||b.length===0)return!1;return a.length!==b.length?!1:o(a,0,b,0,a.length)===0?!0:!1};a.setPRNG=function(a){c=a};(function(){var b=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var c=65536;a.setPRNG(function(a,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=c)b.getRandomValues(f.subarray(e,e+Math.min(d-e,c)));for(e=0;e<d;e++)a[e]=f[e];Ia(f)})}else b&&b.randomBytes&&a.setPRNG(function(a,c){var d,e=b.randomBytes(c);for(d=0;d<c;d++)a[d]=e[d];Ia(e)})})()})(typeof g!=="undefined"&&g.exports?g.exports:self.nacl=self.nacl||{})}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("tweetnacl",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-1.0.3")()}),null);
__d("MAWKeychainNaClCrypto",["MAWKeychainCrypto","WABase64","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="EARError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));function i(a,b,c){c=new Uint8Array(c);var e=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);b=d("tweetnacl").secretbox(b,e,new Uint8Array(a));a=new Uint8Array(c.length+e.length+b.length);a.set(c);a.set(e,c.length);a.set(b,c.length+e.length);return a.buffer}function j(a,b,c){return d("WABase64").encodeB64(i(a,b,c!=null?c:d("MAWKeychainCrypto").ADDITIONAL_DATA))}function k(a,b,c,e,f){b.slice(0,f);var g=b.slice(f,f+d("tweetnacl").secretbox.nonceLength);b=b.slice(f+d("tweetnacl").secretbox.nonceLength);f=d("tweetnacl").secretbox.open(new Uint8Array(b),new Uint8Array(g),new Uint8Array(a));if(f==null)throw new h("decryptTweetNaCl was unable to decrypt an entity. Attempting to use key version : "+(c!=null?c:"non-provided")+". Format version "+(e!=null?e:"unknown")+".");return f}function l(a,b,c,e){return k(a,d("WABase64").decodeB64(b),c,void 0,e)}function a(a,b,c){return j(a,b,c)}function b(a,b,c,d){return l(a,b,c,d)}function c(a,b,c,d,e){return k(a,b,c,d,e)}g.EARDecryptionError=h;g.encryptTweetNaClArrayBuffer=i;g.encryptTweetNaCl=j;g.decryptTweetNaClArrayBuffer=k;g.decryptTweetNaCl=l;g.encrypt=a;g.decrypt=b;g.decryptArrayBuffer=c}),98);
__d("MAWLeakDetection",[],(function(a,b,c,d,e,f){"use strict";var g="[Vault] Vaulted string detected";function h(a){var b=/\d{10}##\d{10}/gm;return b.test(a)}function a(a){return h(a)?g:a}f.VAULTED_STRING_DETECTED=g;f.detectVaultedString=h;f.maybeReplaceVaultedString=a}),66);
__d("MAWSendQplToServer",["BrowserLockManager","ExecutionEnvironment","QPLUserFlow","WAExceededStorageQuota","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,d,e){c("QPLUserFlow").start(a,{annotations:babelHelpers["extends"]({},b||{},{bool:babelHelpers["extends"]({},(b==null?void 0:b.bool)||{},{isDev:0,isFromUIThread:(h||(h=c("ExecutionEnvironment"))).isInMainThread,isGifSearchEnbled:!0,isLockApiSupported:c("BrowserLockManager")!=null,processAcksInOneQueue:c("gkx")("23955"),useSharedWorker:"SharedWorkerGlobalScope"in self&&self instanceof self.SharedWorkerGlobalScope})}),instanceKey:d,timeoutInMs:e});return i(a,d)}function i(a,b){return{addAnnotations:function(d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},addPoint:function(d,e){e&&c("QPLUserFlow").addAnnotations(a,e,{instanceKey:b}),c("QPLUserFlow").addPoint(a,d,{instanceKey:b})},endCancel:function(e){var f;c("QPLUserFlow").addAnnotations(a,babelHelpers["extends"]({},e,{bool:babelHelpers["extends"]({},e==null?void 0:e.bool,{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers["extends"]({},e==null?void 0:e.string,{threadID:e==null||(f=e.string)==null?void 0:f.jid})}),{instanceKey:b});c("QPLUserFlow").endCancel(a,{annotations:e,instanceKey:b})},endFail:function(e,f){var g;c("QPLUserFlow").addAnnotations(a,babelHelpers["extends"]({},f,{bool:babelHelpers["extends"]({},f==null?void 0:f.bool,{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers["extends"]({},f==null?void 0:f.string,{threadID:f==null||(g=f.string)==null?void 0:g.jid})}),{instanceKey:b});c("QPLUserFlow").endFailure(a,e,{annotations:f,instanceKey:b})},endSuccess:function(e){c("QPLUserFlow").addAnnotations(a,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:b}),c("QPLUserFlow").endSuccess(a,{annotations:e,instanceKey:b})},markError:function(d,e,f){return c("QPLUserFlow").markError(a,d,{debugInfo:e,error:f,instanceKey:b})}}}g.startQplUserFlow=a;g.makeMAWQPLProxyForExistingQPLUserFlow=i}),98);
__d("MAWQplProxy",["Deferred","ExecutionEnvironment","FBLogger","MAWBridge","MAWSendQplToServer","QPLEvent","WAErrorMessage","gkx","justknobx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h=c("gkx")("23949"))!=null?h:!1,m=new Set([25313175,25310776,1056839232,1056836502,1056836703,1056847537,521478596,521479468,521476165,521480391,521472095]),n=0,o=(j||(j=c("performanceAbsoluteNow")))()-Date.now();function p(){return Date.now()}var q=new(c("Deferred"))();h=function(){q.resolve()};function r(a,b,e,f,g){f===void 0&&(f=!1),c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"point"},annotations:e==null?void 0:e.annotations,event:a,instanceKey:e==null?void 0:e.instanceKey,performanceAndDateSkew:o,timestamp:f?p():void 0},!0,void 0,g)})}function a(a,b,c,d,e){s(a,{bool:(a={},a[b]=c,a)},d,e)}function b(a,b,c,d,e){s(a,{string:(a={},a[b]=c,a)},d,e)}function e(a,b,c,d,e){s(a,{int:(a={},a[b]=c,a)},d,e)}function f(a,b,c,d){s(a,{double:b},c,d)}function s(a,b,e,f){c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"annotations"},annotations:b,event:a,instanceKey:e},!0,void 0,f)})}function t(a,b,e,f,g,h){g===void 0&&(g=!1);var i=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"failure"},annotations:e,event:a,instanceKey:f,timestamp:g?i:void 0},!0,void 0,h)})}function u(a,b,e,f,g){f===void 0&&(f=!1);var h=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"success"},annotations:b,event:a,instanceKey:e,timestamp:f?h:void 0},!0,void 0,g)})}function v(a,b,e,f,g){f===void 0&&(f=!1);var h=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"cancel"},annotations:b,event:a,instanceKey:e,timestamp:f?h:void 0},!0,void 0,g)})}function w(a,b,e,f){c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"error"},debugInfo:e==null?void 0:e.debugInfo,error:e==null?void 0:e.error,event:a,instanceKey:e==null?void 0:e.instanceKey},!0,void 0,f)})}async function x(a,b,c,e,f){r(a,b+"_start",{annotations:e,instanceKey:f});try{e=await c();r(a,b+"_end",{instanceKey:f});return e}catch(c){r(a,b+"_fail",{annotations:{string:{caughtError:d("WAErrorMessage").maybeGetMessageFromError(c)}},instanceKey:f});throw c}}async function y(a,b,c){a.addPoint(b+"_start");try{c=await c;a.addPoint(b+"_end");return c}catch(c){a.addPoint(b+"_fail",{string:{caughtError:d("WAErrorMessage").maybeGetMessageFromError(c)}});throw c}}var z=c("justknobx")._("2596");function A(a,b,e){e===void 0&&(e={});e=e;var f=e.callBridgeWithTimestamp,g=f===void 0?!1:f;f=e.providedInstanceKey;var h=e.providedTimeoutInMs;e=e.sendThroughBridge;e=e===void 0?!1:e;f==null&&n++;var i=f!=null?f:n,j=h!=null?h:z;f=!(k||(k=c("ExecutionEnvironment"))).isInWorker;h=e||C(a);if(f||!h)return d("MAWSendQplToServer").startQplUserFlow(a,b,i,j);var l=e?{toLastActiveClient:!0}:void 0;c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"start"},annotations:babelHelpers.extends({},b||{},{bool:babelHelpers.extends({},(b==null?void 0:b.bool)||{})}),event:a,instanceKey:i,timeoutInMs:j,timestamp:g?p():void 0},!0,void 0,l)});return{addAnnotations:function(b){return s(a,b,i,l)},addPoint:function(b,c){return r(a,b,{annotations:c,instanceKey:i},void 0,l)},endCancel:function(b){return v(a,b,i,void 0,l)},endFail:function(b,c){return t(a,b,c,i,void 0,l)},endSuccess:function(b){return u(a,b,i,void 0,l)},markError:function(b,c,d){return w(a,b,{debugInfo:c,error:d,instanceKey:i},l)}}}function B(a,b){return!(k||(k=c("ExecutionEnvironment"))).isInWorker||!C(a)?d("MAWSendQplToServer").makeMAWQPLProxyForExistingQPLUserFlow(a,b):{addAnnotations:function(c){return s(a,c,b)},addPoint:function(c,d){return r(a,c,{annotations:d,instanceKey:b})},endCancel:function(c){return v(a,c,b)},endFail:function(c,d){return t(a,c,d,b)},endSuccess:function(c){return u(a,c,b)},markError:function(c,d,e){return w(a,c,{debugInfo:d,error:e,instanceKey:b})}}}function C(a){return l||m.has((i||(i=d("QPLEvent"))).getMarkerId(a))}function D(a,b){return new F(a,b)}var E=0,F=function(){function a(a,b){this.$4=!1;this.$1=a;this.$2=(a=b==null?void 0:b.instanceKey)!=null?a:E++;this.$3=b==null?void 0:b.timeoutInMs;this.$4=!0}var b=a.prototype;b.start=function(a){c("FBLogger")("messenger_web").warn("start() should not be called for cross-bridge QPL flow")};b.addPoint=function(a,b){r(this.$1,a,{annotations:b,instanceKey:this.$2})};b.addAnnotations=function(a){s(this.$1,a,this.$2)};b.endSuccess=function(a){u(this.$1,a,this.$2),this.$4=!1};b.endFail=function(a,b){t(this.$1,a,b,this.$2),this.$4=!1};b.isActive=function(){return this.$4};b.getQPLAttrs=function(){return{event:this.$1,instanceKey:this.$2}};return a}();g.performanceAbsoluteNow=p;g.workerBridgeDeferred=q;g.resolveWorkerBridge=h;g.sendQplPointThroughBridge=r;g.sendQPLBoolAnnotationThroughBridge=a;g.sendQPLStringAnnotationThroughBridge=b;g.sendQPLIntAnnotationThroughBridge=e;g.sendQPLDoubleAnnotationsThroughBridge=f;g.sendQPLAnnotationsThroughBridge=s;g.sendQPLFailThroughBridge=t;g.sendQPLSuccessThroughBridge=u;g.sendQPLCancelThroughBridge=v;g.sendQPLErrorThroughBridge=w;g.measurePerfInQPL_USE_WITH_CARE=x;g.measurePerfInQPL=y;g.DEFAULT_WORKER_QPL_TIMEOUT_MS=z;g.startQplUserFlow=A;g.makeQplUserFlowFromExistedInstance=B;g.continueQplAsCrossBridgeQplFlow=D}),98);
__d("MAWTransactionMode",[],(function(a,b,c,d,e,f){"use strict";a="r!";b="rw!";f.READONLY=a;f.READWRITE=b}),66);
__d("MAWLogIndexedDb",["FBLogger","MAWCurrentUser","MAWErrorObject","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","WAExceededStorageQuota","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=null;function k(){return c("justknobx")._("1399")}function l(){if(i==null)throw c("FBLogger")("messenger_web").mustfixThrow("LogDB IndexDB should've been initialized");return i}function m(){return j==null?o().then(function(){return l()}):j.then(function(){return l()})}function a(){return i!=null}var n=[function(a){a=a.target.transaction;d("WAExceededStorageQuota").listenToQuotaExceededError(a);a=a.db.createObjectStore("logs",{autoIncrement:!0,keyPath:"id"});a.createIndex("date","date",{unique:!1})}];function o(a){if(j!=null)return j;if(i!=null)return(h||(h=b("Promise"))).resolve();var c=d("MAWCurrentUser").getID(),e=d("MAWIndexedDbMetadata").logDbName(c),f=(c=a!=null?a:k())!=null?c:n.length;j=new(h||(h=b("Promise")))(function(a,b){var c=indexedDB.open(e,f);c.onupgradeneeded=function(a){for(var b=0;b<n.length;b++){var c=n[b];p(a,b+1)&&c(a)}};c.onsuccess=function(b){var c=b.target.result;c.onversionchange=function(){c.close()};i=c;a()};c.onerror=function(){b(c.error)}});return j}function p(a,b){var c=a.newVersion;a=a.oldVersion;return a<b&&c>=b}function q(a){return a===d("MAWTransactionMode").READWRITE?"readwrite":"readonly"}function e(a,b,e){var f=q(b);return function(b){return function(){for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];var j=e!=null?d("MAWQplProxy").startQplUserFlow(e):null;return m().then(function(c){var e=function(b){b=c.transaction(a,b!=null?q(b):f,{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(b);return b.objectStore(a)};return b.apply(void 0,[e].concat(h))}).then(function(a){j==null||j.endSuccess();return a})["catch"](function(a){j==null||j.endFail("transaction_fail");a=d("MAWErrorObject").getErrorObject(a);var b=c("FBLogger")("maw_db");if(a instanceof Error)throw b.catching(a).mustfixThrow("LOG - Error performing transaction in log transactor");throw b.mustfixThrow("LOG - Error performing transaction in log transactor")})}}}g.getLogDbVersion=k;g.getLogDB=l;g.isLogDBInitted=a;g.dbMigrations=n;g.makeLogMsgrTransactor=e}),98);
__d("MAWLoggingSwitches",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("503");g.removeLoggingFromBridge=a}),98);
__d("MAWSaveLogToDisk",["Deferred","MAWLogIndexedDb","MAWTransactionMode","justknobx","pageID","promiseDone","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h=c("justknobx")._("1403");e=c("justknobx")._("1404");var i=c("justknobx")._("1401");function j(a){if(Number.isInteger(a))return a;if(typeof a==="string")return(a||"").replace(/\n/g,"");try{return JSON.stringify(a)}catch(a){return"Data could not be serialized"}}function k(a,b){b===void 0&&(b="");return a.length>0?"["+a.join("|")+"]":b}function l(a){switch(a){case"logRestricted":return"warn";case"count":return"log";case"debug":case"log":case"warn":case"error":return a}}function a(a){return{args:a.logString,date:a.date,event:k(a.tags,"[]"),level:l(a.logLevel)}}function b(a,b,c,d,e,f){return{args:a+"; ERROR="+c.message+";",data:{entriesToReport:e,error:c,framesToPop:d,stack:f},date:Date.now(),event:k(b,"[]"),level:"error"}}var m=[],n=[],o=5,p=0,q=!1,r=function(){m.length=0},s=function(a){a=w(a);n.length<o?n.push(a):n[p%o]=a;p=(p+1)%o},t=function(a){var b=[],c=0;while(c<a){var d=((p-c-1)%o+o)%o;d=n[d];b.push(d);c++}return Promise.resolve(b)};f=function(a,b){m.push({context:a,logEntry:b}),s({context:a,logEntry:b}),m.length>h?c("promiseDone")(u()):v()};var u=async function(){q=!0;try{var a=[].concat(m);r();await x(a)}catch(a){}q=!1},v=c("throttle")(async function(){if(q)return;q=!0;try{var a=[].concat(m);r();await x(a)}catch(a){}q=!1},e),w=function(a){var b=a.context;a=a.logEntry;return Object.entries(a).reduce(function(a,b){var c=b[0];b=b[1];a[c]=j(b);return a},babelHelpers.extends({},a,{category:b+"-"+c("pageID")}))},x=d("MAWLogIndexedDb").makeLogMsgrTransactor("logs",d("MAWTransactionMode").READWRITE)(function(a,b){var d=new(c("Deferred"))(),e=a();b.forEach(function(a){e.add(w(a))});e.transaction.oncomplete=function(){return d.resolve()};e.transaction.onerror=function(a){return d.reject(a)};return d.getPromise()}),y=d("MAWLogIndexedDb").makeLogMsgrTransactor("logs",d("MAWTransactionMode").READONLY)(function(a){var b=new(c("Deferred"))();a=a();a=a.getAll();a.onsuccess=function(a){a=a.target.result;a=a.slice(Math.max(0,a.length-i));b.resolve(a)};a.onerror=function(a){return b.reject(a)};return b.getPromise()});e=function(){return y().catch(function(a){return[]})};var z=function(a){a=a<=n.length?t(a):A(a);return a.catch(function(a){return[]})},A=d("MAWLogIndexedDb").makeLogMsgrTransactor("logs",d("MAWTransactionMode").READONLY)(function(a,b){var d=new(c("Deferred"))();a=a();a=a.index("date");a=a.openCursor(null,"prev");var e=[];a.onsuccess=function(a){a=a.target.result;if(a==null){d.resolve(e);return}e.push(a.value);if(e.length>=b){d.resolve(e);return}a.continue()};a.onerror=function(a){return d.reject(a)};return d.getPromise()});g.joinTags=k;g.formatLog=a;g.formatErrorForLogging=b;g.clearLogEntryCache=r;g.saveLogEntry=f;g.forceCachedLogEntryPersist=u;g.getEntriesFromDb=e;g.getLastNEntries=z}),98);
__d("WADevToolsBridge",["WADynamicRouterAsync"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WADynamicRouterAsync").DynamicRouter)();function a(){return h}g.getDevToolBridge=a}),98);
__d("MAWLoggerUtils",["ErrorPubSub","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","Random","ServerJsRuntimeEnvironment","WADevToolsBridge","WAJids","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1,j=new Set(["messenger_web","wmi_eb","labyrinth_web","messenger_web_media","messenger_web_calling","mps","wmi"]);f={CleanerPurge:"CleanerPurge",CleanerStart:"CleanerStart",CleanerTimestamp:"CleanerTimestamp",CleanerUpdate:"CleanerUpdate",Countdown:"Countdown",Ephemeral:"Ephemeral",Incoming:"Incoming",MsgCleaner:"MsgCleaner",OnLoad:"OnLoad",OnRead:"OnRead",Outgoing:"Outgoing",PeerReceipt:"PeerReceipt",SettingChange:"SettingChange",SettingSync:"SettingSync",DeviceRegistration:"DeviceRegistration",MessageReceive:"MessageReceive",MediaDownload:"MediaDownload",WorkerSetup:"WorkerSetup",MAWWorker:"MAWWorker",MAWInit:"MAWInit",LogoutHandler:"LogoutHandler",MiActMapping:"MiActMapping",ThreadReady:"ThreadReady"};function a(){return Math.floor(Date.now()+d("Random").random()*1e4+1e4)}function b(a){a=a.split("");return a.reduce(function(a,b){b=b.charCodeAt(0);a=(a<<5)-a+b;a&=a;return a},0)}function e(){if(i)return;i=!0;(h||(h=c("ErrorPubSub"))).addListener(function(a){var b=a.project!=null?j.has(a.project):!1;if(b){k(a.type==="error"||a.type==="fatal"?"error":a.type==="warn"?"warn":"log",a.message,(b=a.tags)!=null?b:[],(a=(b=a.metadata)==null?void 0:b.includes("MESSENGER_E2EE_WEB:ENVIRONMENT:worker"))!=null?a:!1)}})}function k(a,b,e,f){if(d("ServerJsRuntimeEnvironment").isRunningServerJsRuntime())return;b=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(b));var g=Date.now();c("gkx")("3282")&&d("WADevToolsBridge").getDevToolBridge().fireAndForget("devtool","logLine",{logLevel:a,logString:l(b,e)},!0);if(!d("MAWLoggingSwitches").removeLoggingFromBridge)return;b=b.replace(/\n/g," ");if(a==="debug"||typeof b!=="string")return;d("MAWSaveLogToDisk").saveLogEntry(f?"worker":"browser",{args:b,date:g,event:d("MAWSaveLogToDisk").joinTags(e,"[unknown]"),level:a})}function l(a,b){return b.length>0?d("MAWSaveLogToDisk").joinTags(b)+" "+a:a}g.Tag=f;g.getInstanceKey=a;g.getInstanceKeyFromId=b;g.initMessengerWebLogging=e;g.logToHistory=k}),98);
__d("MAWMiActMappingTableAPI",["I64","LSMessagingThreadTypeUtil","MAWJids","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){return b==null?Promise.resolve(null):d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(b))}function a(a,b,c){return i(a,b).then(function(a){a=a==null?void 0:a.jid;return a==null?null:d("MAWJids").convertIntJidToChatJid(a,d("LSMessagingThreadTypeUtil").isGroup(c))})}function b(a,b){return k(a,b).then(function(a){return a==null?void 0:a.serverThreadKey})}function j(a,b){return b==null?Promise.resolve(null):d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(b))}function k(a,b){return j(a,d("MAWJids").convertChatJidToIntJid(b))}async function c(a,b){var c=b.intJid;b=b.threadKey;b=await i(a,b);return b!=null?b:j(a,c)}function l(a){return(h||(h=d("I64"))).le(a,h.zero)}function e(a,b){return a.tables.mi_act_mapping_table.subscribe(function(a,c){var d=a[0],e=a[1];a[2];a=c.operation;a==="delete"&&!l(e)&&b(e,d)})}g.getMappingRowForThreadKey=i;g.getChatJidForThreadKey=a;g.getThreadKeyForChatJid=b;g.getMappingRowForIntJid=j;g.getMappingRowForChatJid=k;g.getMappingRowForThreadKeyOrJid=c;g.subscribeToMappingDeletion=e}),98);
__d("MAWMpsGating",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("gkx")("10465")}function a(){return c("gkx")("10536")}function b(){return c("gkx")("16913")}function d(){return c("gkx")("15420")}function e(){return h()||c("gkx")("11172")}function f(){return c("gkx")("9683")}function i(){return c("gkx")("16365")}g.isFullMpsEnabled=h;g.isMpsWaAdminMsgsEnabled=a;g.isMpsMessagePublishSeviceEnabled=b;g.isMpsUploadAdminMessageEnabled=d;g.isEbUploadViaMpsEnabled=e;g.isMpsPointQueryEnabled=f;g.isSearchOnMpsEnabled=i}),98);
__d("WAMsgType",[],(function(a,b,c,d,e,f){"use strict";a="Text";b="Futureproof";c="Ciphertext";d="Unavailable";e="Image";var g="Video",h="Ptt",i="Admin",j="Revoked",k="Gif",l="Sticker",m="DocumentFile",n="ExpiredEphemeral",o="EphemeralSettingAdmin",p="EphemeralSyncResponse",q="DeleteForMe",r="EphemeralSettingChangeFromCurrentDevice",s="AlertICDC",t="GroupInvite",u="NoteReply",v="Reaction",w="SenderKeyDistribution",x="EditAction",y="ReceiverFetch",z="Raven",A="GroupPollCreate",B="GroupPollUpdate",C={ADMIN:i,CIPHERTEXT:c,DELETE_FOR_ME:q,DOCUMENT_FILE:m,EDIT_ACTION:x,EPHEMERAL_SETTING_ADMIN:o,EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:r,EPHEMERAL_SYNC_RESPONSE:p,EXPIRED_EPHEMERAL:n,FUTUREPROOF:b,GIF:k,GROUP_INVITE:t,ICDC_ALERT:s,IMAGE:e,PTT:h,REACTION:v,REVOKED:j,SK_DISTRIBUTION:w,STICKER:l,TEXT:a,UNAVAILABLE:d,VIDEO:g,RECEIVER_FETCH:y,RAVEN:z,GROUP_POLL_CREATE:A,GROUP_POLL_UPDATE:B,NOTE_REPLY:u};f.TEXT=a;f.FUTUREPROOF=b;f.CIPHERTEXT=c;f.UNAVAILABLE=d;f.IMAGE=e;f.VIDEO=g;f.PTT=h;f.ADMIN=i;f.REVOKED=j;f.GIF=k;f.STICKER=l;f.DOCUMENT_FILE=m;f.EXPIRED_EPHEMERAL=n;f.EPHEMERAL_SETTING_ADMIN=o;f.EPHEMERAL_SYNC_RESPONSE=p;f.DELETE_FOR_ME=q;f.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE=r;f.ICDC_ALERT=s;f.GROUP_INVITE=t;f.NOTE_REPLY=u;f.REACTION=v;f.SK_DISTRIBUTION=w;f.EDIT_ACTION=x;f.RECEIVER_FETCH=y;f.RAVEN=z;f.GROUP_POLL_CREATE=A;f.GROUP_POLL_UPDATE=B;f.MSG_TYPE=C}),66);
__d("MAWMsgType",["WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return k.has(a)};var h=function(a){return l.has(a)||k.has(a)};b=function(a){return h(a)||m.has(a)};c="EphemeralScreenshotAction";e="Raven";f="RavenAction";var i="XMA",j="BumpExistingMessage";d=babelHelpers["extends"]({},d("WAMsgType").MSG_TYPE,{BUMP_EXISTING_MESSAGE:j,EPHEMERAL_SCREENSHOT_ACTION:c,RAVEN:e,RAVEN_ACTION:f,XMA:i});var k=new Set([d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.XMA,d.RAVEN,d.DOCUMENT_FILE,d.RECEIVER_FETCH]),l=new Set([d.TEXT,d.REVOKED,d.XMA,d.BUMP_EXISTING_MESSAGE,d.GROUP_POLL_CREATE]),m=new Set([d.FUTUREPROOF]),n=new Set([d.TEXT,d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.DOCUMENT_FILE,d.UNAVAILABLE,d.EXPIRED_EPHEMERAL,d.REVOKED,d.XMA,d.RAVEN,d.RECEIVER_FETCH]);j=function(a){return n.has(a)};g.isMAWSupportedMediaType=a;g.isEBSupportedMsgType=h;g.isProtobufUploadSupportedMsgType=b;g.EPHEMERAL_SCREENSHOT_ACTION=c;g.MSG_TYPE=d;g.mawSupportedMediaTypes=k;g.isQuotedMsgType=j}),98);
__d("MAWODSProxy",["CurrentMessengerUser","ExecutionEnvironment","ODS","WABridge","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=!((b=c("gkx")("23949"))!=null?b:!1);function a(a,b){var e=a.amount,f=a.entity;a=a.key;b===void 0&&(b=!0);(i||(i=c("ExecutionEnvironment"))).isInWorker&&!j?d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:e,entity:f,key:a},b):(h||(h=d("ODS"))).bumpEntityKey(3185,f,a+"."+(d("CurrentMessengerUser").getAppID()||"unknown"),e)}g.odsBumpEntityKey=a}),98);
__d("MAWUnrecoverableDbErrors",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));e=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="indexed_db_access_error",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(g);var h=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ear_init_error",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(g),i=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ear_runtime_error",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(g),j=function(a){function b(b,c,d,e){b=a.call(this,b)||this;b.name="ebsm_hydration_error";b.fullDeletion=c;b.qplInstanceKey=d;b.tableName=e;return b}babelHelpers.inheritsLoose(b,a);return b}(g),k=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="wa_exceeded_storage_quota_error",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(g);function a(a){return a==null?!1:a instanceof g||l(a.name)}function l(a){return a==="indexed_db_access_error"||a==="ear_init_error"||a==="ear_runtime_error"||a==="ebsm_hydration_error"||a==="wa_exceeded_storage_quota_error"}var m=null,n=new Set();function b(){return m}function c(a,b){m=a,b==null||b(),n.forEach(function(b){return b(a)})}function d(a){n.add(a);return function(){return n["delete"](a)}}f.UnrecoverableDbError=g;f.IndexedDbAccessError=e;f.EarInitError=h;f.EarRuntimeError=i;f.EbsmHydrationError=j;f.WAExceededStorageQuotaError=k;f.isUnrecoverableDbError=a;f.isUnrecoverableDbErrorByName=l;f.getError=b;f.setError=c;f.subscribe=d}),66);
__d("WAArrayBufferUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a,c){c===void 0&&(c=5e5);return new(h||(h=b("Promise")))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;setTimeout(i,0);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}setTimeout(i,16)}})}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var i=8388607;function f(a,b){a=new Uint8Array(a);if(b>i)throw c("err")("Divisor is too big");var d=0;for(var e=0;e<a.length;++e)d=((d<<8)+a[e])%b;return d}function j(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function k(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return l(a,b)}function l(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}g.stringToArrayBuffer=a;g.largeStringToArrayBuffer=d;g.arrayBufferToString=e;g.arrayBufferMod=f;g.concatBuffers=j;g.arrayBuffersEqualUNSAFE=k;g.uint8ArraysEqualUNSAFE=l}),98);
__d("MAWVaultMaterials",["FBLogger","WAArrayBufferUtils","randomInt","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null,j=null;function k(a){i=a}function l(){return h}function m(a){h=a}function a(){h=null,i=null}function n(){return p()!=null&&l()!=null}function b(){return j}function o(){var a=1e9,b=9999999999;return c("randomInt")(a,b)+"##"+c("randomInt")(a,b)}function p(){return i}function q(){if(!n())throw c("FBLogger")("messenger_web").mustfixThrow("Vault materials are null");return{encryptionKey:h,prefixAndSuffix:i}}function e(a,b){var d=n();c("FBLogger")("messenger_web").debug("Setting vault materials -- vaultMaterials=%s, previouslySetup=%s",Boolean(a).toString(),d);d||(s(a!=null?a:r()),j=b!=null?b:a!=null?"existing":"newly-generated");return q()}function r(){return{encryptionKey:d("tweetnacl").randomBytes(32).buffer,prefixAndSuffix:o()}}function s(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(b==null||a==null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot set null values for encryption key and prefix");m(b);k(a)}function f(){return t(q())}function t(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(a!=null&&b!=null){b=d("WAArrayBufferUtils").arrayBufferToString(b);return JSON.stringify({encryptionKey:b,prefixAndSuffix:a})}else return""}function u(a){if(a==="")return null;else{a=JSON.parse(a);if(a.encryptionKey==null||a.prefixAndSuffix==null)throw c("FBLogger")("messenger_web").mustfixThrow("Vault materials were not in correct format");var b=d("WAArrayBufferUtils").stringToArrayBuffer(a.encryptionKey);a=a.prefixAndSuffix;return{encryptionKey:b,prefixAndSuffix:a}}}g.TEST_ONLY_clearVaultMaterials=a;g.hasVaultBeenSetup=n;g.getVaultMaterialsSource=b;g.getVaultPrefixAndSuffix=p;g.getVaultMaterials=q;g.initializeVaultMaterials=e;g.generateNewVaultMaterials=r;g.materialsToString=f;g.fromMaterialsToString=t;g.fromStringToMaterials=u}),98);
__d("MAWVaultMaterialsStorageStatus",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(){return g}function b(){g=!0}f.isCurrentContextHoldingLock=a;f.setIsCurrentContextHoldingLock=b}),66);
__d("MAWVault",["ExecutionEnvironment","FBLogger","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWODSProxy","MAWVaultMaterials","MAWVaultMaterialsStorageStatus","WAOdsEnums","err","gkx","hasMultipleTabs","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map();function k(a){return new RegExp("^[0-9]{10}##[0-9]{10}.*[0-9]{10}##[0-9]{10}$").test(a)}var l=c("gkx")("23909");function m(a){if(!l)return!1;var b=d("MAWVaultMaterials").getVaultPrefixAndSuffix();b=b==null?!1:new RegExp(b+".*"+b).test(a);return b}function n(a,b){b===void 0&&(b=!1);if(!l)return a;if(m(a)){var e=d("MAWVaultMaterials").getVaultMaterials(),f=e.encryptionKey;e=e.prefixAndSuffix;if(e==null){o("unvault","prefix_null");throw c("FBLogger")("messenger_web").mustfixThrow("Vault prefix and suffix should not be null when unvaulting")}var g=new RegExp(e+"(.*)"+e);g=a.match(g);if(g==null||g.length!=2){o("unvault","value_null");throw c("FBLogger")("messenger_web").mustfixThrow("Could not retrieve inner value to unvault")}if(f==null){o("unvault","key_null");throw c("FBLogger")("messenger_web").mustfixThrow("Vault encryption key was null before unvault")}g=g[1];e=""+e+g+e;var i=q(f,g);return a.replace(e,function(){return i})}if(k(a)){o("unvault","incorrect_key");if(b)throw c("FBLogger")("messenger_web").mustfixThrow("Encountered vaulted value with incorrect key.");else{var j=c("err")("Encountered vaulted value with incorrect key");c("promiseDone")(d("hasMultipleTabs").hasMultipleTabs().then(function(a){c("FBLogger")("messenger_web").catching(j).mustfix("Encountered vaulted value with incorrect key. Vault material source: %s, environment: %s, hasMultipleTabs: %s, isSharedWorker: %s, isCurrentContextHoldingLock: %s",d("MAWVaultMaterials").getVaultMaterialsSource(),(h||(h=c("ExecutionEnvironment"))).isInMainThread?"main":"worker",a==null?"unknown_multi_tab":a?"multi_tab":"single_tab",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?"shared_worker":"dedicated_worker",d("MAWVaultMaterialsStorageStatus").isCurrentContextHoldingLock()?"holding_lock":"not_holding_lock")}))}}return a}function o(a,b){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_VAULTING,key:"failure."+a+"."+b})}function a(a){if(a==="")return a;if(!l)return a;if(!(h||(h=c("ExecutionEnvironment"))).isInBrowser)return a;if(!d("MAWVaultMaterials").hasVaultBeenSetup()){o("vault","has_not_been_setup");c("FBLogger")("messenger_web").mustfix("Attempted to vault value while materials were not setup");return a}if(m(a)){o("vault","already_vaulted");c("FBLogger")("messenger_web").warn("Attempted to vault value that's already been vaulted");return a}k(a)&&(o("vault","already_vaulted_with_different_key"),c("FBLogger")("messenger_web").mustfix("Attempted to vault value that's already been vaulted with a different key"));var b=d("MAWVaultMaterials").getVaultMaterials(),e=b.encryptionKey;b=b.prefixAndSuffix;if(b==null||e==null){o("vault","prefix_or_key_null");throw c("FBLogger")("messenger_web").mustfixThrow("Cannot vault before vault materials are set")}e=p(e,a);return""+b+e+b}function b(a){if(!l)return a;if(!m(a))throw c("FBLogger")("messenger_web").mustfixThrow("Value should be vaulted");return n(a)}function p(a,b){var c=i==null?void 0:i.get(b);if(c!=null)return c;c=new TextEncoder().encode(b).buffer;a=d("MAWKeychainNaClCrypto").encryptTweetNaCl(a,new Uint8Array(c));i==null||i.set(b,a);j==null||j.set(a,b);return a}function q(a,b){var c=j==null?void 0:j.get(b);if(c!=null)return c;c=new TextDecoder().decode(d("MAWKeychainNaClCrypto").decryptTweetNaCl(a,b,void 0,d("MAWKeychainCrypto").ADDITIONAL_DATA.byteLength));i==null||i.set(c,b);j==null||j.set(b,c);return c}g.isVaulted=m;g.unvault=n;g.vault=a;g.unvaultOrThrow=b}),98);
__d("isObject",[],(function(a,b,c,d,e,f){function a(a){var b=typeof a;return b==="function"||b==="object"&&!!a}f["default"]=a}),66);
__d("isPlainObject",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Object.prototype.toString.call(a)==="[object Object]"}f["default"]=a}),66);
__d("MAWVaultDb",["FBLogger","MAWQplProxy","MAWVault","gkx","isObject","isPlainObject","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=1/1e3,i=new WeakMap();function j(a,b){return b[a]!=null}var k=c("gkx")("23909");function a(a,b,e){if(!c("isPlainObject")(a)||!k||!j(b,e)||a==null)return a;var f=i.get(a);if(f!=null)return f;f=Math.random()<h?d("MAWQplProxy").startQplUserFlow(c("qpl")._(25301509,"119")):null;try{e=e[b];e=l(a,e,d("MAWVault").vault);f==null||f.endSuccess();i.set(a,e);return e}catch(a){f==null||f.endFail("vault_fail");throw c("FBLogger")("messenger_web").mustfixThrow(a.message+" - Failed to vault an entity in the table: "+b)}}function b(a,b,e){if(!c("isPlainObject")(a)||!k||!j(b,e)||a==null)return a;var f=Math.random()<h?d("MAWQplProxy").startQplUserFlow(c("qpl")._(741087294,"2028")):null;try{a=l(a,e[b],d("MAWVault").unvault);f==null||f.endSuccess();return a}catch(a){f==null||f.endFail("unvault_fail");throw c("FBLogger")("messenger_web").mustfixThrow(a.message+" - Unvaulting failed for an entity in the table: "+b)}}function l(a,b,d){if(a==null)return a;b=Object.entries(b).filter(function(b){b=b[0];return a[b]!=null});return b.length===0?a:b.reduce(function(a,b){var e=b[0];b=b[1];typeof b!=="boolean"&&c("isObject")(b)?a[e]=l(a[e],b,d):b===!0&&(a[e]=d(a[e]));return a},babelHelpers["extends"]({},a))}g.vaultDbRow=a;g.unvaultDbRow=b;g.setInPath=l}),98);
__d("MAWVaultDefinitions",[],(function(a,b,c,d,e,f){"use strict";a={editMsgHistory:{msgContent:{content:!0}},messages:{msgContent:{content:!0},quote:{content:{msgContent:{content:!0}}}},unrenderedMessages:{msgContent:!0}};b={edit_message_history:{messageContent:!0},messages:{replyMessageText:!0,text:!0},threads:{snippet:!0}};f.ARMADILLO_IDB_VAULT_DEFINITIONS=a;f.PERSISTED_DB_VAULT_DEFINITIONS=b}),66);
__d("MWEncryptedBackupsSharedState",["ReQL","ReQLSuspense","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(j||d("react")).useCallback;function k(a){var b=a.db,c=a.stateKey;a=a.stateValue;var d=a===void 0?"true":a;return b.runInTransaction(function(a){return a.experiences_shared_state.upsert([c],{stateKey:c,stateValue:d})},"readwrite","background",void 0,f.id+":37")}function l(a){var b,e=a.db;a=a.stateKey;if(!d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return;b=(b=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a);if(b!=null){var f;(f=(h||(h=c("WebStorage"))).getLocalStorage())==null||f.removeItem(a);c("promiseDone")(k({db:e,stateKey:a,stateValue:b}))}return b}function a(a){var b=a.db,c=a.sharedStateTable,d=a.stateKey;a=c.filter(function(a){return a.stateKey===d});if(a.length===0){c=l({db:b,stateKey:d});return c!=null}return!0}function b(a){var b=a.db,c=a.sharedStateTable,d=a.stateKey;a=c.filter(function(a){return a.stateKey===d});c=a[0];return(c==null?void 0:c.stateValue)!=null?c.stateValue:l({db:b,stateKey:d})}function e(a){var b=a.db,c=a.sharedStateRow;a=a.stateKey;return c==null?l({db:b,stateKey:a}):c.stateValue}function m(a){var b=a.db,c=a.stateKey;return b.runInTransaction(function(a){return a.experiences_shared_state["delete"](c)},"readwrite","background",void 0,f.id+":131")}function n(a){var b,e=d("react-compiler-runtime").c(6),g=(i||(i=c("useReStore")))();b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.experiences_shared_state).getKeyRange(a)},[g.tables.experiences_shared_state,a],f.id+":142"))==null?void 0:b.stateValue;var h;e[0]!==g||e[1]!==a?(h=function(b){return k({db:g,stateKey:a,stateValue:b})},e[0]=g,e[1]=a,e[2]=h):h=e[2];h=h;var j;e[3]!==h||e[4]!==b?(j=[b,h],e[3]=h,e[4]=b,e[5]=j):j=e[5];return j}function o(a){var b=d("react-compiler-runtime").c(5);a=n(a);var c=a[0],e=a[1];b[0]!==e?(a=function(){e("true")},b[0]=e,b[1]=a):a=b[1];a=a;c=c==="true";var f;b[2]!==a||b[3]!==c?(f=[c,a],b[2]=a,b[3]=c,b[4]=f):f=b[4];return f}g.upsertEBSharedStateEntry=k;g.getEntryPresentInLocalStorage=l;g.getIsEntryPresentInSharedState=a;g.getEntryValueFromSharedState=b;g.getEntryValue=e;g.deleteEntry=m;g.useEBSharedStateEntry=n;g.useEBSharedStateEntryBoolean=o}),98);
__d("MWFBLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return c("FBLogger")("messenger_web",a)};b=function(a){return c("FBLogger")("messenger_web_media",a)};d=function(a){return c("FBLogger")("messenger_web_sharing",a)};e=function(a){return c("FBLogger")("messenger_web_calling",a)};f=function(a){return c("FBLogger")("mps",a)};g.MWLogger=a;g.MWMediaLogger=b;g.MWSharingLogger=d;g.MWCallingLogger=e;g.MPSLogger=f}),98);
__d("MWPreloadableQueries",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;b=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate).getKeyRange(b)};c=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate_ctas.index("threadKeyCtaId")).getKeyRange(b)};e=function(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(b)};f=function(a,b){return d("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(b)};var i=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_proactive_warning_settings).getKeyRange(b)},j=function(a,b){return d("ReQL").fromTableAscending(a.tables.in_thread_banner).getKeyRange(b)};function a(a,b){return d("ReQL").fromTableAscending(a.tables.media_staging).filter(function(a){return!a.isSent&&(h||(h=d("I64"))).equal(a.threadKey,b)})}g.threadNullStateQuery=b;g.threadNullStateCtaQuery=c;g.getCutoverThreadByThreadKey=e;g.getCommunityFolderQuery=f;g.getProactiveWarningsForThreadQuery=i;g.getThreadBannerQuery=j;g.getMediaStagingQuery=a}),98);
__d("WABinary",["WAHex","err"],(function(a,b,c,d,e,f,g){"use strict";var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.$1=new Uint8Array(0);this.$2=0;this.$4=0;this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c==="string"?d.writeString(c):typeof c==="number"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)};b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArrayView=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)};b.writeUint8=function(a){S(a,0,256,"uint8"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,"signed int8"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,"uint16"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,"signed int16"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,"uint32"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,"signed int32"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,"uint64"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,"signed int64"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var b=a<0;a=b?-a:a;var c=Math.floor(a/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d("WAHex").hexLongIsNegative(a);a=b?d("WAHex").negateHexLong(a):a;a=d("WAHex").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d("WAHex").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d("WAHex").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArrayView()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,"byte");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(f=b-1;f>=c;f--)e[f+d]=e[f];for(b=0;b<d;b++)e[c+b]=j[b];return a};a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g==="string"?e+=n(g):typeof g==="number"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw c("err")("ReadError: given negative number of bytes to read");var b=this.$3;a=b+a;if(a>this.$2)throw c("err")(b===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a}();var l="",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,d,e){d=Math.min(e,i);e=0;var f=128;while(e<d&&f&128)f=a[b+e++];if(e===i&&f>1)throw c("err")("ParseError: varint exceeds 64 bits");else if(f&128)return e+1;return e}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join("")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d("WAHex").hexLongIsNegative(e);e=d("WAHex").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d("WAHex").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,d,e){if(typeof a!=="number"||a!==a||Math.floor(a)!==a||a<b||a>=d)throw c("err")(typeof a==="string"?'TyperError WriteError: string "'+a+'" is not a valid '+e:"TypeError WriteError: "+String(a)+" is not a valid "+e)}function T(a,b,d){var e=o(a,b,d),f;b>=0?f=b:f=a?b:4294967296+b;a=d>=0?d:4294967296+d;b=f*4294967296+a;if(!e)throw c("err")("ReadError: integer exceeded 53 bits ("+b+")");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);
__d("WACryptoDependencies",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=self.crypto;function a(a){h=a;var b=65536;d("tweetnacl").setPRNG(function(c,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=b)a.getRandomValues(f.subarray(e,e+Math.min(d-e,b)));for(e=0;e<d;e++)c[e]=f[e];for(e=0;e<f.length;e++)f[e]=0})}function b(){return h}g.setCrypto=a;g.getCrypto=b}),98);
__d("WACustomError",[],(function(a,b,c,d,e,f){"use strict";var g=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function a(a,b,c){b===void 0&&(b=!0);function d(c){var d=Error.call(this,c);this.message=c;d.name=a;this.name=a;b&&(this.stack=d.stack)}d.prototype=Object.create(c?c.prototype:g);d.prototype.constructor=d;return d}function h(a){if(a.length===0)return"No errors";return a.length===1?a[0].message:a.map(function(a){return"- "+a.message}).join("\n")}e=function(a){function b(b,c){c=c!=null&&c.length>0?c:h(b);c=a.call(this,c)||this;c.errors=b;return c}babelHelpers.inheritsLoose(b,a);return b}(a("AggregateError",!0));var i=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(a("TimeoutError",!1)),j=function(a){function b(b,c){b=a.call(this,b)||this;b.code=c;return b}babelHelpers.inheritsLoose(b,a);return b}(a("HttpError",!1)),k=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(a("UnimplementedMethod")),l=!1;function b(a){if(a==null||a.name!=="QuotaExceededError")throw a;l=!0}function c(){return l}function d(a){return JSON.stringify(a,Object.getOwnPropertyNames(a))}var m=function(a){function b(b,c){b=a.call(this,b)||this;b.inner=c;return b}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.customError=a;f.AggregateError=e;f.TimeoutError=i;f.HttpError=j;f.UnimplementedMethod=k;f.supressQuotaExceededError=b;f.hasSupressedQuotaExceededError=c;f.obtainErrorSummary=d;f.WrappedError=m}),66);
__d("WAGlobals",["WAJids","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null;function a(a){i=a}function j(){if(i==null)throw c("err")("WaMsgr api called before set");return i}function k(){var a;return(a=j().myJids)==null?void 0:a.deviceJid}function b(){var a;return(a=j().myJids)==null?void 0:a.userJid}function e(a){return d("WAJids").extractUserJid(a)===d("WAJids").extractUserJid(k())}function f(){return j().config}function l(){return j().dependencies}var m="WAOneQueue is not defined";function n(){var a=j().waOneQueue;if(a==null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["",""])),m);throw c("err")(m)}return a}function o(){return j().hmacKey}g.setGlobals=a;g.getMyDeviceJid=k;g.getMyUserJid=b;g.isPeerDevice=e;g.getConfig=f;g.getDependencies=l;g.getWaOneQueue=n;g.getHMACKey=o}),98);
__d("WAHashStringToNumber",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return Math.abs(b)}f.hashStringToNumber=a}),66);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return(g||(g=b("Promise"))).resolve(a.apply(c,e))}catch(a){return(g||(g=b("Promise"))).reject(a)}}f.promiseCallSync=a}),66);
__d("WAPromiseManagement",["WAPromiseCallSync"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function b(a,b){var c=new Map();return function(d){var e=a(d),f=c.get(e);if(f)return f;try{f=Promise.resolve(b(d))}catch(a){f=Promise.reject(a)}d=f["finally"](function(){return void c["delete"](e)});c.set(e,d);return d}}var h=new Set();function c(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=b;g.preventGarbageCollection=c}),98);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){"use strict";a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17,MAP:18};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("WAShiftTimer",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){h(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){h(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){h(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){h(a);h(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function h(a){if(!(a>=0))throw c("err")("ShiftTimer must be given delayMs >= 0")}g.ShiftTimer=a}),98);
__d("WATimeUtils",["Promise","WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=60,j=5*i,k=60*i,l=24*k,m=7*l,n=365*l,o=60*1e3,p=k*1e3,q=24*p,r=7*q,s=1<<31,t=~s,u=s+1,v={time:0,day:-4},w=0;function a(){return w}function c(a){w=a}function e(a){return Z(a).toUTCString()}function x(a){a=a|0;return Math.max(u,Math.min(a,t))}function y(a){return x(a/1e3)}function f(a){if(typeof a!=="number")if(d("WAHex").hexLongIsNegative(a))return u;else return t;else return x(a)}function z(a){if(typeof a!=="number")if(d("WAHex").hexLongIsNegative(a))return u;else return t;else return C(a)}function A(a){return a==null?a:a>t?y(a):x(a)}function B(){return C($()-w*1e3)}function C(a){return a}function D(a){return a}function E(a){return C(a*1e3)}function F(a,b){return G(N(),a,b)}function G(a,b,c){b=Math.max(b+c-a,0);return Math.min(1e3*b,~(1<<31))}function H(a,b){b=b!=null?b:N();return x(Math.ceil(b+Math.max(a,0)))}function I(a,b){b=b!=null?b:N();return x(Math.ceil(b-Math.max(a,0)))}var J=Math.pow(2,48);function K(a){return a>=J?B()+6e4:a}function L(a){a=Math.max(a-N(),0);return Math.min(1e3*a,~(1<<31))}function M(a){var c=L(a);return new(h||(h=b("Promise")))(function(a){return void setTimeout(a,c)})}function N(){return x(Date.now()/1e3-w)}function O(){return x(Date.now()/1e3)}function P(){return x(new Date().setHours(0,0,0,0)/1e3-w)}function Q(){return Date.now()-w*1e3}function R(a){return Math.max(a-N(),0)}function S(a){return R(a)>0}function T(){return performance.now()}function U(a){return Math.floor(performance.now()-a)}function V(a,b){return a<b?a:b}var W=function(){function a(){var a=T();this.$1=a;this.$2=a}var b=a.prototype;b.reset=function(){this.$2=T()};b.elapsed=function(){return U(this.$2)};b.cumulative=function(){return U(this.$1)};return a}();function X(a,b,c){return Math.abs(a-b)<=c}function Y(a,b){return X(N(),a,b)}function Z(a){return new Date(a*1e3)}function aa(a,b){if(Math.abs(a-b)>l)return!1;a=v.time===a?v.day:Z(a+w).getDay();var c=v.time===b?v.day:Z(b+w).getDay();v.time=b;v.day=c;return a===c}function ba(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(x(a)*1e3):null}function $(){return Date.now()}function ca(a){a=new Date(a);return isNaN(a)?null:y(a.getTime())}function da(a,b){a=Math.abs(a-b);return Math.ceil(a/q)}g.MINUTE_SECONDS=i;g.FIVE_MINUTES=j;g.HOUR_SECONDS=k;g.DAY_SECONDS=l;g.WEEK_SECONDS=m;g.YEAR_SECONDS=n;g.MINUTE_MILLISECONDS=o;g.HOUR_MILLISECONDS=p;g.DAY_MILLISECONDS=q;g.WEEK_MILLISECONDS=r;g.DEFAULT_UNIXTIME=s;g.MAX_INT=t;g.getClockSkew=a;g.setClockSkew=c;g.toHttpHeaderDate=e;g.castToUnixTime=x;g.castMilliSecondsToUnixTime=y;g.castLongIntToUnixTime=f;g.castLongIntToMillisTime=z;g.castMillisTimeToUnixTime=A;g.millisTime=B;g.castToMillisTime=C;g.fromMillisTime=D;g.castUnixTimeToMillisTime=E;g.timeoutFor=F;g.timeoutForAt=G;g.futureUnixTime=H;g.pastUnixTime=I;g.miAdjustTimestamp=K;g.cappedMillisecondsUntil=L;g.delayUntil=M;g.unixTime=N;g.unixTimeWithoutClockSkewCorrection=O;g.midnight=P;g.unixTimeMs=Q;g.secondsUntil=R;g.isInFuture=S;g.monotonicTime=T;g.monotonicTimeSince=U;g.oldest=V;g.MonotonicTimer=W;g.happenedWithinAt=X;g.happenedWithin=Y;g.toDate=Z;g.sameDay=aa;g.convertHexToDate=ba;g.performanceAbsoluteNow=$;g.convertISO8601DateFormatToUnixTime=ca;g.daysDiff=da}),98);
__d("WAWasmModuleCache",["WAPromiseManagement"],(function(a,b,c,d,e,f,g){"use strict";var h=a.fetch,i=new Map();b=d("WAPromiseManagement").cacheWhilePending(function(a){return a},async function(a){var b=i.get(a);if(b!=null)return b;b=await j(a);i.set(a,b);return b});async function j(a){a=h(a);if(typeof WebAssembly.compileStreaming==="function")return WebAssembly.compileStreaming(a);a=await a;return WebAssembly.compile(await a.arrayBuffer())}g.loadWasmModule=b}),98);
__d("mergeHelpers",["invariant","FbtResultBase"],(function(a,b,c,d,e,f,g,h){"use strict";var i=36,j=function(a){return typeof a!=="object"||a instanceof Date||a===null||a instanceof c("FbtResultBase")},k={MAX_MERGE_DEPTH:i,isTerminal:j,normalizeMergeArg:function(a){return a==null?{}:a},checkMergeArrayArgs:function(a,b){Array.isArray(a)&&Array.isArray(b)||h(0,3714,a,b)},checkMergeObjectArgs:function(a,b){k.checkMergeObjectArg(a),k.checkMergeObjectArg(b)},checkMergeObjectArg:function(a){!j(a)&&!Array.isArray(a)||h(0,3715,a)},checkMergeIntoObjectArg:function(a){(!j(a)||typeof a==="function")&&!Array.isArray(a)||h(0,3716,a)},checkMergeLevel:function(a){a<i||h(0,3717)},checkArrayStrategy:function(a){a==null||a in k.ArrayStrategies||h(0,3718)},ArrayStrategies:{Clobber:"Clobber",Concat:"Concat",IndexByIndex:"IndexByIndex"}};a=k;g["default"]=a}),98);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h=(c=b("mergeHelpers")).ArrayStrategies,i=c.checkArrayStrategy,j=c.checkMergeArrayArgs,k=c.checkMergeLevel,l=c.checkMergeObjectArgs,m=c.isTerminal,n=c.normalizeMergeArg,o=function(a,b,c,d){l(a,b);k(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];q(a,b,g,c,d)}},p=function(a,b,c,d){j(a,b);k(d);if(c===h.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)q(a,b,f,c,d)}},q=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var i=b&&m(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],n=Object.prototype.hasOwnProperty.call(a,c),q=n&&m(l),r=n&&Array.isArray(l),s=n&&!r&&!r;q?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):b||(a[c]=l):r?i?a[c]=f:j?(d&&h[d]||g(0,5117),d===h.Clobber&&(l.length=0),p(l,f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)):s?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&o(l,f,d,e+1):n||(i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)))};function a(a,b,c){b=n(b);i(c);o(a,b,c,0)}f["default"]=a}),66);
__d("WebAsyncStorage",["Deferred","Promise","err","mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h;a=typeof window!=="undefined"?window:self;var i=a.indexedDB,j=1,k="data",l=!1,m;d=Date.now();var n=new(c("Deferred"))(),o=3;function p(){var a=i.open("AsyncStorage",j);a.onerror=function(b){b=(b=a.error)!=null?b:new Error("Failed to open AsyncStorage IndexedDB instance.");if(b.name==="UnknownError"&&o>0){o--;return p()}n.reject(b)};a.onsuccess=function(a){l&&!1,m=a.target.result,n.resolve({db:m}),m.onerror=function(a){a=new Error("AsyncStorage error: "+a.target.error.message);n.reject(a)}};a.onupgradeneeded=function(a){a=a.currentTarget.result;if(a.objectStoreNames&&a.objectStoreNames.contains(k))return;a.createObjectStore(k,{keyPath:"key"})}}i&&p();function q(a,b){if(m)try{a()}catch(a){b&&b(a)}else n.getPromise().then(function(){l&&!1,q(a,b)},function(a){b&&b(a)})}e={setItem:function(a,b,c){this.multiSet([[a,b]],function(a){c(a&&a[0]||null)})},getItem:function(a,b){this.multiGet([a],function(a,c){c=c!==void 0&&c[0]!==void 0&&c[0][1]!==void 0?c[0][1]:null;b(a&&a[0]||null,c)})},removeItem:function(a,b){this.multiRemove([a],function(a){b(a&&a[0]||null)})},getOrSetItem:function(a,b,c){this.multiGetOrSet([[a,b]],function(a,b){b=b!==void 0&&b[0]!==void 0&&b[0][1]!==void 0?b[0][1]:null;c(a&&a[0]||null,b)})},upsertAndSaveAtomic:function(a,b,c){var d=null;this._multiOp([a],"readwrite",function(a){return c(a,d)},function(a){return a},function(a,c,e){if(c&&a===c.key){var f=b(c.value.value);if(f!=null){var g=c.value;g.value=f;d=f;c.update(g)}}else{f=b(null);f!=null&&(d=f,e.push([a,f]))}})},multiGet:function(a,b){var c=[];this._multiOp(a,"readonly",function(a){return b(a,c)},function(a){return a},function(a,b,d){b&&a===b.key?(l&&!1,c.push([a,b.value.value])):c.push([a,null])})},multiSet:function(a,b){if(this._persistentWritesDisabled){b(new Array(a.length).fill("writes disabled"));return}this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value;d.value=a[1];l&&!1;b.update(d)}else c.push(a)})},multiGetOrSet:function(a,b){if(this._persistentWritesDisabled){b(new Array(a.length).fill("writes disabled"));return}var c=[];this._multiOp(a,"readwrite",function(a){return b(a,c)},function(a){return a[0]},function(a,b,d){b&&a[0]===b.key?(c.push([a,b.value.value]),l&&!1):d.push(a)})},multiMerge:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,d){if(b&&a[0]===b.key){var e=b.value,f=JSON.parse(e.value);c("mergeDeepInto")(f,JSON.parse(a[1]),c("mergeHelpers").ArrayStrategies.Clobber);l&&!1;e.value=JSON.stringify(f);b.update(e)}else l&&!1,d.push(a)})},multiRemove:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a},function(a,b,c){b&&a===b.key&&(l&&!1,b["delete"]())})},getAllKeys:function(a){q(function(){var b=m.transaction([k],"readonly");b=b.objectStore(k).openCursor();var c=[];b.onsuccess=function(b){b=b.target.result;if(!b){a(null,c);return}c.push(b.key);b["continue"]()}},function(b){return a(null,[])})},clear:function(a){q(function(){var b=m.transaction([k],"readwrite");b=b.objectStore(k).openCursor();b.onsuccess=function(b){b=b.target.result;if(!b){a(null);return}b["delete"]();b["continue"]()}},function(b){return a(null)})},_multiOp:function(a,b,c,d,e){q(function(){var f=!1,g=a.slice().sort(function(a,b){a=d(a);b=d(b);if(a===b){var e=new Error("AsyncStorage._multiOp cannot process duplicate keys.");c&&c([e]);f=!0;return 0}return a<b?-1:1});if(f)return;var h=m.transaction([k],b),i=h.objectStore(k).openCursor(),j=[],n=0;i.onsuccess=function(a){a=a.target.result;if(!a){while(n<g.length)e(g[n],a,j),n++;o();return}var b=a.key;l&&!1;while(d(g[n])<=b){l&&!1;e(g[n],a,j);n++;if(n===g.length){o();return}}b=d(g[n]);a["continue"](b)};function o(){var a=h.objectStore(k);j.forEach(function(b){l&&!1,a.add({key:b[0],value:b[1]})})}h.oncomplete=function(){c&&c(null)};h.onerror=function(a){a=new Error("IndexedDB error: "+a.target.error.message);c&&c([a])};l&&!1},function(a){c&&c([a])})},_persistentWritesDisabled:!1,disablePersistentWrites:function(){this._persistentWritesDisabled=!0},isOpenPromiseSettled:function(){return n.isSettled()},isOperational:function(){return i==null?(h||(h=b("Promise"))).resolve({success:!1,error:c("err")("IDB interface not available")}):n.getPromise().then(function(){return{success:!0}})["catch"](function(a){return{success:!1,error:a}})}};f=e;g["default"]=f}),98);
__d("WebStorageCleanupReason",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(){return g}function b(a){g=a}f.getLastCleanupReason=a;f.setLastCleanupReason=b}),66);
__d("XCometFBMultiSiteWebWorkerV2HasteResponseControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker/rsrc/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("WebWorkerV2DynamicData",["FBLogger","Promise","XCometFBMultiSiteWebWorkerV2HasteResponseControllerRouteBuilder","cometAsyncFetchShared","err","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a,b){b===void 0&&(b=!1);var c=a.name,d=i.get(c);if(d==null||b){var e=Math.floor(+Date.now()/1e3);d=j(a,b).then(function(a){return{time:e,data:a}});i.set(c,d)}return d}function j(a,d){var e=a.name,f=a.v2HasteResponsePreloader;if(f==null||d)return k(e,d);var g=null,i=c("gkx")("14133");a=new(h||(h=b("Promise")))(function(a,b){f.onLoaded(function(d){d=d.data;(d==null||d.hrp==null)&&(i&&b(c("err")("Preloaded data for worker %s is missing haste response",e)),c("FBLogger")("worker").mustfix("Preloaded data for worker %s is missing haste response, preload data keys: %s",e,d==null?"null":Object.keys(d).join(", ")));g=d;a(d)}).onError(b)});if(i){var j,l,m=function(){l==null&&(l=k(e,d));return l};return(h||(h=b("Promise"))).race([a["catch"](function(){return m()}),new h(function(a,b){j=window.setTimeout(function(){c("promiseDone")(m(),a,b)},1e4)})]).then(function(a){window.clearTimeout(j);return a})}return h.race([a,new h(function(a,b){window.setTimeout(function(){g==null?c("promiseDone")(k(e,d),a,b):a(g)},1e4)})])}function k(a,b){var d=null;b&&(d=new FormData(),d.set("__rev","null"),d.set("__spin_r","null"));return c("cometAsyncFetchShared")(c("XCometFBMultiSiteWebWorkerV2HasteResponseControllerRouteBuilder").buildUri({worker_module:a}).toString(),{formData:d!=null?d:void 0,data:{},getFullPayload:!0,method:"POST",skipSRState:!0,retryCount:b?2:void 0}).then(function(b){if(b!=null&&typeof b==="object"&&Object.prototype.hasOwnProperty.call(b,"hrp")&&typeof b.hrp==="object")return b;throw c("err")("Unexpected data from WorkerInitResourceDeliveryController for worker %s",a)})}g.readDynamicDataForWorker=a}),98);
__d("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker/init_script/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("supportsModuleWorker",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){if(h!=null)return h;if(h!=null)return h;if(c("UserAgent").isEngine("Blink")){h=a?c("UserAgent").isEngine_DEPRECATED_DANGEROUS("Blink > 83"):c("UserAgent").isEngine_DEPRECATED_DANGEROUS("Blink > 80.1");return h}if(c("UserAgent").isBrowser("Safari")){h=c("UserAgent").isBrowser("Safari > 14.9");return h}if(c("UserAgent").isBrowser("Firefox")){h=c("UserAgent").isBrowser("Firefox > 113");return h}if(c("UserAgent").isEngine("WebKit")){h=c("UserAgent").isEngine_DEPRECATED_DANGEROUS("WebKit > 606");return h}if(c("UserAgent").isBrowser("IE")){h=!1;return h}var b={get type(){h=!0}};try{a?new SharedWorker("blob://",b):new Worker("blob://",b)}finally{h=h!=null?h:!1;return h}}g["default"]=a}),98);
__d("WebWorkerV2Resource",["TrustedTypesWebWorkerScriptURLPolicy","WebWorkerV2DynamicData","XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","forEachObject","getAsyncParamsFromCurrentPageURI","getWorkerInitScriptSPINParams","nullthrows","promiseDone","supportsModuleWorker"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){b=b!=null?b:a.name;var f=c("supportsModuleWorker")(!1)&&e!==!0?"module":"classic",g=c("getWorkerInitScriptSPINParams")();c("forEachObject")(c("getAsyncParamsFromCurrentPageURI")(),function(a,b){g.set(b,a)});e=c("nullthrows")(c("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:c("supportsModuleWorker")(!1)&&e!==!0?"MODULE":"CLASSIC"}).addQueryParams(g)).toString();e=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e);var h=new Worker(e,{name:b,type:f});c("promiseDone")(d("WebWorkerV2DynamicData").readDynamicDataForWorker(a).then(function(a){a=a.data;h.postMessage({type:"ww-hrp-init",hrp:a.hrp,js_env:a.js_env,is_dev:!1,tiered:!0})}));return{worker:h,url:e.toString()}}g.createDedicatedV2WebWorker=a}),98);
__d("mergeDeep",["mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e;a=(e=c("mergeHelpers")).normalizeMergeArg(a);b=e.normalizeMergeArg(b);e.checkMergeObjectArgs(a,b);e.checkArrayStrategy(d);e={};c("mergeDeepInto")(e,a,d);c("mergeDeepInto")(e,b,d);return e}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("I64MigrationHelper",["I64","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return c("nullthrows")((h||(h=d("I64"))).cast(a))}g.cast=a}),98);
__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","ODS","SiteData","clearTimeout","cr:19620","err","justknobx","nullthrows","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=babelHelpers.extends({},b("cr:19620"));function a(a){Object.assign(i,a)}var j={_tombstone:!0};function e(a){var b=new Map();for(a of a){var e=a.name;e!=null&&!m(e)&&b.set(e,c("nullthrows")(a.value))}if(b.size===0)return Promise.resolve();var g=new Promise(function(a){var e={},j=[],l=function(){var b=m[0],a=m[1];a=a==null?void 0:a.__dr;e[a]={be:1,r:[]};j.push(a);(h||(h=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",a);i[b]={load:async function(){await g;return i[b]}}};for(var m of b)l();c("Bootloader").handlePayload({compMap:e,consistency:{rev:c("SiteData").client_revision}});k(c("Bootloader"),j,function(c){Array.from(b.entries()).forEach(function(a,b){var d=a[0];a[1];i[d]=c[b]}),a()})});return g}function k(a,b,c){return a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function l(a){return a.charAt(0).toUpperCase()+a.slice(1)}function m(a){return a in i&&i[a]!==j}var n=c("justknobx")._("2800");function f(a,b,e){var f=new Map();for(a of a!=null?a:[])m(a)||f.set(a,"LS"+l(a));for(a of b!=null?b:[])!m(a+".bs")?f.set(a+".bs","LS"+l(a)+".nop"):a+".nop"in i||f.set(a+".nop","LS"+l(a)+".nop");for(b of e!=null?e:[])b in i||f.set(b,"LS"+l(b));if(f.size===0)return Promise.resolve();var g=new Promise(function(a,b){var e={},l=[],m=function(){var a=o[0],b=o[1];(h||(h=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",b);d("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(b);e[b]={be:1,r:[]};l.push(b);i[a]={load:async function(){try{await g}catch(b){i[a]=j;throw b}return i[a]}}};for(var o of f)m();c("Bootloader").handlePayload({compMap:e,consistency:{rev:c("SiteData").client_revision}});var p=k(c("Bootloader"),l,function(b){c("clearTimeout")(q),Array.from(f.entries()).forEach(function(a,c){var d=a[0];a[1];i[d]=b[c]}),a()}),q=c("setTimeout")(function(){p.remove(),b(c("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",n,Array.from(f.keys())))},n)});return g}g.cachedModules=i;g.addToCachedModules=a;g.TOMBSTONE=j;g.downloadRelayDependencies=e;g.downloadBootloaderDependencies=f}),98);
__d("XPlatReactCrypto",["err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h=self.crypto)==null?void 0:h.subtle;function a(a){var b;if(typeof ((b=self.crypto)==null?void 0:b.getRandomValues)!=="function")throw c("err")("crypto.getRandomValues: Not implemented");self.crypto.getRandomValues(a);return a}function b(){var a;if(typeof ((a=self.crypto)==null?void 0:a.randomUUID)!=="function")return null;a=self.crypto.randomUUID();return typeof a==="string"?a:null}function d(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.importKey: Not implemented");return i.importKey(a,b,d,e,f)}function e(a,b){if(i==null)throw c("err")("crypto.subtle.exportKey: Not implemented");return i.exportKey(a,b)}function f(a,b,d){if(i==null)throw c("err")("crypto.subtle.generateKey: Not implemented");return i.generateKey(a,b,d)}function j(a,b,d){if(i==null)throw c("err")("crypto.subtle.encrypt: Not implemented");return i.encrypt(a,b,d)}function k(a,b,d){if(i==null)throw c("err")("crypto.subtle.decrypt: Not implemented");return i.decrypt(a,b,d)}function l(a,b,d){if(i==null)throw c("err")("crypto.subtle.sign: Not implemented");return i.sign(a,b,d)}function m(a,b){if(i==null)throw c("err")("crypto.subtle.digest: Not implemented");return i.digest(a,b)}function n(a,b,d){if(i==null)throw c("err")("crypto.subtle.deriveBits: Not implemented");return i.deriveBits(a,b,d)}function o(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.deriveKey: Not implemented");return i.deriveKey(a,b,d,e,f)}g.getRandomValues=a;g.randomUUID=b;g.subtleImportKey=d;g.subtleExportKey=e;g.subtleGenerateKey=f;g.subtleEncrypt=j;g.subtleDecrypt=k;g.subtleSign=l;g.subtleDigest=m;g.subtleDeriveBits=n;g.subtleDeriveKey=o}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a={add:(h||(h=d("I64"))).add,and_:h.and_,asr_:h.asr_,cast:function(a){return(h||(h=d("I64"))).mk(a[1],a[0])},div:h.div,eq:function(a,b){return a==null&&b==null||a!=null&&b!=null&&(h||(h=d("I64"))).equal(a,b)},from_string:function(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){throw c("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',a)}},ge:h.ge,gt:h.gt,le:h.le,lsl_:h.lsl_,lsr_:h.lsr_,lt:h.lt,max:h.max,min:h.min,mod_:h.mod_,mul:h.mul,neq:function(a,b){return a==null&&b!=null||a!=null&&b==null||a!=null&&b!=null&&!(h||(h=d("I64"))).equal(a,b)},of_float:h.of_float,of_int32:h.of_int32,or_:h.or_,random:function(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(h||(h=d("I64"))).add(h.lsl_(h.of_float(a[0]),32),h.of_float(a[1]))},sub:h.sub,to_float:h.to_float,to_int32:h.to_int32,to_string:function(a){return a==null?a:(h||(h=d("I64"))).to_string(a)},xor:h.xor};g["default"]=a}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i={__val__:"__stop_iteration__"};function a(a){return{__val__:"__next_value__",next:a}}function j(a){return a!=null&&typeof a==="object"&&a.__val__==="__next_value__"}function k(a,b,e){var f=l(a,e);while(!(h||(h=c("isPromise")))(f)){if(f.done)return d("LSSynchronousPromise").makeSynchronousPromise(f);e=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(f));if(!(h||(h=c("isPromise")))(e)){if(e===i)return d("LSSynchronousPromise").makeSynchronousPromise(f);var g=j(e)?e.next:void 0;f=l(a,g)}else return e.then(function(c){if(c===i)return f;c=j(c)?c.next:void 0;return k(a,b,c)})}var n=m(b);return f.then(function(c){return c.done?c:n(c).then(function(d){if(d===i)return c;d=j(d)?d.next:void 0;return k(a,b,d)})})}function l(a,b){a=a.next(b);return!(h||(h=c("isPromise")))(a)?a:d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a)}function m(a){return function(b){b=a(b);return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(b)}}g.STOP_ITERATION=i;g.wrapNextValue=a;g.iteratorLoop=k}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return j(a,b)},c.next=function(){var c={done:!0},e=function(a){return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(b(a.value.item)).then(function(b){if(b){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION}})};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){return c})},c}function k(a,b,c){var e,f=0;return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return k(a,b,c)},e.next=function(){if(f>=c)return d("LSSynchronousPromise").makeSynchronousPromise({done:!0});var e={done:!0},g=function(a){if(f++<b)return;e=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,g).then(function(){return e})},e}function a(a,b){return l(a).then(function(a){return a.reduce(function(a,c){return a.then(function(){return b(c)})},d("LSSynchronousPromise").makeSynchronousPromise(void 0))})}function l(a){var b=[],c=function(a){b.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return b})}function m(a,b,c){var e;c===void 0&&(c=[]);var f={ASC:1,DESC:-1},g=function(a,c){a=a.item;c=c.item;for(var e=0;e<b.length;e++){var g=b[e];g=g[0];var i=a[g];g=c[g];var j;i==null&&g==null?j=0:i==null&&g!=null?j=-1:i!=null&&g==null?j=1:j=(h||(h=d("ReStoreKeyComparer"))).compareValue(i,g);if(j===0)continue;return j*f[b[e][1]]}return 0},i,j=[],k=[],l=function(a){var b=[];for(var d=c.length-1;d>=0;d--)b.push(a[c[d]]);return b},n=function(){k=j,k.sort(g),j=[]};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return m(a,b,c)},e.next=function(){if(k.length)return d("LSSynchronousPromise").makeSynchronousPromise({done:!1,value:k.shift()});var b=function(a){var b=l(a.value.item);if(i!=null&&(h||(h=d("ReStoreKeyComparer"))).compareKey(i,b)!==0){n();j.push(a.value);i=b;return d("LSMaybeSyncIteration").STOP_ITERATION}i=b;j.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,b).then(function(){!k.length&&j.length&&n();if(k.length)return{done:!1,value:k.shift()};else return{done:!0}})},e}function b(a){var b=0,c=function(){b++};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return(i||(i=d("I64"))).of_int32(b)})}function e(a,b){return{forEach:function(e){return l(a).then(function(a){a=a.reduce(function(a,c){c=c.item[b];var d=(a.get(c)||0)+1;return a.set(c,d)},new(c("LSDict"))());var f=d("LSSynchronousPromise").makeSynchronousPromise(void 0),g=function(){var a=h[0],c=h[1];f=f.then(function(){var f;return e((f={},f[b]=a,f.group_count=(i||(i=d("I64"))).of_int32(c),f))})};for(var h of a.entries())g();return f})}}}g.filter=j;g.slice=k;g.forEach=a;g.toArray=l;g.sortBy=m;g.count=b;g.groupBy=e}),98);
__d("LSPendingTasksPluginType",[],(function(a,b,c,d,e,f){a=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});f["default"]=a}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="4",j="16",k=new Set([c("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function a(a){var b=k.has((h||(h=d("I64"))).to_float(a.pluginType));a=a.context===j||a.context===i;return b||a}g["default"]=a}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","isNativeTask"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set(["messages","attachments","reactions"]);function j(a){return i.has(a)}function k(a,b,d){return a&&b.name==="pending_tasks"&&d!=null&&c("isNativeTask")(d)}function l(a){for(var b of Object.keys(a))a[b]===void 0&&delete a[b];return a}function m(a,b,c){c===void 0&&(c="asc");var e=a.entries(new WeakMap(),c);function f(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=f,a.next=function(){var a={done:!0},f=0,g="start",i=[],j=function(e){var j=function(){var a=f,j=b[a]||{},k=j.end;j=j.start;var l=e.value[0];if(j&&g==="start"){var m=(h||(h=d("ReStoreKeyComparer"))).compareValue(l[a],j[0]),n=m*(c==="asc"?1:-1)<j[1];if(n){g="start_verify";i=l.slice(0,a);if(a===l.length-1&&m===0)return{v:void 0};else{n=[].concat(i,[j[0]],j[1]&&c==="asc"||!j[1]&&c==="desc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:d("LSMaybeSyncIteration").wrapNextValue(n)}}}else g="check_end"}if(j&&g==="start_verify"&&!i.every(function(a,b){return(h||(h=d("ReStoreKeyComparer"))).compareValue(a,l[b])===0})){f=0;g="start";return{v:void 0}}if(k&&(h||(h=d("ReStoreKeyComparer"))).compareValue(k[0],l[a])*(c==="asc"?1:-1)<k[1]){f=0;g="start";return{v:d("LSMaybeSyncIteration").wrapNextValue([].concat(l.slice(0,a),c==="asc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]))}}f++;g="start"},k;while(f<b.length){k=j();if(k)return k.v}a=e;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(e,j).then(function(){return a})},a}return f()}function n(a,b,d,e,f){return{delete:function(){return d.delete.apply(d,a)},item:b,update:function(g){var h=f&&j(e.name)?{transportKey:"FBBroker"}:{};g=babelHelpers.extends({},b,g,h);if(k(f,e,g))throw c("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return d.upsert(a,l(g))}}}function o(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return o(a,b)},c.next=function(){var c={done:!0},e=function(a){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){if(c.done)return d("LSMaybeSyncIteration").iteratorLoop(b,e)}).then(function(){return c})},c}function p(a,b,c){var e,f=[{done:!0},{done:!0}],g=function(a){var b=f[a];f[a]={done:!0};return b};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(a,b,c)},e.next=function(){var e=function(a){return function(b){a==="a"?f[0]=b:f[1]=b;return d("LSMaybeSyncIteration").STOP_ITERATION}},i=d("LSSynchronousPromise").makeSynchronousPromise();f[0].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(a,e("a"))}));f[1].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(b,e("b"))}));return i.then(function(){if(f[0].done&&f[1].done)return{done:!0};if(f[0].done)return g(1);if(f[1].done)return g(0);var a=(h||(h=d("ReStoreKeyComparer"))).compareKey(f[0].value[0],f[1].value[0]);if(a===0)return g(0);return a*(c==="asc"?1:-1)<0?g(0):g(1)})},e}var q=(b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return q},b.next=function(){return d("LSSynchronousPromise").makeSynchronousPromise({done:!0})},b);function a(a,b,e,f,g,h,i,l){var r=new Set(),s=a.length>1,t=a.length===1&&a[0][1]==null,u=a.map(function(a){var c=a[0],i=a[1];return c.map(function(a){f.key_lookup===!0&&a.length!==0;f.table_scan===!0&&a.length===0;var c=a.map(function(a){return h(a,b)});a=c.length===(i==null?e.primaryKeyIds:e.indexes[i]).length&&c.every(function(a){var b=a.end;a=a.start;return a&&b&&a[0]===b[0]&&a[1]===0&&b[1]===0});if(a){var j=function(){var a,b=!1;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=j,a.next=function(){var a;if(b)return d("LSSynchronousPromise").makeSynchronousPromise({done:!0});b=!0;var f=c.map(function(a){a=a.start;return a[0]});return(a=i==null?g:g.index(i)).get.apply(a,f).then(function(a){if(!a)return{done:!0};a=d("ReStoreVaulting").maybeUnvaultDbRow(a,e.name);return{done:!1,value:[f,a]}})},a};return j()}return m(i==null?g:g.index(i),c,b)})}).flat().reduce(function(c,d,e){e=e===0&&c==null?q:c;return a.length>1?o(e,d):p(e,d,b)});function v(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=v,a.next=function(){var a=!0,b,f,h,m,o=function(c){a=!1;var g=c.value;f=g[0];h=g[1];b=t?f:e.primaryKeyIds.map(function(a){return h[a]});if(k(i,e,h)){m=c;a=!0;return}if(j(e.name)&&i&&h!=null&&h.transportKey!=="FBBroker"){m=c;a=!0;return}if(s){g=JSON.stringify(b);if(r.has(g)){a=!0;return}r.add(g)}return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(u,o).then(function(){if(m!=null){var d=m.value[1].transportKey;c("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',l,d)}return a||b==null||h==null?{done:!0}:{done:!1,value:n(b,h,g,e,i)}})},a}return v()}g.isTranportKeyEnforcedTable=j;g.isNativePendingTaskViolation=k;g.stripUndefinedProperties=l;g.unionIterators=o;g.mergeIterators=p;g.fetch=a}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.name.match(/secure_|inbox(?!_)/i)}function a(a,b,d,e,f,g){return{metadata:d,table:function(j){j=d.tableNames[d.tableIds[j]];if(b===0&&h(j))throw c("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return i(a,j,e,f,g)},transactionId:a.__internal__transaction_id}}function i(a,b,e,f,g){var h=a.transactionTable(b.name,f[f.length-1]);return{add:function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker");a=h.add(a);return c("gkx")("6636")?a:Promise.resolve(a)},fetch:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"asc",b,e,h,j,g,f.join(", "))},fetchDesc:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"desc",b,e,h,j,g,f.join(", "))},peekNextAutoIncrementId:function(){return h.peekNextAutoIncrementId()},put:function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker");if(d("LSIterationHelpers").isNativePendingTaskViolation(g,b,a))throw c("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=b.primaryKeyIds.map(function(b){if(a[b]!==void 0)return a[b];throw c("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")});e=h.delete.apply(h,e).then(function(){return h.add(d("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},a)))});return c("gkx")("6636")?e:Promise.resolve(e)}}}function j(a,b){if(typeof a==="object"&&!Array.isArray(a)){var d,e;if(b==="asc"){Object.prototype.hasOwnProperty.call(a,"gt")&&(d=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(d!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");d=[a.gte,0]}Object.prototype.hasOwnProperty.call(a,"lt")&&(e=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(e!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");e=[a.lte,0]}}else{Object.prototype.hasOwnProperty.call(a,"lt")&&(d=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(d!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");d=[a.lte,0]}Object.prototype.hasOwnProperty.call(a,"gt")&&(e=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(e!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");e=[a.gte,0]}}return{end:e,start:d}}return{end:[a,0],start:[a,0]}}g.LSRuntimeDb=a;g.parseConstraint=j}),98);
__d("XPlatReactTextDecoder",[],(function(a,b,c,d,e,f){"use strict";a=self.TextDecoder;f.TextDecoder=a}),66);
__d("XPlatReactTextEncoder",[],(function(a,b,c,d,e,f){"use strict";a=self.TextEncoder;f.TextEncoder=a}),66);
__d("base64Binary",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b="";for(var c=0;c<a.byteLength;c+=3){var d=a.subarray(c,c+3);b+=k(d)}d=(a.byteLength+2)%3;return b.slice(0,b.length+d-2)+"==".slice(d)}function b(a){var b;a.length%4===0||h(0,51156);var c=a.length/4;b=(b=(b=a.match(/={0,2}$/))==null?void 0:b[0].length)!=null?b:0;b=new Uint8Array(c*3-b);for(var d=0;d<c;d++){var e=l(a.slice(d*4,d*4+4));b.set(e.subarray(0,b.byteLength-d*3),d*3)}return b}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=">___?456789:;<=___\0___\0\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19______\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123";function k(a){var b;a=a[0]<<16|((b=a[1])!=null?b:0)<<8|((b=a[2])!=null?b:0);return String.fromCharCode(i.charCodeAt(a>>>18),i.charCodeAt(a>>>12&63),i.charCodeAt(a>>>6&63),i.charCodeAt(a&63))}function l(a){a=j.charCodeAt(a.charCodeAt(0)-43)<<18|j.charCodeAt(a.charCodeAt(1)-43)<<12|j.charCodeAt(a.charCodeAt(2)-43)<<6|j.charCodeAt(a.charCodeAt(3)-43);return new Uint8Array([a>>>16,a>>>8&255,a&255])}g.encode=a;g.decode=b}),98);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MWFBLogger","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r="LS_WEB",s=d("MessengerLogHistory").getInstance("ls");function t(a){return d("base64Binary").decode(a).buffer}var u={compareTo:function(a,b){a=new Uint8Array(a);b=new Uint8Array(b);var c=Math.min(a.length,b.length);for(var d=0;d<c;d++){var e=a[d]-b[d];if(e!==0)return e}return a.length===b.length?0:a.length-b.length},eq:function(a,b){if(a==null&&b==null)return!0;if(a==null||b==null)return!1;a=new Uint8Array(a);b=new Uint8Array(b);if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},ge:function(a,b){return u.compareTo(a,b)>=0},gt:function(a,b){return u.compareTo(a,b)>0},le:function(a,b){return u.compareTo(a,b)<=0},lt:function(a,b){return u.compareTo(a,b)<0},neq:function(a,b){return!u.eq(a,b)},of_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a).buffer},to_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}};function v(a){if(a.length!==1)throw c("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");a=a[0];var b=parseInt(a.substr(-8),16);a=parseInt(a.substr(0,a.length-8),16);return(q||(q=d("I64"))).mk((b>>>1)+(a&1)*2147483648^-(b&1),a>>>1^-(b&1))}function w(a){var b;return(b=(b=a.__sproc_name__)!=null?b:a.__debugModuleSource)!=null?b:"<unknown_sproc>"}var x=function(){var a=0;function d(d){var e=d.args,f=d.shouldLog;d=d.sprocName;b("cr:1088")==null||b("cr:1088").logStoredProcedureCall(d,e);if(!f||!b("cr:4790"))return;e=++a;b("cr:4790").markerStart(c("qpl")._(25302991,"143"),e);b("cr:4790").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:d}},{instanceKey:e});return e}function e(a,d,e){a=a.shouldLog;if(!a||d==null)return;b("cr:4790")==null||b("cr:4790").markerEnd(c("qpl")._(25302991,"143"),e,d)}function f(a){return Math.random()*c("MetaConfig")._("10")<1}return{call:d,logSprocDone:e,shouldLogSproc:f}}(),y="Native operation timeout; transaction blocked",z=30*1e3;function A(a,b,e,f,g,q,B){g===void 0&&(g={});q===void 0&&(q=void 0);var C=[],D=d("LSRuntimeDb").LSRuntimeDb(f,a,b,g,C,B),E=function(b,g){for(var h=arguments.length,i=new Array(h>2?h-2:0),j=2;j<h;j++)i[j-2]=arguments[j];var k;if(typeof g==="string"){k=e[g.toString()];if(k==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",b,g);if(k===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",g);k.load&&(k=k.load())}else k=g;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(k).then(function(b){return b.call.apply(b,[f,a].concat(i))})},F=function(b){for(var g=arguments.length,h=new Array(g>1?g-1:0),i=1;i<g;i++)h[i-1]=arguments[i];var j;if(typeof b==="string"){j=e[b+".bs"]||e[b+".nop"];if(j==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",b);if(j===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",b);j.load&&(j=j.load())}else j=b;var k;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(j).then(function(b){var e;k=(e=(e=b.__nop_name__)!=null?e:b==null?void 0:b.toString().slice(0,250))!=null?e:"<unknown nop name>";e=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b.apply(void 0,[f,a].concat(h)));return!(m||(m=c("isPromise")))(e)?e:c("justknobx")._("3895")&&(p||(p=c("ExecutionEnvironment"))).isInBrowser?Promise.race([e,new Promise(function(a,b){return c("setTimeout")(function(){return b(c("err")(y))},z)})]):e}).then(function(a){return a},function(a){c("FBLogger")("messenger_web").catching(a).addMetadata(r,"NATIVE_OP_ID",k).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",k,(a==null?void 0:a.message)===y,(p||(p=c("ExecutionEnvironment"))).isInWorker)})},G=function(a){return a.slice(1).reduce(function(b,d){if(typeof d!=="function"){c("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",d,typeof d,JSON.stringify(a.map(function(a){return typeof a})));return b}return b.then(d)},a[0]())},H=function(a,b){return a.slice(b)};return{Map:c("LSDict"),blob:t,blobs:u,constructor:{n:v},count:d("LSIterationOperations").count,createArray:function(){return c("LSVec").ofArray([])},createArrayWithElements:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c("LSVec").ofArray(b)},db:D,filter:d("LSIterationOperations").filter,forEach:d("LSIterationOperations").forEach,groupBy:d("LSIterationOperations").groupBy,i64:c("LSInt64Lite"),islc:d("LSIterationOperations").slice,like:function(a,b){b=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(b).test(a)},logger:function(a){if(q)return{debug:q,info:q,mustfix:q,warn:q};var b=d("MWFBLogger").MWLogger(),e=a.startsWith("epoch mismatch"),f=a.startsWith("cursor mismatch");if(e||f){a=function(a){s.error(a,"error");a=function(){if(e)return"epoch_mismatch";else if(f)return"cursor_mismatch";else return"fixme_could_not_produce_key"}();(n||(n=d("ODS"))).bumpEntityKey(3185,"lsplatform",a)};return{debug:function(a){return s.debug(a)},info:function(a){return s.debug(a)},mustfix:a,warn:a}}else{c("gkx")("26382")||(b.info=c("emptyFunction"));return b}},loopAsync:function(a,b){function e(f){if(c("LSInt64Lite").lt(f,a)){var g=f;f=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(g));while(!(m||(m=c("isPromise")))(f)){g=c("LSInt64Lite").add(g,v(h||(h=babelHelpers.taggedTemplateLiteralLoose(["2"]))));if(!c("LSInt64Lite").lt(g,a))return d("LSSynchronousPromise").makeSynchronousPromise(void 0);f=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(g))}return f.then(function(){return e(c("LSInt64Lite").add(g,v(i||(i=babelHelpers.taggedTemplateLiteralLoose(["2"])))))})}return d("LSSynchronousPromise").makeSynchronousPromise(void 0)}return e(v(j||(j=babelHelpers.taggedTemplateLiteralLoose(["0"]))))},loopSync:function(a,b){for(var d=v(k||(k=babelHelpers.taggedTemplateLiteralLoose(["0"])));c("LSInt64Lite").lt(d,a);d=c("LSInt64Lite").add(d,v(l||(l=babelHelpers.taggedTemplateLiteralLoose(["2"])))))b(d)},merge:function(){function a(a,b){return(o||(o=d("ReStoreKeyComparer"))).compareValue(a,b)>0?a:b}function b(a,b){return(o||(o=d("ReStoreKeyComparer"))).compareValue([a[0],-a[1]],[b[0],-b[1]])<0?a:b}for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=e.reduce(function(c,e){e=d("LSRuntimeDb").parseConstraint(e,"asc");return{end:c.end&&e.end?b(e.end,c.end):e.end||c.end,start:c.start&&e.start?a(e.start,c.start):e.start||c.start}},{});return babelHelpers.extends({},g.start?g.start[1]?{gt:g.start[0]}:{gte:g.start[0]}:null,g.end?g.end[1]?{lt:g.end[0]}:{lte:g.end[0]}:null)},n:v,nativeOperation:F,nativeTypeOperation:E,notnull:function(a){if(a===null)throw c("FBLogger")("messenger_web").mustfixThrow("value should not be null");return a},print:function(a){},resolve:function(a){return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(a)},resolveGuaranteeAsync:function(a){var b;return((b=self.Promise)!=null?b:Promise).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))},rm:c("LSInt64Lite").of_int32(a),sequence:G,slice:H,sortBy:d("LSIterationOperations").sortBy,storedProcedure:function(h){for(var i=arguments.length,j=new Array(i>1?i-1:0),k=1;k<i;k++)j[k-1]=arguments[k];var l;if(typeof h==="string"){l=e[h];if(l==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",h);if(l===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent sproc loading failed for: %s (retryable)",h);l.load&&(l=l.load())}else l=h;var m=this;switch(a){case 0:m=A(2,b,e,f,g,q,B);break;case 2:m=A(1,b,e,f,g,q,B);break}var n,o,p;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(l).then(function(a){o=w(a);p=x.shouldLogSproc(o);C.push(o);n=x.call({args:j,shouldLog:p,sprocName:o});f.reportUsedTablesForSyncAccess(a.__tables__);return a.apply(void 0,j.concat([m]))}).then(function(a){C.pop();x.logSprocDone({args:j,shouldLog:p,sprocName:o},n,2);return a},function(a){C.pop();x.logSprocDone({args:j,shouldLog:p,sprocName:o},n,3);c("FBLogger")("messenger_web").catching(a).addMetadata(r,"SPROC_STACK",C.join("\n")).warn("Sproc %s failed",o);throw a})},throw:function(a){throw c("FBLogger")("messenger_web").mustfixThrow(a)},toArray:d("LSIterationOperations").toArray,toJSON:function(a){return d("LSJson").stringify(a)}}}A.n=v;g.default=A}),98);
__d("LSClientSchemaType",[],(function(a,b,c,d,e,f){"use strict";a="maw";f.MAW_SCHEMA_NAME=a}),66);
__d("LSConstants",[],(function(a,b,c,d,e,f){"use strict";a="ls";f.LS_SCHEMA_NAME=a}),66);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactIdType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("LSDbV1.upgrade",[],(function(a,b,c,d,e,f){"use strict";a={};f.afterUpgrade=a}),66);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={c:"string",t:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web").warn('Malformed default values data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}if(typeof a.c!=="string"||typeof a.t!=="string")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(d of e)if(typeof d!=="string")return null}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d="_db_defaults_meta";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d}),98);
__d("ReStoreCommonUtils",["isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){function d(b){if(b.done)return b.value;return!(h||(h=c("isPromise")))(b.value)?d(a.next(b.value)):b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}g.gen=a}),98);
__d("ReStoreOperationLock",["ReStoreCommonUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a==="\u2757"}c=function(){function a(a){var b=this;this.isSync=!1;this.waitFor=null;this.waitFor=a.then(function(a){return b.waitFor=null})}var b=a.prototype;b.chainPromiseOrValue=function(a){if(this.waitFor!=null)return this.waitFor.then(function(){return a("\ud83d\udd12")});else return a("\ud83d\udd12")};return a}();e=function(){function a(){this.isSync=!0}var b=a.prototype;b.chainPromiseOrValue=function(a){return a("\u2757")};return a}();f=function(){function a(){this.isSync=!1,this.$1=Promise.resolve()}var b=a.prototype;b.chainPromiseOrValue=function(a){var b=this;return new Promise(function(c,d){b.$1=b.$1.then(async function(){try{c(await a("\ud83d\udd12"))}catch(a){d(a)}})})};return a}();function b(a,b){return{next:function(c){return b.chainPromiseOrValue(function(b){return d("ReStoreCommonUtils").gen(a.next(b,c))})}}}g.isNoopLockProof=a;g.WaitForPromiseLock=c;g.NoopLock=e;g.ReStoreOperationLock=f;g.lockIterator=b}),98);
__d("ReStoreIndex",["ReQLBounds","ReStoreOperationLock","ReStoreUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,c,e,f){var g=this;this.entries=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreOperationLock").lockIterator(d("ReStoreUtils").entries(g.$5,a,g.$1,g.$3,b,c,g.$2),g.$4)};this.get=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return d("ReStoreUtils").getLocked(g.$5,new WeakMap(),g.$1.name,g.$3,b,a,g.$2)})};this.getKey=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return g.$6(g.$5,new WeakMap(),b,a)})};this.keys=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreOperationLock").lockIterator(d("ReStoreUtils").keys(g.$5,a,g.$1,g.$3,b,c),g.$4)};this.$3=a;this.keyFields=b.indexes[a];this.$1=b;this.$2=c;this.$4=e;this.$5=f}var b=a.prototype;b.$6=function(a,b,c,e){var f=this;a=d("ReStoreUtils").getLocked(a,b,this.$1.name,this.$3,c,e,this.$2);return a.then(function(a){return a===void 0?void 0:d("ReStoreUtils").searchKey(f.$1,a)})};return a}();b=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(a);c=function(a){function b(b,c,e,f,g,i){var j;j=a.call(this,b,c,e,f,g)||this;j.subscribe=function(a,b,c){return j.$ReStoreIndex$p_3.subscribeIndex(j.$ReStoreIndex$p_1.name,j.$ReStoreIndex$p_2,a,(h||(h=d("ReQLBounds"))).extendBounds(b,j.$ReStoreIndex$p_1.indexes[j.$ReStoreIndex$p_2].length),c)};j.$ReStoreIndex$p_2=b;j.$ReStoreIndex$p_1=c;j.$ReStoreIndex$p_3=i;return j}babelHelpers.inheritsLoose(b,a);return b}(a);g.ReStoreTransactionIndex=b;g.ReStoreIndex=c}),98);
__d("ReStoreTable",["FBLogger","I64","JSONStringifyBigIntSafe","LSSynchronousPromise","PromiseOrValue","ReQLBounds","ReStoreCommonUtils","ReStoreIndex","ReStoreOperationLock","ReStoreUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){a=(h||(h=d("I64"))).cast(a);if(a===void 0)throw c("FBLogger")("messenger_web").mustfixThrow("Expected int64");return h.to_float(a)}function l(a,b,d,e,f){b=c("JSONStringifyBigIntSafe")([b,d]);d=a.get(b);a.set(b,[d==null?e:d[0],f])}a=function(){function a(a,b,e,f){var g=this;this.entries=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreOperationLock").lockIterator(d("ReStoreUtils").entries(g.$4,a,g.$1,void 0,b,c,g.$2),g.$3)};this.get=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$3.chainPromiseOrValue(function(a){return d("ReStoreUtils").getLocked(g.$4,new WeakMap(),g.$1.name,void 0,b,a,g.$2)})};this.keys=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreOperationLock").lockIterator(d("ReStoreUtils").keys(g.$4,a,g.$1,void 0,b,c),g.$3)};this.peekNextAutoIncrementId=function(){return g.$5(g.$3.chainPromiseOrValue(function(a){a=g.$1.autoIncrement;if(!a)throw c("FBLogger")("messenger_web").mustfixThrow("only supported for auto-incrementing tables");return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(d("ReStoreCommonUtils").gen(g.$4.table(g.$1.name).readSeed(new WeakMap()))).then(function(a){if(a===void 0)throw c("FBLogger")("messenger_web").mustfixThrow("unexpected undefined autoIncrementSeed");return(h||(h=d("I64"))).of_float(a)})}))};this.keyFields=a.primaryKeyIds;this.$1=a;this.$2=b;this.$3=e;this.$4=f}var b=a.prototype;b.$5=function(a){return this.$3.isSync?d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(a):Promise.resolve(a)};return a}();b=function(a){function b(b,c,e,f,g,h,j,k,l,m){var n;b=c.tableNames[b];n=a.call(this,b,e,f,g)||this;n.$ReStoreTransactionTable$p_1=new Map();n.$ReStoreTransactionTable$p_10=new Map();n.add=function(a){return n.$ReStoreTransactionTable$p_12((i||(i=d("PromiseOrValue"))).map(i.map(n.$ReStoreTransactionTable$p_4.beforeAdd({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(a){return n.$ReStoreTransactionTable$p_13(function(b,c){var e;(e=n.$ReStoreTransactionTable$p_9)==null||e.recordLogicalWrite();return d("ReStoreCommonUtils").gen(n.$ReStoreTransactionTable$p_14(n.$ReStoreTransactionTable$p_10,c,new WeakMap(),n.$ReStoreTransactionTable$p_3.name,a,b))})}),function(b){return(i||(i=d("PromiseOrValue"))).map(n.$ReStoreTransactionTable$p_4.afterAdd({key:b,tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(){return b})}))};n.delete=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return n.$ReStoreTransactionTable$p_12((i||(i=d("PromiseOrValue"))).map(n.$ReStoreTransactionTable$p_4.beforeDelete({key:b,tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8}),function(a){return n.$ReStoreTransactionTable$p_13(function(b,c){var e=n;return d("ReStoreCommonUtils").gen(function*(f){(f=e.$ReStoreTransactionTable$p_9)==null||f.recordLogicalWrite(),yield* d("ReStoreUtils").deleteItemLocked(e.$ReStoreTransactionTable$p_2,e.$ReStoreTransactionTable$p_10,c,new WeakMap(),e.$ReStoreTransactionTable$p_3.name,a,b),yield* d("ReStoreUtils").cascadeKeyUpdatesLocked(e.$ReStoreTransactionTable$p_2,e.$ReStoreTransactionTable$p_10,c,new WeakMap(),e.$ReStoreTransactionTable$p_3.name,a,void 0,e.$ReStoreTransactionTable$p_4,b,e.$ReStoreTransactionTable$p_11)}())})}))};n.put=function(a){return n.$ReStoreTransactionTable$p_12((i||(i=d("PromiseOrValue"))).map(i.map(n.$ReStoreTransactionTable$p_4.beforePut({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(a){return n.$ReStoreTransactionTable$p_13(function(b,c){var e;(e=n.$ReStoreTransactionTable$p_9)==null||e.recordLogicalWrite();return d("ReStoreCommonUtils").gen(d("ReStoreUtils").putLocked(n.$ReStoreTransactionTable$p_2,n.$ReStoreTransactionTable$p_10,c,new WeakMap(),n.$ReStoreTransactionTable$p_3.name,a,n.$ReStoreTransactionTable$p_4,b,n.$ReStoreTransactionTable$p_11))})}),function(b){return(i||(i=d("PromiseOrValue"))).map(n.$ReStoreTransactionTable$p_4.afterPut({key:b,tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(){return b})}))};n.upsert=function(a,b){return n.$ReStoreTransactionTable$p_12((i||(i=d("PromiseOrValue"))).map(n.$ReStoreTransactionTable$p_4.beforeUpsert({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:b}),function(c){return n.$ReStoreTransactionTable$p_13(function(e,f){var g=n;return d("ReStoreCommonUtils").gen(function*(h){(h=g.$ReStoreTransactionTable$p_9)==null||h.recordLogicalWrite(),yield* d("ReStoreUtils").upsertLocked(g.$ReStoreTransactionTable$p_2,g.$ReStoreTransactionTable$p_10,f,new WeakMap(),g.$ReStoreTransactionTable$p_3.name,a,c,g.$ReStoreTransactionTable$p_4,e,g.$ReStoreTransactionTable$p_11),yield* d("ReStoreUtils").cascadeKeyUpdatesLocked(g.$ReStoreTransactionTable$p_2,g.$ReStoreTransactionTable$p_10,f,new WeakMap(),g.$ReStoreTransactionTable$p_3.name,a,d("ReStoreUtils").searchKey(g.$ReStoreTransactionTable$p_3,b),g.$ReStoreTransactionTable$p_4,e,g.$ReStoreTransactionTable$p_11)}())})}))};n.index=function(a){return d("ReStoreUtils").getOrCreate(n.$ReStoreTransactionTable$p_1,a,function(){return new(d("ReStoreIndex").ReStoreTransactionIndex)(a,n.$ReStoreTransactionTable$p_3,n.$ReStoreTransactionTable$p_4,n.$ReStoreTransactionTable$p_5,n.$ReStoreTransactionTable$p_6)})};n.$ReStoreTransactionTable$p_3=b;n.$ReStoreTransactionTable$p_2=c;n.$ReStoreTransactionTable$p_4=e;n.$ReStoreTransactionTable$p_5=f;n.$ReStoreTransactionTable$p_6=g;n.$ReStoreTransactionTable$p_7=h;n.$ReStoreTransactionTable$p_8=j;n.$ReStoreTransactionTable$p_9=k;n.$ReStoreTransactionTable$p_10=l;n.$ReStoreTransactionTable$p_11=m;return n}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.$ReStoreTransactionTable$p_12=function(a){return this.$ReStoreTransactionTable$p_5.isSync?d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(a):Promise.resolve(a)};c.$ReStoreTransactionTable$p_13=function(a){var b=this;return this.$ReStoreTransactionTable$p_5.chainPromiseOrValue(function(c){var e=b.$ReStoreTransactionTable$p_6.createNested(b.$ReStoreTransactionTable$p_9);return(i||(i=d("PromiseOrValue"))).map(a(c,e),function(a){e.flush();return a})})};c.$ReStoreTransactionTable$p_14=function*(a,b,c,e,f,g){var i=b.table(e),j=this.$ReStoreTransactionTable$p_2.tableNames[e];if(j.autoIncrement){var m=f[j.primaryKeyIds[0]];m=(h||(h=d("I64"))).of_float(yield* i.incrementSeed(c,m===void 0?m:k(m)));f[j.primaryKeyIds[0]]=m}m=d("ReStoreUtils").appendDefaultValues(f,j.name,this.$ReStoreTransactionTable$p_11);f=d("ReStoreUtils").searchKey(j,m);if(f==null)throw new Error("Evaluating the object store's key path did not yield a value");if((yield* i.tableGet(c,f))==null){j=d("ReStoreUtils").indicesWithKeyForValue(this.$ReStoreTransactionTable$p_3,Object.keys(j.indexes),m);yield* d("ReStoreUtils").deconflictIndicesLocked(this.$ReStoreTransactionTable$p_2,a,b,c,e,j,this.$ReStoreTransactionTable$p_4,g,this.$ReStoreTransactionTable$p_11);g=(yield* i.tableSet(c,f,m));i=g[0];yield* d("ReStoreUtils").addIdToIndices(b,c,e,i,j);l(a,e,f,void 0,m)}return f};return b}(a);e=function(a){function b(b,c,e,f,g){var h;h=a.call(this,b,c,e,f)||this;h.$ReStoreTable$p_1=new Map();h.index=function(a){return d("ReStoreUtils").getOrCreate(h.$ReStoreTable$p_1,a,function(){return new(d("ReStoreIndex").ReStoreIndex)(a,h.$ReStoreTable$p_2,h.$ReStoreTable$p_3,h.$ReStoreTable$p_4,h.$ReStoreTable$p_5,h.$ReStoreTable$p_6)})};h.subscribe=function(a,b,c){return h.$ReStoreTable$p_6.subscribeTable(h.$ReStoreTable$p_2.name,a,(j||(j=d("ReQLBounds"))).extendBounds(b,h.$ReStoreTable$p_2.primaryKeyIds.length),c)};h.$ReStoreTable$p_2=b;h.$ReStoreTable$p_3=c;h.$ReStoreTable$p_4=e;h.$ReStoreTable$p_5=f;h.$ReStoreTable$p_6=g;return h}babelHelpers.inheritsLoose(b,a);return b}(a);g.ReStoreTransactionTable=b;g.ReStoreTable=e}),98);
__d("LSStorage",["ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return(h||(h=d("ReStoreKeyComparer"))).compareKey(a,b)===0}g.areKeysEqual=a}),98);
__d("ReStoreUtils",["FBLogger","I64","JSONStringifyBigIntSafe","LSStorage","LSSynchronousPromise","Random","ReQLBounds","ReStoreCommonUtils","ReStoreKeyComparer","ReStoreOperationLock","ReStoreTable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=500;async function a(a){var b=[],c=await a.next();while(!c.done)b.push(c.value),c=await a.next();return b}function l(a,b,d){var e=a.indexes;a=a.primaryKeyIds;a=d==null?a:e[d];return a.map(function(a){if(b[a]!==void 0||d!=null)return b[a];throw c("FBLogger")("maw_db").mustfixThrow("primary key must be defined on object")})}function m(a,b,c){var d=c[b];return!d?a:Object.keys(d).reduce(function(a,b){Object.prototype.hasOwnProperty.call(a,b)||(a[b]=d[b]);return a},babelHelpers.extends({},a))}function n(a,b,c,e,f,g,i){function j(){var k=a.table(c.name),l=babelHelpers.extends({},(h||(h=d("ReQLBounds"))).extendBounds(g,(e===void 0?c.primaryKeyIds:c.indexes[e]).length),{dir:f}),m=e==null?k.tableEntries(b,l):k.indexEntries(b,e,l);return k={next:function*(a,b){a=(yield* m.next(b));if(a.done)return{done:!0};b=a.value[1];return{done:!1,value:[a.value[0],i==null?b:i.afterEntriesNext({tableName:c.name,value:b})]}}},k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=j,k}return j()}function b(a,b,c,e,f,g){function i(){var j=a.table(c.name),k=j.keys(b,e,babelHelpers.extends({},(h||(h=d("ReQLBounds"))).extendBounds(g,(e===void 0?c.primaryKeyIds:c.indexes[e]).length),{dir:f}));return j={next:function*(a,b){return yield* k.next(b)}},j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=i,j}return i()}function e(a,b,c,e,f,g,h){a=a.table(c);g=d("ReStoreOperationLock").isNoopLockProof(g)?d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise:Promise.resolve.bind(Promise);e!=null?e=g(d("ReStoreCommonUtils").gen(a.indexGet(b,e,f))):e=g(d("ReStoreCommonUtils").gen(a.tableGet(b,f)));return e.then(function(a){return a===void 0?void 0:h.afterGet({tableName:c,value:a})})}function o(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function p(a){a=(i||(i=d("I64"))).cast(a);if(a===void 0)throw c("FBLogger")("maw_db").mustfixThrow("Expected int64");return i.to_float(a)}function q(a,b,d,e,f){b=c("JSONStringifyBigIntSafe")([b,d]);d=a.get(b);(d==null?e:d[0])==null&&f==null?a.delete(b):a.set(b,[d==null?e:d[0],f])}function* r(a,b,c,e,f,g,h,i,k,m){function o(a,b){return a.length>=b?a:[].concat(a,[(j||(j=d("ReStoreKeyComparer"))).MAX_KEY])}if(h!=null&&(j||(j=d("ReStoreKeyComparer"))).compareKey(g,h)===0)return;f=a.tableNames[f];var p=f.cascadeUpdates,q=f.primaryKeyIds;f=function*(){var f=s.indexName,d=s.tableName,j=a.tableNames[d],p=j.indexes,v=j.primaryKeyIds,w=f==null?v:p[f];v={gte:g,lte:o(g,w.length)};p=n(c,e,j,f,"asc",v);j=[];f=(yield* p.next(k));while(!f.done)j.push(f.value),f=(yield* p.next(k));for(v of j){v[0];p=v[1];f=l(a.tableNames[d],p);if(h===void 0)yield* u(a,b,c,e,d,f,k),yield* r(a,b,c,e,d,f,void 0,i,k,m);else{j=q.reduce(function(a,b,c){if(c>=h.length)return a;a[w[c]]=h[c];return a},babelHelpers.extends({},p));yield* t(a,b,c,e,d,f,j,i,k,m);yield* r(a,b,c,e,d,f,l(a.tableNames[d],j),i,k,m)}}};for(var s of p)yield* f()}function* s(a,b,c,e,f,g,h,k,n){var o=c.table(f),r=a.tableNames[f];if(r.autoIncrement){var s=g[r.primaryKeyIds[0]];s=(i||(i=d("I64"))).of_float(yield* o.incrementSeed(e,s===void 0?s:p(s)));g[r.primaryKeyIds[0]]=s}s=l(r,g);var t={},u=(yield* o.tableGet(e,s)),y=g;u!==void 0?t=v(r,Object.keys(r.indexes),u):y=m(g,r.name,n);g=(yield* o.tableSet(e,s,y));var z=g[0];g=g[1];r=v(r,Object.keys(r.indexes),y);var A=babelHelpers.extends({},r);for(var B of Object.keys(A))t[B]!==void 0&&(j||(j=d("ReStoreKeyComparer"))).compareKey(t[B],A[B])===0&&(delete A[B],delete t[B]);yield* w(a,b,c,e,f,A,h,k,n);yield* x(c,e,f,z,g?r:A);for(B of Object.keys(t))yield* o.indexDelete(e,B,t[B]);q(b,f,s,u,y);return s}function* t(a,b,c,e,f,g,h,i,j,k){var m=l(a.tableNames[f],h);d("LSStorage").areKeysEqual(g,m)||(yield* u(a,b,c,e,f,g,j));yield* s(a,b,c,e,f,h,i,j,k)}function* u(a,b,c,d,e,f,g){g=c.table(e);c=a.tableNames[e];a=(yield* g.tableGet(d,f));if(a!==void 0){if(Object.keys(c.indexes).length)for(var h of Object.keys(c.indexes)){var i=l(c,a,h);i!=null&&(yield* g.indexDelete(d,h,i))}yield* g.tableDelete(d,f);q(b,e,f,a,void 0)}}function v(a,b,c){return b.reduce(function(b,d){var e;e=(e=a.indexPredicates)==null?void 0:e[d];if(e!=null&&!e(c))return b;e=l(a,c,d);b[d]=e;return b},{})}function* w(a,b,c,d,e,f,g,h,i){var j=c.table(e);for(var k of Object.keys(f)){var m=f[k];m=(yield* j.indexGet(d,k,m));if(m!=null){m=l(a.tableNames[e],m);yield* u(a,b,c,d,e,m,h);yield* r(a,b,c,d,e,m,void 0,g,h,i)}}}function* x(a,b,c,d,e){a=a.table(c);for(c of Object.keys(e)){var f=e[c];f===void 0?yield* a.indexDelete(b,c,f):yield* a.indexSet(b,c,f,d)}}function* f(a,b,d,e,f,g,h,i,j,l){var m=d.table(i),o=g.tableNames[i];for(var p of j)yield* m.clearIds(e,p);p=j.filter(function(a){return(o==null?void 0:o.indexes[a])!=null});if(p.length===0)return;j=n(d,e,o,void 0,"asc",void 0,f);var q=[],r=(yield* j.next(l));while(!r.done){while(!r.done&&q.length<=k)q.push(r.value),r=(yield* j.next(l));for(var s of q){var t=s[0],u=s[1];u=v(g.tableNames[i],p,u);yield* w(g,a,d,e,i,u,f,l,h);t=c("nullthrows")(yield* m.getId(e,t));yield* x(d,e,i,t,u)}q.length=0;b==null||b()}}var y="__internal__transaction_id";function z(a,b,e,f,g,h,i){var j=null,k=new(d("ReStoreOperationLock").NoopLock)(),l=new(d("ReStoreOperationLock").ReStoreOperationLock)(),m=i==null?void 0:i.qplFlow,n=new Map(),p=(i={},i[y]=c("Random").uint32(),i.reportUsedTablesForSyncAccess=function(a){j=a&&a.every(function(a){return g.tablePermitsSynchronousIO(a)})&&j!==!1},i.table=function(c){return new(d("ReStoreTable").ReStoreTransactionTable)(c,a,e,l,g,f,p,m,h,b)},i.transactionTable=function(c,i){var q=i!=null?c+"::"+i:c;return o(n,q,function(){return new(d("ReStoreTable").ReStoreTransactionTable)(c,a,e,j===!0&&i!=null?k:l,g,f,p,m,h,b)})},i);i=function(a){Object.defineProperty(p,a,{get:function(){return p.transactionTable(a)}})};for(var q of Object.keys(a.tableNames))i(q);return p}function A(a){return a.types.includes("indexeddb")}g.collectIterator=a;g.searchKey=l;g.appendDefaultValues=m;g.entries=n;g.keys=b;g.getLocked=e;g.getOrCreate=o;g.cascadeKeyUpdatesLocked=r;g.putLocked=s;g.upsertLocked=t;g.deleteItemLocked=u;g.indicesWithKeyForValue=v;g.deconflictIndicesLocked=w;g.addIdToIndices=x;g.rebuildIndicesLocked=f;g.createReStoreTransaction=z;g.isPDB=A}),98);
__d("ReStoreDefaultValueMigration",["LSPlatformLsInitLog","ReStoreDefaultValuesMetadata","ReStoreUtils"],(function(a,b,c,d,e,f,g){"use strict";async function h(a,b){var c={};b=await d("ReStoreUtils").collectIterator(b[d("ReStoreDefaultValuesMetadata").defaultValuesTableName].entries(a));for(a of b){b=a[0];var e=a[1];if(b!=null){var f;b=d("ReStoreDefaultValuesMetadata").tryParseDefaultValuesData(e);if(b==null)continue;e=b.columns;b=b.tableName;c[b]=(f=c[b])!=null?f:new Set();for(f of e)c[b].add(f)}}return c}async function i(a,b,c,d){a=await h(a,b);b={};for(c in c.tableNames){var e=d[c];if(e!=null)for(var f in e){var g;g=(g=a[c])==null?void 0:g.has(f);if(!g){b[c]=(g=b[c])!=null?g:{};b[c][f]=e[f]}}}return b}async function j(a,b,c){for(b in b){var e=Object.keys(c[b]||{});e={columns:e,tableName:b};await a[d("ReStoreDefaultValuesMetadata").defaultValuesTableName].put(d("ReStoreDefaultValuesMetadata").defaultValuesColumnToValue(e))}}async function a(a,b,c,e){var f=new WeakMap();d("LSPlatformLsInitLog").addPoint("default_values_update_start");var g=function(a,b){d("LSPlatformLsInitLog").addPoint("default_values_update_end_failure",{string:{default_values_update_failure_point:b,default_values_update_failure_reason:String(a)}})};try{b=await i(f,a,b,e);try{if(c===!1)for(c in b){var h=a[c].entries(f),k=await h.next();while(!k.done){var l=babelHelpers.extends({},k.value[1]);l=d("ReStoreUtils").appendDefaultValues(l,c,e);await a[c].put(l);k=await h.next()}}await j(a,b,e);d("LSPlatformLsInitLog").addPoint("default_values_update_end")}catch(a){g(a,"setDefaultValues")}}catch(a){g(a,"findDefaultValuesToUpdate")}}g.runMigrationForTableDefaultValuesIfNeeded=a}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b of a)if(typeof b!=="string")return null;return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string","predicate?":"string",tableName:"string"};for(var d in b){var e=d.endsWith("?");if(e)e=a[d.slice(0,-1)];else{if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web").warn('Malformed index data, missing key "%s"',d);return null}e=a[d]}var f=b[d],g=typeof e;if(e!=null&&g!==f){c("FBLogger")("messenger_web").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,g,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"||typeof a.predicate!=="string"&&a.predicate!=null?null:babelHelpers["extends"]({data:e,indexName:a.indexName,tableName:a.tableName},a.predicate==null?{}:{predicate:a.predicate})}function b(a,b){if(a[0]==null)return!0;if(a[0].length!==b[0].length)return!0;for(var c=0;c<a[0].length;c++)if(a[0][c]!==b[0][c])return!0;return a[1]!==b[1]?!0:!1}function d(a){return babelHelpers["extends"]({indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName},a.predicate==null?{}:{predicate:a.predicate})}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("ReStoreIndicesMigration",["LSPlatformLsInitLog","ReStoreCommonUtils","ReStoreIndexMetadata","ReStoreOperationLock","ReStoreUtils"],(function(a,b,c,d,e,f,g){"use strict";async function h(a,b){var c={};b=await d("ReStoreUtils").collectIterator(b[d("ReStoreIndexMetadata").indicesTableName].entries(a));for(a of b){b=a[0];var e=a[1];if(b!=null){var f;e=d("ReStoreIndexMetadata").tryParseIndexData(e);if(e==null)continue;var g=e.indexName,h=e.tableName;c[h]=(f=c[h])!=null?f:{};c[h][g]=babelHelpers.extends({index:e.data,key:b},e.predicate==null?{}:{predicate:e.predicate})}}return c}async function i(a,b,c){a=await h(a,b);b={};for(var e in c.tableNames){var f=c.tableNames[e];for(var g in f.indexes){var i,j;i=[f.indexes[g],(i=f.indexPredicates)==null||(i=i[g])==null?void 0:i.toString()];j=(j=a[e])==null?void 0:j[g];if(d("ReStoreIndexMetadata").indicesDiffer([j==null?void 0:j.index,j==null?void 0:j.predicate],i)){b[e]=(j=b[e])!=null?j:{};b[e][g]=i}}}j={};for(i in c.tableNames)if(i in a){g=a[i];for(f in g){var k;e=g[f];k=(k=c.tableNames[i])==null||(k=k.indexes)==null?void 0:k[f];if(k==null){j[i]=(k=j[i])!=null?k:{};j[i][f]=e}}}return{toRemove:j,toUpdate:b}}async function j(a,b){for(var c in b){var e=b[c];for(var f in e){var g=e[f],h=g[0];g=g[1];h=babelHelpers.extends({data:h,indexName:f,tableName:c},g==null?{}:{predicate:g});await a[d("ReStoreIndexMetadata").indicesTableName].put(d("ReStoreIndexMetadata").indexDataToValue(h))}}}async function k(a,b){for(var c in b){var e=b[c];for(var f in e){var g,h=e[f].key;await (g=a[d("ReStoreIndexMetadata").indicesTableName]).delete.apply(g,h)}}}function l(a,b,c,e,f){return new(d("ReStoreOperationLock").ReStoreOperationLock)().chainPromiseOrValue(function(g){return d("ReStoreCommonUtils").gen(d("ReStoreUtils").rebuildIndicesLocked(a.changedKeys,a.clearCache,a.storeTx,new WeakMap(),a.hooksManager,c,e,b,f,g))})}function a(a,b,c,e){var f=new WeakMap();d("LSPlatformLsInitLog").addPoint("index_migration_start");var g=function(a,b){d("LSPlatformLsInitLog").addPoint("index_migration_end_failure",{string:{index_migration_failure_point:b,index_migration_failure_reason:String(a)}})};return i(f,a.transaction,b).then(async function(f){var g=f.toRemove;f=f.toUpdate;var h=Array.from(new Set([].concat(Object.keys(f),Object.keys(g))));d("LSPlatformLsInitLog").addAnnotations({int:{index_migration_rebuild_tables_count:h.length}});if(e===!1)for(h of h)if(b.tableNames[h]!=null){var i;i=Array.from(new Set([].concat(Object.keys((i=f[h])!=null?i:{}),Object.keys((i=g[h])!=null?i:{}))));await l(a,h,b,c,i)}await j(a.transaction,f);await k(a.transaction,g);d("LSPlatformLsInitLog").addPoint("index_migration_end")},function(a){return g(a,"findIndicesToUpdateOrRemove")}).catch(function(a){return g(a,"rebuildIndices")})}g.runMigrationForIndicesIfNeeded=a}),98);
__d("ReStoreMigrateUtil",["$InternalEnum","ReQL"],(function(a,b,c,d,e,f,g){"use strict";f=b("$InternalEnum").Mirrored(["UPDATE_METADATA","UPGRADE_COMPLETE","NO_UPGRADE_NEEDED"]);function a(a,b){b="V"+b;return b in a?b:null}function h(a,b){return i.apply(this,arguments)}function i(){i=babelHelpers.wrapAsyncGenerator(function*(a,b){a=a.iterator(new WeakMap());var c=[],d=(yield babelHelpers.awaitAsyncGenerator(a.next()));while(!d.done){var e=d.value;e[0];e=e[1];c.push(e);c.length===b&&(yield c,c=[]);d=(yield babelHelpers.awaitAsyncGenerator(a.next()))}c.length&&(yield c)});return i.apply(this,arguments)}async function c(a,b,c){var e=!1,f=!1,g;try{for(var i=babelHelpers.asyncIterator(h(d("ReQL").fromTableAscending(a),100)),j;e=!(j=await i.next()).done;e=!1){j=j.value;await Promise.all(j.map(function(c){return b(c).then(a.put)})),c==null||c()}}catch(a){f=!0,g=a}finally{try{e&&i.return!=null&&await i.return()}finally{if(f)throw g}}}function e(a,b){function c(b){if(b==null)return void 0;var c={};for(var d in b)c[a+"_"+d]=b[d];return c}return{bool:c(b.bool),int:c(b.int),string:c(b.string)}}g.ReStoreMigrateResult=f;g.getVersionFromNumber=a;g.fetchReQLBatch=h;g.upgradeTableEntries=c;g.prefixAnnotations=e}),98);
__d("ReStoreHashMigration",["JSONStringifyBigIntSafe","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=Object.values(a.tableNames).map(function(a){return babelHelpers.extends({},a,{indexPredicates:Object.entries((a=a.indexPredicates)!=null?a:{}).map(function(a){var b=a[0];a=a[1];return[b,a.toString()]})})});return c("JSONStringifyBigIntSafe")(a)}async function b(a,b,c,e){var f,g,h=e.loggers,i=h.logHistory;h=h.userFlow;var j=e.storeTx,k=e.transaction,l=d("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(c),m=d("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash(b);h==null||h.addAnnotations(d("ReStoreMigrateUtil").prefixAnnotations(a,{int:{defaultValuesVersion:l,schemaVersion:m}}));var n=new(d("ReStorePersistedMetadata").ReStorePersistedSchemaVersion)(a),o=new(d("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion)(a);f=(f=await n.read(j))==null?void 0:f.schemaVersion;g=(g=await o.read(j))==null?void 0:g.defaultValuesVersion;i==null||i.debug("storeSchemaVersion: "+(f!=null?f:"null"));i==null||i.debug("storeDefaultValuesVersion: "+(g!=null?g:"null"));f!=null&&(h==null||h.addAnnotations(d("ReStoreMigrateUtil").prefixAnnotations(a,{int:{storeDefaultValuesVersion:g,storeSchemaVersion:f}})));if(f===m&&g===l)return d("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED;a=f==null;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(k,b,a,c);i==null||i.debug("migration default values finished");await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(e,b,c,a);i==null||i.debug("migration indices finished");n.write(j,{schemaVersion:m});o.write(j,{defaultValuesVersion:l});i==null||i.debug("version is written");i==null||i.debug("migration hash end");h==null||h.addPoint("migration_hash_end");if(a)return d("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA;else return d("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE}g.serializeTableData=a;g.runHashMigration=b}),98);
__d("ReStorePersistenceIds",[],(function(a,b,c,d,e,f){"use strict";b="nextId";c="seed";function a(a){return a}f.idForNextId=b;f.idForSeed=c;f.castPersistenceId=a}),66);
__d("ReStorePersistedMetadata",["JSONStringifyBigIntSafe","ReStoreCommonUtils","ReStoreHashMigration","ReStorePersistenceIds","hashString"],(function(a,b,c,d,e,f,g){"use strict";var h="_db_schema_meta";a=function(){function a(a){this.$1=d("ReStorePersistenceIds").castPersistenceId(a)}var b=a.prototype;b.read=async function(a){a=await d("ReStoreCommonUtils").gen(a.table(h).readData(new WeakMap(),this.$1));return a};b.write=function(a,b){a.table(h).writeData(new WeakMap(),this.$1,b)};b.getId=function(){return this.$1};return a}();b=function(a){function b(b){return a.call(this,b+"_schema_version")||this}babelHelpers.inheritsLoose(b,a);b.hash=function(a){return c("hashString")(d("ReStoreHashMigration").serializeTableData(a))};return b}(a);e=function(a){function b(){return a.call(this,"custom_migration_value_version")||this}babelHelpers.inheritsLoose(b,a);return b}(a);f=function(a){function b(b){return a.call(this,b+"_default_value_version")||this}babelHelpers.inheritsLoose(b,a);b.hash=function(a){return c("hashString")(c("JSONStringifyBigIntSafe")(a))};return b}(a);g.schemaMetadataTableName=h;g.ReStorePersistedMetadata=a;g.ReStorePersistedSchemaVersion=b;g.ReStorePersistedCustomMigrationVersion=e;g.ReStorePersistedDefaultValuesVersion=f}),98);
__d("ReStoreMetadata",["ReStoreDefaultValuesMetadata","ReStoreIndexMetadata","ReStorePersistedMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return!0}function a(a){var b=a.reduce(function(a,b){return function(c){return c[b]!=null&&a(c)}},h);b.toString=function(){return"dynamic predicate on ["+a.join(",")+"]"};return b}function b(a){return function(b){var c={},d={};for(b of b)for(var e of b){var f;e.id!=null&&(c[e.id]=e.name);d[e.name]={autoIncrement:(f=e.auto_increment)!=null?f:!1,cascadeUpdates:(f=a[e.name])!=null?f:[],indexes:(f=Object.fromEntries(Object.entries((f=e.indexes)!=null?f:{}).map(function(a){var b=a[0];a=a[1].columns;return[b,a]})))!=null?f:{},indexPredicates:Object.fromEntries(Object.entries((f=e.indexes)!=null?f:{}).filter(function(a){a[0];a=a[1];return a.predicate}).map(function(a){var b=a[0];a=a[1];return[b,a.predicate]})),name:e.name,primaryKeyIds:e.primary_key}}return{tableIds:c,tableNames:d}}}e=(c={},c[d("ReStoreDefaultValuesMetadata").defaultValuesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:d("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]},c[d("ReStoreIndexMetadata").indicesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]},c[d("ReStorePersistedMetadata").schemaMetadataTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:d("ReStorePersistedMetadata").schemaMetadataTableName,primaryKeyIds:[]},c);g.createPredicate=a;g.getBuildTableData=b;g.RESTORE_METADATA_TABLES=e}),98);
__d("ReStoreVersionedSchemaProviderUtil",["ReStoreMetadata"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c={tableIds:{},tableNames:d("ReStoreMetadata").RESTORE_METADATA_TABLES},e={};for(var f of Object.keys(a)){var g=a[f],h={},i={};for(var j in g.indexes)h[j]=g.indexes[j].fields,g.indexes[j].ignoreNulls.length>0&&(i[j]=d("ReStoreMetadata").createPredicate(g.indexes[j].ignoreNulls));c.tableNames[f]={autoIncrement:g.autoIncrement,cascadeUpdates:(j=b==null?void 0:b[f])!=null?j:[],indexes:h,indexPredicates:i,name:f,primaryKeyIds:g.primaryKey.fields};g.id!=null&&(c.tableIds[g.id]=f);Object.keys(g.defaults).length>0&&(e[f]=g.defaults)}return{defaults:e,tableData:c}}g.getTableData=a}),98);
__d("LSDbV1",["I64MigrationHelper","LSDbV1.upgrade","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreVersionedSchemaProviderUtil"],(function(a,b,c,d,aa,ba,ca){"use strict";b=Object.freeze({_user_info:{autoIncrement:!1,defaults:{},id:4,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},acs_request_context:{autoIncrement:!1,defaults:{},id:310,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},ad_context:{autoIncrement:!1,defaults:{},id:160,indexes:{},primaryKey:{fields:["adId"],ignoreNulls:[]}},admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:(a=d("I64MigrationHelper")).cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ai_bot_feedback_submission_status:{autoIncrement:!1,defaults:{},id:315,indexes:{},primaryKey:{fields:["botResponseId"],ignoreNulls:[]}},ai_bot_search_metadata:{autoIncrement:!1,defaults:{contactViewerRelationship:a.cast([0,0]),displayName:"",score:0},id:298,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},anonymous_task_context:{autoIncrement:!1,defaults:{failureCount:a.cast([0,0])},id:311,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},attachment_conversion:{autoIncrement:!1,defaults:{},id:164,indexes:{},primaryKey:{fields:["attachmentFbid"],ignoreNulls:[]}},attachment_ctas:{autoIncrement:!1,defaults:{},id:19,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}},attachments_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,mediaGroup:a.cast([0,0])},id:17,indexes:{},primaryKey:{fields:["threadKey","mediaGroup","minTimestampMs"],ignoreNulls:[]}},audio_channel_events:{autoIncrement:!1,defaults:{},id:238,indexes:{},primaryKey:{fields:["eventId","roomId"],ignoreNulls:[]}},available_reactions:{autoIncrement:!1,defaults:{},id:188,indexes:{},primaryKey:{fields:["emojiIdx"],ignoreNulls:[]}},avatar_settings:{autoIncrement:!1,defaults:{enableAvatarHotlike:!1},id:209,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},bot_profile_info_v2:{autoIncrement:!1,defaults:{hasEmbodiment:!1},id:299,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},bots:{autoIncrement:!1,defaults:{},id:230,indexes:{},primaryKey:{fields:["threadKey","botId"],ignoreNulls:[]}},business_comm_items:{autoIncrement:!1,defaults:{},id:234,indexes:{},primaryKey:{fields:["threadKey","entId"],ignoreNulls:[]}},business_support_case_details:{autoIncrement:!1,defaults:{},id:222,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},business_support_notification_settings:{autoIncrement:!1,defaults:{},id:236,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},business_thread_suggestions:{autoIncrement:!1,defaults:{},id:290,indexes:{},primaryKey:{fields:["threadKey","suggestionType"],ignoreNulls:[]}},client_accounts:{autoIncrement:!0,defaults:{},id:272,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_message_translation_info:{autoIncrement:!1,defaults:{},id:324,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_messages:{autoIncrement:!0,defaults:{disabledActionsReason:a.cast([0,0]),isForwarded:!1,isHidden:!1,isReadonly:!1,isReplyOnly:!1,isTombstoned:!1,messageContentSubtype:a.cast([0,0]),messageContentType:a.cast([0,0]),messageCreationType:a.cast([0,0]),messageEphemeralityType:a.cast([0,0]),messageSource:a.cast([0,0]),replyMessageTextSize:a.cast([0,0]),replyStatus:a.cast([0,0]),replyVicinityStatus:a.cast([0,0]),sendStatus:a.cast([0,0]),shouldHideInSnippet:!1,shouldPersist:!1,textSize:a.cast([0,0])},id:273,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_participants:{autoIncrement:!0,defaults:{capabilities1:a.cast([0,0]),capabilities2:a.cast([0,0]),isPending:!1,readActionTsMs:a.cast([0,0])},id:274,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}},client_threads:{autoIncrement:!0,defaults:{capabilities1:a.cast([0,0]),capabilities2:a.cast([0,0]),groupMemberAddMode:a.cast([0,0]),isAdminSnippet:!1,isHidden:!1,isHotlikeSnippet:!1,isPending:!1,isShadowThread:!1,isTombstoned:!1,pinnedMessagesCount:a.cast([0,0])},id:276,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_web_pinned_messages:{autoIncrement:!1,defaults:{},id:328,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","offlineThreadingId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","offlineThreadingId","pinnedTimestampMs"],ignoreNulls:[]}},client_xmas:{autoIncrement:!0,defaults:{},id:314,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},cm_category_list:{autoIncrement:!1,defaults:{},id:182,indexes:{},primaryKey:{fields:["communityId","categoryId"],ignoreNulls:[]}},cm_channel_events:{autoIncrement:!1,defaults:{},id:201,indexes:{eventsInThread:{fields:["threadId","eventId"],ignoreNulls:[]}},primaryKey:{fields:["eventId","threadId"],ignoreNulls:[]}},cm_channel_list:{autoIncrement:!1,defaults:{},id:167,indexes:{threadIdCommunityId:{fields:["threadId","communityId"],ignoreNulls:[]}},primaryKey:{fields:["communityId","threadId"],ignoreNulls:[]}},cm_community_list:{autoIncrement:!1,defaults:{},id:166,indexes:{},primaryKey:{fields:["communityId"],ignoreNulls:[]}},cm_search_nullstate_metadata:{autoIncrement:!1,defaults:{score:0},id:289,indexes:{},primaryKey:{fields:["threadKey","scoreType"],ignoreNulls:[]}},community_chat_admin_assist_command_sequences:{autoIncrement:!1,defaults:{},id:291,indexes:{},primaryKey:{fields:["commandSequenceId"],ignoreNulls:[]}},community_chat_message_seen_count:{autoIncrement:!1,defaults:{},id:221,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},community_chat_poll_options:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:a.cast([0,0]),sortKeyVotingTimestamp:a.cast([0,0]),voteCount:a.cast([0,0])},id:224,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},community_chat_poll_votes:{autoIncrement:!1,defaults:{},id:225,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},community_chat_poll_votes_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:244,indexes:{},primaryKey:{fields:["pollId","optionId","minTimestampMs"],ignoreNulls:[]}},community_chat_polls:{autoIncrement:!1,defaults:{pollType:a.cast([0,0])},id:223,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},community_direct_invites_presets:{autoIncrement:!1,defaults:{fallbackUrl:"",pictureUrlExpirationTimestampMs1:a.cast([0,0]),pictureUrlExpirationTimestampMs2:a.cast([0,0]),presetTypeV2:"ALL_MEMBERS"},id:199,indexes:{},primaryKey:{fields:["communityId","presetType","source"],ignoreNulls:[]}},community_events:{autoIncrement:!1,defaults:{},id:202,indexes:{},primaryKey:{fields:["eventId","communityId"],ignoreNulls:[]}},community_folders:{autoIncrement:!1,defaults:{capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),inviteStatus:a.cast([0,0]),notificationMutedUntil:a.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_members:{autoIncrement:!1,defaults:{adminActions:a.cast([0,0]),channelBadges:a.cast([0,0]),contactCapabilities:a.cast([0,0]),requestId:"",source:a.cast([0,0]),threadRoles:a.cast([0,0])},id:170,indexes:{communityContact:{fields:["communityId","contactId","requestId","source","name"],ignoreNulls:[]},communitySource:{fields:["communityId","source","requestId","contactId","name"],ignoreNulls:[]}},primaryKey:{fields:["communityId","contactId","source","requestId"],ignoreNulls:[]}},community_members_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:189,indexes:{},primaryKey:{fields:["communityId","isAdmin","minName","source","requestId"],ignoreNulls:[]}},community_messaging_aggregated_copresence_counts_for_chat:{autoIncrement:!1,defaults:{},id:204,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},community_messaging_aggregated_user_presence_counts_for_community:{autoIncrement:!1,defaults:{},id:203,indexes:{},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_rules:{autoIncrement:!1,defaults:{},id:254,indexes:{},primaryKey:{fields:["communityId","ruleId"],ignoreNulls:[]}},community_surface_ranges:{autoIncrement:!1,defaults:{},id:253,indexes:{},primaryKey:{fields:["surfaceType","communityKey"],ignoreNulls:[]}},community_thread_sync_info:{autoIncrement:!1,defaults:{},id:294,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},connectivity_status:{autoIncrement:!0,defaults:{},id:114,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},contact_upload_settings:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:74,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},contacts:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),blockedByViewerStatus:a.cast([0,0]),canViewerMessage:!0,capabilities2:a.cast([0,0]),contactReachabilityStatusType:a.cast([0,0]),contactType:a.cast([0,0]),contactTypeExact:a.cast([0,0]),gender:a.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:a.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:a.cast([0,0]),rank:0,restrictionType:a.cast([0,0]),waConnectStatus:a.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},contextual_profile_v1:{autoIncrement:!1,defaults:{},id:216,indexes:{associatedEntityIdAndOwner:{fields:["associatedEntityId","ownerId"],ignoreNulls:[]}},primaryKey:{fields:["ownerId","associatedEntityId"],ignoreNulls:[]}},cowatch_sessions:{autoIncrement:!1,defaults:{},id:80,indexes:{},primaryKey:{fields:["cowatchSessionId"],ignoreNulls:[]}},ctas:{autoIncrement:!1,defaults:{},id:15,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},custom_thread_commands:{autoIncrement:!1,defaults:{isOpenPersistentMenu:!1},id:296,indexes:{commandId:{fields:["commandId"],ignoreNulls:[]},rank:{fields:["threadKey","rank"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","commandId"],ignoreNulls:[]}},cutover_threads:{autoIncrement:!1,defaults:{isMigrated:!1,showOpenMessageHistory:!1},id:193,indexes:{},primaryKey:{fields:["openThreadId"],ignoreNulls:[]}},data_trace_addon:{autoIncrement:!0,defaults:{timestampMs:a.cast([0,0])},id:154,indexes:{traceIdAddonId:{fields:["traceId","addonId"],ignoreNulls:[]}},primaryKey:{fields:["addonId"],ignoreNulls:[]}},data_trace_meta:{autoIncrement:!1,defaults:{foregroundTimestampMs:a.cast([0,0]),initTimestampMs:a.cast([0,0]),shouldFlush:!1,traceType:a.cast([0,0])},id:153,indexes:{shouldFlushInitTimestampMsTraceId:{fields:["shouldFlush","initTimestampMs","traceId"],ignoreNulls:[]}},primaryKey:{fields:["traceId"],ignoreNulls:[]}},device_metadata:{autoIncrement:!0,defaults:{},id:185,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},discoverable_chat_participants:{autoIncrement:!1,defaults:{source:a.cast([0,0])},id:248,indexes:{},primaryKey:{fields:["threadId","contactId","source"],ignoreNulls:[]}},discoverable_chat_participants_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:249,indexes:{},primaryKey:{fields:["threadId","source","minName"],ignoreNulls:[]}},discoverable_chats_personal_inbox_info:{autoIncrement:!1,defaults:{},id:326,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}},e2ee_dummy_table_for_sync:{autoIncrement:!1,defaults:{},id:171,indexes:{},primaryKey:{fields:["placeholder"],ignoreNulls:[]}},edit_message_history:{autoIncrement:!0,defaults:{sendStatus:a.cast([0,0])},id:322,indexes:{originalMsgPkEditTs:{fields:["originalMessagePk","serverAdjustedEditTsMs"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},emoji_sets:{autoIncrement:!1,defaults:{},id:151,indexes:{},primaryKey:{fields:["categoryIdx","emojiIdx","type_"],ignoreNulls:[]}},encrypted_backup_restore_task_payload_context:{autoIncrement:!1,defaults:{},id:190,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},encrypted_backups:{autoIncrement:!0,defaults:{authorityLevel:a.cast([0,0]),hasOtcEligibleDevices:!1},id:172,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_client_restore_status:{autoIncrement:!1,defaults:{},id:231,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},encrypted_backups_debug_metadata:{autoIncrement:!1,defaults:{},id:206,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:217,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_dyi_backup_restore_status:{autoIncrement:!0,defaults:{},id:208,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata:{autoIncrement:!1,defaults:{},id:207,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:218,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_message_backup_status:{autoIncrement:!1,defaults:{},id:213,indexes:{},primaryKey:{fields:["messagePk"],ignoreNulls:[]}},encrypted_backups_metadata:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:196,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},encrypted_backups_otc_notification_sending_status:{autoIncrement:!0,defaults:{},id:285,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_status_trigger:{autoIncrement:!0,defaults:{},id:195,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_virtual_devices:{autoIncrement:!0,defaults:{removalStatus:a.cast([0,1]),requiresHsmMigration:!1,virtualDeviceType:a.cast([0,1])},id:184,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},epd_cookie_settings:{autoIncrement:!1,defaults:{},id:163,indexes:{},primaryKey:{fields:[],ignoreNulls:[]}},experiences_shared_state:{autoIncrement:!1,defaults:{},id:282,indexes:{},primaryKey:{fields:["stateKey"],ignoreNulls:[]}},fb_events:{autoIncrement:!1,defaults:{},id:200,indexes:{},primaryKey:{fields:["eventId"],ignoreNulls:[]}},fb_transport_contacts:{autoIncrement:!0,defaults:{},id:240,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},feature_limits:{autoIncrement:!1,defaults:{},id:150,indexes:{},primaryKey:{fields:["type_"],ignoreNulls:[]}},filtered_messages_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:211,indexes:{},primaryKey:{fields:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"],ignoreNulls:[]}},filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:a.cast([0,0]),maxThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),minThreadKey:a.cast([0,0]),secondaryThreadRangeFilter:a.cast([0,0]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}},focus_mode_ctas:{autoIncrement:!1,defaults:{},id:30,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},folder_metadata:{autoIncrement:!1,defaults:{},id:35,indexes:{},primaryKey:{fields:["parentThreadKey"],ignoreNulls:[]}},forward_content:{autoIncrement:!1,defaults:{},id:129,indexes:{},primaryKey:{fields:["value","type_"],ignoreNulls:[]}},gdpr_settings:{autoIncrement:!1,defaults:{},id:75,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},gradient_colors:{autoIncrement:!1,defaults:{},id:117,indexes:{},primaryKey:{fields:["themeFbid","gradientIndex"],ignoreNulls:[]}},group_invitations_pending:{autoIncrement:!1,defaults:{communityJoinRequestStatus:a.cast([0,0]),communityParticipationControlRequestStatus:a.cast([0,0]),communityParticipationControlSetting:a.cast([0,0])},id:235,indexes:{},primaryKey:{fields:["linkHash"],ignoreNulls:[]}},group_invites:{autoIncrement:!1,defaults:{},id:197,indexes:{},primaryKey:{fields:["threadKey","inviterId","inviteeId"],ignoreNulls:[]}},group_membership_approval_requests:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:26,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},horizon_contact_info:{autoIncrement:!1,defaults:{},id:323,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_contact_info:{autoIncrement:!1,defaults:{e2eeEligibility:a.cast([0,0])},id:176,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:a.cast([0,0]),igDmSettingsTtlSec:a.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},ig_thread_labels:{autoIncrement:!1,defaults:{labelTimestampMs:a.cast([0,0])},id:318,indexes:{},primaryKey:{fields:["threadKey","labelType"],ignoreNulls:[]}},igd_xma_receiver_fetch:{autoIncrement:!1,defaults:{},id:316,indexes:{},primaryKey:{fields:["messageId"],ignoreNulls:[]}},in_thread_banner:{autoIncrement:!1,defaults:{},id:118,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},in_thread_banner_ctas:{autoIncrement:!1,defaults:{},id:119,indexes:{},primaryKey:{fields:["bannerId","ctaId"],ignoreNulls:[]}},in_thread_banner_overflow_menu:{autoIncrement:!1,defaults:{},id:120,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},inbox_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:a.cast([0,0]),minThreadKey:a.cast([0,0])},id:198,indexes:{},primaryKey:{fields:["syncGroup"],ignoreNulls:[]}},inbox_view_state:{autoIncrement:!1,defaults:{value:""},id:277,indexes:{},primaryKey:{fields:["interface_","configName"],ignoreNulls:[]}},inbox_view_state_v2:{autoIncrement:!1,defaults:{value:""},id:281,indexes:{},primaryKey:{fields:["configName"],ignoreNulls:[]}},lightspeed_task_context:{autoIncrement:!1,defaults:{requiresAuthentication:!1},id:306,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},linked_groups:{autoIncrement:!1,defaults:{},id:130,indexes:{threadKey:{fields:["threadKey"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},live_location_sharers:{autoIncrement:!1,defaults:{},id:149,indexes:{},primaryKey:{fields:["threadKey","userId"],ignoreNulls:[]}},local_message_persistence_store:{autoIncrement:!0,defaults:{},id:301,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_deleted_messages:{autoIncrement:!0,defaults:{},id:303,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_supplemental:{autoIncrement:!0,defaults:{},id:302,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_tag_index:{autoIncrement:!0,defaults:{},id:304,indexes:{offlineThreadingId:{fields:["offlineThreadingId","threadId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},m_suggestions:{autoIncrement:!1,defaults:{},id:21,indexes:{},primaryKey:{fields:["threadKey","timestampMs","suggestionId"],ignoreNulls:[]}},mailbox_metadata:{autoIncrement:!1,defaults:{},id:25,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mailbox_task_completion_api_tasks:{autoIncrement:!1,defaults:{},id:233,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},mailbox_task_completion_notification_context:{autoIncrement:!1,defaults:{},id:232,indexes:{},primaryKey:{fields:["notificationScopeKey"],ignoreNulls:[]}},media_send_jobs:{autoIncrement:!1,defaults:{},id:51,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},message_requests:{autoIncrement:!1,defaults:{},id:34,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},message_search_queries:{autoIncrement:!1,defaults:{},id:70,indexes:{},primaryKey:{fields:["type_","query","threadKeyV2"],ignoreNulls:[]}},message_search_results:{autoIncrement:!1,defaults:{},id:69,indexes:{},primaryKey:{fields:["type_","query","threadKey","globalIndex"],ignoreNulls:[]}},messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}},messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},messages_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1},id:13,indexes:{},primaryKey:{fields:["threadKey","minTimestampMs","minMessageId"],ignoreNulls:[]}},messages_status:{autoIncrement:!1,defaults:{timestampMs:a.cast([0,0])},id:33,indexes:{},primaryKey:{fields:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"],ignoreNulls:[]}},messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:a.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},messaging_settings:{autoIncrement:!1,defaults:{},id:83,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mi_act_mapping_table:{autoIncrement:!1,defaults:{},id:173,indexes:{chat_id:{fields:["clientThreadPk"],ignoreNulls:[]},fk_threads:{fields:["serverThreadKey"],ignoreNulls:[]},jid:{fields:["jid"],ignoreNulls:[]}},primaryKey:{fields:["serverThreadKey","clientThreadPk","jid"],ignoreNulls:[]}},msg_pinned_messages_v2:{autoIncrement:!1,defaults:{},id:205,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","pinnedTimestampMs"],ignoreNulls:[]}},msgr_quiet_time:{autoIncrement:!1,defaults:{},id:317,indexes:{quietTimeId:{fields:["quietTimeId"],ignoreNulls:[]}},primaryKey:{fields:["quietTimeId"],ignoreNulls:[]}},mwb_safety_interventions:{autoIncrement:!1,defaults:{},id:327,indexes:{},primaryKey:{fields:["interventionId","interventionEntId"],ignoreNulls:[]}},network_requests:{autoIncrement:!1,defaults:{},id:3,indexes:{},primaryKey:{fields:["taskQueueName","syncDatabaseId"],ignoreNulls:[]}},new_payment_credential_option:{autoIncrement:!1,defaults:{},id:90,indexes:{},primaryKey:{fields:["credentialType"],ignoreNulls:[]}},notification_settings:{autoIncrement:!1,defaults:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},id:175,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},offline_queue_thread_status:{autoIncrement:!1,defaults:{},id:295,indexes:{},primaryKey:{fields:["threadJid"],ignoreNulls:[]}},ohai_gateway_key_configs:{autoIncrement:!1,defaults:{},id:313,indexes:{},primaryKey:{fields:["keyId"],ignoreNulls:[]}},p2m_charge:{autoIncrement:!1,defaults:{},id:97,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice:{autoIncrement:!1,defaults:{},id:94,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice_attachment:{autoIncrement:!1,defaults:{},id:95,indexes:{},primaryKey:{fields:["orderId","productItemId"],ignoreNulls:[]}},p2p_request_v2:{autoIncrement:!1,defaults:{},id:100,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},p2p_transfer_v2:{autoIncrement:!1,defaults:{},id:101,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}},participant_list_queries:{autoIncrement:!1,defaults:{},id:219,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},participant_search_queries:{autoIncrement:!1,defaults:{},id:214,indexes:{},primaryKey:{fields:["query","threadKey"],ignoreNulls:[]}},participants:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),deliveredWatermarkTimestampMs:a.cast([0,0]),groupParticipantJoinState:a.cast([0,0]),readActionTimestampMs:a.cast([0,0]),readWatermarkTimestampMs:a.cast([0,0]),threadRoles:a.cast([0,0])},id:14,indexes:{contactIdThreadKey:{fields:["contactId","threadKey"],ignoreNulls:[]},threadKeyDeliveredWatermarkTimestampMs:{fields:["threadKey","deliveredWatermarkTimestampMs","contactId"],ignoreNulls:[]},threadKeyReadWatermarkTimestampMs:{fields:["threadKey","readWatermarkTimestampMs","contactId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},payment_auth_request_results:{autoIncrement:!1,defaults:{},id:108,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_client_auth_token:{autoIncrement:!1,defaults:{},id:107,indexes:{},primaryKey:{fields:["userId","deviceId","appId"],ignoreNulls:[]}},payment_method:{autoIncrement:!1,defaults:{},id:89,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_p2p_risk_verification:{autoIncrement:!1,defaults:{},id:98,indexes:{},primaryKey:{fields:["requestId","transactionId"],ignoreNulls:[]}},payment_pin_verification_results:{autoIncrement:!1,defaults:{},id:113,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_price_list_item:{autoIncrement:!1,defaults:{},id:96,indexes:{},primaryKey:{fields:["orderId","id"],ignoreNulls:[]}},payment_server_request_results:{autoIncrement:!1,defaults:{},id:109,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_transaction_v2:{autoIncrement:!1,defaults:{},id:99,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},payment_type_bank_v2:{autoIncrement:!1,defaults:{},id:88,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_type_card:{autoIncrement:!1,defaults:{},id:86,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_type_paypal:{autoIncrement:!1,defaults:{},id:85,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_user_auth:{autoIncrement:!1,defaults:{},id:106,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_eligibility:{autoIncrement:!1,defaults:{},id:92,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_ofac_blacklisted_countries:{autoIncrement:!1,defaults:{},id:93,indexes:{},primaryKey:{fields:["isoCountryCode"],ignoreNulls:[]}},payments_transaction_details_core:{autoIncrement:!1,defaults:{},id:103,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},payments_transaction_details_ctas:{autoIncrement:!1,defaults:{},id:104,indexes:{},primaryKey:{fields:["transactionId","ctaId"],ignoreNulls:[]}},payments_transaction_details_rows:{autoIncrement:!1,defaults:{},id:105,indexes:{},primaryKey:{fields:["transactionId","rowOrder"],ignoreNulls:[]}},paypal_funding_options:{autoIncrement:!1,defaults:{},id:91,indexes:{},primaryKey:{fields:["optionId"],ignoreNulls:[]}},pending_backups_context_v2:{autoIncrement:!0,defaults:{isInstamadillo:!1},id:177,indexes:{fk_pending_tasks:{fields:["pendingBackupTaskId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_fire_and_forget_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:a.cast([0,0]),priority:a.cast([0,0])},id:5,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:a.cast([0,0]),failureCount:a.cast([0,0]),firstExecutedTimestampMs:a.cast([0,0]),minTimeToSyncTimestampMs:a.cast([0,0]),pluginType:a.cast([0,0]),priority:a.cast([0,0]),taskDispatchPriority:a.cast([0,0])},id:2,indexes:{queueNameTaskId:{fields:["queueName","taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},persistent_menu_ctas:{autoIncrement:!1,defaults:{ctaType:"fallback"},id:251,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},persistent_menu_items:{autoIncrement:!1,defaults:{},id:77,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},pinned_messages_v2:{autoIncrement:!1,defaults:{},id:155,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},pinned_threads:{autoIncrement:!1,defaults:{},id:82,indexes:{pinnedTimestamp:{fields:["pinnedTimestamp","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},poll_options_v2:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:a.cast([0,0]),sortKeyVotingTimestamp:a.cast([0,0]),voteCount:a.cast([0,0])},id:39,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},poll_votes_v2:{autoIncrement:!1,defaults:{},id:40,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},polls:{autoIncrement:!1,defaults:{pollType:a.cast([0,0])},id:38,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},presence_settings:{autoIncrement:!1,defaults:{hasConvertedToViewSideSettings:!1,isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1},id:187,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},presence_states:{autoIncrement:!1,defaults:{},id:186,indexes:{statusContactId:{fields:["status","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId"],ignoreNulls:[]}},profile_sheet_information:{autoIncrement:!1,defaults:{},id:256,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},quick_reply_ctas:{autoIncrement:!1,defaults:{},id:20,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ranking_requests:{autoIncrement:!1,defaults:{},id:135,indexes:{},primaryKey:{fields:["scoreType"],ignoreNulls:[]}},ranking_scores:{autoIncrement:!1,defaults:{score:0,scoreIndex:a.cast([0,0])},id:134,indexes:{scoreTypeContactId:{fields:["scoreType","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId","scoreType"],ignoreNulls:[]}},reachability_settings:{autoIncrement:!1,defaults:{},id:148,indexes:{},primaryKey:{fields:["audience"],ignoreNulls:[]}},reaction_v2_types:{autoIncrement:!1,defaults:{},id:229,indexes:{},primaryKey:{fields:["reactionFbid"],ignoreNulls:[]}},reactions:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),reactionCreationTimestampMs:a.cast([0,0]),timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:8,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","actorId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","actorId"],ignoreNulls:[]}},reactions_v2:{autoIncrement:!1,defaults:{lastUpdatedTimestampMs:a.cast([0,0]),viewerReactionTimestampMs:a.cast([0,0])},id:226,indexes:{optimistic:{fields:["threadKey","messageId","reactionFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","reactionFbid","messageTimestamp"],ignoreNulls:[]}},reactions_v2_details:{autoIncrement:!1,defaults:{},id:239,indexes:{},primaryKey:{fields:["threadId","messageId","reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:243,indexes:{},primaryKey:{fields:["threadId","messageId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},reactions_v2_details_users:{autoIncrement:!1,defaults:{},id:227,indexes:{},primaryKey:{fields:["reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_users_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:228,indexes:{},primaryKey:{fields:["reactorId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},roll_call_contributions_v2:{autoIncrement:!1,defaults:{contributionSource:a.cast([0,0]),contributorId:a.cast([0,0])},id:255,indexes:{optimistic:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs","threadKey"],ignoreNulls:[]}},roll_calls:{autoIncrement:!1,defaults:{canViewWithoutContributing:!1,isBlurred:!1,viewerCanEditPrompt:!1,viewerHasContributed:!1},id:250,indexes:{},primaryKey:{fields:["rollCallId","threadKey"],ignoreNulls:[]}},room_participants:{autoIncrement:!1,defaults:{},id:64,indexes:{optimistic:{fields:["roomId","participantId"],ignoreNulls:[]}},primaryKey:{fields:["roomId","participantId","type_"],ignoreNulls:[]}},rooms:{autoIncrement:!1,defaults:{notificationMutedUntilMs:a.cast([0,0])},id:63,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["roomId"],ignoreNulls:[]}},rtc_call_events:{autoIncrement:!0,defaults:{isProcessed:!1},id:245,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},rtc_multiway_call_initiation_conference_names:{autoIncrement:!1,defaults:{},id:24,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_rooms_on_threads:{autoIncrement:!1,defaults:{},id:181,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_signals:{autoIncrement:!1,defaults:{},id:22,indexes:{},primaryKey:{fields:["timestampMs","type_"],ignoreNulls:[]}},saved_messages:{autoIncrement:!1,defaults:{},id:165,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},screen_time:{autoIncrement:!0,defaults:{},id:321,indexes:{},primaryKey:{fields:["recordId"],ignoreNulls:[]}},search_queries:{autoIncrement:!1,defaults:{surfaceType:a.cast([0,1])},id:67,indexes:{},primaryKey:{fields:["query","surfaceType"],ignoreNulls:[]}},secure_acs_blinded_tokens:{autoIncrement:!0,defaults:{},id:308,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_acs_configurations:{autoIncrement:!1,defaults:{},id:307,indexes:{},primaryKey:{fields:["configId"],ignoreNulls:[]}},secure_acs_tokens:{autoIncrement:!1,defaults:{},id:309,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_encrypted_backups_client_state:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),encryptionVersion:a.cast([0,0]),revisionVersion:a.cast([0,0])},id:168,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},secure_encrypted_backups_device_supported_versions:{autoIncrement:!1,defaults:{},id:192,indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},primaryKey:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},secure_encrypted_backups_devices:{autoIncrement:!1,defaults:{},id:191,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}},secure_encrypted_backups_generated_recovery_code:{autoIncrement:!1,defaults:{virtualDeviceType:a.cast([0,1])},id:174,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_encrypted_backups_message_thread_id_context:{autoIncrement:!1,defaults:{},id:180,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId","listId"],ignoreNulls:[]}},secure_encrypted_backups_recovery_code_status:{autoIncrement:!1,defaults:{},id:178,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_get_secrets_context:{autoIncrement:!1,defaults:{},id:259,indexes:{},primaryKey:{fields:["deviceRegistrationId"],ignoreNulls:[]}},secure_recovery_code_data:{autoIncrement:!1,defaults:{},id:179,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},self_profile:{autoIncrement:!1,defaults:{},id:81,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}},server_search_sections:{autoIncrement:!1,defaults:{},id:66,indexes:{},primaryKey:{fields:["query","globalIndex"],ignoreNulls:[]}},shared_album_contributions:{autoIncrement:!1,defaults:{creationTimestampMs:a.cast([0,0]),creatorId:a.cast([0,0])},id:280,indexes:{},primaryKey:{fields:["sharedAlbumId","sharedAlbumContributionId","threadKey","messageId"],ignoreNulls:[]}},shared_albums:{autoIncrement:!1,defaults:{contributionCount:a.cast([0,0]),lastActivityTimestampMs:a.cast([0,0])},id:279,indexes:{},primaryKey:{fields:["sharedAlbumId","threadKey"],ignoreNulls:[]}},shared_albums_multimedia_upload_jobs:{autoIncrement:!1,defaults:{},id:283,indexes:{},primaryKey:{fields:["offlineThreadingId"],ignoreNulls:[]}},shared_albums_multimedia_upload_subjobs_status:{autoIncrement:!1,defaults:{},id:284,indexes:{},primaryKey:{fields:["offlineThreadingId","jobId"],ignoreNulls:[]}},status:{autoIncrement:!1,defaults:{},id:62,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["statusId"],ignoreNulls:[]}},sticker_pack_details:{autoIncrement:!1,defaults:{},id:127,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_packs:{autoIncrement:!1,defaults:{},id:122,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_search_featured_tags:{autoIncrement:!1,defaults:{},id:125,indexes:{},primaryKey:{fields:["tagIndex"],ignoreNulls:[]}},sticker_search_queries:{autoIncrement:!1,defaults:{},id:124,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},sticker_search_results:{autoIncrement:!1,defaults:{},id:123,indexes:{},primaryKey:{fields:["resultIndex","query","type_"],ignoreNulls:[]}},sticker_store_pack_indices:{autoIncrement:!1,defaults:{},id:128,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_to_collection:{autoIncrement:!1,defaults:{},id:126,indexes:{},primaryKey:{fields:["stickerId","collectionId"],ignoreNulls:[]}},stickers:{autoIncrement:!1,defaults:{},id:121,indexes:{stickerPackId:{fields:["stickerPackId","stickerId"],ignoreNulls:[]}},primaryKey:{fields:["stickerId"],ignoreNulls:[]}},stories:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:54,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["storyId"],ignoreNulls:[]}},story_ad_card:{autoIncrement:!1,defaults:{},id:58,indexes:{},primaryKey:{fields:["adPosition","clientToken","cardId"],ignoreNulls:[]}},story_ad_ctas:{autoIncrement:!1,defaults:{},id:59,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},story_ad_unit:{autoIncrement:!1,defaults:{shouldShowAdChoice:!1},id:57,indexes:{},primaryKey:{fields:["adPosition","clientToken"],ignoreNulls:[]}},story_buckets:{autoIncrement:!1,defaults:{pageNum:a.cast([0,0]),readState:a.cast([0,0])},id:53,indexes:{optimistic:{fields:["ownerId","bucketType"],ignoreNulls:[]}},primaryKey:{fields:["bucketId"],ignoreNulls:[]}},story_buckets_paginated_queries:{autoIncrement:!1,defaults:{},id:61,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}},story_overlays:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:60,indexes:{},primaryKey:{fields:["storyId","storyOverlayId"],ignoreNulls:[]}},story_reactions:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:56,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["reactionId"],ignoreNulls:[]}},story_viewers:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),interactionType:a.cast([0,1])},id:55,indexes:{},primaryKey:{fields:["storyId","viewerContactId","interactionType"],ignoreNulls:[]}},supervision_edge:{autoIncrement:!1,defaults:{},id:319,indexes:{},primaryKey:{fields:["edgeId"],ignoreNulls:[]}},supervision_metadata:{autoIncrement:!1,defaults:{},id:320,indexes:{},primaryKey:{fields:["supervisionMetadataId"],ignoreNulls:[]}},support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}},sync_group_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:a.cast([0,0]),minThreadKey:a.cast([0,0])},id:220,indexes:{},primaryKey:{fields:["syncGroup","parentThreadKey"],ignoreNulls:[]}},sync_groups:{autoIncrement:!1,defaults:{canIgnoreTimestamp:!1,lastSyncCompletedTimestampMs:a.cast([0,0]),lastSyncRequestTimestampMs:a.cast([0,0]),minTimeToSyncTimestampMs:a.cast([0,0]),priority:a.cast([0,0]),sendSyncParams:!1,syncChannel:a.cast([0,1]),syncStatus:a.cast([0,0])},id:1,indexes:{},primaryKey:{fields:["groupId"],ignoreNulls:[]}},taken_down_threads:{autoIncrement:!1,defaults:{},id:212,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},third_party_id_store:{autoIncrement:!1,defaults:{},id:242,indexes:{},primaryKey:{fields:["platform"],ignoreNulls:[]}},thread_bans:{autoIncrement:!1,defaults:{},id:297,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},thread_creation_status:{autoIncrement:!1,defaults:{},id:278,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:a.cast([0,0])},id:237,indexes:{},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}},thread_labels:{autoIncrement:!1,defaults:{},id:215,indexes:{},primaryKey:{fields:["labelId"],ignoreNulls:[]}},thread_limits:{autoIncrement:!1,defaults:{},id:287,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate:{autoIncrement:!1,defaults:{ctaType:a.cast([0,0]),privacyTextCtaType:a.cast([0,0])},id:28,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate_ctas:{autoIncrement:!1,defaults:{},id:29,indexes:{threadKeyCtaId:{fields:["threadKey","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},thread_point_query_ttrc:{autoIncrement:!1,defaults:{},id:286,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:183,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_seen_heads_queries:{autoIncrement:!1,defaults:{},id:325,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_themes:{autoIncrement:!1,defaults:{backgroundUrl:"",iconUrl:"",iconUrlFallback:"",isDeprecated:!1},id:116,indexes:{},primaryKey:{fields:["fbid"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),capabilities4:a.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),ongoingCallState:a.cast([0,0]),readReceiptsDisabledV2:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),unreadDisappearingMessageCount:a.cast([0,0]),unsendLimitMs:a.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_optimistic_context:{autoIncrement:!1,defaults:{},id:32,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},threads_optimistic_metadata:{autoIncrement:!1,defaults:{},id:312,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:a.cast([0,0]),maxThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),minThreadKey:a.cast([0,0])},id:10,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"],ignoreNulls:[]}},transaction_history:{autoIncrement:!1,defaults:{timestampMs:a.cast([0,0])},id:102,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},typing_indicator:{autoIncrement:!1,defaults:{},id:52,indexes:{},primaryKey:{fields:["threadKey","senderId"],ignoreNulls:[]}},universal_search_recent_searches:{autoIncrement:!1,defaults:{lastAccessedTimestampMs:a.cast([0,0])},id:68,indexes:{},primaryKey:{fields:["resultId"],ignoreNulls:[]}},user_visible_errors:{autoIncrement:!0,defaults:{},id:6,indexes:{},primaryKey:{fields:["errorId"],ignoreNulls:[]}},user_visible_network_connectivity_error:{autoIncrement:!0,defaults:{},id:115,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},value_model_features:{autoIncrement:!1,defaults:{},id:137,indexes:{},primaryKey:{fields:["feature"],ignoreNulls:[]}},value_model_output:{autoIncrement:!1,defaults:{},id:138,indexes:{},primaryKey:{fields:["product","contactId"],ignoreNulls:[]}},value_model_rules:{autoIncrement:!1,defaults:{},id:136,indexes:{},primaryKey:{fields:["product","ruleIndex"],ignoreNulls:[]}},video_chat_links_attempted_joiners:{autoIncrement:!1,defaults:{},id:79,indexes:{},primaryKey:{fields:["userId","url"],ignoreNulls:[]}},video_chat_links_joining:{autoIncrement:!1,defaults:{canAnonymousUsersJoin:!1},id:78,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["url","optimisticClientToken"],ignoreNulls:[]}},work_contact_info:{autoIncrement:!1,defaults:{},id:210,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},work_genai:{autoIncrement:!1,defaults:{},id:293,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},workroom_creation_requests:{autoIncrement:!1,defaults:{},id:252,indexes:{},primaryKey:{fields:["creationId"],ignoreNulls:[]}},workroom_invites:{autoIncrement:!1,defaults:{},id:257,indexes:{},primaryKey:{fields:["inviteId"],ignoreNulls:[]}},workrooms_co_presence_states:{autoIncrement:!1,defaults:{},id:246,indexes:{userCoPresence:{fields:["userId","coPresenceObjectId"],ignoreNulls:[]}},primaryKey:{fields:["userId"],ignoreNulls:[]}}});var e=Object.freeze(babelHelpers.extends({},b,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),f=Object.freeze(babelHelpers.extends({},e,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),g=Object.freeze(babelHelpers.extends({},f,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{fetchTimestamp:{fields:["fetchTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),h=Object.freeze(babelHelpers.extends({},g,{messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),i=Object.freeze(babelHelpers.extends({},h,{auto_restore_opt_out:{autoIncrement:!1,defaults:{},id:330,indexes:{},primaryKey:{fields:["optOutKey"],ignoreNulls:[]}}})),j=Object.freeze(babelHelpers.extends({},i,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),k=Object.freeze(babelHelpers.extends({},j,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:a.cast([-1,4294967295]),status:a.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},messenger_fts_threads_queries:{autoIncrement:!1,defaults:{sessionId:""},id:332,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}}})),l=Object.freeze(babelHelpers.extends({},k,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:a.cast([-1,4294967295]),status:a.cast([0,0]),threadType:a.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}}})),m=Object.freeze(babelHelpers.extends({},l,{filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:a.cast([0,0]),maxThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),minThreadKey:a.cast([0,0]),secondaryThreadRangeFilter:a.cast([0,0]),syncGroup:a.cast([0,1]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}}})),n=Object.freeze(babelHelpers.extends({},m,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),o=Object.freeze(babelHelpers.extends({},n,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),p=Object.freeze(babelHelpers.extends({},o,{media_receiver_fetch_transport_mappings:{autoIncrement:!1,defaults:{},id:333,indexes:{},primaryKey:{fields:["receiverFetchId"],ignoreNulls:[]}}})),q=Object.freeze(babelHelpers.extends({},p,{threads:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),capabilities4:a.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),ongoingCallState:a.cast([0,0]),readReceiptsDisabledV2:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),unreadDisappearingMessageCount:a.cast([0,0]),unsendLimitMs:a.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),r=Object.freeze(babelHelpers.extends({},q,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),s=Object.freeze(babelHelpers.extends({},r,{attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),t=Object.freeze(babelHelpers.extends({},s,{client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}}})),u=Object.freeze(babelHelpers.extends({},t,{pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}}})),v=Object.freeze(babelHelpers.extends({},u,{threads:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),capabilities4:a.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),ongoingCallState:a.cast([0,0]),readReceiptsDisabledV2:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),unreadDisappearingMessageCount:a.cast([0,0]),unsendLimitMs:a.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),w=Object.freeze(babelHelpers.extends({},v,{contacts:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),blockedByViewerStatus:a.cast([0,0]),canViewerMessage:!0,capabilities2:a.cast([0,0]),contactReachabilityStatusType:a.cast([0,0]),contactType:a.cast([0,0]),contactTypeExact:a.cast([0,0]),gender:a.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:a.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:a.cast([0,0]),rank:0,restrictionType:a.cast([0,0]),waConnectStatus:a.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),x=Object.freeze(babelHelpers.extends({},w,{encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}}})),y=Object.freeze(babelHelpers.extends({},x,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),z=Object.freeze(babelHelpers.extends({},y,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),A=Object.freeze(babelHelpers.extends({},z,{account_synced_fields:{autoIncrement:!1,defaults:{},id:334,indexes:{},primaryKey:{fields:["accountId","syncedField"],ignoreNulls:[]}}})),B=Object.freeze(babelHelpers.extends({},A,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),C=Object.freeze(babelHelpers.extends({},B,{encrypted_backup_user_preferences:{autoIncrement:!0,defaults:{},id:335,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),D=Object.freeze(babelHelpers.extends({},C,{support_translation_feedback:{autoIncrement:!1,defaults:{},id:336,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),E=Object.freeze(babelHelpers.extends({},D,{support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),F=Object.freeze(babelHelpers.extends({},E,{ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:a.cast([0,0]),igDmSettingsTtlSec:a.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),G=Object.freeze(babelHelpers.extends({},F,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),H=Object.freeze(babelHelpers.extends({},G,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),I=Object.freeze(babelHelpers.extends({},H,{threads:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),capabilities4:a.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),ongoingCallState:a.cast([0,0]),readReceiptsDisabledV2:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),typingIndicatorDisabled:a.cast([0,0]),unreadDisappearingMessageCount:a.cast([0,0]),unsendLimitMs:a.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),J=Object.freeze(babelHelpers.extends({},I,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),K=Object.freeze(babelHelpers.extends({},J,{admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:a.cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}}})),L=Object.freeze(babelHelpers.extends({},K,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,isVideoQuickSend:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),M=Object.freeze(babelHelpers.extends({},L,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),N=Object.freeze(babelHelpers.extends({},M,{threads:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),capabilities4:a.cast([0,0]),capabilities5:a.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),ongoingCallState:a.cast([0,0]),readReceiptsDisabledV2:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),typingIndicatorDisabled:a.cast([0,0]),unreadDisappearingMessageCount:a.cast([0,0]),unsendLimitMs:a.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),O=Object.freeze(babelHelpers.extends({},N,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),P=Object.freeze(babelHelpers.extends({},O,{messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeHdMediaEnabled:!1,e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:a.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}}})),Q=Object.freeze(babelHelpers.extends({},P,{media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}}})),R=Object.freeze(babelHelpers.extends({},Q,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),S=Object.freeze(babelHelpers.extends({},R,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),T=Object.freeze(babelHelpers.extends({},S,{community_folders:{autoIncrement:!1,defaults:{capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),inviteStatus:a.cast([0,0]),notificationMutedUntil:a.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}}})),U=Object.freeze(babelHelpers.extends({},T,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),V=Object.freeze(babelHelpers.extends({},U,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),W=Object.freeze(babelHelpers.extends({},V,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}})),X=Object.freeze(babelHelpers.extends({},W,{horizon_groups_key_mapping:{autoIncrement:!1,defaults:{},id:338,indexes:{},primaryKey:{fields:["threadKey","groupKey"],ignoreNulls:[]}}})),Y=Object.freeze(babelHelpers.extends({},X,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),Z=Object.freeze(babelHelpers.extends({},Y,{rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),capabilities4:a.cast([0,0]),capabilities5:a.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),ongoingCallState:a.cast([0,0]),readReceiptsDisabledV2:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),typingIndicatorDisabled:a.cast([0,0]),unreadDisappearingMessageCount:a.cast([0,0]),unsendLimitMs:a.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),$=Object.freeze(babelHelpers.extends({},Z,{horizon_party_members:{autoIncrement:!1,defaults:{},id:339,indexes:{},primaryKey:{fields:["partyKey","userId"],ignoreNulls:[]}}})),da=Object.freeze(babelHelpers.extends({},$,{thread_theme_search_queries:{autoIncrement:!1,defaults:{},id:340,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},thread_theme_search_results:{autoIncrement:!1,defaults:{},id:341,indexes:{},primaryKey:{fields:["resultIndex","query"],ignoreNulls:[]}}})),ea=Object.freeze(babelHelpers.extends({},da,{client_media_status:{autoIncrement:!1,defaults:{},id:342,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}}})),fa=Object.freeze(babelHelpers.extends({},ea,{secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}}})),ga=Object.freeze(babelHelpers.extends({},fa,{contacts:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),blockedByViewerStatus:a.cast([0,0]),canViewerMessage:!0,capabilities2:a.cast([0,0]),contactReachabilityStatusType:a.cast([0,0]),contactType:a.cast([0,0]),contactTypeExact:a.cast([0,0]),friendshipStatus:a.cast([0,5]),gender:a.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:a.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:a.cast([0,0]),rank:0,restrictionType:a.cast([0,0]),waConnectStatus:a.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),ha=Object.freeze(babelHelpers.extends({},ga,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ia=Object.freeze(babelHelpers.extends({},ha,{encrypted_backups_reenrollment_trigger:{autoIncrement:!0,defaults:{},id:343,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),ja=Object.freeze(babelHelpers.extends({},ia,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:a.cast([0,0]),attachmentType:a.cast([0,0]),authorityLevel:a.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ka=Object.freeze(babelHelpers.extends({},ja,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),la=Object.freeze(babelHelpers.extends({},ka,{thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:a.cast([0,0])},id:237,indexes:{labelId:{fields:["labelId","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}}})),ma=Object.freeze(babelHelpers.extends({},la,{messages:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:a.cast([0,0]),primarySortKey:a.cast([0,0]),quickReplyType:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),replyStatus:a.cast([0,0]),secondarySortKey:a.cast([0,0]),sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),textHasLinks:!1,timestampMs:a.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:a.cast([0,0]),viewFlags:a.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),na=Object.freeze(babelHelpers.extends({},ma,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),oa=Object.freeze(babelHelpers.extends({},na,{pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),pa=Object.freeze(babelHelpers.extends({},oa,{threads:{autoIncrement:!1,defaults:{authorityLevel:a.cast([0,0]),capabilities:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0]),capabilities4:a.cast([0,0]),capabilities5:a.cast([0,0]),disableComposerInput:!1,draftMessage:"",hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),ongoingCallState:a.cast([0,0]),readReceiptsDisabledV2:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),typingIndicatorDisabled:a.cast([0,0]),unreadDisappearingMessageCount:a.cast([0,0]),unsendLimitMs:a.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),qa=Object.freeze(babelHelpers.extends({},pa,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}}));c=Object.freeze({afterUpgrade:d("LSDbV1.upgrade").afterUpgrade,revision:63,tables:qa,upgrade:{1:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(e),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},2:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(f),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},3:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(g),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1)},4:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(h),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},5:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(i),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},6:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(j),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},7:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(k),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},8:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(l),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},9:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(m),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},10:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(n),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},11:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(o),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},12:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(p),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},13:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(q),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},14:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(r),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},15:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(s),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},16:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(t),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},17:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(u),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},18:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(v),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},19:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(w),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},20:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(x),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},21:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(y),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},22:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(z),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},23:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(A),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},24:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(B),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},25:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(C),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},26:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(D),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},27:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(E),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},28:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(F),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},29:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(G),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},30:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(H),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},31:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(I),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},32:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(J),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1)},33:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(K),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},34:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(L),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},35:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(M),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},36:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(N),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},37:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(O),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},38:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(P),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},39:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(Q),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},40:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(R),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1)},41:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(S),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},42:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(T),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},43:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(U),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1)},44:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(V),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},45:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(W),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},46:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(X),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},47:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(Y),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},48:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(Z),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},49:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData($),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},50:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(da),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},51:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(ea),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},52:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(fa),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},53:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(ga),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},54:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(ha),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},55:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(ia),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1);await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},56:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(ja),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},57:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(ka),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},58:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(la),c=b.defaults;b=b.tableData;await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(a,b,c,!1)},59:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(ma),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},60:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(na),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},61:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(oa),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},62:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(pa),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)},63:async function(a){var b=d("ReStoreVersionedSchemaProviderUtil").getTableData(qa),c=b.defaults;b=b.tableData;await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(a.transaction,b,!1,c)}}});ca.LSDbV1=c}),98);
__d("ReStoreDbVersion",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function b(a){return a}function d(a,b){if(b in a)return a[b];throw c("FBLogger")("restore_db_migrations").mustfixThrow("Cannot find version: %s",b)}g.cast=a;g.uncast=b;g.castVersion=d}),98);
__d("LSDb",["LSDbV1","ReStoreDbVersion","justknobx"],(function(a,b,c,d,e,f,g){"use strict";a=Object.freeze({V1:d("ReStoreDbVersion").cast("V1")});e={targetVersion:d("ReStoreDbVersion").castVersion(a,"V"+((b=c("justknobx")._("2392"))!=null?b:0)),versions:{V1:d("LSDbV1").LSDbV1},legacyVersions:{},versionOrder:["V1"]};g.LSDbVersion=a;g.Versions=e}),98);
__d("LSDbForeignKeys",[],(function(a,b,c,d,e,f){"use strict";a={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],community_chat_poll_options:[{tableName:"community_chat_poll_votes"}],community_chat_polls:[{tableName:"community_chat_poll_options"},{tableName:"community_chat_poll_votes"}],data_trace_meta:[{indexName:"traceIdAddonId",tableName:"data_trace_addon"}],messages:[{indexName:"fk_messages",tableName:"attachments"},{indexName:"fk_messages",tableName:"reactions"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"},{tableName:"messages_optimistic_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"attachments_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"},{tableName:"group_invites"}]};b=a;f["default"]=b}),66);
__d("MAWDbVersionList",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}b={V21:21,V22:22,V23:23,V24:24,V25:25,V26:26,V27:27,V28:28,V29:29,V30:30,V31:31,V32:32,V33:33,V34:34,V35:35,V36:36,V37:37,V38:38,V39:39,V40:40,V41:41,V42:42,V43:43,V44:44,V45:45,V46:46,V47:47,V48:48,V49:49,V50:50,V51:51,V52:52,V53:53,V54:54,V55:55,V56:56,V57:57,V58:58,V59:59,V60:60,V61:61,V62:62,V63:63,V64:64,V65:65,V66:66,V67:67,V68:68,V69:69,V70:70,V71:71,V72:72,V73:73,V74:74,V75:75,V76:76,V77:77,V78:78,V79:79,V80:80,V81:81,V82:82,V83:83,V84:84,V85:85,V86:86,V87:87,V88:88,V89:89,V90:90,V91:91,V92:92,V93:93,V94:94,V95:95,V96:96,V97:97,V98:98,V99:99,V100:100,V101:101,V102:102,V103:103,V104:104,V105:105,V106:106,V107:107,V108:108,V109:109,V110:110,V111:111,V112:112,V113:113,V114:114,V115:115,V116:116,V117:117,V118:118,V119:119,V120:120,V121:121,V122:122,V123:123,V124:124,V125:125,V126:126};f.toVersion=a;f.VERSION=b}),66);
__d("MAWDbSchema",["MAWDbVersionList"],(function(a,b,c,d,e,f,g){"use strict";a=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"]}},name:"e2ee_appData",primaryKey:["appDataId"]},{autoIncrement:!1,indexes:{},name:"e2ee_appMeta",primaryKey:["key"]},{autoIncrement:!1,indexes:{},name:"e2ee_tasks",primaryKey:["taskName"]},{autoIncrement:!1,indexes:{},name:"e2ee_personalSenderKeyStatuses",primaryKey:["groupJid"]},{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_receipts",primaryKey:["msgId"]},{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_media",primaryKey:["mediaId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_chunk",primaryKey:["chunkId"]},{autoIncrement:!0,indexes:{jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]},{autoIncrement:!1,indexes:{},name:"e2ee_existingUsers",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_pendingReceipts",primaryKey:["id"]},{autoIncrement:!0,indexes:{version:{columns:["version"]}},name:"e2ee_browserEncryptionMeta",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}];b=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}];c=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}];e=[{autoIncrement:!0,indexes:{},name:"e2ee_isDualSend",primaryKey:["rowId"]}];f=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeSecretKey",primaryKey:["key"]}];var h=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],i=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],j=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId"]}],k=[{autoIncrement:!0,indexes:{deleteTs:{columns:["deleteTs"],unique:!1},externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]}],l=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"]},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"]}},name:"e2ee_media",primaryKey:["mediaId"]}],m=[{autoIncrement:!0,indexes:{},name:"e2ee_dualSendMedia",primaryKey:["id"]}],n=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],o=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeData",primaryKey:["rowId"]}],p=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},externalId:{columns:["externalId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],q=[{autoIncrement:!0,indexes:{},name:"e2ee_dyiBatch",primaryKey:["batchId"]}],r=[{autoIncrement:!1,indexes:{correspondingOpenThreadKey:{columns:["correspondingOpenThreadKey"],unique:!1},threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],s=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"],removed:!0}],t=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],u=[{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],v=[{autoIncrement:!1,indexes:{"[modelId+modelType+actionState]":{columns:["modelId","modelType","actionState"],unique:!1},action:{columns:["action"],unique:!1},actionState:{columns:["actionState"],unique:!1},collection:{columns:["collection"],unique:!1},indexMac:{columns:["indexMac"],unique:!1}},name:"e2ee_syncActions",primaryKey:["index"]}],w=[{autoIncrement:!1,indexes:{},name:"e2ee_missingKeys",primaryKey:["keyHex"]}],x=[{autoIncrement:!0,indexes:{action:{columns:["action"],unique:!1},collection:{columns:["collection"],unique:!1},index:{columns:["index"],unique:!1}},name:"e2ee_pendingMutations",primaryKey:["id"]}],y=[{autoIncrement:!0,indexes:{collection:{columns:["collection"]}},name:"e2ee_collectionVersions",primaryKey:["id"]}],z=[{autoIncrement:!0,indexes:{keyEpoch:{columns:["keyEpoch"],unique:!1},keyId:{columns:["keyId"]}},name:"e2ee_syncKeys",primaryKey:["id"]}],A=[],B=[{autoIncrement:!1,indexes:{externalId:{columns:["externalId"],unique:!1},lastRetryTs:{columns:["lastRetryTs"],unique:!1},traceId:{columns:["traceId"],unique:!1}},name:"e2ee_uploadRetryStatus",primaryKey:["externalId","lastRetryTs"]}],C=[{autoIncrement:!0,indexes:{jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],D=[{autoIncrement:!0,indexes:{},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]}],E=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"]}],F=[{autoIncrement:!0,indexes:{deduplicationKey:{columns:["deduplicationKey"],predicate:function(a){return a.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],G=[{autoIncrement:!0,indexes:{mediaId:{columns:["mediaId"],unique:!1},msgId:{columns:["msgId"],unique:!1},objectId:{columns:["objectId"]}},name:"e2ee_mediaBackup",primaryKey:["mediaBackupId"]}],H=[{autoIncrement:!0,indexes:{authoritativeThreadKey:{columns:["authoritativeThreadKey"]},deduplicationKey:{columns:["deduplicationKey"],predicate:function(a){return a.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],I=[{autoIncrement:!0,indexes:{"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],J=[{autoIncrement:!0,indexes:{originalMsgExternalId:{columns:["originalMsgExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],K=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"],removed:!0},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"],removed:!0},{autoIncrement:!0,indexes:{},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],L=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],M=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],N=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],O=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],P=[],Q=[{autoIncrement:!0,indexes:{},name:"e2ee_danglingQueue",primaryKey:["queueId"]}],R=[{autoIncrement:!0,indexes:{dbVersion:{columns:["dbVersion"],unique:!1}},name:"e2ee_staleQueue",primaryKey:["staleQueueId"]}],S=[{autoIncrement:!0,indexes:{"[offlineThreadingId+backupActionType]":{columns:["offlineThreadingId","backupActionType"],unique:!1},"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},offlineThreadingId:{columns:["offlineThreadingId"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],T=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]}],U=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],V=[{autoIncrement:!0,indexes:{},name:"e2ee_pendingMessageStanzaQueue",primaryKey:["pendingMessageStanzaQueueId"]}],W=[{autoIncrement:!0,indexes:{author:{columns:["author"],unique:!1},chat:{columns:["chat"],unique:!1},externalId:{columns:["externalId"],unique:!1}},name:"e2ee_deletedMessages",primaryKey:["rowId"]}],X=[{autoIncrement:!0,indexes:{threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_ebMsgRanges",primaryKey:["rangeId"]}],Y=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1},threadJid:{columns:["threadJid","inviteeJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],Z=[{autoIncrement:!1,indexes:{waMsgId:{columns:["waMsgId"]}},name:"e2ee_receipts",primaryKey:["msgId"]}],$=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],aa=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ba=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(a){return a.serverTs!=null},unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ca=[{autoIncrement:!1,dexieOnly_primaryKeyUnique:!0,indexes:{ts:{columns:["ts"],unique:!1}},name:"e2ee_sentBytesCache",primaryKey:["waMsgId"]}],da=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(a){return a.serverTs!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ea=[{autoIncrement:!0,indexes:{"[originalMsgExternalId+threadJid]":{columns:["originalMsgExternalId","threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],fa=[{autoIncrement:!0,indexes:{deviceJid:{columns:["deviceJid"],unique:!1},displayOrder:{columns:["isArchived","ts"],unique:!1},isConfirmedActionTs:{columns:["isConfirmed","action","ts"],unique:!1},isNotifiedTs:{columns:["isNotified","ts"],unique:!1}},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],ga=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],ha=[{autoIncrement:!1,indexes:{},name:"e2ee_ephemeralSettings",primaryKey:["userJid"]}],ia=[{autoIncrement:!1,indexes:{ebClientRequired:{columns:["ebClientRequired","timestampMs"],unique:!1},restorable:{columns:["restorable","timestampMs"],unique:!1}},name:"e2ee_ebMessageRestoreTasks",primaryKey:["messageId"]}],ja=[{autoIncrement:!1,indexes:{},name:"e2ee_igMessageAuxiliaryInfo",primaryKey:["messageId"]}],ka=[{autoIncrement:!1,indexes:{plaintextHash:{columns:["plaintextHash"],unique:!1}},name:"e2ee_mediaKeys",primaryKey:["ciphertextHash"]}],la=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],ma=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],na=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],oa=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]}],pa=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeBacklog",primaryKey:["externalId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeThreadBacklog",primaryKey:["chatJid"]}],qa=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ra=[{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],sa=[{autoIncrement:!0,indexes:{fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],ta=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"],removed:!0}],ua=[{autoIncrement:!1,indexes:{},name:"e2ee_uploadRetryStatus",primaryKey:[],removed:!0}],va=[{autoIncrement:!1,indexes:{},name:"e2ee_receiverFetchInfo",primaryKey:["receiverFetchId"]}],wa=[{autoIncrement:!0,indexes:{"[threadJid+ts]":{columns:["threadJid","ts"],unique:!1},externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},ts:{columns:["ts"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]}],xa=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],ya=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(a){return a.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],za=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(a){return a.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Aa=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(a){return a.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Ba=[{autoIncrement:!0,indexes:{version:{columns:["version"],unique:!0}},name:"e2ee_encryptionMetaV3",primaryKey:["id"]}],Ca=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(a){return a.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages_deduped",primaryKey:["rowId"]}],Da=[{autoIncrement:!1,indexes:{},name:"e2ee_poll",primaryKey:["chatJid","pollStanzaId"]}],Ea=[{autoIncrement:!0,indexes:{"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(a){return a.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(a){return a.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Fa=[{autoIncrement:!0,indexes:{"[threadJid+collapsibleId+sortOrderMs]":{columns:["threadJid","collapsibleId","sortOrderMs"],unique:!1},"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(a){return a.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(a){return a.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Ga=[{autoIncrement:!1,indexes:{},name:"e2ee_messages_deduped",primaryKey:[],removed:!0}];a=new Map([[(d=d("MAWDbVersionList")).VERSION.V21,a],[d.VERSION.V22,b],[d.VERSION.V23,c],[d.VERSION.V24,e],[d.VERSION.V25,f],[d.VERSION.V30,h],[d.VERSION.V31,i],[d.VERSION.V32,j],[d.VERSION.V33,k],[d.VERSION.V34,l],[d.VERSION.V35,m],[d.VERSION.V36,n],[d.VERSION.V37,o],[d.VERSION.V38,p],[d.VERSION.V39,q],[d.VERSION.V40,r],[d.VERSION.V41,s],[d.VERSION.V42,t],[d.VERSION.V45,u],[d.VERSION.V48,v],[d.VERSION.V49,w],[d.VERSION.V50,x],[d.VERSION.V51,y],[d.VERSION.V52,z],[d.VERSION.V57,A],[d.VERSION.V59,B],[d.VERSION.V61,C],[d.VERSION.V62,D],[d.VERSION.V63,E],[d.VERSION.V64,F],[d.VERSION.V65,G],[d.VERSION.V67,H],[d.VERSION.V69,I],[d.VERSION.V70,J],[d.VERSION.V73,K],[d.VERSION.V74,L],[d.VERSION.V75,M],[d.VERSION.V77,N],[d.VERSION.V78,O],[d.VERSION.V79,P],[d.VERSION.V80,Q],[d.VERSION.V81,R],[d.VERSION.V83,S],[d.VERSION.V84,T],[d.VERSION.V85,U],[d.VERSION.V86,V],[d.VERSION.V88,W],[d.VERSION.V89,X],[d.VERSION.V90,Y],[d.VERSION.V91,Z],[d.VERSION.V92,$],[d.VERSION.V93,aa],[d.VERSION.V94,ba],[d.VERSION.V95,ca],[d.VERSION.V96,da],[d.VERSION.V97,ea],[d.VERSION.V98,fa],[d.VERSION.V99,ga],[d.VERSION.V100,ha],[d.VERSION.V102,ia],[d.VERSION.V103,ja],[d.VERSION.V104,ka],[d.VERSION.V105,la],[d.VERSION.V106,ma],[d.VERSION.V107,na],[d.VERSION.V108,oa],[d.VERSION.V109,pa],[d.VERSION.V110,qa],[d.VERSION.V111,ra],[d.VERSION.V112,sa],[d.VERSION.V113,ta],[d.VERSION.V114,ua],[d.VERSION.V115,va],[d.VERSION.V116,wa],[d.VERSION.V117,xa],[d.VERSION.V118,ya],[d.VERSION.V119,za],[d.VERSION.V120,Aa],[d.VERSION.V121,Ba],[d.VERSION.V122,Ca],[d.VERSION.V123,Da],[d.VERSION.V124,Ea],[d.VERSION.V125,Fa],[d.VERSION.V126,Ga]]);b=["messages","unrenderedMessages","groupInfo","receipts","pendingReceipts","threads","participants","tasks","personalSenderKeyStatuses","appData","appMeta","chunk","mediaBackup","media","reactions","groupInvites","dyiBatch","syncActions","missingKeys","pendingMutations","collectionVersions","syncKeys","deviceChangeAlerts","xma","editMsgHistory","deletedMessages","ebMsgRanges","receiverFetchInfo","poll"];g.dbSchema=a;g.TABLES_TO_ENCRYPT=b}),98);
__d("MAWGetDbVersion",["MAWDbVersionList","justknobx","objectValues"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(){return h!=null?h:d("MAWDbVersionList").toVersion(c("justknobx")._("1716"))}function b(a){if(!c("justknobx")._("1495"))return;if(a==null){h=null;return h}if(a==="current"){h=null;return h}var b=Math.max.apply(Math,c("objectValues")(d("MAWDbVersionList").VERSION));if(a==="latest"){h=d("MAWDbVersionList").toVersion(b);return h}if(!Number.isInteger(a))return h;if(a<0){h=d("MAWDbVersionList").toVersion(b+a);return h}h=d("MAWDbVersionList").toVersion(a)}g.getArmadilloDbVersion=a;g.setArmadilloDbVersionForTest=b}),98);
__d("MAWDbSchema.restore",["MAWDbSchema","MAWGetDbVersion","objectEntries","sortBy"],(function(a,b,c,d,e,f,g){"use strict";a={e2ee_appData:!0,e2ee_appMeta:!0,e2ee_browserEncryptionMeta:!0,e2ee_chunk:!0,e2ee_collectionVersions:!0,e2ee_deletedMessages:!0,e2ee_deviceChangeAlerts:!0,e2ee_dyiBatch:!0,e2ee_ebMessageRestoreTasks:!0,e2ee_ebMsgRanges:!0,e2ee_ebUploadQueue:!0,e2ee_editMsgHistory:!0,e2ee_encryptionMetaV3:!0,e2ee_ephemeralSettings:!0,e2ee_existingUsers:!0,e2ee_ftsBackloggedMessages:!0,e2ee_ftsEncryptionMeta:!0,e2ee_ftsIndexV3:!0,e2ee_ftsPurgeBacklog:!0,e2ee_ftsPurgeThreadBacklog:!0,e2ee_groupInfo:!0,e2ee_groupInvites:!0,e2ee_historySyncQRCodeData:!0,e2ee_historySyncQRCodeSecretKey:!0,e2ee_igMessageAuxiliaryInfo:!0,e2ee_media:!0,e2ee_mediaBackup:!0,e2ee_messages:!0,e2ee_missingKeys:!0,e2ee_participants:!0,e2ee_pendingMessageStanzaQueue:!0,e2ee_pendingMutations:!0,e2ee_pendingReceipts:!0,e2ee_pendingStanzas:!0,e2ee_poll:!0,e2ee_reactions:!0,e2ee_receiverFetchInfo:!0,e2ee_syncActions:!0,e2ee_syncKeys:!0,e2ee_threads:!0,e2ee_unrenderedMessages:!0,e2ee_xma:!0};function h(a){var b=Object.fromEntries(c("objectEntries")(a.indexes).filter(function(a){a=a[1];return a.multiEntry_DO_NOT_USE!==!0}).map(function(b){var c=b[0];b=b[1];return[c,{columns:[].concat(b.columns,b.unique!==!1?[]:a.primaryKey),predicate:b.predicate}]}));b={auto_increment:a.autoIncrement===!0,indexes:b,name:a.name,primary_key:a.primaryKey};return b}var i=c("sortBy")(Array.from(d("MAWDbSchema").dbSchema.entries()),function(a){a=a[0];return a}).map(function(a){var b=a[0];a=a[1];return{schema:a,version:b}});b=function(a){return Array.from(i.filter(function(b){return b.version<=a&&b.schema!=null}).reduce(function(a,b){(b=b.schema)==null||b.forEach(function(b){if(b.removed===!0){a["delete"](b.name);return}a.set(b.name,h(b))});return a},new Map()).values())};e=b(d("MAWGetDbVersion").getArmadilloDbVersion());g.msgrDbStores=a;g.getSchemaForVersion=b;g.clientSchema=e}),98);
__d("LSDbSchema",["MAWDbSchema.restore"],(function(a,b,c,d,e,f){"use strict";a=importNamespace("MAWDbSchema.restore").clientSchema;f.clientSchema=a}),66);
__d("ReStoreVersionedSchemaProvider",["FBLogger","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata","ReStoreVersionedSchemaProviderUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.defaults={};this.$1="";this.$1=a;this.$2=b;a=b.versions[b.targetVersion];b=d("ReStoreVersionedSchemaProviderUtil").getTableData(a.tables,c);a=b.defaults;c=b.tableData;this.tableNames=c.tableNames;this.tableIds=c.tableIds;this.defaults=a}var b=a.prototype;b.$3=async function(a,b){var c,e;(c=b.loggers.logHistory)==null||c.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from scratch...");(c=b.loggers.userFlow)==null||c.addPoint(this.$1+"_migration_versioned_from_scratch");c={tableIds:this.tableIds,tableNames:this.tableNames};await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(b.transaction,c,a,this.defaults);(e=b.loggers.logHistory)==null||e.debug("migration default values finished");await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(b,c,this.defaults,a);(e=b.loggers.logHistory)==null||e.debug("migration indices finished");return a?d("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:d("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE};b.$4=function(a){var b=this,d=this.$2.versionOrder.indexOf(a);if(d===-1)throw c("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot resolve version %s",this.$1,a);return Promise.all(this.$2.versionOrder.slice(d,this.$2.versionOrder.indexOf(this.$2.targetVersion)+1).map(async function(a){if(a in b.$2.versions)return{meta:b.$2.versions[a],version:a};else if(a in b.$2.legacyVersions)return{meta:await b.$2.legacyVersions[a].load(),version:a};else throw c("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot find version %s in either versions or legacyVersions",b.$1,a)}))};b.$5=async function(a,b,e){var f,g=this.$2.targetVersion,h=this.$2.versions[g].revision;(f=e.loggers)==null||(f=f.logHistory)==null||f.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] currentVersion: "+a+"R"+b+", targetVersion: "+g+"R"+h);if(g===a&&h===b){(f=e.loggers)==null||(f=f.logHistory)==null||f.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] DB already up to date, skipping migration");return d("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED}(f=e.loggers.logHistory)==null||f.debug("migration versioned incremental");(f=e.loggers.userFlow)==null||f.addPoint(this.$1+"_migration_versioned_incremental");f=await this.$4(a);if(f.length===0||b>h){c("FBLogger")("ReStoreVersionedSchemaProvider","migrate").mustfix("[%s][ReStoreVersionedSchemaProvider][DANGEROUS] Backward migration required from %sR%s to %sR%s, running #migrateFromScratch",this.$1,a,""+b,g,""+h);return this.$3(!1,e)}for(g of f){h=g.meta;f=g.version;for(var i=f===a?b+1:0;i<=h.revision;i++){var j,k;(j=e.loggers)==null||(j=j.logHistory)==null||j.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating to "+f+"R"+i);(j=e.loggers.userFlow)==null||j.addPoint(this.$1+"_migration_versioned_"+f+"{$revision}_start");await ((k=(j=h.upgrade)[i])==null?void 0:k.call(j,e));await ((j=(k=h.afterUpgrade)[i])==null?void 0:j.call(k,e.transaction));(j=e.loggers.userFlow)==null||j.addPoint(this.$1+"_migration_versioned_"+f+"{$revision}_end")}}return d("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE};b.$6=function(a,b,c,e,f){var g;(g=f.loggers.userFlow)==null||g.addPoint(this.$1+"_migration_versioned_hash_start");if(b===c&&a===e){(g=f.loggers.userFlow)==null||g.addAnnotations(d("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"no_changes"}}));(b=f.loggers)==null||(b=b.logHistory)==null||b.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, no changes are detected");return Promise.resolve(d("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA)}else{(c=f.loggers.userFlow)==null||c.addAnnotations(d("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"changes"}}));(a=f.loggers)==null||(a=a.logHistory)==null||a.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, changed detected, calling #migrateFromScratch");return this.$3(!1,f)}};b.migrate=async function(a){var b,c,e;(b=a.loggers.logHistory)==null||b.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Start migration");(b=a.loggers.userFlow)==null||b.addPoint(this.$1+"_migration_versioned_start");b=d("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(this.defaults);var f=d("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash({tableIds:this.tableIds,tableNames:this.tableNames}),g=new(d("ReStorePersistedMetadata").ReStorePersistedSchemaVersion)(this.$1),h=new(d("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion)(this.$1),i=await g.read(a.storeTx);c=(c=await h.read(a.storeTx))==null?void 0:c.defaultValuesVersion;var j=this.$2.versions[this.$2.targetVersion];(e=a.loggers.userFlow)==null||e.addAnnotations(d("ReStoreMigrateUtil").prefixAnnotations(this.$1,{int:{defaultValuesVersion:b,schemaVersion:f,storeDefaultValuesVersion:c,storeRevision:i==null?void 0:i.revision,storeSchemaVersion:i==null?void 0:i.schemaVersion,targetRevision:j.revision},string:{schemaProviderType:"versioned",storeVersion:i==null?void 0:i.version,targetVersion:this.$2.targetVersion}}));(e=a.loggers.logHistory)==null||e.debug("storeSchemaVersion: "+((e=i==null?void 0:i.schemaVersion)!=null?e:"null"));(e=a.loggers.logHistory)==null||e.debug("storeDefaultValuesVersion: "+(c!=null?c:"null"));e=await (i!=null&&i.revision!=null&&i.version!=null?this.$5(i.version,i.revision,a):(i==null?void 0:i.schemaVersion)!=null?this.$6(c,i.schemaVersion,f,b,a):this.$3(!0,a));if(e!==d("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED){g.write(a.storeTx,{revision:j.revision,schemaVersion:f,version:this.$2.targetVersion});h.write(a.storeTx,{defaultValuesVersion:b});(c=a.loggers.logHistory)==null||c.debug("version is written")}(i=a.loggers.logHistory)==null||i.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] End Migration. Result: "+e+", SchemaVersion: "+f+", Version: "+this.$2.targetVersion+", Revision: "+j.revision);(g=a.loggers.userFlow)==null||g.addPoint(this.$1+"_migration_versioned_end");return e};return a}();g.default=a}),98);
__d("LSVersionedSchemaProvider",["LSConstants","LSDb","LSDbForeignKeys","ReStoreVersionedSchemaProvider"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("ReStoreVersionedSchemaProvider"))(d("LSConstants").LS_SCHEMA_NAME,d("LSDb").Versions,c("LSDbForeignKeys"));g.schemaProvider=a}),98);
__d("ReStoreHashSchemaProvider",["ReStoreHashMigration","ReStoreMetadata","ReStoreMigrateUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){var e=b.tableIds;b=b.tableNames;c===void 0&&(c={});this.$1=a;this.tableNames=babelHelpers.extends({},b,d("ReStoreMetadata").RESTORE_METADATA_TABLES);this.tableIds=e;this.defaults=c!=null?c:{}}var b=a.prototype;b.migrate=async function(a){var b,c;(b=a.loggers.logHistory)==null||b.debug("["+this.$1+"][ReStoreHashSchemaProvider] Start migration");(b=a.loggers.userFlow)==null||b.addAnnotations(d("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{schemaProviderType:"hash"}}));(b=a.loggers.userFlow)==null||b.addPoint(this.$1+"_migration_hash_start");b=await d("ReStoreHashMigration").runHashMigration(this.$1,{tableIds:this.tableIds,tableNames:this.tableNames},this.defaults,a);(c=a.loggers.logHistory)==null||c.debug("["+this.$1+"][ReStoreHashSchemaProvider] End migration. Result: "+b);(c=a.loggers.userFlow)==null||c.addPoint(this.$1+"_migration_hash_end");return b};return a}();g.default=a}),98);
__d("ReStoreSchemaProvider",["ReStoreMigrateUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return{defaults:babelHelpers.extends({},a.defaults,b.defaults),migrate:async function(c){var e=await a.migrate(c);c=await b.migrate(c);if(e===d("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE||c===d("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE)return d("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE;else if(e===d("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA||c===d("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA)return d("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA;else return d("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED},tableIds:babelHelpers.extends({},a.tableIds,b.tableIds),tableNames:babelHelpers.extends({},a.tableNames,b.tableNames)}}g.mergeSchemaProviders=a}),98);
__d("LSMetadata",["LSClientSchemaType","LSDbSchema","LSVersionedSchemaProvider","ReStoreHashSchemaProvider","ReStoreMetadata","ReStoreSchemaProvider"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("ReStoreSchemaProvider").mergeSchemaProviders(a,h)}var h=new(c("ReStoreHashSchemaProvider"))(d("LSClientSchemaType").MAW_SCHEMA_NAME,d("ReStoreMetadata").getBuildTableData({})([d("LSDbSchema").clientSchema]));b=a(d("LSVersionedSchemaProvider").schemaProvider);g.buildSchema=a;g.schema=b}),98);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(a,b,c,d,e,f,g){"use strict";var h,i={dynamic:!1};function a(a,e){e===void 0&&(e=i);a=c("LS")(1,d("LSMetadata").schema,d("LSDynamicDependencies").cachedModules,a,void 0,void 0,e.dynamic);return b("cr:8709")!=null&&(h||(h=c("ExecutionEnvironment"))).isInBrowser?b("cr:8709").wrapSprocInvocationWithProfiler(a):a}g["default"]=a}),98);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSVerifyContactRowExists"),e.id,e.contactIdType,e.profilePictureUrl,e.name,e.contactType,e.profilePictureFallbackUrl,e.profilePictureUrlExpirationTimestampMs,e.urlExpirationTimestampMs,e.normalizedNameForSearch,e.isMemorialized,e.isBlocked,e.blockedByViewerStatus,e.canViewerMessage,e.isSelf,e.authorityLevel,e.capabilities,e.capabilities2,e.workForeignEntityType,e.gender,e.contactViewerRelationship,e.secondaryName,e.firstName,e.friendshipStatus);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("WAArrayZip",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=Math.min(a.length,b.length);return a.slice(0,c).map(function(a,c){return[a,b[c]]})}f.zip=a}),66);/*FB_PKG_DELIM*/
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new Uint8Array(a)}function h(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a)}function i(a){var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}function b(a){return i(new Uint8Array(a))}function e(a){return h(a).buffer}function f(a,b){var d=a.byteLength,e=b.byteLength;if(d!==e)throw c("FBLogger")("messenger_web").mustfixThrow("[LS] Mismatched lengths for modAdd, %d != %d",d,e);var f=new Uint8Array(d);new Uint8Array(d).reduceRight(function(c,d,e){d=a[e];var g=b[e];d=d+g+c;g=d>255?[d-256,1]:[d,0];f[e]=g[0];return g[1]},0);return f}g.bufToUint8=a;g.strToUint8=h;g.uint8ToStr=i;g.bufToStr=b;g.strToBuf=e;g.modAddBytes=f}),98);
__d("LSMaxInt32",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_int32(2147483647);g["default"]=a}),98);
__d("WACryptoHkdfSync",["WABinary","WACryptoSha256HmacBuilder","err"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=new Uint8Array(h),j=255*h;function k(a,b){return new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(b!=null?b:i).update(a).finish()}function l(a,b,e){e===void 0&&(e=new Uint8Array(0));if(b<0||b>j)throw c("err")("HKDF::expand given bad length "+b);var f=Math.ceil(b/h),g=new Uint8Array(0),i=new(d("WABinary").Binary)();for(var k=1;k<=f;k++)g=new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(a).update(d("WABinary").Binary.build(g,e,k).readByteArrayView()).finish(),i.writeByteArray(g);return i.readByteArrayView(b)}function a(a,b,c,d){return l(k(a,b),d,c)}g.hkdf=a}),98);
__d("CreateDerivedKeys",["CryptoLogger","I64","LSCryptoUtils","LSMaxInt32","LSSynchronousPromise","LSVec","Promise","RetUtil","WACryptoHkdfSync","XPlatReactCrypto","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){var j=d("CryptoLogger").CryptoLogger("create_derived_keys");if(g.length<1||g.some(function(a){return(i||(i=d("I64"))).gt(a,c("LSMaxInt32"))})){j.mustfix("Invalid key lengths for derive keys");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))}var k=g.map((i||(i=d("I64"))).to_int32),l=g.map(i.to_int32).reduce(function(a,b){return a+b},0),m=function(a){var b=[],e=0;for(var f=0,g=k.length;f<g;++f){var h=e+k[f];b.push(a.slice(e,h).buffer);e=h}return d("RetUtil").getNullableRetResult(c("LSVec").ofArray(b))};if(c("gkx")("13860"))try{g=d("WACryptoHkdfSync").hkdf(d("LSCryptoUtils").bufToUint8(f),d("LSCryptoUtils").bufToUint8(e!=null?e:new Uint8Array(10).buffer),d("LSCryptoUtils").bufToUint8(a),l);return d("LSSynchronousPromise").makeSynchronousPromise(m(g))}catch(a){d("CryptoLogger").captureError(j,a).mustfix("hkdf failed at LSCreateDerivedKeys.nop");return d("LSSynchronousPromise").makeSynchronousPromise(d("RetUtil").getNullableRetResult())}return d("XPlatReactCrypto").subtleImportKey("raw",f,"HKDF",!1,["deriveBits"]).then(function(b){return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:a,name:"HKDF",salt:e!=null?e:new Uint8Array(10).buffer},b,l*8)}).then(function(a){a=new Uint8Array(a);return m(a)})["catch"](function(a){j.catching(a).mustfix("Failed to create derived keys");return d("RetUtil").getNullableRetResult()})}g.CreateDerivedKeys=a}),98);
__d("EBEnableUnifiedAttachment",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEbEnableUnifiedAttachment=a;f.getEbEnableUnifiedAttachment=b}),66);
__d("EBEncryptMessageTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}function e(a){return a}function g(a){return a}function h(a){return a}function i(a){return a}function j(a){return a}function k(a){return a}function l(a){return a}function m(a){return a}function n(a){return a}f.unsafeCastToAAD=a;f.unsafeCastToSecretKey=b;f.unsafeCastToPlaintext=c;f.unsafeCastToCiphertext=d;f.unsafeCastToMsgData=e;f.unsafeCastToMacKey=g;f.unsafeCastToHmac=h;f.unsafeCastToEBCreateDerivedKeysIkm=i;f.unsafeCastToEBCreateDerivedKeysInfo=j;f.unsafeCastToEBCreateDerivedKeysSalt=k;f.unsafeCastToEBCreateDerivedKeyLength=l;f.unsafeCastToEBDerivedKey=m;f.castEBDerivedKeyToArrayBuffer=n}),66);
__d("EBSMAPI",["Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(a=c("requireDeferred"))("EBAddDeviceWithKeys").__setRef("EBSMAPI"),j=a("EBAddDeviceWithRecoveryCode").__setRef("EBSMAPI"),k=a("EBDeleteMailbox").__setRef("EBSMAPI"),l=a("EBFetchBackupIds").__setRef("EBSMAPI"),m=a("EBGetEBState").__setRef("EBSMAPI"),n=a("EBGetLSVirtualDevices").__setRef("EBSMAPI"),o=a("EBInitializeBackup").__setRef("EBSMAPI"),p=a("EBIsEbEnabled").__setRef("EBSMAPI");d={addDeviceWithEBKeys:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return i.load().then(function(a){return a.addDeviceWithEBKeys.apply(a,b)})},addDeviceWithRecoveryCode:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return j.load().then(function(a){return a.addDeviceWithRecoveryCode.apply(a,b)})},deleteMailbox:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return k.load().then(function(a){return a.deleteMailbox.apply(a,b)})},fetchBackupIds:function(a,b){return l.load().then(function(c){return c.fetchBackupIds(a,b)})},getEBState:function(){return m.load().then(function(a){return a.GetEbState()})},getLSVirtualDevices:function(a){return n.load().then(function(b){return b.getLSVirtualDevices(a)})},initializeBackup:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return o.load().then(function(a){return a.initializeBackup.apply(a,b)})},isEbEnabled:function(){return p.load().then(function(a){return a.isEbEnabledEbSwitch()})},optOutOfBackup:function(){return(h||(h=b("Promise"))).resolve()}};e=d;g["default"]=e}),98);
__d("EBUnifyLegacyMediaUpload",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEnableUnifyLegacyMediaUpload=a;f.getEnableUnifyLegacyMediaUpload=b}),66);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(a,b,c,d,e,f){"use strict";a=16;b=28;c=16;d=128;f.hChaCha20SubKeyNonceLengthInBytes=a;f.totalNonceLengthInBytes=b;f.aesGcmTagLengthInBytes=c;f.aesGcmTagLength=d}),66);
__d("HChaCha20",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.fromHexString=function(a){var b=a.match(/[A-Fa-f0-9]{1,2}/g);if(a.length===0||a.length%2!==0||b==null)throw c("err")('The string "'+a+'" is not valid hex.');return new Uint8Array(b.map(function(a){return parseInt(a,16)}))};a.bufferToUint32Array=function(a){var b=new DataView(a),c=[];a=a.byteLength/4;for(var d=0;d<a;d++)c.push(new DataView(b.buffer.slice(d*4,d*4+4)).getInt32(0));return Uint32Array.from(c)};a.rotate=function(a,b){a=a&4294967295;b=b&31;return(a<<b|a>>>32-b)>>>0};a.quarterRound=function(b,c,d,e){b=b;c=c;d=d;e=e;b=b+c&4294967295;e=a.rotate(e^b,16);d=d+e&4294967295;c=a.rotate(c^d,12);b=b+c&4294967295;e=a.rotate(e^b,8);d=d+e&4294967295;c=a.rotate(c^d,7);return[b>>>0,c>>>0,d>>>0,e>>>0]};var b=a.prototype;b.createHCtx=function(b,d){var e=new Uint32Array(16),f=a.fromHexString("657870616e642033322d62797465206b");if(f.byteLength!==16)throw c("err")("Could not create context. Invalid constant buffer length of "+f.byteLength+". Expected a length of 16");else if(b.byteLength!==32)throw c("err")("Could not create context. Invalid key buffer length of "+b.byteLength+". Expected a length of 32");else if(d.byteLength!==16)throw c("err")("Could not create context. Invalid nonce buffer length of "+d.byteLength+". Expected a length of 16");f=a.bufferToUint32Array(f.buffer);b=a.bufferToUint32Array(b);d=a.bufferToUint32Array(d);e.set(f);e.set(b,f.length);e.set(d,f.length+b.length);return e.buffer};b.hChaCha20Bytes=function(b,c){c=new DataView(this.createHCtx(c,b));b=c.getInt32(0);var d=c.getInt32(1<<2),e=c.getInt32(2<<2),f=c.getInt32(3<<2),g=c.getInt32(4<<2),h=c.getInt32(5<<2),i=c.getInt32(6<<2),j=c.getInt32(7<<2),k=c.getInt32(8<<2),l=c.getInt32(9<<2),m=c.getInt32(10<<2),n=c.getInt32(11<<2),o=c.getInt32(12<<2),p=c.getInt32(13<<2),q=c.getInt32(14<<2);c=c.getInt32(15<<2);for(var r=0;r<10;r++){var s=a.quarterRound(b,g,k,o);b=s[0];g=s[1];k=s[2];o=s[3];s=a.quarterRound(d,h,l,p);d=s[0];h=s[1];l=s[2];p=s[3];s=a.quarterRound(e,i,m,q);e=s[0];i=s[1];m=s[2];q=s[3];s=a.quarterRound(f,j,n,c);f=s[0];j=s[1];n=s[2];c=s[3];s=a.quarterRound(b,h,m,c);b=s[0];h=s[1];m=s[2];c=s[3];s=a.quarterRound(d,i,n,o);d=s[0];i=s[1];n=s[2];o=s[3];s=a.quarterRound(e,j,k,p);e=s[0];j=s[1];k=s[2];p=s[3];s=a.quarterRound(f,g,l,q);f=s[0];g=s[1];l=s[2];q=s[3]}return Uint32Array.from([b,d,e,f,o,p,q,c]).buffer};return a}();g.HChaCha20=a}),98);
__d("LSCreateDerivedKeys.nop",["CreateDerivedKeys","LSVec"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e,f,g,h){return d("CreateDerivedKeys").CreateDerivedKeys(e,f,g,c("LSVec").toArray(h))};a.__nop_name__="LSCreateDerivedKeys";g["default"]=a}),98);
__d("LSDataTraceType",[],(function(a,b,c,d,e,f){a=Object.freeze({TASK:1,SYNC:2,RECEIVE_MSG:3,RICH_MEDIA_SEND:4,RICH_MEDIA_DOWNLOAD:5,TASK_CLIENT_MODE:6,ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS:69,ENCRYPTED_BACKUPS_INIT:70,ENCRYPTED_BACKUPS_ADD_DEVICE:71,ENCRYPTED_BACKUPS_UPLOAD:72,ENCRYPTED_BACKUPS_RESTORE:73,ENCRYPTED_BACKUPS_DELETE_BACKUP:75,ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE:76,ENCRYPTED_BACKUPS_QR_ADD_DEVICE:77,ENCRYPTED_BACKUPS_SYNC_EPOCHS:78,ENCRYPTED_BACKUPS_OPEN_EPOCH:79,ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP:80,ENCRYPTED_BACKUPS_MEDIA_BACKUP:81,ENCRYPTED_BACKUPS_MEDIA_RESTORE:82,ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION:83,ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA:86,ENCRYPTED_BACKUPS_REMOVE_VIRTUAL_DEVICE:87,ENCRYPTED_BACKUPS_QR_ADD_DEVICE_RECEIVER:88,ENCRYPTED_BACKUPS_DERIVE_AND_STORE_EPOCHS:89,ENCRYPTED_BACKUPS_GET_OPEN_EPOCH_KEYS:90,ENCRYPTED_BACKUPS_END_TO_END_THREAD_RESTORE:190,SAP_VESTA_REGISTRATION:251,SAP_VESTA_LOGIN:252,ENCRYPTED_BACKUPS_SHADOW_FETCH_BACKUP_STATUS:197,ENCRYPTED_BACKUPS_SHADOW_INIT:198,ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE:199,ENCRYPTED_BACKUPS_SHADOW_UPLOAD:200,ENCRYPTED_BACKUPS_SHADOW_RESTORE:201,ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP:203,ENCRYPTED_BACKUPS_SHADOW_CREATE_EXTRA_VIRTUAL_DEVICE:204,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE:205,ENCRYPTED_BACKUPS_SHADOW_SYNC_EPOCHS:206,ENCRYPTED_BACKUPS_SHADOW_OPEN_EPOCH:207,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE_RECEIVER:216,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_UPSERT_VERSION_DATA:240,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_DELETE_VERSION_DATA:241,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_SYNC_VERSION_DATA:242,ENCRYPTED_BACKUPS_MESSAGE_INTEGRITY_CHECKER:243});f["default"]=a}),66);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","LSSynchronousPromise","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e){a=new(d("XPlatReactTextEncoder").TextEncoder)();try{b=a.encode(e).buffer;return d("LSSynchronousPromise").makeSynchronousPromise(c("LSResult")(b))}catch(b){a=d("CryptoLogger").CryptoLogger("get_blob_from_string");a.catching(b).mustfix(b.message?b.message:"Error in get blob from string.");throw b}};a.__nop_name__="LSGetBlobFromString";g["default"]=a}),98);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a<10)return 10-a;var b=Math.floor(Math.log2(a)),c=Math.floor(Math.log2(b))+1;b=b-c;c=(1<<b)-1;b=a+c&(c^-1);return b-a}function i(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=a.byteLength,d=h(c);d=b+c+d;d=new DataView(new ArrayBuffer(d));d.setUint32(0,c);c=new Uint8Array(d.buffer);c.set(new Uint8Array(a),b);return c.buffer}function a(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();b=b.encode(a).buffer;return i(b)}function b(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=new DataView(a);if(c.byteLength<b)return;var d=a.byteLength;c=c.getUint32(0);d=d-b;if(c>=0&&c<=d)return a.slice(b,b+c)}g.getPaddingLength=h;g.padData=i;g.pad=a;g.stripPadding=b}),98);
__d("SymmetricEncryptionCreateDecryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_data");a=function(a,c,e){if(e.byteLength<d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes){i.mustfix("cipher text is invalid");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())}e=new Uint8Array(e);var f=e.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),g=new(d("HChaCha20").HChaCha20)(),j=e.slice(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer;e=g.hChaCha20Bytes(f.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,a);return d("XPlatReactCrypto").subtleImportKey("raw",e,"AES-GCM",!1,["decrypt"]).then(function(a){return d("XPlatReactCrypto").subtleDecrypt({additionalData:c,iv:new Uint8Array(f.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,j)}).then(function(a){a=d("SymmetricEncryptionPaddingUtils").stripPadding(a);a==null&&i.mustfix("Failed to strip padding for symmetric decryption");return d("RetUtil").getNullableRetResult(a)})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric data decryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateDecryptedData.nop",["EBEncryptMessageTypes","SymmetricEncryptionCreateDecryptedData"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e,f,g){return c("SymmetricEncryptionCreateDecryptedData")(d("EBEncryptMessageTypes").unsafeCastToSecretKey(e),d("EBEncryptMessageTypes").unsafeCastToAAD(f),d("EBEncryptMessageTypes").unsafeCastToCiphertext(g))};a.__nop_name__="LSSymmetricEncryptionCreateDecryptedData";g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateDecryptedString.nop",["Base64Utils","CryptoLogger","LSResult","LSSymmetricEncryptionCreateDecryptedData.nop","XPlatReactTextDecoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return c("LSResult")(a)}a=function(a,b,e,f,g){var i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_string");g=d("Base64Utils").toArrayBuffer(g);return c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,g).then(function(a){a=a[0];return a}).then(function(a){return a==null?h():h(new(d("XPlatReactTextDecoder").TextDecoder)().decode(a))})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric string decryption failed");return h()})};a.__nop_name__="LSSymmetricEncryptionCreateDecryptedString";g["default"]=a}),98);
__d("LSDecryptMessageV2",["LSArrayGetObjectAt","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessageV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[8]=a[2]==null?c.i64.cast([0,0]):a[2],d[2]=c.i64.of_int32(a[3].length),c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return d[14]=d[12].get("epoch_anon_id"),d[15]=d[12].get("epoch_root_key"),d[16]=c.createArray(),d[26]=(d[16].push(c.i64.cast([0,32])),d[16]),c.i64.ge(d[8],c.i64.cast([0,3]))?c.resolve(d[17]=void 0):c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[1]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[17]=d[26]}])},function(e){return c.i64.ge(d[8],c.i64.cast([0,4]))?(d[26]="_",d[18]=["message_key_in_epoch",d[26],c.blobs.to_string(d[14]),d[26],"cipher_version",d[26],c.i64.to_string(d[8]),d[26],"thread",d[26],a[1]==null?"":a[1]].join("")):(c.i64.ge(d[8],c.i64.cast([0,3]))?(d[27]="_",d[26]=["message_key_in_epoch",d[27],c.blobs.to_string(d[14]),d[27],"cipher_version",d[27],c.i64.to_string(d[8]),d[27],"thread",d[27],a[1]==null?"":a[1]].join("")):(c.i64.ge(d[8],c.i64.cast([0,2]))?(d[28]="_",d[27]=["message_key_in_epoch",d[28],c.blobs.to_string(d[14]),d[28],"cipher_version",d[28],c.i64.to_string(d[8])].join("")):d[27]=["message_key_in_epoch","_",c.blobs.to_string(d[14])].join(""),d[26]=d[27]),d[18]=d[26]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],d[17],d[15],d[16]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return d[22]=d[26]}])},function(e){return c.blobs.neq(d[22],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedString.nop"),d[22],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[0]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]!==void 0?c.resolve(d[27]=d[26]):c.sequence([function(a){return d[28]=["Failed to decrypt message. Epoch Anon ID: ",c.blobs.to_string(d[14]),", Encryption Version: ",c.i64.to_string(d[8])].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDecryptMessageV2StoredProcedure] ","",d[28]].join("")),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptMessageV2StoredProcedure",[d[28]].join(""),d[29],c.i64.cast([0,3]))},function(a){return d[27]=void 0}])},function(a){return d[23]=d[27]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDecryptMessageV2StoredProcedure] Decryption message key is null"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptMessageV2StoredProcedure","Decryption message key is null",d[26],c.i64.cast([0,3]))},function(a){return d[23]=void 0}])},function(a){return d[23]!==void 0?(a=[d[23],void 0],d[24]=a[0],d[25]=a[1],a):(d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,101])),d[26].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[26].set("error_message",""),a=[void 0,d[26]],d[24]=a[0],d[25]=a[1]),a=[d[24],d[25]],d[3]=a[0],d[4]=a[1]}]):c.resolve((d[12]=c.i64.of_int32(a[3].length),c.i64.eq(d[12],c.i64.cast([0,0]))?(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,102])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1]):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,103])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1]),e=[d[13],d[14]],d[3]=e[0],d[4]=e[1]))},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[11]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessageV2] ",d[7],d[9],d[7],d[10],d[7],d[11]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessageV2",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessageV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDecryptMessages",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDecryptMessageV2","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessages] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1]):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1])})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[36]=void 0,c.i64.neq(d[36],void 0)?c.resolve(d[37]=d[36]):c.sequence([function(a){return d[47]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[48]?d[57]=(d[47].push(c.i64.cast([0,0])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]?d[57]=(d[47].push(c.i64.cast([0,2])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[50]=a[0],a})},function(a){return d[50]?d[57]=(d[47].push(c.i64.cast([0,3])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[51]?d[57]=(d[47].push(c.i64.cast([0,4])),d[47]):0,d[52]=c.createArray(),d[53]=c.i64.of_int32(d[47].length),c.i64.gt(d[53],c.i64.cast([0,0]))?c.loopAsync(d[53],function(a){return d[57]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[47],d[57]).then(function(a){return a=a,d[58]=a[0],d[59]=a[1],a})},function(a){return d[60]=(d[52].push(d[58]),d[52])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[57]=c.createArray(),d[58]=c.i64.of_int32(d[52].length),c.i64.gt(d[58],c.i64.cast([0,0]))?c.loopAsync(d[58],function(a){return d[60]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[52],d[60]).then(function(a){return a=a,d[61]=a[0],d[62]=a[1],a})},function(a){return d[63]=(d[57].push(c.i64.to_string(d[61])),d[57])}])}):c.resolve()},function(a){return d[59]=d[57].join(","),d[54]=d[59]}])},function(a){return d[52].some(function(a){return c.i64.eq(d[29],a)})?d[55]=d[29]:d[55]=void 0,c.i64.neq(d[55],void 0)?d[56]=d[55]:d[56]=void 0,d[37]=d[56]}])},function(e){return c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[39]=d[28]:d[39]=c.i64.cast([0,1]),d[40]=c.createArray(),d[41]=c.createArray(),d[42]=new c.Map(),d[43]=c.i64.of_int32(a[0].length),c.i64.gt(d[43],c.i64.cast([0,0]))?c.loopAsync(d[43],function(e){return d[47]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=d[48].get("epoch_anon_id"),d[51]=d[42].get(c.blobs.to_string(d[50])),d[51]!==void 0?c.resolve(d[52]=d[51]):c.sequence([function(a){return d[57]=d[48].get("epoch_anon_id"),d[58]=d[48].get("epoch_id"),c.i64.neq(d[58],void 0)?c.sequence([function(a){return d[61]=c.createArray(),c.count(c.db.table(169).fetch([[[d[58]]]])).then(function(a){return d[62]=a})},function(a){return c.i64.le(d[62],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[58]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[72]=new c.Map(),d[72].set("error_msg","Expected a nonempty query result"),d[72].set("code",c.i64.cast([0,3])),d[72].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[73]=c.createArray(),d[74]=(d[73].push(d[72]),d[73]),e=[void 0,d[73]],d[68]=e[0],d[69]=e[1]):(b=a.item,d[72]=new c.Map(),d[72].set("epoch_id",b.epochId),d[72].set("backup_id",b.backupId),d[72].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[72].set("epoch_root_key_blob",b.epochRootKeyBlob),d[72].set("epoch_status",b.epochStatus),d[72].set("epoch_head",b.epochHead),d[72].set("authority_level",b.authorityLevel),e=[d[72],void 0],d[68]=e[0],d[69]=e[1])})},function(a){return d[71]=new c.Map(),d[71].set("value",d[68]),d[71].set("errors",d[69]),d[63]=d[71]}]):c.resolve((d[68]=new c.Map(),d[68].set("error_msg","Expected at most one result"),d[68].set("code",c.i64.cast([0,4])),d[68].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),d[70]=new c.Map(),d[70].set("value",void 0),d[70].set("errors",d[69]),d[63]=d[70]))},function(a){return d[64]=d[63].get("value"),d[64]!==void 0?(d[68]=d[64].get("epoch_id"),d[69]=d[64].get("backup_id"),d[70]=d[64].get("epoch_anon_id_blob"),d[71]=d[64].get("epoch_root_key_blob"),d[72]=d[64].get("epoch_status"),d[73]=d[64].get("epoch_head"),d[74]=d[64].get("authority_level"),c.i64.eq(d[74],c.i64.cast([0,80]))?d[75]=d[63]:(d[76]=new c.Map(),d[76].set("error_msg","NONE"),d[76].set("code",c.i64.cast([0,0])),d[76].set("src_line","MEBEpochClientUtils.php:315 Closure$MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly#2()"),d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),d[78]=new c.Map(),d[78].set("value",void 0),d[78].set("errors",d[77]),d[75]=d[78]),d[65]=d[75]):(d[68]=d[63].get("errors"),d[69]=d[63].get("errors"),d[70]=new c.Map(),d[70].set("value",void 0),d[70].set("errors",d[68]),d[65]=d[70]),d[66]=d[65].get("value"),d[66]!==void 0?(d[68]=d[66].get("epoch_id"),d[69]=d[66].get("backup_id"),d[70]=d[66].get("epoch_anon_id_blob"),d[71]=d[66].get("epoch_root_key_blob"),d[72]=d[66].get("epoch_status"),d[73]=d[66].get("epoch_head"),d[74]=d[66].get("authority_level"),c.i64.eq(d[69],d[15])&&c.i64.eq(d[74],c.i64.cast([0,80]))?(d[75]=new c.Map(),d[75].set("epoch_root_key",d[71]),d[75].set("epoch_anon_id",d[70]),d[76]=(d[61].push(d[75]),d[61])):0,d[67]=!0):(d[68]=d[65].get("errors"),d[69]=d[65].get("errors"),d[67]=!1),d[59]=d[61]}]):c.sequence([function(a){return d[61]=c.createArray(),c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,d[57])}).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[68]=new c.Map(),d[68].set("error_msg","Expected a nonempty query result"),d[68].set("code",c.i64.cast([0,3])),d[68].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),d[69]=c.createArray(),d[70]=(d[69].push(d[68]),d[69]),e=[void 0,d[69]],d[62]=e[0],d[63]=e[1]):(b=a.item,d[68]=new c.Map(),d[68].set("epoch_id",b.epochId),d[68].set("backup_id",b.backupId),d[68].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[68].set("epoch_root_key_blob",b.epochRootKeyBlob),d[68].set("epoch_status",b.epochStatus),d[68].set("epoch_head",b.epochHead),d[68].set("authority_level",b.authorityLevel),e=[d[68],void 0],d[62]=e[0],d[63]=e[1])})},function(a){return d[65]=new c.Map(),d[65].set("value",d[62]),d[65].set("errors",d[63]),d[66]=d[65].get("value"),d[66]!==void 0?(d[68]=d[66].get("epoch_id"),d[69]=d[66].get("backup_id"),d[70]=d[66].get("epoch_anon_id_blob"),d[71]=d[66].get("epoch_root_key_blob"),d[72]=d[66].get("epoch_status"),d[73]=d[66].get("epoch_head"),d[74]=d[66].get("authority_level"),c.i64.eq(d[69],d[15])&&c.i64.eq(d[74],c.i64.cast([0,80]))?(d[75]=new c.Map(),d[75].set("epoch_root_key",d[71]),d[75].set("epoch_anon_id",d[70]),d[76]=(d[61].push(d[75]),d[61])):0,d[67]=!0):(d[68]=d[65].get("errors"),d[69]=d[65].get("errors"),d[67]=!1),d[59]=d[61]}])},function(a){return d[60]=c.i64.of_int32(d[59].length),c.i64.gt(d[60],c.i64.cast([0,0]))?(d[61]=d[48].get("epoch_anon_id"),d[42].set(c.blobs.to_string(d[61]),d[59])):0,d[52]=d[59]}])},function(e){return d[53]=d[48].get("value"),d[54]=d[48].get("encryption_version"),c.storedProcedure(b("LSDecryptMessageV2"),d[53],a[1],d[54],d[52]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[55]!==void 0?c.resolve((d[57]=d[48].get("otid"),d[58]=d[48].get("message_tags"),d[59]=new c.Map(),d[59].set("value",d[55]),d[59].set("otid",d[57]),d[59].set("message_tags",d[58]),d[60]=(d[40].push(d[59]),d[40]))):c.sequence([function(a){return d[56]!==void 0?c.sequence([function(a){return d[57]=c.i64.of_int32(d[52].length),c.i64.gt(d[57],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[52],c.i64.cast([0,0])).then(function(a){return a=a,d[67]=a[0],d[68]=a[1],a})},function(a){return d[69]=d[67].get("epoch_root_key"),d[70]=c.createArray(),d[75]=(d[70].push(c.i64.cast([0,18])),d[70]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[69],d[70]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return d[71]!==void 0?c.sequence([function(a){return d[75]=c.i64.of_int32(d[71].length),c.i64.ge(d[75],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[71],c.i64.cast([0,0])).then(function(a){return a=a,d[77]=a[0],d[78]=a[1],a})},function(a){return d[76]=d[77]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[78]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[78]].join("")),d[77]=c.createArray(),void 0!==void 0?d[79]=(d[77].push(void 0),d[77]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[78],d[77],c.i64.cast([0,3]))},function(a){return d[76]=void 0}])},function(a){return d[72]=d[76]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[76]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[76]].join("")),d[75]=c.createArray(),void 0!==void 0?d[77]=(d[75].push(void 0),d[75]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[76],d[75],c.i64.cast([0,3]))},function(a){return d[72]=void 0}])},function(a){return c.blobs.neq(d[72],void 0)?d[73]=!0:d[73]=!1,d[73]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.neq(d[72],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[72]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[74]=d[75]==null?"[encodingFailed]":d[75]}]):c.resolve(d[74]="[null]")},function(a){return d[58]=d[74]}]):c.resolve(d[58]="[noEpochs]")},function(a){return d[59]=d[48].get("otid"),d[60]=d[48].get("epoch_anon_id"),d[61]=d[48].get("encryption_version"),c.i64.neq(d[61],void 0)?d[62]=c.i64.to_string(d[61]):d[62]="null",d[63]=c.i64.of_int32(d[52].length),d[64]=d[48].get("epoch_fingerprint"),c.blobs.neq(d[64],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[64]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[65]=d[67]==null?"[encodingFailed]":d[67]}]):c.resolve(d[65]="[null]")},function(a){return d[66]="",d[56].set("error_message",["Decryption failed for message with otid:",d[66],d[59],d[66]," epoch:",d[66],c.blobs.to_string(d[60]),d[66]," version:",d[66],d[62],d[66]," epoch_key_count:",d[66],c.i64.to_string(d[63]),d[66]," vsr_fingerprint:",d[66],d[65],d[66]," local_fingerprint:",d[66],d[58],d[66]," local_backup_id:",d[66],c.i64.to_string(d[15]),d[66]," local_device_id:",d[66],c.i64.to_string(d[27])].join(""))}]):c.resolve()},function(a){return d[57]=(d[41].push(d[56]),d[41])}])}])}):c.resolve()},function(a){return d[44]=c.i64.of_int32(d[41].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],c.i64.cast([0,0])).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return a=[void 0,d[47]],d[45]=a[0],d[46]=a[1],a}]):c.resolve((a=[d[40],void 0],d[45]=a[0],d[46]=a[1],a))},function(a){return a=[d[45],d[46]],d[34]=a[0],d[35]=a[1],a}]):c.resolve((d[36]=new c.Map(),d[36].set("error_code",c.i64.cast([0,24])),d[36].set("stored_procedure","LSEncryptedBackupsDecryptMessagesStoredProcedure"),d[36].set("error_message",""),e=[void 0,d[36]],d[34]=e[0],d[35]=e[1]))},function(a){return a=[d[34],d[35]],d[7]=a[0],d[8]=a[1],a}]):c.resolve((d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,1])),d[17].set("stored_procedure","LSEncryptedBackupsDecryptMessagesStoredProcedure"),d[17].set("error_message",""),e=[void 0,d[17]],d[7]=e[0],d[8]=e[1]))},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessages] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessages",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[7],d[8]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessagesStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSGetNextEpochAnonId.nop",["CryptoLogger","LSCryptoUtils","LSResult","Promise","XPlatReactTextDecoder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=d("LSCryptoUtils").strToBuf("0");if(f!=null){e=f;if(e.byteLength===0)f=a;else{var g=new(d("XPlatReactTextDecoder").TextDecoder)();g=g.decode(e);e=Number.parseInt(g,10);g=e+1;f=d("LSCryptoUtils").strToBuf(String(g))}}else f=a;return(h||(h=b("Promise"))).resolve(c("LSResult")(f))["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("get_next_epoch_anonid"),a).mustfix("Getting next epoch anon id failed");throw a})};a.__nop_name__="LSGetNextEpochAnonId";g["default"]=a}),98);
__d("LSInternetConnectionState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});f["default"]=a}),66);
__d("LSIssueNewEbTaskAndGetTaskIDV2",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],void 0,void 0,c.i64.cast([0,0]),a[3],a[4],void 0,a[5],a[7]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueNewEbTaskAndGetTaskIDV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadThreadPkFromThreadId",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadThreadPkFromThreadId] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(173).fetch(),function(b){return c.i64.to_string(b.jid)===a[0]}).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,100])),d[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[2]=e[0],d[3]=e[1]):(b=a.item,e=[b.clientThreadPk,void 0],d[2]=e[0],d[3]=e[1])})},function(a){return c.i64.neq(d[2],void 0)?(a=[d[2],d[3]],d[5]=a[0],d[6]=a[1],a):(d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,7])),d[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[13].set("error_message",""),c.i64.neq(void 0,void 0)?(a=[void 0,d[13]],d[14]=a[0],d[15]=a[1],a):(d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,100])),d[16].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[16].set("error_message",""),a=[void 0,d[16]],d[14]=a[0],d[15]=a[1]),a=[d[14],d[15]],d[5]=a[0],d[6]=a[1]),d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadThreadPkFromThreadId] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadThreadPkFromThreadId",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure";a.__tables__=["mi_act_mapping_table"];e.exports=a}),null);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop");a=function(a,b,c,d,e,f,g,i){return h.load().then(function(a){return a.call(c,d,e,f,g,i)})};a.__nop_name__="LSLogWebQpl";g["default"]=a}),98);
__d("LSMEBTaskCreationSource",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86});f["default"]=a}),66);
__d("UInt8Array",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}g.fromHexString=a;g.getBufferWithRandomValuesFromLength=b;g.concatBytes=c}),98);
__d("PublicKeyEncryptionUtils",["Promise","UInt8Array","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){}function c(a){if(a!=null)return a;else return new Uint8Array(0).buffer}function e(a,b,c,e,f){return d("UInt8Array").concatBytes([a,b,c,e,f]).buffer}function f(a,b,c,e){return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey"]).then(function(a){return d("XPlatReactCrypto").subtleDeriveKey({hash:"SHA-256",info:c,name:"HKDF",salt:b},a,{length:256,name:"AES-GCM"},!1,[e])})}var i="key length is not "+32;function j(a,b){if(a.length!==32)return b(i)}function k(a){return new(h||(h=b("Promise")))(function(b,c){j(a,c);return b()})}var l=32;g.assertValidCurvePoint=a;g.getSalt=c;g.concatAad=e;g.getAesKey=f;g.testKeyLength=j;g.assertKeyLength=k;g.keyLength=l}),98);
__d("PublicEncryptionCreateDecryptedData",["CryptoLogger","Promise","PublicKeyEncryptionUtils","RetUtil","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("PublicKeyCrypto").__setRef("PublicEncryptionCreateDecryptedData"),j=c("requireDeferred")("X25519").__setRef("PublicEncryptionCreateDecryptedData");function k(a,b){var c=1+d("PublicKeyEncryptionUtils").keyLength+16;a=a.length;a<1+d("PublicKeyEncryptionUtils").keyLength+16&&b("CipherText length is "+a+", < "+c)}function l(a,b,c){b=b[0];if(b!==a)return c("Unexpected version "+b)}function m(a){return new(h||(h=b("Promise")))(function(b,c){l(1,a,c);k(a,c);return b()})}function n(a,c){return new(h||(h=b("Promise")))(function(b,e){d("PublicKeyEncryptionUtils").assertValidCurvePoint(a,e);d("PublicKeyEncryptionUtils").assertValidCurvePoint(c,e);return b()})}function a(a,c,e,f,g,k){var l=new Uint8Array(g),o=new Uint8Array([1]),p=d("PublicKeyEncryptionUtils").getSalt(f),q=new Uint8Array(a),r=new Uint8Array(e),s=new Uint8Array(c),t=new Uint8Array(k);return(h||(h=b("Promise"))).all([d("PublicKeyEncryptionUtils").assertKeyLength(q),d("PublicKeyEncryptionUtils").assertKeyLength(s),d("PublicKeyEncryptionUtils").assertKeyLength(r)]).then(function(){return m(t)}).then(function(){return j.load()}).then(function(a){var c=t.slice(1,d("PublicKeyEncryptionUtils").keyLength+1),e=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);return n(e,r).then(function(){var f=d("PublicKeyEncryptionUtils").concatAad(o,r,q,c,l),g=function(c,d,f){c=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);d=a.publicKeyFromBytes(d,a.KeyPurpose.Encryption);f=a.secretKeyFromBytes(f,a.KeyPurpose.Encryption);return c==null||d==null||f==null||e==null?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).resolve([c,d,f,e])};return g(q,r,s).then(function(a){if(a==null)return;return{ephemeralPub:a[3],innerAad:f,receiverPriv:a[2],receiverPub:a[0],senderPub:a[1]}})})}).then(function(a){if(a==null)return;var b=a.ephemeralPub,c=a.receiverPriv,e=a.senderPub,f=a.innerAad;return i.load().then(function(a){return a.receiverDeriveSharedSecret(c,b,e)}).then(function(a){if(a==null)return null;else return d("PublicKeyEncryptionUtils").getAesKey(a,p,f,"decrypt")}).then(function(a){if(a==null)return;var b=new Uint8Array(12).buffer,c=t.slice(d("PublicKeyEncryptionUtils").keyLength+1).buffer;return d("XPlatReactCrypto").subtleDecrypt({additionalData:f,iv:new Uint8Array(b),name:"AES-GCM",tagLength:128},a,c)})}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a))})["catch"](function(a){var c=d("CryptoLogger").CryptoLogger("public_encryption_create_decrypted_data");d("CryptoLogger").captureError(c,a).mustfix("Creation of decrypted data for public encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))})}g["default"]=a}),98);
__d("LSPublicEncryptionCreateDecryptedData.nop",["PublicEncryptionCreateDecryptedData"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e,f,g,h,i){return c("PublicEncryptionCreateDecryptedData")(d,e,f,g,h,i)};a.__nop_name__="LSPublicEncryptionCreateDecryptedData";g["default"]=a}),98);
__d("LSQplAnnotateBool.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i,j){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").addAnnotations(a,{bool:(f={},f[i]=j,f)},{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplAnnotateBool";g["default"]=a}),98);
__d("LSStoreEpoch",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return c[1]="Storing newly derived epoch ",c[2]=b.blobs.to_string(a[2]),c[3]=" authority_level:",c[4]=b.i64.to_string(a[5]),c[5]=" status:",c[6]=b.i64.to_string(a[4]),c[0]="",function(a){b.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] ",c[0],c[1],c[0],c[2],c[0],c[3],c[0],c[4],c[0],c[5],c[0],c[6]].join("")),b.resolve()},function(c){return function(a){b.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] Storing epoch in epochs table (regular execution)"),b.filter(b.db.table(169).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.epochId,a[0])&&b.i64.gt(c.authorityLevel,a[5])}).next().then(function(c){var d=c.done;c.value;return d?b.db.table(169).put({epochId:a[0],backupId:a[1],epochAnonIdBlob:a[2],epochRootKeyBlob:a[3],epochStatus:a[4],epochHead:a[7],authorityLevel:a[5]}):0})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSEncryptedBackupsStoreEpochStoredProcedure";a.__tables__=["secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("MAWBridgeSafeActionsWorkerAndUI",["ExecutionEnvironment","FBLogger","MAWBridge","Promise","ifRequireable"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f){return(i||(i=c("ExecutionEnvironment"))).isInWorker?d("MAWBridge").getBridge().sendAndReceive("backend",a,e,f==null?void 0:f.isLoggingDisabled):new(h||(h=b("Promise")))(function(b,d){return c("ifRequireable")("MAWBridgeSendAndReceive",function(c){c=c.sendAndReceive;return b(c("backend",a,e,f))},function(){return d("MAWBridgeSendAndReceive not available in UI ifRequired")})})}function e(a,b,e){return(i||(i=c("ExecutionEnvironment"))).isInWorker?d("MAWBridge").getBridge().fireAndForget("backend",a,b,e):c("ifRequireable")("MAWBridgeFireAndForget",function(c){c=c.fireAndForget;return c("backend",a,b,e)},function(){throw c("FBLogger")("messenger_web").mustfixThrow("MAWBridgeFireAndForget not available in UI ifRequired")})}g.sendAndReceiveBackendWorkerAndUIShared=a;g.fireAndForgetBackendWorkerAndUIShared=e}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";async function a(){try{var a,b=d("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),e=(await (a=d("MAWKeychainCrypto")).getAccountKeys(b))[0],f=a.genBrowserEncryptionKeyString(),g=a.genDatabaseEncryptionSeed();e=await a.encryptDataToStringBuffer(e,g);g=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+d("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:await a.generateHashString(d("MAWWebInitDataHelpers").getAccountKeysString(b)[0]),appIdOrigin:c("MessengerWebInitData").appId,expiration:g,formatVersion:b,key:f,seed:e,userKeyBaseString:await a.generateHashString(c("MessengerWebInitData").userKeyBase)}}catch(a){throw c("FBLogger")("messenger_web").catching(a).mustfixThrow("Failed to generateNewKey")}}g.default=a}),98);
__d("MAWEARKeychainDecryptionError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="MAWEARKeychainDecryptionError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={dyi:c("justknobx")._("467"),frontloaded:20,initial:20,paginated:c("justknobx")._("3177"),point:1,search:c("justknobx")._("2477")};function a(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"paginated"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function b(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:f,traceId:a,triggerType:"initial"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function e(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"dyi"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function f(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"frontloaded"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function k(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"point"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function l(a){var b=a.querySource,e=a.runningInWorker;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:a,triggerType:"search"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function m(a,b){a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLSuccessThroughBridge(c("qpl")._(521476165,"2432"),void 0,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endSuccess(c("qpl")._(521476165,"2432"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function n(a,b,e,f){e===void 0&&(e="restore_failure"),a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521476165,"2432"),e,f,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endFailure(c("qpl")._(521476165,"2432"),e,{annotations:f,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function o(a){u("protobuf",a)}function p(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource,g=a.traceId;a=a.triggerType;if(e!=null&&e){var h;d("MAWQplProxy").startQplUserFlow(c("qpl")._(521476165,"2432"),{bool:{runningInWorker:e===!0},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},{providedInstanceKey:d("WAHashStringToNumber").hashStringToNumber(g),providedTimeoutInMs:c("justknobx")._("2950")})}else{c("QPLUserFlow").start(c("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:e===!0},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(g),timeoutInMs:c("justknobx")._("2950")})}}function q(a){var b=a.pointName;a=a.traceId;c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function r(a){var b=a.annotations,e=a.pointName;a=a.traceId;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),e,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function s(a){var b=a.annotations,e=a.pointName;a=a.traceId;a!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),e,{annotations:b,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function t(a){var b=a.pointName;a=a.traceId;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function u(a,b){b=b?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b):null;(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+a+"."+v(b))}function v(a){return(a=a==null?void 0:a.toString())!=null?a:"unknown"}g.markEBRestorePaginated=a;g.markEBRestoreInitial=b;g.markEBRestoreDYI=e;g.markEBRestoreFrontloaded=f;g.markEBRestorePoint=k;g.markEBRestoreSearch=l;g.markEBRestoreSuccess=m;g.markEBRestoreFail=n;g.markEBRestoreProtobuf=o;g.addQPLRestorePoint=q;g.addQPLRestorePointWithAnnotations=r;g.addQPLRestorePointWithAnnotationsWorker=s;g.addQPLRestorePointWorker=t}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=300;b=600;c=900;e=1800;d=Math.imul((f=d("WATimeUtils")).HOUR_SECONDS,6);var h=Math.imul(f.HOUR_SECONDS,12),i=Math.imul(f.DAY_SECONDS,14),j=1e3,k=5,l=10,m=30,n=60,o=d;g.fiveMinutesInSeconds=a;g.tenMinutesInSeconds=b;g.fifteenMinutesInSeconds=c;g.thirtyMinutesInSeconds=e;g.oneHourInSeconds=f.HOUR_SECONDS;g.sixHoursInSeconds=d;g.twelveHoursInSeconds=h;g.oneDayInSeconds=f.DAY_SECONDS;g.ephemeralMaxDelectionWindowForUnseenMessage=i;g.msPerSec=j;g.fiveSeconds=k;g.tenSeconds=l;g.thirtySeconds=m;g.oneMinuteInSeconds=n;g.ephemeralReportingWindowInSeconds=o}),98);
__d("MAWWorkerSetupArgs",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(){return g}function c(){g=null}f.setWorkerSetupArgs=a;f.getWorkerSetupArgs=b;f.resetWorkerSetupArgs=c}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,e,f,g,i,j){f===void 0&&(f=1);try{var k=await d("MAWKeychainCrypto").getAccountKeys(f);a=await Promise.all([d("MAWKeychainCrypto").importBrowserEncryptionKey(a),Promise.all(k.map(function(a){return d("MAWKeychainCrypto").decryptDataToArrayBuffer(a,b).catch(function(){return null})}))]);var l=a[0];k=a[1];a=await Promise.all(k.filter(Boolean).map(function(a){return d("MAWKeychainCrypto").genDatabaseEncryptionKey(l,a).catch(function(){return null})}));k=a.filter(Boolean);if(k.length===0)throw new(c("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:k,version:e}}catch(b){a=null;k=null;e=d("MAWWorkerSetupArgs").getWorkerSetupArgs();(h||(h=c("ExecutionEnvironment"))).isInWorker&&e!=null&&(a=e.userKeyBase===c("MessengerWebInitData").userKeyBase,k=e.fbId===d("MAWCurrentUser").getID());e=d("MAWWebInitDataHelpers").getAccountKeysString(f);var m=e&&e[0]!=null?await d("MAWKeychainCrypto").generateHashString(e[0]):null;c("FBLogger")("messenger_web").catching(b).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",g!=null,e!=null,g===m,i!=null,c("MessengerWebInitData").userKeyBase!=null,i===await d("MAWKeychainCrypto").generateHashString(c("MessengerWebInitData").userKeyBase),j,c("MessengerWebInitData").appId,d("MAWCurrentUser").getID()===String(c("MessengerWebInitData").userId),(h||(h=c("ExecutionEnvironment"))).isInWorker,a,k,f);throw b}}g.default=a}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){if(d("WAJids").isAuthorSystem(a)||b==null||e==null){c("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",e);return}return{author:a,chat:b,externalId:e}}function a(a){var b;return j(a.author,a.threadJid,(b=a.externalId)!=null?b:a.editExternalId)}function b(a){return d("WAJids").isAuthorMe(a)?d("WAGlobals").getMyUserJid():a}function e(a,b){a=(h||(h=d("I64"))).to_string(a);b=(i||(i=d("LSIntEnum"))).unwrapIntEnum(b);switch(b){case 15:return d("MAWJids").jidUtils.toUserJid(a);case 16:return d("WAJids").toGroupJid(a);default:return null}}function f(a){return m(a.threadJid,a.externalId)}function k(a){return l(a.threadJid,a.externalId)}function l(a,b){a=d("MAWDbMsg").toMsgId(m(a,b));if(a==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",b);return a}function m(a,b){return a+"."+b}g.maybeToProtocolMsgId=j;g.toProtocolMsgId=a;g.getAuthorJid=b;g.LSJidtoChatJid=e;g.toProtocolMsgIdStringForMAWStorage=f;g.formatProtocolMsgIdFromMsg=k;g.formatProtocolMsgIdFromExternalId=l}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:3449")&&b("cr:3449").clearLocalStorageBigValues()}g.onQuotaExceeded=a}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j,d("MWLocalStorageErrorHandler").onQuotaExceeded)}function e(a,b){a==null?d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("MAWSupportedDocumentTypes",[],(function(a,b,c,d,e,f){"use strict";var g=["apk","pyc","7z","z","gz","xz","rar","zip","zipx","ace","arc","zpaq","quad","balz","cab","arj","lzh","uue","bz","bz2","bzip2","jar","iso","tar","ade","adp","air","app","application","bas","bat","chm","cmd","com","command","cpl","crt","dll","dmg","dpkg","exe","hlp","hta","inf","ins","isp","jnlp","js","jse","lib","lnk","lua","mde","msc","msi","msp","mst","ocx","pcd","pif","pkg","ps1","reg","scr","sct","sh","shb","shs","sys","term","url","vb","vbe","vbs","vxd","webarchive","wsc","wsf","wsh","xbap"];function a(a){if(a==null)return!1;a=a.includes(".")?a.split(".").pop():null;return a!=null&&!g.includes(a)}f.isAllowedType=a}),66);
__d("MWEARKeychainV3Errors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="EARKeychainNotFoundError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.EARKeychainNotFoundError=a}),66);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof window!=="undefined"?window:self;function i(a){var b=d("MAWLocalStorage").getStorage(),c=function(c){d("MAWLocalStorage").setItemGuarded(b,a,JSON.stringify(c))},e=function(c){window.removeEventListener("storage",c),d("MAWLocalStorage").removeItemGuarded(b,a)},f=function(a){window.addEventListener("storage",a)},g=function(b){return b!=null&&b.key===a&&typeof b.newValue==="string"?JSON.parse(b.newValue):null};return{getMessage:g,onRequestReceived:function(a){var b=function(b){b=g(b);b!=null&&a(b)};f(b);return{release:function(){e(b)}}},sendMessage:c,stopWaitingForReply:e,waitForReply:f}}function j(a){var b=new h.BroadcastChannel(a),c=new Set();b.addEventListener("message",function(a){c.forEach(function(b){b(a)})});var d=function(a){c.add(a)},e=function(a){c["delete"](a)};a=function(a){b.postMessage(JSON.stringify(a))};var f=function(a){return a!=null&&typeof a.data==="string"?JSON.parse(a.data):null};return{getMessage:f,onRequestReceived:function(a){var b=function(b){b=f(b);b!=null&&a(b)};d(b);return{release:function(){e(b)}}},sendMessage:a,stopWaitingForReply:e,waitForReply:d}}function a(a){return h.BroadcastChannel!=null?j(a):i(a)}g.getChannel=a}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){var c=this;this.$2=null;this.$5=function(a){a=c.$4.getMessage(a);a!=null&&a.a==="sb"&&a.t!==c.tabID()&&a.r===c.tabID()&&a.k!=null&&(c.$2&&c.$2(a.k),c.$4.stopWaitingForReply(c.$5),c.$2=null)};this.$1=a;this.$3=b!=null?b:500;this.$4=d("MWTabCommunicationChannel").getChannel(a)}var e=a.prototype;e.tabID=function(){return c("pageID")};e.$6=function(){var a={a:"r",t:this.tabID()};this.$4.sendMessage(a)};e.listenToRequest=function(a){return this.listenToRequestAsync(function(){return(h||(h=b("Promise"))).resolve(a())})};e.listenToRequestAsync=function(a){var b=this,d=function(d){d.a==="r"&&d.t!==b.tabID()&&c("promiseDone")(a().then(function(a){a={a:"sb",k:a,r:d.t,t:b.tabID()};b.$4.sendMessage(a)}))};return this.$4.onRequestReceived(d)};e.$7=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.$2=b,a.$4.waitForReply(a.$5),a.$6()})};e.request=function(a,d){var e=this,f,g=function(){f!=null&&c("clearTimeout")(f)};return(h||(h=b("Promise"))).race([this.$7().then(function(b){e.$4.stopWaitingForReply(e.$5);return a(b)}),new h(function(a){f=c("setTimeout")(function(){a(d()),e.$4.stopWaitingForReply(e.$5)},e.$3)})]).then(function(a){g();return a})};return a}();g.MWTabCommunication=a}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){return{accountKey:null,databaseEncryptionKeys:new Map(),dbReady:new(c("Deferred"))(),latestVersion:d("MAWCryptoConsts").VERSION}},j={global_ear:i(),maw_ear:i()},k=null,l=function(){var a=Object.keys(j).reduce(function(a,b){a[b]="none";return a},{});return{get:function(b){return a[b]},is:function(b,c){return a[b]===c},set:function(b,c){a[b]=c;(b=k)==null||b.updateState()}}}();function a(a){j[a]=i(),l.set(a,"none")}function e(a,b){l.set(a,b)}function m(a){var b=d("Random").uint32();while(a.some(function(a){return a.randomisedVersion===b}))b=d("Random").uint32();return b}var n={global_ear:function(){return null},maw_ear:function(){return null}},o=function(a){return n[a]()},p=function(a,b){n[a]=function(){return b}},q=function(a,b){p(a,b),v(a).dbReady.resolve()},r={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},s=c("memoizeOneWithArgs")(function(a,b){return new(d("MWTabCommunication").MWTabCommunication)("ear_keys_"+b+"_"+a)});async function f(a,b,e){var f;e===void 0&&(e=K);c("gkx")("9396")&&c("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",a);k=I(a);if(l.is(a,"success")&&v(a).databaseEncryptionKeys.size!==0)return d("WAResultOrError").makeResult(u(a));var g=d("MAWCurrentUser").getID(),i=c("ReStoreTabNotifier")("channel-ear-keychain-v3-"+g);i.onEventReceive("notifyEarKeychainV2",E);var j=(h||(h=c("ExecutionEnvironment"))).isInWorker?"Worker":"UI";e(a+"_ear_init_start",{string:(f={},f["initFlow_"+a+"_"+j]=b,f)});try{b=await J(i,a,void 0,e);e(a+"_ear_import_end");for(f of b)v(a).databaseEncryptionKeys.set(f.result.version,{dbEntry:f.entry,keys:f.result.keys});D(a);s(a,g).listenToRequest(function(){return JSON.stringify(Array.from(v(a).databaseEncryptionKeys.entries()).map(function(a){var b=a[0];a=a[1];var c=a.dbEntry;a=a.keys;return[b,{dbEntry:c,keys:a.map(function(a){return d("WAArrayBufferUtils").arrayBufferToString(a)})}]}))});e(a+"_ear_init_end",{string_array:(i={},i[a+"_randomisedVersionKeys"+j]=t(a).map(function(a){a[0];a=a[1].dbEntry;return String(a.randomisedVersion)}),i)});l.set(a,"success");return d("WAResultOrError").makeResult(u(a))}catch(b){l.set(a,"failure");e(a+"_ear_init_error");c("gkx")("9396")&&c("FBLogger")("messenger_web").catching(c("getErrorSafe")(b)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",a);return d("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",b)}}function t(a){return Array.from(v(a).databaseEncryptionKeys.entries())}function u(a){return v(a).latestVersion}function v(a){return j[a]}function w(a,b){var e=b!=null?b:u(a);b=v(a).databaseEncryptionKeys.get(e);if(b==null){c("promiseDone")(A(a).then(function(a){var b=a.map(function(a){return a.version}).includes(e);c("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",b,e,a.length)}));var f=u(a),g=Array.from(v(a).databaseEncryptionKeys.keys());c("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",e,f,v(a).databaseEncryptionKeys.get(f)==null,v(a).databaseEncryptionKeys.size,Math.max.apply(Math,g),l.get(a),(h||(h=c("ExecutionEnvironment"))).isInWorker);throw new(d("MWEARKeychainV3Errors").EARKeychainNotFoundError)("EAR Key "+e+" was null.")}return{dbEntry:b.dbEntry,keys:b.keys,randomisedVersion:b.dbEntry.randomisedVersion,version:e}}function x(a){return c("MAWGenKeychainCryptoKeyWithVersion")(a.key,a.seed,a.version,a.formatVersion,a.accountKeyString,a.userKeyBaseString,a.appIdOrigin)}var y=b("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function z(a){if(a.length===0)return{reason:y.NO_KEY,result:!0};a=a[a.length-1];return!d("WATimeUtils").isInFuture(a.expiration)?{reason:y.EXPIRED_KEY,result:!0}:{result:!1}}function A(a){var b=C(a,"readonly");return new Promise(function(c,d){b.onabort=function(){return d(b.error)};b.onerror=function(){return d(b.error)};var e=b.objectStore(r[a]).getAll();e.onsuccess=function(){return c(e.result)};e.onerror=function(){return d(e.error)}}).then(B)}function B(a){var b=a.find(function(a){return a.version==null});b!=null&&c("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",b.id==null,b.key==null,b.seed==null,b.formatVersion==null,b.accountKeyString==null,b.userKeyBaseString==null);b=a.filter(function(a){return a.version!=null});return b.sort(function(a,b){return a.version-b.version})}function C(a,b){var d=o(a);if(d==null)throw c("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",a);return d.transaction(r[a],b,{durability:"strict"})}var D=function(a){var b=Array.from(v(a).databaseEncryptionKeys.keys());b.length>0?v(a).latestVersion=Math.max.apply(Math,b):c("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},E=function(a){var b=a.namespace,d=a.version;c("promiseDone")(async function(){try{c("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",b);await v(b).dbReady.getPromise();var a=(await A(b)).find(function(a){return a.version===d});if(a==null)throw c("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var e=await x(a);v(b).databaseEncryptionKeys.set(e.version,{dbEntry:a,keys:e.keys});D(b);c("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",b)}catch(a){return c("FBLogger")("messenger_web").catching(a).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(h||(h=c("ExecutionEnvironment"))).isInWorker,b)}}())};function F(a){return l.get(a)!=="none"}function G(a){return l.get(a)}function H(a){if(l.is(a,"success")){v(a).databaseEncryptionKeys.size===0&&c("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present");return!0}return!1}function I(a){return d("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:H(a).toString(),latestVersion:u(a).toString()},reason:l.get(a),state:function(){switch(l.get(a)){case"none":return d("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return d("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return d("MAWReliabilityMonitor").HealthReportState.ERROR;default:return d("MAWReliabilityMonitor").HealthReportState.UNKNOWN}}()}})}async function J(a,b,d,e){var f=await c("MAWEARGenNewKeychainCryptoKey")();e(b+"_ear_raw_key_generated");var g=await new Promise(function(g,i){var j=C(b,"readwrite");j.onerror=function(){return i(j.error)};j.onabort=function(){return i(j.error)};var k=j.objectStore(r[b]).getAll();k.onerror=function(){return i(k.error)};k.onsuccess=function(){var l;e(b+"_ear_keys_fetched");var n=B(k.result),o=z(n),p=o.reason;o=o.result;if((d==null?void 0:d.forceKeyRotation)!==!0&&!o)return g(n);o=(d==null?void 0:d.forceKeyRotation)===!0?y.FORCE_KEY_ROTATION:p!=null?p:y.UNKNOWN;p=n.map(function(a){return a.version});l=(l=p[p.length-1])!=null?l:0;c("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",p.toString(),l,b,(h||(h=c("ExecutionEnvironment"))).isInWorker);var q=babelHelpers.extends({},f,{randomisedVersion:m(n),source:o,version:l+1});e(b+"_ear_adding_new_key");j.oncomplete=function(){n.push(babelHelpers.extends({},q,{id:q.version})),a.postMessage("notifyEarKeychainV2",{namespace:b,version:q.version}),e(b+"_ear_gen_key_end"),g(n)};var s=j.objectStore(r[b]).add(q);s.onerror=function(){return i(c("FBLogger")("messenger_web").catching(s.error).mustfixThrow("Failed to rotate EAR key"))}}});e(b+"_ear_import_start");g=await Promise.allSettled(g.map(function(a){return x(a).then(function(b){return{entry:a,result:b}})}));var i=g[g.length-1];if(i.status==="rejected"){var j;j=(j=d==null?void 0:d.corruptedEARRetryCount)!=null?j:0;if(j>=1)throw i.reason;return J(a,b,{corruptedEARRetryCount:j+1,forceKeyRotation:!0},e)}return g.map(function(a){if(a.status==="fulfilled")return a.value}).filter(Boolean)}var K=function(a,b){d("LSPlatformLsInitLog").addPoint(a,b),L(a,b)},L=function(a,b){var e=c("qpl")._(25310776,"6155");(h||(h=c("ExecutionEnvironment"))).isInWorker?d("MAWQplProxy").sendQplPointThroughBridge(e,"backend_"+a,{annotations:b}):(c("QPLUserFlow").addPoint(e,"ui_"+a),b!=null&&c("QPLUserFlow").addAnnotations(e,b))};b=function(a,b){return s(a,b).request(function(b){b=JSON.parse(b);b.forEach(function(b){var c=b[0];b=b[1];var e=b.keys.map(d("WAArrayBufferUtils").stringToArrayBuffer);v(a).databaseEncryptionKeys.set(c,{dbEntry:b.dbEntry,keys:e})});D(a);l.set(a,"success");return!0},function(){return!1})};g.InitStatus=l;g.resetKeychain__TEST_ONLY_DO_NOT_USE=a;g.setInitStatus__TEST_ONLY_DO_NOT_USE=e;g.generateNewRandomisedVersionNumber=m;g.setNamespaceSourceDbWithoutMarkingDbReady=p;g.setNamespaceSourceDbAndMarkAsReady=q;g.getEncryptionKeysTabCommunication=s;g.init=f;g.getLatestVersion=u;g.getKeychain=v;g.getDbEncryptionKey=w;g.isKeychainSettled=F;g.getKeychainInitStatus=G;g.isKeychainInitialised=H;g.logMawInitPoint=L;g.importKeysFromOtherTab=b}),98);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("CurrentMessengerUser").getAppID();f=f!=null?f.toString():"unknown";f=a+"."+f;(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),f,b,e!=null?e:1);h.bumpEntityKey(c("MWEBODSCategory"),a,b,e!=null?e:1)}g.markODSForEB=a}),98);
__d("PublicEncryptionCreateEncryptedData",["CryptoLogger","Promise","PublicKeyEncryptionUtils","RetUtil","UInt8Array","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("PublicKeyCrypto").__setRef("PublicEncryptionCreateEncryptedData"),j=c("requireDeferred")("X25519").__setRef("PublicEncryptionCreateEncryptedData");function k(a,b){if(a.byteLength>32)return b("PSK is too long")}function l(a,c){return new(h||(h=b("Promise")))(function(b,e){d("PublicKeyEncryptionUtils").assertValidCurvePoint(c,e);k(a,e);return b()})}function a(a,c,e,f,g,k){var m=new Uint8Array([1]),n=new Uint8Array(g),o=d("PublicKeyEncryptionUtils").getSalt(f),p=new Uint8Array(a),q=new Uint8Array(c),r=new Uint8Array(e);return(h||(h=b("Promise"))).all([d("PublicKeyEncryptionUtils").assertKeyLength(p),d("PublicKeyEncryptionUtils").assertKeyLength(q),d("PublicKeyEncryptionUtils").assertKeyLength(r)]).then(function(){return l(o,p)}).then(function(){return j.load()}).then(function(a){var c=a.generateKeys(a.KeyPurpose.Encryption),e=c.pk,f=d("PublicKeyEncryptionUtils").concatAad(m,q,p,e,n);e=function(c,d,e){c=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);d=a.publicKeyFromBytes(d,a.KeyPurpose.Encryption);e=a.secretKeyFromBytes(e,a.KeyPurpose.Encryption);return c==null||d==null||e==null?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).resolve([c,d,e])};return e(p,q,r).then(function(a){return a==null?null:{ephemeralPriv:c.sk,ephemeralPubBytes:c.pk,innerAad:f,receiverPub:a[0],senderPriv:a[2],senderPub:a[1]}})}).then(function(a){if(a==null)return;var b=a.ephemeralPubBytes,c=a.ephemeralPriv,e=a.senderPriv,f=a.receiverPub,g=a.innerAad;return i.load().then(function(a){return a.senderDeriveSharedSecret(e,c,f)}).then(function(a){if(a==null)return;return d("PublicKeyEncryptionUtils").getAesKey(a,o,g,"encrypt")}).then(function(a){if(a==null)return;var b=new Uint8Array(12).buffer;return d("XPlatReactCrypto").subtleEncrypt({additionalData:g,iv:new Uint8Array(b),name:"AES-GCM",tagLength:128},a,k)}).then(function(a){if(a==null)return;a=new Uint8Array(a);return d("UInt8Array").concatBytes([m,b,a]).buffer})}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a))})["catch"](function(a){var c=d("CryptoLogger").CryptoLogger("public_encryption_create_encrypted_data");d("CryptoLogger").captureError(c,a).mustfix("Creation of encrypted data for public encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))})}g["default"]=a}),98);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),g=d("SymmetricEncryptionPaddingUtils").padData(e),i=d("XPlatReactCrypto").getRandomValues(new Uint8Array(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes));e=new(d("HChaCha20").HChaCha20)();e=e.hChaCha20Bytes(i.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,a);return d("XPlatReactCrypto").subtleImportKey("raw",e,"AES-GCM",!1,["encrypt"]).then(function(a){return d("XPlatReactCrypto").subtleEncrypt({additionalData:c,iv:new Uint8Array(i.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,g)}).then(function(a){var c=i.byteLength+a.byteLength;c=new Uint8Array(c);c.set(i);c.set(new Uint8Array(a),d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes);return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(c.buffer))})["catch"](function(a){d("CryptoLogger").captureError(f,a).mustfix("symmetric data encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.call(this,!1)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.isConnected=function(){return this.get()};c.waitForConnection=function(){return this.waitForValue(!0)};return b}(d("WAGenericStateManager").WAGenericStateManager);b=new a();g.WACommsConnectionState=b}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";b={scalarbase:(a=d("tweetnacl")).lowlevel.scalarbase,crypto_hash:a.lowlevel.crypto_hash,modL:a.lowlevel.modL,pack25519:a.lowlevel.pack25519,S:a.lowlevel.S,M:a.lowlevel.M,A:a.lowlevel.A,Z:a.lowlevel.Z,D:a.lowlevel.D,unpack25519:a.lowlevel.unpack25519,pow2523:a.lowlevel.pow2523,crypto_verify_32:a.lowlevel.crypto_verify_32,set25519:a.lowlevel.set25519,add:a.lowlevel.add,scalarmult:a.lowlevel.scalarmult};g.hash=a.hash;g.scalarMult=a.scalarMult;g.verify=a.verify;g.lowlevel=b;g.keypairFromSecretKey=a.box.keyPair.fromSecretKey;g.keyPair=a.box.keyPair;g.signDetachedVerify=a.sign.detached.verify}),98);
__d("WASignalLocalStorageProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={};a.internalSpec={sessionVersion:[1,(d=d("WAProtoConst")).TYPES.UINT32],localIdentityPublic:[2,d.TYPES.BYTES],remoteIdentityPublic:[3,d.TYPES.BYTES],rootKey:[4,d.TYPES.BYTES],previousCounter:[5,d.TYPES.UINT32],senderChain:[6,d.TYPES.MESSAGE,e],receiverChains:[7,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],pendingKeyExchange:[8,d.TYPES.MESSAGE,c],pendingPreKey:[9,d.TYPES.MESSAGE,b],remoteRegistrationId:[10,d.TYPES.UINT32],localRegistrationId:[11,d.TYPES.UINT32],needsRefresh:[12,d.TYPES.BOOL],aliceBaseKey:[13,d.TYPES.BYTES]};b.internalSpec={preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[3,d.TYPES.INT32],baseKey:[2,d.TYPES.BYTES]};c.internalSpec={sequence:[1,d.TYPES.UINT32],localBaseKey:[2,d.TYPES.BYTES],localBaseKeyPrivate:[3,d.TYPES.BYTES],localRatchetKey:[4,d.TYPES.BYTES],localRatchetKeyPrivate:[5,d.TYPES.BYTES],localIdentityKey:[7,d.TYPES.BYTES],localIdentityKeyPrivate:[8,d.TYPES.BYTES]};e.internalSpec={senderRatchetKey:[1,d.TYPES.BYTES],senderRatchetKeyPrivate:[2,d.TYPES.BYTES],chainKey:[3,d.TYPES.MESSAGE,h],messageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f]};f.internalSpec={index:[1,d.TYPES.UINT32],cipherKey:[2,d.TYPES.BYTES],macKey:[3,d.TYPES.BYTES],iv:[4,d.TYPES.BYTES]};h.internalSpec={index:[1,d.TYPES.UINT32],key:[2,d.TYPES.BYTES]};i.internalSpec={currentSession:[1,d.TYPES.MESSAGE,a],previousSessions:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,a]};j.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES]};k.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES],signature:[4,d.TYPES.BYTES],timestamp:[5,d.TYPES.FIXED64]};l.internalSpec={publicKey:[1,d.TYPES.BYTES],privateKey:[2,d.TYPES.BYTES]};m.internalSpec={senderKeyId:[1,d.TYPES.UINT32],senderChainKey:[2,d.TYPES.MESSAGE,p],senderSigningKey:[3,d.TYPES.MESSAGE,n],senderMessageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,o]};n.internalSpec={"public":[1,d.TYPES.BYTES],"private":[2,d.TYPES.BYTES]};o.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};p.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};q.internalSpec={senderKeyStates:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};g.SessionStructureSpec=a;g.SessionStructure$PendingPreKeySpec=b;g.SessionStructure$PendingKeyExchangeSpec=c;g.SessionStructure$ChainSpec=e;g.SessionStructure$Chain$MessageKeySpec=f;g.SessionStructure$Chain$ChainKeySpec=h;g.RecordStructureSpec=i;g.PreKeyRecordStructureSpec=j;g.SignedPreKeyRecordStructureSpec=k;g.IdentityKeyPairStructureSpec=l;g.SenderKeyStateStructureSpec=m;g.SenderKeyStateStructure$SenderSigningKeySpec=n;g.SenderKeyStateStructure$SenderMessageKeySpec=o;g.SenderKeyStateStructure$SenderChainKeySpec=p;g.SenderKeyRecordStructureSpec=q}),98);
__d("WATypedArraysCast",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b instanceof a)return b;return typeof b==="string"?new a(d("WABase64").decodeB64(b)):new a(b)}g.castTypedArrays=a}),98);
__d("WACryptoHmac",["WACryptoDependencies","WATypedArraysCast"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=new Uint8Array(h),j={name:"HMAC",hash:"SHA-256"},k={name:"HMAC",hash:"SHA-512"},l={name:"HMAC",hash:"SHA-1"};function m(a,b){b=d("WATypedArraysCast").castTypedArrays(Uint8Array,b);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",b,a,!1,["sign"]).then(function(b){return{key:b,algo:a}})}function a(a){return m(j,a)}function n(a,b,c){var e=a.key;a=a.algo;return d("WACryptoDependencies").getCrypto().subtle.sign(a,e,b).then(function(a){return c!=null&&c!==0?a.slice(0,c):a})}function b(a,b){return m(j,a!=null?a:i).then(function(a){return n(a,b)})}function c(a,b,c){return m(j,a).then(function(a){return n(a,b,c)})}function e(a,b,c){return m(k,a).then(function(a){return n(a,b,c)})}function f(a,b,c){return m(l,a).then(function(a){return n(a,b,c)})}g.SHA256_BYTE_LENGTH=h;g.DEFAULT_SALT=i;g.encodeKeySha256=a;g.sign=n;g.extractSha256=b;g.hmacSha256=c;g.hmacSha512=e;g.hmacSha1=f}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=255*d("WACryptoHmac").SHA256_BYTE_LENGTH;function j(a,e,f){if(f<0||f>i)return(h||(h=b("Promise"))).reject(c("err")("HKDF::expand given bad length "+f));var g,j=Math.ceil(f/d("WACryptoHmac").SHA256_BYTE_LENGTH),k=d("WABinary").Binary.build(e).readByteArrayView(),l=new(d("WABinary").Binary)(),m=d("WACryptoHmac").encodeKeySha256(a).then(function(a){g=a;return new Uint8Array(0)});e=function(a){m=m.then(function(b){return d("WACryptoHmac").sign(g,d("WABinary").Binary.build(b,k,a).readByteArrayView())}).then(function(a){a=new Uint8Array(a);l.writeByteArray(a);return a})};for(a=1;a<=j;a++)e(a);return m.then(function(){return l.readBuffer(f)})}function a(a,b,c){return d("WACryptoHmac").extractSha256(null,a).then(function(a){return j(new Uint8Array(a),b,c)})}function e(a,b,c,e){return d("WACryptoHmac").extractSha256(b,a).then(function(a){return j(new Uint8Array(a),c,e)})}g.expand=j;g.extractAndExpand=a;g.extractWithSaltAndExpand=e}),98);
__d("WACryptoUtils",["WACryptoDependencies","WACryptoPrimitives","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function b(a,b){var c=new TextDecoder();return c.decode(a).toLowerCase()===c.decode(b).toLowerCase()}function h(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function e(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function f(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function i(a){if(a!==(a|0))throw c("err")("bound must be int32");if(a<=0)throw c("err")("bound must not be positive");var b=new Int32Array(1),e=-1>>>1;e=a*Math.floor(e/a);var f=-1;while(f===-1){d("WACryptoDependencies").getCrypto().getRandomValues(b);var g=b[0]>>>1;g<e&&(f=g%a)}return f}g.arrayBuffersEqual=a;g.arrayBuffersEqualCaseInsensitive=b;g.uint8ArraysEqual=h;g.rawKeysEqual=e;g.serializedPubKeysEqual=f;g.randomNumberLessThan=i}),98);
__d("WAXmlParsingFailure",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.parser=a,this.reason=b}var b=a.prototype;b.toString=function(){return"XmlParsingFailure: "+this.parser+": "+this.reason};return a}();f.XmlParsingFailure=a}),66);
__d("WAParsableXmlNode",["WAHasProperty","WAXmlParsingFailure","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var c=this;this.$1=a;this.$2=b;this.$3=Array.isArray(b.content)?b.content.map(function(b){return new c.constructor(a,b)}):null}var b=a.prototype;b.name=function(){return this.$1};b.node=function(){return this.$2};b.hasAttr=function(a){return c("WAHasProperty")(this.$2.attrs,a)};b.assertTag=function(a){this.$2.tag!==a&&this["throw"]("to be <"+a+">")};b.tag=function(){return this.$2.tag};b.maybeChild=function(a){var b=this.$3;if(!b)return null;for(var c=0;c<b.length;c++)if(b[c].tag()===a)return b[c];return null};b.hasChild=function(a){return!!this.maybeChild(a)};b.child=function(a){var b=this.maybeChild(a);return!b?this["throw"]("to have child <"+a+">"):b};b.assertAttr=function(a,b){var c=this.attrString(a);c!==b&&this["throw"]('to have "'+a+'"="'+b+'", but instead has "'+c+'"')};b.attrString=function(a){return!c("WAHasProperty")(this.$2.attrs,a)?this["throw"]('to have attribute "'+a+'"'):this.decodeAsString(this.$2.attrs[a])};b.forEachAttributeKey=function(a){var b=this.$2.attrs;Object.keys(b).forEach(function(b){return a(b)})};b.maybeAttrString=function(a){return this.hasAttr(a)?this.decodeAsString(this.$2.attrs[a]):null};b.maybeAttrInt=function(a,b,c){return this.hasAttr(a)?this.attrInt(a,b,c):null};b.attrEnumValues=function(a,b,c){b=new Set(b);var d=this.attrString(a);if(!b.has(d)){if(c!=null)return c;c=Array.from(b).join("|");return this["throw"]('to have "'+a+'"={'+c+'} but has value "'+d+'"')}return d};b.attrEnum=function(a,b){var d=this.attrString(a);if(!c("WAHasProperty")(b,d)){var e=Object.keys(b).join("|");return this["throw"]('to have "'+a+'"={'+e+'} but has value "'+d+'"')}return b[d]};b.attrEnumOrNullIfUnknown=function(a,b){a=this.attrString(a);return!c("WAHasProperty")(b,a)?null:b[a]};b.attrEnumOrDefault=function(a,b,c){return this.hasAttr(a)?this.attrEnum(a,b):c};b.attrInt=function(a,b,c){var d=this.attrString(a);return this.$4(d,a,b,c)};b.$4=function(a,b,c,d){var e=parseInt(a,10);if(Number.isNaN(e))return this["throw"]('to have "'+b+'"={integer} but has value "'+a+'"');else if(c!==void 0&&e<c)return this["throw"]('to have "'+b+'"={at least '+c+"} but has value "+e);else if(d!==void 0&&e>=d)return this["throw"]('to have "'+b+'"={below '+d+"} but has value "+e);return e};b.forEachChild=function(a){var b=this.$3;if(b)b.forEach(function(b){return a(b)});else if(this.$2.content!=null)return this["throw"]("to have children")};b.forEachChildWithTag=function(a,b){this.forEachChild(function(c){c.tag()===a&&b(c)})};b.mapChildren=function(a){var b=this.$3;return!b&&this.$2.content!=null?this["throw"]("to have children"):b?b.map(function(b){return a(b)}):[]};b.mapChildrenWithTag=function(a,b){var c=this.$3;return!c&&this.$2.content!=null?this["throw"]("to have children"):c?c.filter(function(b){return b.tag()===a}).map(function(a){return b(a)}):[]};b.mapFirstChild=function(a){var b=this.$3;return!b||b.length===0?this["throw"]("to have children"):a(b[0])};b.hasContent=function(){return!this.$3&&!!this.$2.content};b.hasChildren=function(){return this.$3!=null};b.getChildren=function(){return this.$3};b.mapAttrKeys=function(a){var b=this.getAttrKeys();return b&&b.length?b.map(a):[]};b.getAttrKeys=function(){return Object.keys(this.$2.attrs)};b.hasAttrs=function(){var a=this.$2.attrs?Object.keys(this.$2.attrs):[];return a.length>0};b.getNode=function(){return this.$2};b.unsafeSetChildren=function(a){this.$3=a};b.unsafeSetNodeContent=function(a){this.$2.content=a};b.contentUint=function(a){var b=this.contentBytes(a);return h(b,a)};b.contentBytes=function(a){a===void 0&&(a=-1);if(this.$3)return this["throw"]("to have binary content, but has children instead");else if(this.$2.content!=null){var b=this.$2.content;return a!==-1&&b.length!==a?this["throw"]("to be "+a+" bytes, but got "+b.length+" instead"):b}else return this["throw"]("to have content")};b.contentString=function(){if(this.$3)return this["throw"]("to have string content, but has children instead");else if(this.$2.content!=null)return this.$2.content;else return this["throw"]("to have content")};b.contentInt=function(a,b){var c=this.contentString();return this.$4(c,"content",a,b)};b.contentEnum=function(a){var b=this.contentString();if(!c("WAHasProperty")(a,b)){var d=Object.keys(a).join("|");return this["throw"]("to have content {"+d+'} but has value "'+b+'"')}return a[b]};b.decodeAsString=function(a){if(typeof a!=="string")throw c("err")("decodeAsString: attribute is "+typeof a+" not a string: "+a);return a};b["throw"]=function(a){throw new(d("WAXmlParsingFailure").XmlParsingFailure)(this.$1,"expected <"+this.$2.tag+"> "+a)};b.toString=function(){return this.$2.toString()};return a}();function h(a,b){var c=0;for(var d=0;d<b;d++)c=c*256+a[d];return c}g.ParsableXmlNode=a;g.convertBytesToUint=h}),98);
__d("WASignalOther",["WACryptoDependencies","WACryptoHkdf","WACryptoUtils","WAParsableXmlNode","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h={name:"AES-CBC"},i={name:"HMAC",hash:"SHA-256"};function j(a,b){if(a.length!==b)throw c("err")("Signal expected "+b+" bytes, given "+a.length);return a}function a(a,b){return j(new Uint8Array(a),b)}function b(a){var b=a.buffer,c=a.byteOffset;a=a.length;return c===0&&a===b.byteLength?b:b.slice(c,c+a)}function e(a,b){return a.readByteArrayView(b)}function f(a){return new Uint8Array(a)}function k(a,b,d){if(a.length-b<d)throw c("err")("Can not split off "+d+" bytes from index "+b+" of "+a.length+" bytes");return a.slice(b,b+d)}function l(a){a=a==="extendedRange"?(-1>>>1)-1:16380;return d("WACryptoUtils").randomNumberLessThan(a)+1}function m(a){return q(a)}function n(a){return d("WAParsableXmlNode").convertBytesToUint(a,4)}function o(){var a=-1>>>1;return d("WACryptoUtils").randomNumberLessThan(a)+1}function p(a){return q(a)}function q(a,b,d){b===void 0&&(b=0);d===void 0&&(d=4294967296);if(typeof a==="number"&&b<=a&&a<d&&Math.floor(a)===a)return a;else throw c("err")("Expected integer in range ["+b+", "+d+"), given "+String(a))}function r(a,b){return d("encodeProtobuf").encodeProtobuf(a,b).readByteArrayView()}function s(a,b,c){return c(d("decodeProtobuf").decodeProtobuf(a,b))}function t(a,b,c,e){return d("WACryptoHkdf").extractWithSaltAndExpand(a,b,c,e).then(function(a){return new Uint8Array(a)})}function u(a,b){var c,e;b==="hmac-sha256"?(c=i,e=["sign"]):(b,c=h,e=["encrypt","decrypt"]);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",a,c,!1,e)}function v(a){return a}function w(a){return a}function x(a,b){return d("WACryptoUtils").arrayBuffersEqual(a,b)}g.AES_CBC=h;g.HMAC_SHA256=i;g.ensureSize=j;g.toBytes=a;g.toBuffer=b;g.readBytes=e;g.makeBytes=f;g.sliceBytes=k;g.makeRegistrationId=l;g.castRegistrationId=m;g.castRegistrationIdFromBytes=n;g.makeSenderKeyId=o;g.castSenderKeyId=p;g.ensureIntInRange=q;g.encodeSignalProto=r;g.decodeSignalProto=s;g.hkdf=t;g.makeCryptoKey=u;g.castToByteEncoded=v;g.castToSessionHash=w;g.areSessionHashesEqual=x}),98);
__d("WASignalKeys",["WACryptoDependencies","WACryptoPrimitives","WALogger","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=5,j=16777215;function k(a,b){return{publicKey:a,privateKey:b}}function a(a){a=d("WACryptoPrimitives").keypairFromSecretKey(a);var b=a.publicKey;a=a.secretKey;return k(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function b(a,b){return{publicKey:d("WASignalOther").toBytes(a,32),privateKey:d("WASignalOther").toBytes(b,32)}}function l(){var a=d("WACryptoPrimitives").keyPair(),b=a.publicKey;a=a.secretKey;a[0]&=248;a[31]=64|a[31]&63;return k(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function m(a,b){return k(d("WASignalOther").sliceBytes(b,1,32),a)}function n(a,b){return{serializedPubKey:b,privateKey:a}}function e(){var a=l();return n(a.privateKey,o(a))}function o(a){var b=d("WASignalOther").makeBytes(33);b[0]=i;b.set(a.publicKey,1);return b}function f(a){var b=d("WASignalOther").makeBytes(33);b[0]=i;b.set(d("WASignalOther").ensureSize(a,32),1);return b}function p(a){return n(a.privateKey,o(a))}function q(a,b){a=(a-1)%j;a<=0&&(a+=j);var c=[];for(var e=0;e<b;e++){var f=a===j?1:a+1,g=l(),h=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:f,publicKey:o(g),privateKey:g.privateKey});c.push({plainObject:{id:f,keyPair:g},record:h});a=f}return c}function r(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey;a=a.privateKey;return b==null||c==null||a==null?null:{id:s(b),keyPair:m(d("WASignalOther").toBytes(a,32),u(new Uint8Array(c)))}}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializePreKey error ",""])),a);return null}}function s(a){return d("WASignalOther").ensureIntInRange(a,1,j)}function t(a){return d("WASignalOther").ensureIntInRange(a,0,j)}function u(a){if(a.length===0||a[0]!==i)throw c("err")("Unrecognized public key type");return d("WASignalOther").ensureSize(a,33)}function v(){var a=d("WASignalOther").makeBytes(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a}function w(a,b){return d("WACryptoPrimitives").scalarMult(a,b.subarray(1)).buffer}g.KEY_TYPE=i;g.makeKeyPairFrom=a;g.makeKeyPairFromArrayBuffers=b;g.makeKeyPair=l;g.makeKeyPairFromSerialized=m;g.makeSerializedKeyPairFrom=n;g.makeSerializedKeyPair=e;g.serializePubKey=o;g.serializeIdentity=f;g.toSerializedKeyPair=p;g.makePreKeys=q;g.deserializePreKey=r;g.castToPreKeyId=s;g.castToSignedPreKeyId=t;g.castToSerializedPubKey=u;g.makeRawSenderKey=v;g.ecdh=w}),98);
__d("WACryptoCurve25519Dependencies",["Promise","WACryptoPrimitives","WASignalKeys","WASignalOther"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return(h||(h=b("Promise"))).resolve().then(function(){return d("WASignalKeys").makeKeyPair()})}function c(a,c){return(h||(h=b("Promise"))).resolve().then(function(){return d("WACryptoPrimitives").scalarMult(d("WASignalOther").ensureSize(c,32),d("WASignalOther").ensureSize(a,32)).buffer})}e={generateIdentityKeyPair:a,calculateAgreement:c};g.calculateAgreement=c;g.CURVE25519_SIGNAL_DEPENDENCIES=e}),98);
__d("WACryptoEd25519",["WACryptoPrimitives","err"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function i(a){var b=h;h=[];try{return a()}finally{(h!=null?h:[]).forEach(function(a){return void a.fill(0)}),h=b}}function j(a,b){if(h==null)throw c("err")("allocate called outside of active scope");return new a(b)}function a(a,b,c){d("WACryptoPrimitives").lowlevel.crypto_hash(a,b,c)}function b(a,b){for(var c=0;c<64;++c)b[c]=a[c],a[c]=0;l(a,b);b.fill(0)}function e(a,b){var c=[k(),k(),k(),k()];d("WACryptoPrimitives").lowlevel.scalarbase(c,b);R(a,c)}function k(a){var b=j(Float64Array,16);if(a){if(a.length>16)throw c("err")("Incorrect initialiser array provided to the fieldElement");for(var d=0;d<a.length;d++)b[d]=a[d]}return b}function l(a,b){d("WACryptoPrimitives").lowlevel.modL(a,b)}var m=function(){return k([0])},n=function(){return k([1])},o=function(){return k([2])},p=function(){return k([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])};function q(){return[k(),k(),k(),k()]}function r(){return[k(),k(),k(),k()]}function s(){return[k(),k(),k()]}function t(a,b){var c=0;b=b;while(b>0){var d=b%65536;a[c]=d;b=(b-d)/65536;c++}}function u(a,b){return T(a,b)?0:1}function v(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=j(Uint8Array,32);b(c,a);return c[0]&1}function w(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=o(),g=k();c(g,b);e(a,f,g)}function x(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.A,g=m(),h=n(),i=k(),j=k(),l=k(),o=k();t(g,486662);c(i,b);e(j,g,b);f(l,i,j);f(o,l,h);e(a,b,o)}function y(a,b,c){c===1&&a.set(b)}var z=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function A(a,b){var c,e=(c=d("WACryptoPrimitives")).lowlevel.unpack25519,f=c.lowlevel.pow2523,g=c.lowlevel.M;c=c.lowlevel.S;var h=k();e(h,z);e=k();f(e,b);f=k();g(f,b,e);e=k();c(e,f);c=k();g(c,f,h);y(f,c,1^u(e,b));a.set(f)}function B(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.M,g=n(),h=k(),i=k(),j=k();c(h,b,g);e(i,b,g);S(j,i);f(a,h,j)}function C(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=m();c(a,e,b)}function D(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3])}function E(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3]);c(a[3],b[0],b[1])}function F(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.Z;c(a[0],b[0]);c(a[2],b[1]);w(a[3],b[2]);e(a[1],b[0],b[1]);b=k();c(b,a[1]);e(a[1],a[2],a[0]);f(a[2],a[2],a[0]);f(a[0],b,a[1]);f(a[3],a[3],a[2])}var G=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function H(a,b,c){var e=d("WACryptoPrimitives").lowlevel.unpack25519,f=d("WACryptoPrimitives").lowlevel.M,g=k();e(g,G);e=k();B(e,b);var h=k();x(h,b);var i=k();A(i,h);h=k();f(h,b,g);b=k();S(b,i);g=k();f(g,h,b);i=k();C(i,g);y(g,i,v(g)^c);a[0].set(g);a[1].set(e);a[2].set(n());f(a[3],a[0],a[1])}function I(a,b){a[0].set(b[0]),a[1].set(b[1]),a[2].set(b[2])}function J(a,b){var c=s();I(c,b);F(a,c)}function K(a,b){var c=r(),d=s();J(c,b);D(d,c);F(c,d);D(d,c);F(c,d);E(a,c)}function L(a){var b,c=(b=d("WACryptoPrimitives")).lowlevel.S,e=b.lowlevel.M,f=b.lowlevel.pow2523;b=b.lowlevel.pack25519;var g=k(),h=k(),i=k(),j=k(),l=k();f(g,a);c(h,g);c(i,h);e(j,i,a);e(l,j,a);f=new Uint8Array(32);b(f,l);return 1&f[31]}function M(a,b){C(a[0],b[0]),a[1].set(b[1]),a[2].set(b[2]),C(a[3],b[3])}function f(a,b){var c=q();b=U(c,b);if(b!==0)return-1;M(a,c);return 0}function N(a,b){var c=d("WACryptoPrimitives").lowlevel.M,e=d("WACryptoPrimitives").lowlevel.A;b=b;var f=n(),g=m();t(g,486662);var h=k();w(h,b);b=k();e(b,h,f);h=k();S(h,b);f=k();c(f,h,g);b=k();C(b,f);c=k();x(c,b);h=L(c);f=k([0]);y(f,g,h);c=k();e(c,b,f);g=k();C(g,c);y(c,g,h);a.set(c)}function O(a){var b=d("WACryptoPrimitives").lowlevel.unpack25519;a=d("WACryptoPrimitives").hash(a);var c=(a[31]&128)>>7;a[31]&=127;var e=k();b(e,a);b=k();P(b,e);a=q();H(a,b,c);e=q();K(e,a);return e}function P(a,b){return i(function(){return N(a,b)})}function Q(a){return i(function(){return O(a)})}function R(a,b){var c=k(),e=k(),f=k(),g=d("WACryptoPrimitives").lowlevel.M,h=d("WACryptoPrimitives").lowlevel.pack25519;S(f,b[2]);g(c,b[0],f);g(e,b[1],f);h(a,e);g=new Uint8Array(32);h(g,c);a[31]^=(g[0]&1)<<7}function S(a,b){var c=k();c.set(b);var e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.S;for(var g=253;g>=0;--g)f(c,c),g!==2&&g!==4&&e(c,c,b);a.set(c)}function T(a,b){var c=d("WACryptoPrimitives").lowlevel.pack25519,e=d("WACryptoPrimitives").lowlevel.crypto_verify_32,f=new Uint8Array(32),g=new Uint8Array(32);c(f,a);c(g,b);return e(f,0,g,0)}function U(a,b){var c,e=(c=d("WACryptoPrimitives")).lowlevel.set25519,f=c.lowlevel.S,g=c.lowlevel.M,h=c.lowlevel.Z,i=c.lowlevel.A,j=c.lowlevel.D,l=c.lowlevel.unpack25519;c=c.lowlevel.pow2523;var o=k(),q=k(),r=k(),s=k(),t=k(),u=k(),v=k();e(a[2],n());l(a[1],b);f(r,a[1]);g(s,r,j);h(r,r,a[2]);i(s,a[2],s);f(t,s);f(u,t);g(v,u,t);g(o,v,r);g(o,o,s);c(o,o);g(o,o,r);g(o,o,s);g(o,o,s);g(a[0],o,s);f(q,a[0]);g(q,q,s);T(q,r)&&g(a[0],a[0],p());f(q,a[0]);g(q,q,s);if(T(q,r))return-1;V(a[0])===b[31]>>7&&h(a[0],m(),a[0]);g(a[3],a[0],a[1]);return 0}function V(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=new Uint8Array(32);b(c,a);return c[0]&1}g.runInAllocationScope=i;g.allocate=j;g.hashSha512=a;g.reduce=b;g.scalarmultBase=e;g.fieldElement=k;g.modL=l;g.p3Element=q;g.unpack=f;g.elligator=P;g.hashToPoint=Q;g.pack=R;g.inv25519=S;g.unpackneg=U}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{var b=(1<<5)-1;b=BigInt(b<<17);var c=BigInt(0),e=BigInt(1<<17);b=BigInt(a)&b;if(b===c)return"web";return b===e?"mobile":"unknown"}catch(b){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),a,b);return"error"}}g.getPlatformFromStanzaId=a}),98);
__d("WASignalSignatures",["Promise","WACryptoDependencies","WACryptoEd25519","WACryptoPrimitives","WAHex","WALogger","WALongInt","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c){return d("WACryptoEd25519").runInAllocationScope(function(){var e,f=b.length,g=a.privateKey,h=new Uint8Array(32);(e=d("WACryptoEd25519")).scalarmultBase(h,g);var i=h[31]&128,j=new Uint8Array(f+128);j[0]=254;j.fill(255,1,32);j.set(g,32);j.set(b,64);j.set(c,f+64);var k=e.allocate(Uint8Array,64);e.hashSha512(k,j,f+128);j.set(h,32);h=e.allocate(Float64Array,64);e.reduce(k,h);e.scalarmultBase(j,k);var l=e.allocate(Uint8Array,64);e.hashSha512(l,j,f+64);e.reduce(l,h);for(f=0;f<32;++f)h[f]=k[f];for(f=0;f<32;++f)for(k=0;k<32;++k)h[f+k]+=l[f]*g[k];e.modL(j.subarray(32,64),h);return{pubKeyNegative:i!==0,signedMsg:j}})}function a(a,c){return(i||(i=b("Promise"))).resolve().then(function(){var b=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(b);return k(a,c,b)})}function e(a,b,c){var e=c[63];return e&96?!1:d("WACryptoEd25519").runInAllocationScope(function(){var f,g,h=(f=d("WACryptoPrimitives")).lowlevel.A,i=f.lowlevel.M,j=f.lowlevel.Z,k=f.lowlevel.pack25519,l=f.lowlevel.unpack25519,m=(g=d("WACryptoEd25519")).allocate(Uint8Array,64);m.set(c);m[63]=e&127;var n=g.fieldElement(),o=g.fieldElement(),p=g.fieldElement(),q=g.fieldElement(),r=g.fieldElement(),s=g.allocate(Uint8Array,32),t=g.fieldElement();t[0]=1;l(n,a.subarray(1));j(o,n,t);h(p,n,t);g.inv25519(q,p);i(r,o,q);k(s,r);s[31]=s[31]&127|e&128;return f.signDetachedVerify(b,m,s)})}function k(a,b,c){a=j(a,b,c);b=d("WASignalOther").sliceBytes(a.signedMsg,0,64);b[63]=b[63]&127|(a.pubKeyNegative?128:0);return b}function l(a,b,e){var f=d("WASignalKeys").makeKeyPair(),g=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(g);e=k(e,d("WASignalKeys").serializePubKey(f),g);if(!Number.isSafeInteger(b))throw c("err")("Expected timestamp to be a safe integer, given "+String(b));return{id:d("WASignalKeys").castToPreKeyId(a),ts:b,keyPair:f,signature:e}}function f(a,b){var c=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(c);return k(a,b,c)}function m(a){var b=a.id,c=a.keyPair;return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:b,publicKey:d("WASignalKeys").serializePubKey(c),privateKey:c.privateKey,signature:a.signature,timestamp:a.ts})}function n(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey,e=a.privateKey,f=a.signature;a=a.timestamp;return b==null||c==null||e==null||f==null||a==null?null:{id:d("WASignalKeys").castToSignedPreKeyId(b),ts:d("WALongInt").numberOrThrowIfTooLarge(a),keyPair:d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalOther").toBytes(e,32),d("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))),signature:d("WASignalOther").toBytes(f,64)}}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializeSignedPreKey error ",""])),a);return null}}function o(a){return new Uint8Array(d("WAHex").parseHex(a))}function p(a){if(a.length===33)return d("WASignalKeys").castToSerializedPubKey(a);else if(a.length===32)return d("WASignalKeys").serializeIdentity(a);else throw c("err")("verifyCertificate publicKey incorrect length")}function q(a,c,d){return(i||(i=b("Promise"))).resolve().then(function(){var b=l(a,c,d),e=m(b);return{plainObject:b,record:e}})}g.signMsg=a;g.verifyMsgSignalVariant=e;g.makeSignature=k;g.makeSignedPreKey=l;g.signSenderKeyMessage=f;g.serializeSignedPreKeyForPrivateStorage=m;g.deserializeSignedPreKey=n;g.convertPublicKeyHexToUint8Array=o;g.convertPublicKeyToSerializedPubKey=p;g.generateSignedPreKey=q}),98);
__d("WAWorkerGlobalScope",[],(function(a,b,c,d,e,f){"use strict";a=function(){if(typeof window!=="undefined")return window;return typeof globalThis!=="undefined"?globalThis:self}();f.workerGlobalScope=a}),66);
__d("last",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=null;if(Array.isArray(a)||typeof a==="string")a.length&&(b={value:a[a.length-1]});else for(a of a)b=b||{},b.value=a;return b?b.value:null}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("CryptoLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("FBLogger")("labyrinth_web","crypto."+a)}function b(a,b){return b instanceof Error?a.catching(b):a}g.CryptoLogger=a;g.captureError=b}),98);
__d("EBAPIQPLPoints",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";e={CREATE_WORKER_NETWORK_EXECUTE_END:"create_worker_network_execute_end",CREATE_WORKER_NETWORK_EXECUTE_START:"create_worker_network_execute_start",GRAPHQL_QUERY_END:"graphql_query_end",GRAPHQL_QUERY_START:"graphql_query_start"};f={CLIENT_STATE_RETRIEVED:"client_state_retrieved",EB_NOT_ENABLED:"eb_not_enabled",EBLS_NOT_INITIALIZED:"ebls_not_initialized",EMPTY_DECRYPTION_RESPONSE:"empty_decryption_response",INVALID_CLIENT_STATE:"invalid_client_state",INVALID_GRAPHQL_RESPONSE:"invalid_graphql_response",INVALID_PARAMETERS:"invalid_parameters",LSDB_SINGLETON_RETRIEVED:"lsdb_singleton_retrieved",NO_CLIENT_STATE:"no_client_state",NULL_CHAT_JID:"null_chat_jid",RUNTIME_ERROR:"runtime_error",UNSUPPORTED_CONTEXT:"unsupported_context"};var h=babelHelpers["extends"]({},e),i=babelHelpers["extends"]({},e,f,{BACKUP_ID_NULL:"backup_id_null",BATCH_RESTORE_AND_DECRYPT_FAILURE:"batch_restore_and_decrypt_failure",DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_END:"decrypt_messages_echo_and_protobuf_end",DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_START:"decrypt_messages_echo_and_protobuf_start",DECRYPT_MESSAGES_ECHO_END:"decrypt_messages_echo_end",DECRYPT_MESSAGES_ECHO_START:"decrypt_messages_echo_start",DECRYPT_MESSAGES_MINOS_PROTOBUF_END:"decrypt_messages_minos_protobuf_end",DECRYPT_MESSAGES_MINOS_PROTOBUF_START:"decrypt_messages_minos_protobuf_start",DECRYPT_MESSAGES_PROTOBUF_END:"decrypt_messages_protobuf_end",DECRYPT_MESSAGES_PROTOBUF_START:"decrypt_messages_protobuf_start",DECRYPTED_PROTOBUFS_NULL:"decrypted_protobufs_null",DELETE_MAILBOX:"delete_mailbox",DERIVE_AND_STORE_EPOCHS_END:"derive_and_store_epochs_end",DERIVE_AND_STORE_EPOCHS_START:"derive_and_store_epochs_start",ECHO_DECODE_END:"echo_decode_end",ECHO_DECODE_START:"echo_decode_start",ECHO_DECRYPTION_FAILURE:"echo_decryption_failure",ECHO_TO_PROTOBUF_CONVERSION_END:"echo_to_protobuf_conversion_end",ECHO_TO_PROTOBUF_CONVERSION_FAILURE:"echo_to_protobuf_conversion_failure",ECHO_TO_PROTOBUF_CONVERSION_START:"echo_to_protobuf_conversion_start",GRAPHQL_QUERY_EXCEPTION:"graphql_query_exception",MISSING_RANGE_INFO:"missing_range_info",NO_MESSAGES_TO_RESTORE:"no_messages_to_restore",NULL_MESSAGES:"null_messages",PROCESS_AND_DECRYPT_MESSAGES_END:"process_and_decrypt_messages_end",PROCESS_AND_DECRYPT_MESSAGES_FAILURE:"process_and_decrypt_messages_failure",PROCESS_AND_DECRYPT_MESSAGES_START:"process_and_decrypt_messages_start",PROTOBUF_DECRYPTION_FAILURE:"protobuf_decryption_failure",RESTORING_MIXED_ECHO_PROTOBUF_PAYLOAD:"restoring_mixed_echo_protobuf_payload",SERVER_SIDE_EXCEPTION:"server_side_exception",THREAD_NOT_FOUND_ON_SERVER:"thread_not_found_on_server"}),j={ADDED_ATTACHMENT_CONTEXT:"added_attachment_context",ADDED_ATTACHMENT_CONTEXT_LEGACY:"added_attachment_context_legacy",DEQUEUE:"added_to_queue_end",ENQUEUE:"added_to_queue_start",ENQUEUE_FAILURE:"enqueue_failure",GENERATE_BACKUP_DIRECTIVE_END:"generate_backup_directive_end",GENERATE_BACKUP_DIRECTIVE_START:"generate_backup_directive_start",GENERATE_REPORTING_META_END:"generate_reporting_meta_end",GENERATE_REPORTING_META_START:"generate_reporting_meta_start",GET_ATTACHMENT_CONTEXT_END:"get_attachment_context_end",GET_ATTACHMENT_CONTEXT_START:"get_attachment_context_start",MESSAGE_RESULT_FAILURE_OR_NULL:"message_result_failure_or_null",NO_INCOMING_MESSAGES:"no_incoming_messages",NO_PROCESSED_MESSAGES:"no_processed_messages",PROCESSED_MESSAGES:"processed_messages",RUNTIME_ERROR:"runtime_error",SUCCESSFULLY_PROCESSED_MESSAGE:"successfully_processed_message",UKNOWN_MESSAGE_VERSION_OR_PROTOCOL:"unknown_message_version_or_protocol",UNABLE_TO_CREATE_BACKUP_DIRECTIVE:"unable_to_create_backup_directive",UNKNOWN_MESSAGE_TYPE:"unknown_message_type",UNSUPPORTED_MESSAGE_TYPE:"unsupported_message_type",UPLOAD_DELETED_MESSAGE:"upload_deleted_message",UPLOAD_PAYLOAD_CREATED:"upload_payload_creation_success",UPLOAD_PAYLOAD_CREATION_FAILURE:"upload_payload_creation_failure",UPLOAD_PAYLOAD_CREATION_START:"upload_payload_creation_start"},k={ADD_DEVICE_CHECK_RC_STATUS:"add_device_check_rc_status",ADD_DEVICE_COULD_NOT_FIND_BACKUP:"add_device_could_not_find_backup",ADD_DEVICE_FAILED_DEVICE_REGISTRATION_ID_NULL:"add_device_failed_device_registration_id_null",ADD_DEVICE_FAILED_TO_GET_RC_STATUS:"add_device_failed_to_get_rc_status",ADD_DEVICE_FAILURE_BACKUP_NOT_FOUND:"add_device_failure_backup_not_found",ADD_DEVICE_OPTIMISTIC_STATUS:"add_device_optimistic_status",ADD_DEVICE_RUNTIME_ERROR:"add_device_runtime_error",ADD_DEVICE_SPROC_END:"add_device_sproc_end",ADD_DEVICE_SPROC_FAILURE:"add_device_sproc_failure",ADD_DEVICE_SPROC_START:"add_device_sproc_start",ADD_DEVICE_SUBSCRIPTION_END:"add_device_subscription_end",ADD_DEVICE_SUBSCRIPTION_START:"add_device_subscription_start",ADD_DEVICE_TASK_END:"add_device_task_end",ADD_DEVICE_TASK_START:"add_device_task_start",ADD_DEVICE_TIMEOUT:"add_device_timeout",INVALID_RECOVERY_CODE:"invalid_recovery_code",ON_START_BEGIN:"on_start_start",ON_START_SUCCESS:"on_start_end"},l={ADD_DEVICE_FETCH_VD_GRAPHQL_END:"add_device_fetch_vd_graphql_end",ADD_DEVICE_FETCH_VD_GRAPHQL_FAIL:"add_device_fetch_vd_graphql_fail",ADD_DEVICE_FETCH_VD_GRAPHQL_START:"add_device_fetch_vd_graphql_start",ADD_DEVICE_GQL_END:"add_device_gql_end",ADD_DEVICE_GQL_FAIL:"add_device_gql_fail",ADD_DEVICE_GQL_START:"add_device_gql_start",ADD_DEVICE_MISSING_GRAPHQL_FIELDS:"add_device_missing_graphql_fields",ADD_DEVICE_PARSE_RECOVERY_CODE_END:"add_device_parse_recovery_code_end",ADD_DEVICE_PARSE_RECOVERY_CODE_FAIL:"add_device_parse_recovery_code_fail",ADD_DEVICE_PARSE_RECOVERY_CODE_START:"add_device_parse_recovery_code_start",ADD_DEVICE_VIRTUAL_DEVICE_EXISTS:"add_device_virtual_device_exists",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_END:"add_device_vd_key_sproc_end",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_FAIL:"add_device_vd_key_sproc_fail",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_START:"add_device_vd_key_sproc_start"},m={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",INITIALIZE_BACKUP_END:"initialize_backup_end",INITIALIZE_BACKUP_SPROC_END:"initialize_backup_sproc_end",INITIALIZE_BACKUP_SPROC_FAIL:"initialize_backup_sproc_fail",INITIALIZE_BACKUP_SPROC_START:"initialize_backup_sproc_start",INITIALIZE_BACKUP_START:"initialize_backup_start",OPTIMISTIC_CLIENT_STATE:"optimistic_client_state"},n={DELETE_EB_NON_DELETE_OPERATION:"delete_eb_non_delete_operation",DELETE_EB_NON_PUT_OPERATION:"delete_eb_non_put_operation",DELETE_EB_SPROC_FAIL:"delete_eb_sproc_fail",DELETE_EB_SPROC_START:"delete_eb_sproc_start",DELETE_EB_SPROC_SUCCESS:"delete_eb_sproc_success",DELETE_EB_TASK_FAIL:"delete_eb_task_fail",DELETE_EB_TASK_START:"delete_eb_task_start",DELETE_EB_TASK_SUCCESS:"delete_eb_task_success",FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start"},o={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",OPT_OUT_BACKUP_ROW_EXISTS:"opt_out_backup_row_exists",OPT_OUT_BACKUP_ROW_NULL:"opt_out_backup_row_null",OPT_OUT_BACKUP_SPROC_END:"opt_out_backup_sproc_end",OPT_OUT_BACKUP_SPROC_FAIL:"opt_out_backup_sproc_fail",OPT_OUT_BACKUP_SPROC_START:"opt_out_backup_sproc_start",OPT_OUT_BACKUP_TASK_END:"opt_out_backup_task_end",OPT_OUT_BACKUP_TASK_FAIL:"opt_out_backup_task_fail",OPT_OUT_BACKUP_TASK_START:"opt_out_backup_task_start"};function a(a,b,d,e,f){c("QPLUserFlow").addPoint(b,d,{data:babelHelpers["extends"]({},e,{bool:{runningInWorker:a}}),instanceKey:f})}function b(a,b,d,e,f){c("QPLUserFlow").endFailure(b,d,{annotations:babelHelpers["extends"]({},f,{bool:{runningInWorker:a}}),instanceKey:e})}function d(a,b,d,e){c("QPLUserFlow").endSuccess(b,{annotations:babelHelpers["extends"]({},e,{bool:{runningInWorker:a}}),instanceKey:d})}g.EBAPIQPLCommonPoints=e;g.EBAPIQPLCommonErrorPoints=f;g.EBMessageMetadataQPLPoints=h;g.EBMessageRestoreQueryQPLPoints=i;g.EBUploadQueueQPLPoints=j;g.EBAddDeviceQPLPoints=k;g.EBAddDeviceGraphqlQPLPoints=l;g.EBBackupInitQPLPoints=m;g.EBDeleteEBQPLPoints=n;g.EBOptOutQPLPoints=o;g.ebAPIAddQPLPoint=a;g.ebAPIEndFailure=b;g.ebAPIEndSuccess=d}),98);
__d("WorkerRelayNetwork",["ActorURIConfig","MAWCurrentUser","RelayAPIConfig","WAResolvable","createRelayFBNetwork","createRelayFBNetworkFetch","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAResolvable").Resolvable)();function a(){var a=i(d("MAWCurrentUser").getID());a={execute:a.execute};h.resolve(a);return a}function b(){return h.promise}function i(a,b){b={actorID:a,batchResponseChunks:!0,getAdditionalData:function(){var b={};a!=null&&(b[c("ActorURIConfig").PARAMETER_ACTOR]=a);c("RelayAPIConfig").useXController===!1&&c("RelayAPIConfig").accessToken!==""&&(b.access_token=c("RelayAPIConfig").accessToken);return b},graphURI:b};b=c("createRelayFBNetworkFetch")(b);var e=function(a,b,c){return d("relay-runtime").Observable.create(function(a){return a.complete()})};return c("createRelayFBNetwork")(b,e,null,null)}g.createWorkerNetworkExecute=a;g.getWorkerNetworkExecute=b}),98);
__d("executeGraphQLQuery",["DTSG","FBLogger","MAWBridge","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,e){b=d("relay-runtime").getRequest(b);if(b.params.operationKind==="subscription")throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Expected query or mutation operation");var f={force:!0},g=d("DTSG").getToken();if(g==null||g===""||typeof g!=="string"){g=await d("MAWBridge").getBridge().sendAndReceive("event","getDTSGToken").catch(function(a){throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Failed to get DTSG token from the main thread",a)});if(g==null||g===""||typeof g!=="string")throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Received an empty DTSG token from the main thread");d("DTSG").setToken(g)}g=d("relay-runtime").createOperationDescriptor(b,e,f);return a.execute(g.request.node.params,g.request.variables,f)}g.executeGraphQLQuery=a}),98);
__d("createWorkerMutation",["FBLogger","WorkerRelayNetwork","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("relay-runtime").getRequest(a);if(b.params.operationKind!=="mutation")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerMutation: Expected mutation operation");var e=d("WorkerRelayNetwork").getWorkerNetworkExecute();b=async function(b){var c=await e;return d("executeGraphQLQuery").executeGraphQLQuery(c,a,b).then(function(a){return a.toPromise()}).then(function(a){if(Array.isArray(a)){return(a=a[0])==null?void 0:a.data}else return null})};return[b]}g.default=a}),98);
__d("MAWRotateDTSG",["CSRFGuard","DTSG","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MWFBLogger").MWLogger().tags(["RotateDTSG"]),k=async function(){var a,b;j.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Getting new DTSG token"])));var c=new Request("/ajax/dtsg/?__a=true",{credentials:"include",method:"GET"});c=await self.fetch(c);if(c.status!==200)throw j.mustfixThrow("Unable to get new DTSG token: "+c.status);c=await c.text();c=d("CSRFGuard").clean(c);var e=JSON.parse(c),f=e==null||(a=e.payload)==null?void 0:a.token;e=e==null||(b=e.payload)==null?void 0:b.valid_for;if(f==null||e==null)throw j.mustfixThrow("DTSG response is not valid: "+c+"'");return{token:f,validFor:e}},l=null;async function m(){self.clearTimeout(l);try{var a=await k(),b=a.token;a=a.validFor;l=self.setTimeout(m,a/2*1e3);d("DTSG").setToken(b);return!0}catch(a){j.catching(a).MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Error rotating DTSG"])));l=self.setTimeout(m,10*60*1e3);return!1}}g.getNewDTSG=k;g.tryRotateDTSG=m}),98);
__d("WARetryableError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var c;c=a.call(this,"see error at this.source")||this;c.source=b;return c}babelHelpers.inheritsLoose(b,a);return b}(d("WACustomError").customError("RetryableError"));g["default"]=a}),98);
__d("createWorkerQuery",["FBLogger","IGDWebUtils","MAWRotateDTSG","WARetryableError","WorkerRelayNetwork","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,e){var f=d("relay-runtime").getRequest(a);if(f.params.operationKind!=="query")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerQuery: Expected query operation");f=await d("WorkerRelayNetwork").getWorkerNetworkExecute();e==null||e.onExecute==null||e.onExecute();var g=d("IGDWebUtils").isOnInstagramWeb();f=await d("executeGraphQLQuery").executeGraphQLQuery(f,a,b).then(function(a){return a.toPromise()}).then(function(a){e==null||e.onResponse==null||e.onResponse(a);return Array.isArray(a)?a[0].data:(a=a.data)!=null?a:null}).catch(function(a){if(("code"in a&&a.code===1357004||"message"in a&&a.message.indexOf("1357004")!==-1||typeof a==="string"&&a.indexOf("1357004")!==-1)&&!g){c("FBLogger")("messenger_web").info("Failed with expired DTSG, attempting to rotate.");return d("MAWRotateDTSG").tryRotateDTSG().then(function(b){if(b)throw new(c("WARetryableError"))(a);throw a})}throw a});return f}g.default=a}),98);
__d("WorkerRelay",["WorkerRelayNetwork","createWorkerMutation","createWorkerQuery","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";f.exports={createWorkerMutation:c("createWorkerMutation"),createWorkerQuery:c("createWorkerQuery"),executeGraphQLQuery:d("executeGraphQLQuery").executeGraphQLQuery,getWorkerRelayEnvironment:d("WorkerRelayNetwork").getWorkerNetworkExecute,graphql:d("relay-runtime").graphql}}),34);
__d("createMainThreadQuery",["FBLogger","IGDWebUtils","MAWRotateDTSG","WARetryableError","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getNetwork();a={execute:a.execute};return a}async function b(a,b,e){var f=d("relay-runtime").getRequest(a);if(f.params.operationKind!=="query")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerQuery: Expected query operation");var g=d("IGDWebUtils").isOnInstagramWeb();f=await d("executeGraphQLQuery").executeGraphQLQuery(e,a,b).then(function(a){return a.toPromise()}).then(function(a){return Array.isArray(a)?a[0].data:(a=a.data)!=null?a:null}).catch(function(a){if(("code"in a&&a.code===1357004||"message"in a&&a.message.indexOf("1357004")!==-1||typeof a==="string"&&a.indexOf("1357004")!==-1)&&!g){c("FBLogger")("messenger_web").info("Failed with expired DTSG, attempting to rotate.");return d("MAWRotateDTSG").tryRotateDTSG().then(function(b){if(b)throw new(c("WARetryableError"))(a);throw a})}throw a});return f}g.getWorkerLikeRelayEnvironment=a;g.createMainThreadQuery=b}),98);
__d("EBCreateGraphQLFetchFnUnified",["EBAPIWorkerCheck","WorkerRelay","WorkerRelayNetwork","createMainThreadQuery","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("CometRelayEnvironment").__setRef("EBCreateGraphQLFetchFnUnified");async function a(){var a=d("EBAPIWorkerCheck").runningInWorker();if(!a){var b=await h.load();return function(a,c){var e=d("createMainThreadQuery").getWorkerLikeRelayEnvironment(b);return d("createMainThreadQuery").createMainThreadQuery(a,c,e)}}else{await d("WorkerRelayNetwork").createWorkerNetworkExecute();return d("WorkerRelay").createWorkerQuery}}g.createGraphQlFetchFnUnified=a}),98);
__d("EBMessageRangeQueryUtils",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.pow(2,48)-1;function a(a){var b=Number(a);return isNaN(b)?a:i(b).toString()}function i(a){if(a<0)return 0;if(a<=h)return a;a=d("WATimeUtils").millisTime()+6e4;return a}g.safeTimestampMsString=a;g.safeTimestampMsNumber=i}),98);
__d("EBMinosQplFlow",["QPLUserFlow","Random","gkx","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.threadId;return h({annotations:{string:{threadId:a}},event:c("qpl")._(521473369,"2834")})}function b(a){a=a.threadId;return h({annotations:{string:{threadId:a}},event:c("qpl")._(521485893,"2835")})}function h(a){var b=a.annotations;a=a.event;var e=d("Random").uint32();c("QPLUserFlow").start(a,{annotations:babelHelpers["extends"]({},b,{bool:babelHelpers["extends"]({},b==null?void 0:b.bool,{m1_2_enabled:c("gkx")("14827"),m2_1_enabled:c("gkx")("16567"),m2_2_enabled:c("gkx")("2760"),occam_only_mailbox_users:c("gkx")("16674"),use_minos_thread_id:!0,wmi_lb11_dyi:c("gkx")("10542")}),"int":babelHelpers["extends"]({},b==null?void 0:b["int"],{instanceKey:e,retryCount:0})}),instanceKey:e,timeoutInMs:c("justknobx")._("1405")});return j(a,e)}function e(){return h({event:c("qpl")._(521473150,"2143")})}function f(){return h({event:c("qpl")._(521482880,"16")})}function i(){return h({event:c("qpl")._(521479165,"3055")})}function j(a,b){return{addAnnotations:function(d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},addPoint:function(d,e){e&&c("QPLUserFlow").addAnnotations(a,e,{instanceKey:b}),c("QPLUserFlow").addPoint(a,d,{instanceKey:b})},endFailWithError:function(d,e,f){f=babelHelpers["extends"]({},f,{string:babelHelpers["extends"]({},f==null?void 0:f.string,{failReason:e})});c("QPLUserFlow").endFailure(a,d,{annotations:f,instanceKey:b})},endSuccess:function(d){c("QPLUserFlow").endSuccess(a,{annotations:d,instanceKey:b})},getInstanceKey:function(){return b}}}g.startMinosMessageEnqueueQpl=a;g.startMinosMessageUploadQpl=b;g.startMinosWritePublicKeysQpl=e;g.startMinosVerifySingleEpochQpl=f;g.startMinosCreateEpochParamsQpl=i}),98);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){if(typeof a!=="number"){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"])),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}f=function(a){return a==null?a:k(a)};function a(a){return a==null||typeof a!=="number"?null:a}function b(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function c(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function e(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string'])),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits'])),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=f;g.maybeNumber=a;g.isBiggerLongInt=b;g.longIntToDecimalString=c;g.decimalStringToLongInt=e}),98);
__d("EBMinosTypes",["$InternalEnum","WAJids","WALongInt"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function c(a){return a.endsWith(d("WAJids").MSGR_USER_DOMAIN)?a.slice(0,-d("WAJids").MSGR_USER_DOMAIN.length):null}var h=d("WAJids").createJidUtils({platform:"msgr"});function e(a){return h.toUserJid(a)}function f(a){return a}function i(a){return a}function j(a){return a}function k(a){return a}function l(a){return a}function m(a){return d("WALongInt").decimalStringToLongInt(new TextDecoder().decode(a))}function n(a){return a}function o(a){return a}function p(a){return a}function q(a){return a}function r(a){return a}function s(a){return a}function t(a){return a}function u(a){return a}function v(a){return a}function w(a){return a}function x(a){return a}function y(a){return a}function z(a){return a}function A(a){return a}function B(a){return a}function C(a){return a}function D(a){return a}function E(a){return a}function F(a){return a}function G(a){return a}function H(a){return a}function I(a){return a}function J(a){return a}function K(a){return a}function L(a){return a}function M(a){return a}b=b("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});g.unsafeCastToUserFbId=a;g.userJidToUserFbId=c;g.userFbidToUserJid=e;g.unsafeCastToMinosThreadId=f;g.unsafeCastToEpochHead=i;g.unsafeCastToEpochSelfSig=j;g.unsafeCastToEpochPrevSig=k;g.unsafeCastToEpochNumber=l;g.unsafeCastToBase64StringIntToEpochNumber=m;g.unsafeCastToEpochCreationTime=n;g.unsafeCastToExportRootKey=o;g.unsafeCastToMekId=p;g.unsafeCastMekKey=q;g.unsafeCastMekRosterHash=r;g.unsafeCastToEncryptedMek=s;g.unsafeCastToMekFbId=t;g.unsafeCastToMekMiThreadId=u;g.unsafeCastToEncryptedMessage=v;g.unsafeCastToEncryptedMessageSignature=w;g.unsafeCastToDecryptedMessage=x;g.unsafeCastToMailboxFbId=y;g.unsafeCastToMailboxSigningPK=z;g.unsafeCastToMailboxSigningSK=A;g.unsafeCastToMailboxEncryptionPK=B;g.unsafeCastToMailboxEncryptionSK=C;g.unsafeCastToMailboxAuthPK=D;g.unsafeCastToMailboxAuthSK=E;g.unsafeCastToTransportSenderEphemeralPK=F;g.unsafeCastToTransportSenderEphemeralKeySig=G;g.unsafeCastToTransportSigningPK=H;g.unsafeCastToTransportSigningSK=I;g.unsafeCastToEpochFbId=J;g.castToSupplementalOpToken=K;g.unsafeCastToAttachmentAccessTokenSecret=L;g.unsafeCastToAttachmentPrimaryKeySecret=M;g.MinosAttachmentMediaType=b}),98);
__d("EncryptedBackupUploadSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5729");b=d("FalcoLoggerInternal").create("encrypted_backup_upload_success",a);e=b;g["default"]=e}),98);
__d("LSBase64Decode",["Base64Utils","CryptoLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.replace(/-/g,"+").replace(/_/g,"/").replace(/\./g,"=").replace("/,/","=");var b=4-a.length%4;if(b<4)for(var c=0;c<b;c++)a+="=";return a}function a(a){var b=d("CryptoLogger").CryptoLogger("base64decode");try{return a!=null?d("Base64Utils").toArrayBuffer(h(a)):void 0}catch(c){if((c==null?void 0:c.message)==null)return;c instanceof Error?b.catching(c).mustfix(c.message):b.mustfix("Base64decode : empty error message for exception: %s, input string: %s",c.message,a!=null?a:"undefined")}}g.decode=a}),98);
__d("LSBase64Decode.nop",["LSBase64Decode","LSResult","LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e){return d("LSSynchronousPromise").makeSynchronousPromise(c("LSResult")(d("LSBase64Decode").decode(e)))};a.__nop_name__="LSBase64Decode";g["default"]=a}),98);
__d("LSIsMobileClient",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return c[0]=!1,b.resolve(c)}a.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLogMEBUploadSuccessEvent.nop",["Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("EncryptedBackupUploadFailureFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),j=c("requireDeferred")("EncryptedBackupUploadSuccessFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop");a=function(a,c,d,e,f){if(d!=null){a=f?j.load():i.load();void a.then(function(a){return a.log(function(){return{message_id:d,trace_id:e}})})}return(h||(h=b("Promise"))).resolve()};a.__nop_name__="LSLogMEBUploadSuccessEvent";g["default"]=a}),98);
__d("LSDeleteBackupOnClient",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMEBUploadSuccessEvent.nop","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return a[3]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,1021646192]),a[3],"dasm_delete_backup_on_client_sproc_start"):c.resolve()},function(d){return a[3]!==void 0?a[4]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,1021646192]),a[3],"dasm_delete_backup_on_client_error_message",a[4]):c.resolve():c.resolve()},function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] Beginning execution."),c.i64.neq(void 0,void 0)?(d[9]=["deleteBackupOnClient reason: "," ",c.i64.to_string(void 0)].join(""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",d[9]].join("")),d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[d[9]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return d[1]="Beginning deleteBackupOnClient stored procedure",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[1]].join("")),d[2]=c.createArray(),void 0!==void 0?d[9]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[1]].join(""),d[2],c.i64.cast([0,4]))},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(168).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(168).fetch(),function(a){return a["delete"]()})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(169).fetch([[[a[0]]],"fk_secure_encrypted_backups_client_state"]),function(a){return a["delete"]()}):c.forEach(c.db.table(169).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(174).fetch(),function(a){return a["delete"]()})},function(b){return a[1]==="fetch_virtual_device"?c.db.table(178).put({pk:c.i64.cast([0,1]),recoveryCodeStatus:c.i64.cast([0,4])}):c.resolve()},function(e){return a[2]?c.sequence([function(a){return d[9]="Clearing state management backups tables",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[9]].join("")),d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[9]].join(""),d[10],c.i64.cast([0,4]))},function(a){return c.forEach(c.db.table(172).fetch([[[c.i64.cast([0,1])]]]),function(a){var b=a.update;a.item;return b({backupId:void 0})})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.filter(c.db.table(184).fetch(),function(b){return c.i64.eq(b.backupId,a[0])}),function(a){return a["delete"]()}):c.forEach(c.db.table(184).fetch(),function(a){return a["delete"]()})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(196).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(196).fetch(),function(a){return a["delete"]()})}]):c.resolve()},function(a){return!1===!1?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1851]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[10]?d[11]=!0:d[11]=!1,d[11]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[13]].join("")),d[12]=c.createArray(),void 0!==void 0?d[14]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[13],d[12],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.forEach(c.db.table(177).fetch(),function(a){var d=a.item;return c.sequence([function(a){return c.forEach(c.db.table(2).fetch([[[d.pendingBackupTaskId]]]),function(a){return a["delete"]()})},function(a){return c.i64.eq(d.contentType,c.i64.cast([0,1]))?c.nativeOperation(b("LSLogMEBUploadSuccessEvent.nop"),d.uniqueKey,d.lsTraceId,!0):c.resolve()}])})},function(a){return c.count(c.db.table(177).fetch()).then(function(a){return d[9]=a})},function(a){return c.i64.eq(d[9],c.i64.cast([0,0]))?c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1852]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[10]?d[11]=!0:d[11]=!1,d[11]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[13]].join("")),d[12]=c.createArray(),void 0!==void 0?d[14]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[13],d[12],c.i64.cast([0,3]))):c.resolve()}]):c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1853]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[10]?d[11]=!0:d[11]=!1,d[11]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[13]].join("")),d[12]=c.createArray(),void 0!==void 0?d[14]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[13],d[12],c.i64.cast([0,3]))):c.resolve()}])}]):c.resolve()},function(e){return a[2]?(d[9]="Clearing data flow backups tables",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[9]].join("")),d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[9]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(e){return a[5]?c.resolve(0):a[4]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",a[4]].join("")),d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",a[4],d[9],c.i64.cast([0,3]))):c.resolve()},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,1021646192]),a[3],"dasm_delete_backup_on_client_sproc_end"):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeleteBackupOnClientStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_encrypted_backups_generated_recovery_code","secure_encrypted_backups_recovery_code_status","encrypted_backups","encrypted_backups_virtual_devices","encrypted_backups_metadata","pending_backups_context_v2","pending_tasks"];e.exports=a}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]})).then(function(a){return d[0]=a})},function(e){return c.i64.gt(d[0],c.i64.cast([0,0]))&&a[3]===!0?c.resolve(0):c.sequence([function(b){return c.forEach(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]}),function(a){return a["delete"]()})},function(e){return c.i64.gt(a[2],c.i64.cast([0,0]))?(d[3]=c.i64.of_float(Date.now()),d[1]=c.i64.add(d[3],a[2])):d[1]=c.i64.cast([0,0]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",a[1]].join(""),c.i64.cast([0,362]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[1],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(310).add({taskId:d[2],projectName:a[1],maxClientTokenPoolSize:a[0]})}])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure";a.__tables__=["acs_request_context"];e.exports=a}),null);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(233).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({success:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskCompletionStoredProcedure";a.__tables__=["mailbox_task_completion_api_tasks"];e.exports=a}),null);
__d("LSQplMarkEnd.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);i?c("QPLUserFlow").endSuccess(a,{instanceKey:e}):c("QPLUserFlow").endFailure(a,"failure",{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplMarkEnd";g["default"]=a}),98);
__d("LSRemoveBlindedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(308).fetch(),function(b){return b.configId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure";a.__tables__=["secure_acs_blinded_tokens"];e.exports=a}),null);
__d("LSXmaContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEST:-1,NONE:0,IG_SINGLE_IMAGE_POST_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,IG_MULTI_MEDIA_RESPONSE:1020,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,FB_COMMENT_MENTION_SHARE:2010,FB_STORY_LWI_REPLY:2011,FB_COMMENT_SHARE:2012,FB_POST_MENTION:2013,FB_PROFILE_DIRECTORY_ITEM:2014,FB_FEED_POST_REACTION_REPLY:2015,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING:3002,MSG_LOCATION_SHARING_V2:3003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:3004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:3005,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_THREADS_POST_SHARE:3011,MSG_FILE:3012,MSG_AVATAR_DETAILS:3013,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_SHARED_ALBUM_REPLY:3016,MSG_SHARED_ALBUM:3017,MSG_OCCAMADILLO_XMA:3018,MSG_GEN_AI_1P_SEARCH_RESULT:3019,MSG_EARLY_ACCESS_FB_SHARE:3020,MSG_GEN_AI_SUBSCRIPTION:3021,MSG_GEN_AI_REMINDER:3022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:3023,MSG_MAGICAL_MESSENGER_PLACES:3024,MSG_RECEIVER_FETCH_FALLBACK:3025,MSG_MAGICAL_MESSENGER_TASKS:3026,MSG_NOTE_REPLY:3027,MSG_NOTE_MENTION:3028,MSG_PROMPT_REPLY:3029,MSG_GEN_AI_TASK:3030,MSG_GEN_AI_RICH_RESPONSE:3040,MSG_RECEIVER_FETCH_ENT_DELETED:3041,MSG_GEN_AI_APP_DOWNLOAD_LINK:3042,MSG_GEN_AI_ENTITY:3043,MSG_OPG_P2P_PAYMENT:3044,MSG_MARKETPLACE:3045,MSG_MUSIC_STICKER:3046,MSG_META_AI_DIGEST:3047,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,RTC_ONGOING_AUDIO_CALL:4008,RTC_ONGOING_VIDEO_CALL:4009,DATACLASS_SENDER_COPY:5e3,OC_AVATAR_STATIC_STICKER:6e3,LIVE_LOCATION:7e3});f["default"]=a}),66);
__d("MAWDbChatId__UNSAFE_DO_NOT_USE",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("I64"))).of_float(a)}function b(a,b){return a+"_"+b}g.convertToChatId64__DEPRECATED=a;g.craftAltIndex__DEPRECATED=b}),98);
__d("WADirectPath",["WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h="0_0_0_.enc";function a(a){return a}function b(a){if(a==null)return d("WAResultOrError").makeError("direct-path-undefined");if(a==="")return d("WAResultOrError").makeError("direct-path-empty");return a.includes(h)?d("WAResultOrError").makeError("direct-path-corrupted"):d("WAResultOrError").makeResult(a)}g.unsafeCastToDirectPath=a;g.validateDirectPath=b}),98);
__d("WAMediaEntryData.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalSpec={fileSha256:[1,(e=d("WAProtoConst")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,b],size:[16,e.TYPES.INT64],lastDownloadAttemptTimestamp:[17,e.TYPES.INT64]};b.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]};c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]};g.MediaEntrySpec=a;g.MediaEntry$ProgressiveJpegDetailsSpec=b;g.MediaEntry$DownloadableThumbnailSpec=c}),98);
__d("WAProgressiveJpegMarkers",[],(function(a,b,c,d,e,f){"use strict";a=255;b=0;c={SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,JPG:200,SOF9:201,SOF10:202,SOF11:203,SOF13:205,SOF14:206,SOF15:207,RST0:208,RST1:209,RST2:210,RST3:211,RST4:212,RST5:213,RST6:214,RST7:215,SOI:216,EOI:217,SOS:218,DQT:219,DRI:221,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,TEM:1};d=[b,c.RST0,c.RST1,c.RST2,c.RST3,c.RST4,c.RST5,c.RST6,c.RST7];f.MARKER_PREFIX=a;f.MARKER_ESCAPE_BYTE=b;f.MARKERS=c;f.SOS_STREAM=d}),66);
__d("WAProgressiveJpegGetScanOffsets",["WAProgressiveJpegMarkers","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=d("WATagsLogger").TAGS(["media","progressiveJpegUtils"]);function a(a){m.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["starting"])));if(!n(a)){m.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Not a JPEG image"])));return[]}var b=[],c=2,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA",f=null,g=0,r=!1,s=!1,t=!1;function u(){t=!1,m.DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Scan found at offset ",""])),c-1),b.push(c-1)}while(c<a.byteLength){f=a[c];if(r){m.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Ending marker found before end of image"])));return[]}switch(e){case"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA":f===d("WAProgressiveJpegMarkers").MARKER_PREFIX&&(e="READ_MARKER_SECOND_BYTE");break;case"READ_MARKER_SECOND_BYTE":if(f===d("WAProgressiveJpegMarkers").MARKER_PREFIX)e="READ_MARKER_SECOND_BYTE";else if(f===d("WAProgressiveJpegMarkers").MARKER_ESCAPE_BYTE)e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";else if(f===d("WAProgressiveJpegMarkers").MARKERS.EOI)r=!0,t&&u();else if(!s&&p(f)){m.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Non-progressive JPEG marker found"])));return[]}else o(f)?(s=!0,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA"):(t&&u(),f===d("WAProgressiveJpegMarkers").MARKERS.SOS&&(t=!0),q(f)?e="READ_SIZE_FIRST_BYTE":e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA");break;case"READ_SIZE_FIRST_BYTE":e="READ_SIZE_SECOND_BYTE";break;case"READ_SIZE_SECOND_BYTE":c+=g*256;c+=f;c-=2;e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";break}c+=1;g=f}return b}function n(a){if(a.byteLength<=2)return!1;if(a[0]!==d("WAProgressiveJpegMarkers").MARKER_PREFIX)return!1;return a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOF2&&a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOI?!1:!0}function o(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF2||a===d("WAProgressiveJpegMarkers").MARKERS.SOF6||a===d("WAProgressiveJpegMarkers").MARKERS.SOF10||a===d("WAProgressiveJpegMarkers").MARKERS.SOF14}function p(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF0||a===d("WAProgressiveJpegMarkers").MARKERS.SOF1||a===d("WAProgressiveJpegMarkers").MARKERS.SOF3||a===d("WAProgressiveJpegMarkers").MARKERS.SOF5||a===d("WAProgressiveJpegMarkers").MARKERS.SOF7||a===d("WAProgressiveJpegMarkers").MARKERS.JPG||a===d("WAProgressiveJpegMarkers").MARKERS.SOF9||a===d("WAProgressiveJpegMarkers").MARKERS.SOF11||a===d("WAProgressiveJpegMarkers").MARKERS.SOF13||a===d("WAProgressiveJpegMarkers").MARKERS.SOF15}function q(a){if(a===d("WAProgressiveJpegMarkers").MARKERS.TEM)return!1;return a>=d("WAProgressiveJpegMarkers").MARKERS.RST0&&a<=d("WAProgressiveJpegMarkers").MARKERS.RST7?!1:a!==d("WAProgressiveJpegMarkers").MARKERS.EOI&&a!==d("WAProgressiveJpegMarkers").MARKERS.SOI}g.getProgressiveJpegScanOffsets=a}),98);
__d("WAProgressiveJpegGetScanLengths",["WAProgressiveJpegGetScanOffsets"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WAProgressiveJpegGetScanOffsets").getProgressiveJpegScanOffsets(a);return h(a)}function b(a){return a}function h(a){var b=[],c=0;for(a of a)b.push(a-c),c=a;return b}g.getProgressiveJpegScanLengths=a;g.asProgressiveJpegScanLength=b}),98);
__d("WAServerMediaType",["WAAssertUnreachable"],(function(a,b,c,d,e,f,g){"use strict";d=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","payment-bg-image","novi-video","novi-image","product","product-catalog-image","xma-image","biz-cover-photo","preview","newsletter-audio","newsletter-document","newsletter-image","newsletter-gif","newsletter-ptt","newsletter-sticker","newsletter-thumbnail-link","newsletter-video","sticker-pack","thumbnail-sticker-pack","music-artwork"];function a(a){switch(a){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"payment-bg-image":case"novi-video":case"novi-image":case"template":case"product":case"product-catalog-image":case"xma-image":case"biz-cover-photo":case"preview":case"newsletter-audio":case"newsletter-document":case"newsletter-image":case"newsletter-gif":case"newsletter-ptt":case"newsletter-sticker":case"newsletter-thumbnail-link":case"newsletter-video":case"sticker-pack":case"thumbnail-sticker-pack":case"music-artwork":return a;default:return null}}function b(a){switch(a){case"Image":return"image";case"Video":return"video";case"Ptt":return"ptt";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"document";case"Text":case"Futureproof":case"Ciphertext":case"Unavailable":case"ExpiredEphemeral":case"Admin":case"Revoked":case"DeleteForMe":case"EphemeralSettingAdmin":case"EphemeralSyncResponse":case"EphemeralSettingChangeFromCurrentDevice":case"AlertICDC":case"GroupInvite":case"SenderKeyDistribution":case"Reaction":case"EditAction":case"ReceiverFetch":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":return null;default:return c("WAAssertUnreachable")(a)}}g.SERVER_MEDIA=d;g.castToServerMediaType=a;g.getMediaType=b}),98);
__d("WABaseProto",[],(function(a,b,c,d,e,f){"use strict";a="__tu";f.TAGGED_UNION_TAG=a}),66);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAProtoCompile",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];var p=o[1],q=o[0];g.push(q);j.push(p);if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){q=o[2];if(typeof q.cast==="function")f[m]=q;else{var r=!0,s=0;for(var t in q)r&&t!==s++&&(r=!1);t=void 0;if(r){t=[];for(r=0;r<s;r++)t.push(!0)}else{t={};for(r in q)t[q[r]]=!0}f[m]=t}}else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP){if(o.length!==3)throw new Error("Map field "+n+" should have exactly three elements in its internalSpec");f[m]=o[2]}else f[m]=null}var u={};s=function(a){l[a].forEach(function(b){u[b]||(u[b]=[]),u[b].push(a)})};for(r in l)s(r);q=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];t=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];p=new h(e,g,j,k,f,l,u,q,t);a.internalCompiledSpec=p;return p}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else if(a===d("WAProtoConst").TYPES.MAP)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long'])),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int'])),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range'])),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""])),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,h=b.oneofToFields,i=b.fieldToOneof,j=b.reservedTags,k=b.reservedFields,m=void 0;b=function(){var b=c[o],n=f[o],p=a[b],q=n&d("WAProtoConst").TYPE_MASK,r=t[q],u=(n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP;if(r===void 0&&!u)throw new Error("Can not find the validator for type "+q);if(n&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array'])),s(p)).color("red"),m={path:[b],error:"repeated field must be array"};else{q=g[o];for(n=0;n<p.length&&!m;n++)m=r(p[n],q),m&&m.path.push(b+"["+n+"]")}else if(u&&p!=null){n=g[o];q=n[0];u=n[1];n=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u;var v=t[q],w=t[n];if(v===void 0||w===void 0)throw new Error("Can not find the validator for Map with key type "+q+", value type "+n);for(n of p){var x=n[0],y=n[1];m=v(x,q);if(m){m.path.push(b+"'s key ["+x+"]");return{v:m}}m=w(y,u);if(m){m.path.push(b+"["+x+"]'s value");return{v:m}}}}else if(p!=null){m=r(p,g[o]);m&&m.path.push(b);y=i[b];y&&y.forEach(function(c){var d=h[c].filter(function(a){return a!==b});d.forEach(function(d){typeof a[d]!=="undefined"&&(m={path:[c],error:"oneof '"+c+"' has fields '"+b+"' and '"+d+"' set"})})});j[e[o]]&&(m={path:[b],error:"tag "+e[o]+" is reserved"});k[b]&&(m={path:[b],error:"field "+b+" is reserved"})}};var n;for(var o=0;o<c.length&&!m;o++){n=b();if(n)return n.v}return m}g.checkRequirements=n;g.checkValid=a}),98);
__d("decodeProtobuf",["WABaseProto","WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function f(a){return c("WAHasProperty")(a,"$$unsafeUnknownFields")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e,f){var g=d("WAProtoCompile").compileSpec(a),k=g.names,l=g.fields,m=g.types,o=g.meta,p=g.oneofToFields,q=g.fieldToOneof,r=g.reservedTags,s=g.reservedFields;g=a.internalDefaults;var t=c||babelHelpers["extends"]({},g)||{};t.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(g=0;g<k.length;g++)m[g]&d("WAProtoConst").FLAGS.REPEATED?t[k[g]]=[]:m[g]===(d("WAProtoConst").TYPES.MAP&d("WAProtoConst").TYPE_MASK)&&(t[k[g]]=new Map());var u=0,v=l.length>0,w=l[0];c=function(){var a=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow),c=a&7;a=a>>>3;if(v&&a!==w){var g=u;do++u===l.length&&(u=0),w=l[u];while(a!==w&&u!==g)}if(v&&a===w){var x=k[u];g=m[u];h(c,g,x);var y=g&d("WAProtoConst").TYPE_MASK,z=o[u];if(g&d("WAProtoConst").FLAGS.PACKED){var A=b.readVarInt(d("WABinary").parseUint64OrThrow);A=b.readBinary(A);while(A.size()){var B=i(x,y,A);(y!==d("WAProtoConst").TYPES.ENUM||z[B]||(z.cast==null?void 0:z.cast(B))!==void 0)&&t[x].push(B)}}else if(y===d("WAProtoConst").TYPES.MESSAGE){B=b.readVarInt(d("WABinary").parseUint64OrThrow);A=b.readBinary(B);if(g&d("WAProtoConst").FLAGS.REPEATED)t[x].push(n(z,A,void 0,e,f));else{B=t[x];t[x]=n(z,A,B,e,f)}}else if(y===d("WAProtoConst").TYPES.MAP){A=b.readVarInt(d("WABinary").parseUint64OrThrow);B=b.readBinary(A);var C,D;for(A=0;A<o[u].length;A++){var E=j(B,0,4294967296,"map field and enc type",d("WABinary").parseInt64OrThrow),F=E&7;E=E>>>3;var G=void 0;switch(F){case d("WAProtoConst").ENC.VARINT:G=B.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:G=B.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:F=z[A];if(F===d("WAProtoConst").TYPES.BYTES||F===d("WAProtoConst").TYPES.STRING)G=i(x,F,B);else{var H=B.readVarInt(d("WABinary").parseUint64OrThrow);H=B.readBinary(H);G=n(F,H,void 0,e,f)}break;case d("WAProtoConst").ENC.BIT32:G=B.readBinary(4);break}E===1?C=G:D=G}t[x].set(C,D)}else{F=i(x,y,b);(y!==d("WAProtoConst").TYPES.ENUM||z[F]||(z.cast==null?void 0:z.cast(F))!==void 0)&&(g&d("WAProtoConst").FLAGS.REPEATED?t[x].push(F):t[x]=F)}H=q[x];H&&typeof t[x]!=="undefined"&&H.forEach(function(a){var b=p[a].filter(function(a){return a!==x});b.forEach(function(a){delete t[a]});if(f){t[a]=(b={type:x,value:t[x]},b[d("WABaseProto").TAGGED_UNION_TAG]=!0,b);delete t[x]}});(r[a]||s[x])&&delete t[x]}else{t.$$unknownFieldCount++;if(e){t.$$unsafeUnknownFields||(t.$$unsafeUnknownFields={});var I;switch(c){case d("WAProtoConst").ENC.VARINT:I=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:I=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:I=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:I=b.readBinary(4);break}t.$$unsafeUnknownFields[a]=I}else c===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):c===d("WAProtoConst").ENC.BIT64?b.advance(8):c===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):c===d("WAProtoConst").ENC.BIT32&&b.advance(4)}};while(b.size())c();return t}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithTaggedUnions=b;g.decodeProtobufWithUnknowns=e;g.getUnknownFields=f}),98);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArrayView()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;var b=a;function c(a,c){for(var d=0;d<c.length;d++)b(a,c[d])}return function(a,b){a.writeWithVarIntLength(c,b)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else if(p===d("WAProtoConst").TYPES.MAP)for(o of l){r=o[0];var s=o[1];a.writeVarInt(k);var t=q[0],u=q[1],v=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u,w=m[t],x=m[v];if(w==null||x==null)throw new Error("Invalid encoder for map key/value");var y=new(d("WABinary").Binary)(),z=1*8|d("WAProtoUtils").typeToEncType(t);y.writeVarInt(z);w(y,r,t);z=2*8|d("WAProtoUtils").typeToEncType(v);y.writeVarInt(z);x(y,s,u);a.writeVarInt(y.size());a.writeBinary(y)}else{a.writeVarInt(k);w=m[p];w(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);
__d("WAMediaUtils",["WACryptoDependencies","WADirectPath","WAGlobals","WALongInt","WAMediaEntryData.pb","WAProgressiveJpegGetScanLengths","WAResultOrError","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h=["$$unknownFieldCount","directPath","objectId"],i=["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken","downloadableThumbnail","progressiveJpegDetails","size","lastDownloadAttemptTimestamp","sidecar","directPath","objectId"];function j(){var a=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a.buffer}function k(a){return a}function a(){return j()}function l(a){return a}function m(a){return a}function b(a){return a}function e(a){return a}function f(a,b){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,b);b=a.fileSha256;var c=a.mediaKey,e=a.fileEncSha256,f=a.directPath,g=a.mediaKeyTimestamp,h=a.sidecar,i=a.objectId,j=a.fbid,k=a.serverMediaType,l=a.downloadableThumbnail,n=a.filename,o=a.progressiveJpegDetails;a=a.size;f=d("WADirectPath").validateDirectPath(f);return{fileSha256:b,mediaKey:c,fileEncSha256:e,directPath:f.success?f.value:null,mediaKeyTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(g),sidecar:h&&m(h),objectId:i,fbid:j,downloadableThumbnail:l==null?void 0:{directPath:l.directPath,fileEncSha256:l.fileEncSha256,fileSha256:l.fileSha256,mediaKey:l.mediaKey,mediaKeyTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(l.mediaKeyTimestamp),objectId:l.objectId},serverMediaType:k,filename:n,progressiveJpegDetails:o&&u(o),size:a==null?void 0:d("WALongInt").numberOrThrowIfTooLarge(a)}}function n(a){var b=a.fileSha256,c=a.fileEncSha256,e=a.mediaKey,f=a.directPath,g=a.mediaKeyTimestamp,h=a.serverMediaType,i=a.objectId,j=a.fbid,k=a.downloadableThumbnail,l=a.filename,m=a.progressiveJpegDetails;a=a.size;b=d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:b,fileEncSha256:c,mediaKey:e,directPath:f,mediaKeyTimestamp:g,serverMediaType:h,objectId:i,fbid:j,downloadableThumbnail:k,filename:l,progressiveJpegDetails:m,size:a});return b.readByteArrayView()}function o(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArrayView()}function p(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{directPath:b})).readByteArrayView()}function q(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{downloadableThumbnail:babelHelpers["extends"]({},a.downloadableThumbnail,{directPath:b})})).readByteArrayView()}function r(a,b){a=babelHelpers["extends"]({},a,{fbid:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArrayView()}function s(a,b){a=babelHelpers["extends"]({},a,{objectId:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArrayView()}function t(a){if(a==null)return null;a.$$unknownFieldCount;var b=a.directPath,c=a.objectId,e=babelHelpers.objectWithoutPropertiesLoose(a,h);b=d("WADirectPath").validateDirectPath(b);return babelHelpers["extends"]({},e,{directPath:b.success?b.value:null,objectId:c,mediaKey:a.mediaKey&&k(a.mediaKey),mediaKeyTimestamp:a.mediaKeyTimestamp==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(a.mediaKeyTimestamp))})}function u(a){if(a==null)return null;return a.scanLengths==null||a.sidecar==null?null:{sidecar:a.sidecar,scanLengths:a.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})}}function v(a){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a);var b=a.serverMediaType,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken,g=a.downloadableThumbnail,h=a.progressiveJpegDetails,j=a.size,m=a.lastDownloadAttemptTimestamp,n=a.sidecar,o=a.directPath,p=a.objectId;a=babelHelpers.objectWithoutPropertiesLoose(a,i);var q=null;h!=null&&h.scanLengths!=null&&h.sidecar!=null&&(q={sidecar:h.sidecar,scanLengths:h.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})});h=d("WADirectPath").validateDirectPath(o);return babelHelpers["extends"]({},a,{objectId:p,directPath:h.success?h.value:void 0,sidecar:n,serverMediaType:b==null?null:d("WAServerMediaType").castToServerMediaType(b),mediaKey:c&&k(c),mediaKeyTimestamp:e==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e)),uploadToken:f&&l(f),progressiveJpegDetails:q,downloadableThumbnail:g&&t(g),size:d("WALongInt").maybeNumberOrThrowIfTooLarge(j),lastDownloadAttemptTimestamp:m==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(m))})}function w(a){var b=a.directPath,c=a.fileEncSha256,e=a.fileSha256,f=a.mediaKey,g=a.serverMediaType;if(f==null)return d("WAResultOrError").makeError("media-entry-invalid-media-key");else if(b==null)return d("WAResultOrError").makeError("media-entry-invalid-direct-path");else if(c==null)return d("WAResultOrError").makeError("media-entry-invalid-file-enc-sha256");else if(e==null)return d("WAResultOrError").makeError("media-entry-invalid-file-sha256");else if(g==null)return d("WAResultOrError").makeError("media-entry-invalid-server-media-type");return d("WAResultOrError").makeResult(babelHelpers["extends"]({},a,{directPath:b,fileEncSha256:c,fileSha256:e,mediaKey:f,serverMediaType:g}))}function x(a){var b=a.directPath,c=a.fileEncSha256,e=a.fileSha256,f=a.mediaKey,g=[];f==null?g.push("media-entry-invalid-media-key"):b==null?g.push("media-entry-invalid-direct-path"):c==null?g.push("media-entry-invalid-file-enc-sha256"):e==null&&g.push("media-entry-invalid-file-sha256");return f!=null&&b!=null&&c!=null&&e!=null?d("WAResultOrError").makeResult(babelHelpers["extends"]({},a,{directPath:b,fileEncSha256:c,fileSha256:e,mediaKey:f})):d("WAResultOrError").makeError(g)}function y(a){var b="image/jpeg";switch(a){case"image":b="image/jpeg";break;case"ptt":b="audio/wav";break;case"video":b="video/mp4";break;case"gif":b="image/gif";break;case"sticker":b="image/webp";break;case"preview":b="image/jpeg";break;case"document":b=d("WAGlobals").getConfig().isOctetStreamAttachmentMimeTypeEnabled()===!0?"application/octet-stream":"application/pdf";break;case"xma-image":b="image/jpeg";break;default:throw c("err")("Unsupported server media type: "+a)}return b}var z=function(){return"TransformStream"in self};g.createMediaKey=j;g.castToMediaKey=k;g.createUploadToken=a;g.castToUploadToken=l;g.castToStreamingSidecar=m;g.stringToDeliveryObjectId=b;g.stringToBackupEntFbid=e;g.mediaEntryDataToRawData=f;g.rawDataToMediaEntry=n;g.encodeMediaEntryForUpload=o;g.encodeMediaEntryWithUpdatedPath=p;g.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=q;g.encodeMediaEntryWithUpdatedFbid=r;g.encodeMediaEntryWithUpdatedObjectId=s;g.convertMediaDownloadableThumbnailToDownloadableThumbnail=t;g.decodeMediaEntryData=v;g.validateDecodedMediaEntryForDownload=w;g.validateDownloadableThumbnailForDownload=x;g.getMimeTypeFromServerMediaType=y;g.isTransformStreamSupported=z}),98);
__d("MAWDbMedia",["I64","WAMediaUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Image",j="Video",k="Ptt",l="Gif",m="Sticker",n="DocumentFile",o={DOCUMENT_FILE:n,GIF:l,IMAGE:i,PTT:k,STICKER:m,VIDEO:j};function a(a){return a}function b(a){return a}function c(a){return(h||(h=d("I64"))).of_float(a)}function e(a){return(h||(h=d("I64"))).to_float(a)}function f(a,b){a=a.mediaEntries.get(b);if(a==null)return d("WAResultOrError").makeError("missing-media-entry");b=d("WAMediaUtils").decodeMediaEntryData(a);a=b.serverMediaType;return a==null?d("WAResultOrError").makeError("missing-server-media-type"):d("WAResultOrError").makeResult(a)}g.IMAGE=i;g.VIDEO=j;g.PTT=k;g.GIF=l;g.STICKER=m;g.DOCUMENT_FILE=n;g.MEDIA_TYPE=o;g.convertNumberToMediaId=a;g.convertToMediaId64=b;g.convertMediaIdToMediaId64=c;g.convertMediaId64ToMediaId=e;g.getServerMediaType=f}),98);
__d("MAWHexUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.toString(16);return(a.length-1).toString(16)+a}function b(a){for(var b=1;b<a.length;b++){var d=a.substring(0,b),e=a.substring(b);if(e.length-1===parseInt(d,16))return parseInt(e,16)}throw c("FBLogger")("messenger_web").mustfixThrow("Cannot convert the order-preserving-hex back to number")}g.orderPreservingHex=a;g.reverseOrderPreservingHex=b}),98);
__d("WAMsg",["WAAssertUnreachable","WAJids","WAMsgType","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.author,c=a.chat;a=a.externalId;return c+"_"+a+"_"+b}function h(a){switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return{author:a.id.author,deleteTs:a.deleteTs,ephemeralSetting:a.ephemeralSetting,expirationTs:a.expirationTs,externalId:a.id.externalId,sentTs:a.sentTs,serverTs:a.serverTs,ts:a.ts};case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return{author:a.id.author,externalId:a.id.externalId,sentTs:a.sentTs,ts:a.ts};default:a.type;return null}}function b(a){var b=h(a);if(b==null)return null;switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("WAMsgType").MSG_TYPE.TEXT});case d("WAMsgType").MSG_TYPE.IMAGE:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.IMAGE});case d("WAMsgType").MSG_TYPE.VIDEO:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.VIDEO});case d("WAMsgType").MSG_TYPE.PTT:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.PTT});case d("WAMsgType").MSG_TYPE.STICKER:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.STICKER});case d("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.RECEIVER_FETCH});case d("WAMsgType").MSG_TYPE.GIF:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.PTT});case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL});case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.UNAVAILABLE});case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.REACTION:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.DOCUMENT_FILE:case d("WAMsgType").MSG_TYPE.EDIT_ACTION:return null;default:return c("WAAssertUnreachable")(a.type)}}function e(a){if(d("WAJids").isAuthorSystem(a.author))throw c("err")("Cannot send @system messages");else return{author:a.author,chat:a.chat,externalId:a.externalId}}g.craftWAMsgIdString=a;g.asQuotedMsg=b;g.asProtocolMsgId=e}),98);
__d("MAWDbMsg",["FBLogger","I64","MAWDbChatId__UNSAFE_DO_NOT_USE","MAWHexUtils","MAWMsgType","WAMsg"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i=[(i=d("MAWMsgType")).MSG_TYPE.REVOKED,i.MSG_TYPE.EPHEMERAL_SYNC_RESPONSE,i.MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE,i.MSG_TYPE.GROUP_INVITE,i.MSG_TYPE.SK_DISTRIBUTION,i.MSG_TYPE.RAVEN_ACTION];var j=0,k=Number.MAX_SAFE_INTEGER;function a(a){return a}function b(a){return a}function e(a){return y(a)?a:null}function f(a){return a}function l(a){return a}var m="futureproof",n="futureproof_spam",o="spam",p="toBeRead",q="e2ee_admin_msg",r="cutover_admin_msg";function s(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m"}function t(a,b,c){a=d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m";return a+"_"+c.externalId}function u(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_um"}function v(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_r"}function w(a,b,c){c=c!=null?c:d("MAWHexUtils").orderPreservingHex(Math.floor(Math.random()*1e4));return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_DEBUG_"+c+")}"}function x(a){a=a.split("_");return a.length>=3&&a[0]!==""&&a[1]!==""&&a[2]==="m"}function y(a){var b=/^(.*)\..*?$/;b=b.test(a);return x(a)||b}function z(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,p)}function A(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,q)}function B(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,r)}function C(a){if(!x(a))return 0;a=a.split("_");a[0];a=a[1];return d("MAWHexUtils").reverseOrderPreservingHex(a)}function D(a){return d("MAWHexUtils").orderPreservingHex(a)+"_"}function E(a){return d("MAWHexUtils").orderPreservingHex(a)+"_z"}function F(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.XMA:return!0;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isXMAMsg check: "%s"',a.type)}function G(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:return!0;case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isMediaMsg check: "%s"',a.type)}function H(a){return a.type===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH}function I(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:return!0;case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1;default:c("FBLogger")("messenger_web").mustfix('Invalid msg type for isPhotoOrVideoMediaMsg check: "%s"',a.type);return!1}}function J(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.GIF:return!0;default:return!1}}function K(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return!0;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1;default:c("FBLogger")("messenger_web").mustfix('Invalid msg type for isDocumentFileMediaMsg check: "%s"',a.type);return!1}}function L(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isContentMsg check: "%s"',a.type)}function M(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isMsgEligibleForTriggeringEphemeralSyncResponse check: "%s"',a.type)}function N(a){return P(a.type)}function O(a){return a.type===d("MAWMsgType").MSG_TYPE.ADMIN}function P(a){return a==="EphemeralSyncResponse"||a==="EphemeralSettingChangeFromCurrentDevice"||a==="GroupInvite"||a==="SenderKeyDistribution"||a==="RavenAction"||a==="EditAction"}function Q(a){return a==="RavenAction"}function R(a){return a.originalTs!=null?a.originalTs:S(a)}function S(a){return a.serverTs!=null?a.serverTs:a.ts}function T(a){if(a.sortOrderMs!=null)return a.sortOrderMs;else return S(a)*1e3}function U(a,b){if(a.serverTs!=null)return Math.max(b+1,a.serverTs*1e3);else return b+1}function V(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:return a.msgContent;case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return a.editMsgContent;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for getMsgContent check: "%s"',a.type)}function W(a){return d("WAMsg").craftWAMsgIdString({author:a.author,chat:a.threadJid,externalId:a.externalId})}function X(a){return(h||(h=d("I64"))).to_float(a)}g.NO_CONTENT_MESSAGE_TYPES_ALLOWLIST=i;g.MIN_MSG_SORT_ORDER=j;g.MAX_MSG_SORT_ORDER=k;g.toCachedMsgId__UNSAFE_DO_NOT_USE=a;g.toMsgId__UNSAFE_DO_NOT_USE=b;g.toMsgId=e;g.stanzaIdToMsgId=f;g.instamadilloMsgIdToMsgId=l;g.FUTUREPROOF_ALT_INDEX=m;g.FUTUREPROOF_SPAM_ALT_INDEX=n;g.SPAM_ALT_INDEX=o;g.craftMsgId__DEPRECATED=s;g.craftMsgIdV2=t;g.craftUnrenderedMsgId=u;g.craftReactionId=v;g.craftDebugMsgId=w;g.isValidMsgId=y;g.craftToBeReadAltIndex=z;g.craftE2eeAdminMsgAltIndex=A;g.craftCutoverAdminMsgAltIndex=B;g.getInChatMsgIdFromMsgId=C;g.msgIdsInChatLowerBound=D;g.msgIdsInChatUpperBound=E;g.isXMAMsg=F;g.isMediaMsg=G;g.isReceiverFetchStickerMsg=H;g.isPhotoOrVideoMediaMsg=I;g.isPhotoGIFOrVideoMediaMsg=J;g.isDocumentFileMediaMsg=K;g.isContentMsg=L;g.isMsgEligibleForTriggeringEphemeralSyncResponse=M;g.isUnrenderedMsg=N;g.isAdminMsg=O;g.isUnrenderedMsgType=P;g.isRavenActionMsgType=Q;g.getOriginalTsFromMsg=R;g.getCanonicalTsFromMsg=S;g.getSortOrderWithFallback=T;g.getSortOrderFromPrevious=U;g.getMsgContent=V;g.getWAMsgId=W;g.convertMsgRowId64=X}),98);
__d("MAWExternalId",["I64","Random","WAStanzaUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=131071,j=null,k=0;function l(){if(!c("gkx")("3139"))return Date.now();var a=j,b=Date.now();if(a==null||n(a)!==n(b)){j=b;k=0;return b}a=b+100*(k+1);var d=p(b),e=p(a);if(d==null||e==null)return b;if(d>e)return b;k++;return a}function m(a){return new Date(a).getTime()>0}function n(a){return Math.floor(a/100)*100}function o(a){return Math.floor(c("Random").random()*a)}function a(){var a=l();return d("WAStanzaUtils").toStanzaId((h||(h=d("I64"))).to_string(h.and_(h.or_(h.lsl_(h.of_float(a),22),h.and_(h.of_float(o(i)),h.of_float(i))),h.max_int)))}function p(a){return!m(a)?null:Math.floor(Number(a)%1e5/100)}g.generateExternalId=a;g.getThreeMostSignificantDigitsForSortOrderTimestamp=p}),98);
__d("MAWFrontendMediaUtils",["MAWDbMedia"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(a==="image/gif")return{mediaType:d("MAWDbMedia").MEDIA_TYPE.GIF,serverMediaType:"gif"};if(a==="image/webp"&&b!==!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.STICKER,serverMediaType:"sticker"};c=c!=null?c:a.split("/")[0];switch(c){case"image":if(b===!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"xma-image"};else return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"image"};case"video":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.VIDEO,serverMediaType:"video"};case"audio":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.PTT,serverMediaType:"ptt"};case"application":default:return{mediaType:d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE,serverMediaType:"document"}}}g.getMediaTypeAndServerMediaTypeFromBlob=a}),98);
__d("WALRUMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a=a.max;this.$1=new Map();this.$2=a}var b=a.prototype;b.has=function(a){return this.$1.has(a)};b.get=function(a){return this.$1.get(a)};b.set=function(a,b){this.$1["delete"](a);this.$1.set(a,b);if(this.$1.size>this.$2){a=this.$1.keys().next().value;a!=null&&this.$1["delete"](a)}};b["delete"]=function(a){this.$1["delete"](a)};b.clear=function(){this.$1.clear()};b.size=function(){return this.$1.size};return a}();f.LRUMap=a}),66);
__d("WARandomHex",["WACryptoDependencies","WAHex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return d("WAHex").toHex(a)}g.randomHex=a}),98);
__d("MAWJobActionsV2",["MAWTransactionMode","Promise","WALRUMap","WARandomHex","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return new(h||(h=b("Promise")))(function(b,c){a.onsuccess=b,a.onerror=c})}function j(a){return i(a).then(function(a){return a.target.result})}function k(a,c,e){return new(h||(h=b("Promise")))(function(b,f){var g=a(d("MAWTransactionMode").READONLY).index(c);g=g.openCursor(IDBKeyRange.only(e));var h=[];g.onsuccess=function(a){a=a.target.result;if(!a){b(h);return}h.push(a.value);a["continue"]()};g.onerror=function(a){return f(a)}})}var l=new(d("WALRUMap").LRUMap)({max:100});function a(a,c){var e=c.args,f=c.scheduleConfig,g=c.type,i=c.uniqKey;c=c.version;c=c===void 0?1:c;var l=JSON.stringify([g,i!=null?i:d("WARandomHex").randomHex(32)]),n={backedOffCount:0,current:e,original:e,scheduleConfig:f,startTime:d("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:g,uniqKey:l,version:c,waitUntil:null},o=function(){var b,c=a().add(n),d=j(c);if(n.uniqKey==null&&typeof ((b=c.transaction)==null?void 0:b.commit)==="function")try{c.transaction.commit()}catch(a){}return d.then(function(a){return{id:a,newlyCreated:!0}})};if(i!=null)return k(a,"uniqKey",l).then(function(c){if(c.length===0)return o();var d=[],e=null;c.forEach(function(b){b.step!=="$finished"?e=b:d.push(m(a,b.jobId))});return(h||(h=b("Promise"))).all(d).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:o()})});else return o()}function m(a,b){return j(a()["delete"](b))}function e(a,b){return j(a().get(b))}function f(a,b){return j(a().put(b))}function n(a){return j(a().getAll())}function o(a){try{return i(a().clear()).then(c("emptyFunction"))}catch(a){if(a.name==="NotFoundError")return(h||(h=b("Promise"))).resolve();throw a}}g.recentFinishedJobsCache=l;g.maybeCreateJob=a;g.deletePersistedJob=m;g.readPersistedJob=e;g.updatePersistedJob=f;g.readAllPersistedJobs=n;g.clearJobs=o}),98);
__d("MAWMessagesDirection",["I64","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return c("err")("Unhandled direction: "+a)}function a(a,b){return k(a,{asc:b.maxTimestampMs,desc:b.minTimestampMs})}function b(a,b){return k(a,{asc:b.maxMessageId,desc:b.minMessageId})}function e(a,b){return b==="desc"&&(h||(h=d("I64"))).equal(a.maxTimestampMs,(h||(h=d("I64"))).max_int)&&a.minMessageId===a.maxMessageId&&a.hasMoreBefore&&!a.hasMoreAfter}function f(a){return k(a,{asc:"after",desc:"before"})}function j(a){return l(a,{after:"asc",before:"desc"})}function k(a,b){var c=b.asc;b=b.desc;switch(a){case"asc":return c;case"desc":return b;default:a;throw i(a)}}function l(a,b){var c=b.after;b=b.before;switch(a){case"after":return c;case"before":return b;default:a;throw i(a)}}g.unhandledDirectionError=i;g.getI64RangeTimestampForDirection=a;g.getRangeMsgIdForDirection=b;g.isFirstPageRange=e;g.translateMwpDirectionToMawDirection=f;g.translateMawDirectionToMwpDirection=j;g.switchOnMWPMessagesDirection=k;g.switchOnMAWMessagesDirection=l}),98);
__d("MAWMessagesCompare",["MAWMessagesDirection"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return function(b,c){if(c.sortOrderMs==null||b.sortOrderMs==null)return 0;if(b.sortOrderMs===c.sortOrderMs){var d,e;d=(d=b.externalId)!=null?d:"";e=(e=c.externalId)!=null?e:"";if(a!=null){d=a.has(d);e=a.has(e);if(d&&!e)return-1;else if(!d&&e)return 1}return((d=c.externalId)!=null?d:"").localeCompare((e=b.externalId)!=null?e:"")}return c.sortOrderMs-b.sortOrderMs}}var i=h(),j=function(a,b){return-1*h()(a,b)};function a(a){return d("MAWMessagesDirection").switchOnMWPMessagesDirection(a,{asc:j,desc:i})}g.makeCompareMessageMetadataForDescOrderFn=h;g.getSortComparisonFunctionForDirection=a}),98);
__d("WACommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={EVERYONE:1,SILENT:2,AI:3,AI_IMAGINE:4};b={PROFILE:0};c={PLACEHOLDER:0,NO_PLACEHOLDER:1,IGNORE:2};e={};f={};var h={},i={},j={};e.name="MessageKey";e.internalSpec={remoteJid:[1,(d=d("WAProtoConst")).TYPES.STRING],fromMe:[2,d.TYPES.BOOL],id:[3,d.TYPES.STRING],participant:[4,d.TYPES.STRING]};f.name="Command";f.internalSpec={commandType:[1,d.TYPES.ENUM,a],offset:[2,d.TYPES.UINT32],length:[3,d.TYPES.UINT32],validationToken:[4,d.TYPES.STRING]};h.name="Mention";h.internalSpec={mentionType:[1,d.TYPES.ENUM,b],mentionedJid:[2,d.TYPES.STRING],offset:[3,d.TYPES.UINT32],length:[4,d.TYPES.UINT32]};i.name="MessageText";i.internalSpec={text:[1,d.TYPES.STRING],mentionedJid:[2,d.FLAGS.REPEATED|d.TYPES.STRING],commands:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],mentions:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h]};j.name="SubProtocol";j.internalSpec={payload:[1,d.TYPES.BYTES],version:[2,d.TYPES.INT32]};g.COMMAND_COMMAND_TYPE=a;g.MENTION_MENTION_TYPE=b;g.FUTURE_PROOF_BEHAVIOR=c;g.MessageKeySpec=e;g.CommandSpec=f;g.MentionSpec=h;g.MessageTextSpec=i;g.SubProtocolSpec=j}),98);
__d("WAArmadilloXMA.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5,MEDIA_LABEL:6,POST_COVER:7,POST_LABEL:8,WARNING_SCREENS:9};b={OPEN_NATIVE:11};c={SINGLE:0,HSCROLL:1,PORTRAIT:3,STANDARD_DXMA:12,LIST_DXMA:15,GRID:16};e={UNSUPPORTED:-1,IG_STORY_PHOTO_MENTION:4,IG_SINGLE_IMAGE_POST_SHARE:9,IG_MULTIPOST_SHARE:10,IG_SINGLE_VIDEO_POST_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_PROFILE_SHARE:19,IG_STORY_PHOTO_HIGHLIGHT_SHARE:20,IG_STORY_VIDEO_HIGHLIGHT_SHARE:21,IG_STORY_REPLY:22,IG_STORY_REACTION:23,IG_STORY_VIDEO_MENTION:24,IG_STORY_HIGHLIGHT_REPLY:25,IG_STORY_HIGHLIGHT_REACTION:26,IG_EXTERNAL_LINK:27,IG_RECEIVER_FETCH:28,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005,FB_PRODUCER_STORY_REPLY:1006,FB_EVENT:1007,FB_FEED_POST_PRIVATE_REPLY:1008,FB_SHORT:1009,FB_COMMENT_MENTION_SHARE:1010,FB_POST_MENTION:1011,FB_PROFILE_DIRECTORY_ITEM:1013,FB_FEED_POST_REACTION_REPLY:1014,MSG_EXTERNAL_LINK_SHARE:2e3,MSG_P2P_PAYMENT:2001,MSG_LOCATION_SHARING:2002,MSG_LOCATION_SHARING_V2:2003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:2004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:2005,MSG_RECEIVER_FETCH:2006,MSG_IG_MEDIA_SHARE:2007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:2008,MSG_REELS_LIST:2009,MSG_CONTACT:2010,MSG_THREADS_POST_SHARE:2011,MSG_FILE:2012,MSG_AVATAR_DETAILS:2013,MSG_AI_CONTACT:2014,MSG_MEMORIES_SHARE:2015,MSG_SHARED_ALBUM_REPLY:2016,MSG_SHARED_ALBUM:2017,MSG_OCCAMADILLO_XMA:2018,MSG_GEN_AI_SUBSCRIPTION:2021,MSG_GEN_AI_REMINDER:2022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:2023,MSG_NOTE_REPLY:2024,MSG_NOTE_MENTION:2025,GEN_AI_ENTITY:2026,RTC_AUDIO_CALL:3e3,RTC_VIDEO_CALL:3001,RTC_MISSED_AUDIO_CALL:3002,RTC_MISSED_VIDEO_CALL:3003,RTC_GROUP_AUDIO_CALL:3004,RTC_GROUP_VIDEO_CALL:3005,RTC_MISSED_GROUP_AUDIO_CALL:3006,RTC_MISSED_GROUP_VIDEO_CALL:3007,RTC_ONGOING_AUDIO_CALL:3008,RTC_ONGOING_VIDEO_CALL:3009,MSG_RECEIVER_FETCH_FALLBACK:3025,DATACLASS_SENDER_COPY:4e3};f={};var i={};f.name="ExtendedContentMessage";f.internalSpec={associatedMessage:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],targetType:[2,h.TYPES.ENUM,e],targetUsername:[3,h.TYPES.STRING],targetId:[4,h.TYPES.STRING],targetExpiringAtSec:[5,h.TYPES.INT64],xmaLayoutType:[6,h.TYPES.ENUM,c],ctas:[7,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i],previews:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.SubProtocolSpec],titleText:[9,h.TYPES.STRING],subtitleText:[10,h.TYPES.STRING],maxTitleNumOfLines:[11,h.TYPES.UINT32],maxSubtitleNumOfLines:[12,h.TYPES.UINT32],favicon:[13,h.TYPES.MESSAGE,d.SubProtocolSpec],headerImage:[14,h.TYPES.MESSAGE,d.SubProtocolSpec],headerTitle:[15,h.TYPES.STRING],overlayIconGlyph:[16,h.TYPES.ENUM,a],overlayTitle:[17,h.TYPES.STRING],overlayDescription:[18,h.TYPES.STRING],sentWithMessageId:[19,h.TYPES.STRING],messageText:[20,h.TYPES.STRING],headerSubtitle:[21,h.TYPES.STRING],xmaDataclass:[22,h.TYPES.STRING],contentRef:[23,h.TYPES.STRING],mentionedJid:[24,h.FLAGS.REPEATED|h.TYPES.STRING],commands:[25,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.CommandSpec],mentions:[26,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.MentionSpec]};i.name="ExtendedContentMessage$CTA";i.internalSpec={buttonType:[1,h.TYPES.ENUM,b],title:[2,h.TYPES.STRING],actionUrl:[3,h.TYPES.STRING],nativeUrl:[4,h.TYPES.STRING],ctaType:[5,h.TYPES.STRING],actionContentBlob:[6,h.TYPES.STRING]};g.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH=a;g.EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE=b;g.EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE=c;g.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE=e;g.ExtendedContentMessageSpec=f;g.ExtendedContentMessage$CTASpec=i}),98);
__d("MAWXMAUtils",["I64","LSIntEnum","LSXmaContentType","MAWMsgType","WAArmadilloXMA.pb","WALogger","WATimeUtils","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){return!a||a.type!==d("MAWMsgType").MSG_TYPE.XMA?null:a}function b(a){if(a==null)return!1;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return c("gkx")("9339");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:return!1;default:d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Hit Unreachable XMAType "," - checking isXMAShare"])),a);return!1}}function e(a){return a!=null&&((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_REPLY))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_SHARE))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_MENTION))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_PRODUCER_STORY_REPLY)))}function f(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function k(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}function l(a){return a!=null&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").MSG_CONTACT))}function m(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH}function n(a){return a==null?!1:a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function o(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY}function p(a,b){return a!=null&&a||b!=null&&b<d("WATimeUtils").unixTime()}function q(a){a=a.ctas;a!=null&&(a=a.filter(function(a){return a.buttonType!==d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE}));return a}function r(a){return babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function s(a){a=babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,defaultPreviewMediaPlaintextHash:void 0,faviconMediaId:void 0,faviconPlaintextHash:void 0,headerMediaId:void 0,headerMediaPlaintextHash:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0});c("justknobx")._("3897")&&(a.targetExpiringAtSec=void 0);return a}function t(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return!0;default:return!1}}function u(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY}function v(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION}function w(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION?!0:!1}function x(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION}function y(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return!0;default:return!1}}function z(a){return w(a)||y(a)}function A(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE}function B(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE}function C(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY}function D(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:return!0;default:return!1}}g.maybeXMAMessage=a;g.isXMAShare_DO_NOT_USE=b;g.isXMAFBStory=e;g.isXMAStoryShare=f;g.isXMAExternalLinkShare=k;g.isXMAContactShare=l;g.isReceiverFetchXMA=m;g.isIGXMAStoryShare=n;g.isXMAPostPrivateReply=o;g.isXMAExpired=p;g.removeCTAsForStoryMentionXMA=q;g.buildUnstoredTombstonedXMA=r;g.buildTombstonedDbXMA=s;g.isXMAStoryReply=t;g.isXMAStoryProducerReply=u;g.isXMAStoryReaction=v;g.isFBXMAStoryMention=w;g.isFBXMAPostMention=x;g.isIGXMAStoryMention=y;g.isXMAStoryMention=z;g.isIGXMAPostShare=A;g.isXMAStoryHighlightShare=B;g.isXMAMsgHighlightsTabFriendUpdatesReply=C;g.isRtcXMA=D}),98);
__d("MWLSThreadDisplayContext",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=i.createContext();function a(a){var b=d("react-compiler-runtime").c(3),c=a.children;a=a.value;var e;b[0]!==c||b[1]!==a?(e=i.jsx(k.Provider,{value:a,children:c}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}function b(){return j(k)}g.MWLSThreadDisplayContextProvider=a;g.useMWLSThreadDisplayContext=b}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("WAMapWithDefault",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,b!=null?this.$2=new Map(b):this.$2=new Map()}var b=a.prototype;b.size=function(){return this.$2.size};b.clear=function(){this.$2.clear()};b["delete"]=function(a){return this.$2["delete"](a)};b.get=function(a){var b=this.$2.get(a);if(b!=null)return b;else{b=this.$1(a);this.$2.set(a,b);return b}};b.keys=function(){return this.$2.keys()};b.entries=function(){return this.$2.entries()};b.update=function(b,c){c=new Map(this.$2).set(b,c(this.get(b)));return new a(this.$1,c)};b.toMap=function(){return new Map(this.$2)};return a}();f.MapWithDefault=a}),66);
__d("XPlatReactVoprf",["WAWasmModuleCache","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf");async function i(){var a=await h.load(),b=a.LSVoprfWasm,c=a.locateFile;a=await b({getWasmModule:function(){return d("WAWasmModuleCache").loadWasmModule(c())}});var e,f;try{e=a.createCurveRistretto();f=a.createVoprfExpTwohashdh(e);b={voprfInfo:{curvePtr:e,voprfPtr:f},voprfWasm:a};return{voprfInstance:b}}catch(b){e!=null&&a.freeCurve(e);f!=null&&a.freeVoprf(f);throw b}}function a(){return Promise.resolve(i())}function b(a){var b=a.voprfInfo;a=a.voprfWasm;var c=b.curvePtr;b=b.voprfPtr;a.freeCurve(c);a.freeVoprf(b)}g.loadXPlatReactVoprf=a;g.freeVoprfInstance=b}),98);
__d("XPlatRelayEnvironment",["CometRelayEnvironment","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("err")("RelayEnvironment is already set")}function b(){return c("CometRelayEnvironment")}g.setRelayEnvironment=a;g.getRelayEnvironment=b}),98);/*FB_PKG_DELIM*/
__d("LSAddParticipantIdToGroupThread",["LSComputeParticipantCapabilities"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.storedProcedure(b("LSComputeParticipantCapabilities"),a[1],a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.filter(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.gt(b.authorityLevel,a[9])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(14).put({threadKey:a[0],contactId:a[1],readWatermarkTimestampMs:a[2],readActionTimestampMs:a[3],deliveredWatermarkTimestampMs:a[4],nickname:a[5],normalizedSearchTerms:a[10],isAdmin:a[6],isSuperAdmin:a[13],subscribeSource:a[7],authorityLevel:a[9],participantCapabilities:d[0],groupParticipantJoinState:a[11],isModerator:a[12],threadRoles:a[14]}):0})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxAddParticipantIdToGroupThreadStoredProcedure";a.__tables__=["participants"];e.exports=a}),null);
__d("LSCheckAuthoritativeMessageExists",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.filter(b.db.table(12).fetch([[[a[1]]],"optimistic"]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.offlineThreadingId===a[1]&&b.i64.eq(c.authorityLevel,b.i64.cast([0,80]))}).next().then(function(a,b){b=a.done;a=a.value;return b?c[0]=!1:(a.item,c[0]=!0)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxCheckAuthoritativeMessageExistsStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSClearPinnedMessages",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(205).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearPinnedMessagesStoredProcedure";a.__tables__=["msg_pinned_messages_v2"];e.exports=a}),null);
__d("LSShimCompleteThreadCutover.nop",["I64","MAWBridgeFireAndForget","ReQL","getChatJidForLSDBJid"],(function(a,b,c,d,e,f,g){"use strict";var h;a=async function(a,b,c,e,f){b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.cutover_threads).getKeyRange(e));if(b!=null){c=b.showOpenMessageHistory===!1;if(c)return[(h||(h=d("I64"))).one];c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(b.armadilloThreadId));if(c!=null){b=await d("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(a,c.serverThreadKey,c.jid);if(b==null)return[(h||(h=d("I64"))).one];d("MAWBridgeFireAndForget").fireAndForget("backend","insertAdminMessageInCutoverThreads",{openThreadId:(h||(h=d("I64"))).to_string(e),threadJid:b,traceId:f});return[h.zero]}return[(h||(h=d("I64"))).one]}return[(h||(h=d("I64"))).one]};a.__nop_name__="LSShimCompleteThreadCutover";g.default=a}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.nativeOperation(b("LSShimCompleteThreadCutover.nop"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeleteAllCommunityChannelCategories",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(182).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(9).fetch([[[b.i64.cast([0,20])]],"threadTypeLastActivityTimestampMs"]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteAllCommunityChannelCategoriesStoredProcedure";a.__tables__=["cm_category_list","threads"];e.exports=a}),null);
__d("LSDeleteAllCommunityFolders",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(162).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(9).fetch([[[b.i64.cast([0,17])]],"threadTypeLastActivityTimestampMs"]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteAllCommunityFoldersStoredProcedure";a.__tables__=["community_folders","threads"];e.exports=a}),null);
__d("LSDeleteBanner",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(118).fetch([[[a[1],a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.bannerId,a[0])}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSInThreadBannerDeleteBannerStoredProcedure";a.__tables__=["in_thread_banner"];e.exports=a}),null);
__d("LSDeleteBannersByIds",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.sequence([function(e){return d[1]=c.createArray(),d[2]=c.i64.of_int32(a[1].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.loopAsync(d[2],function(e){return d[4]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[4]).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(a){return d[7]=(d[1].push(c.i64.to_string(d[5])),d[1])}])}):c.resolve()},function(a){return d[3]=d[1].join(","),d[0]=d[3]}])},function(b){return c.forEach(c.filter(c.db.table(118).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&a[1].some(function(a){return c.i64.eq(b.bannerId,a)})}),function(a){return a["delete"]()})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSInThreadBannerDeleteBannersByIdsStoredProcedure";a.__tables__=["in_thread_banner"];e.exports=a}),null);
__d("LSDeleteExistingMessageRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(13).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteExistingMessageRangesStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSDeleteRowRichStatusCustomAudience",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSOmnistoreSettingsDeleteRowRichStatusCustomAudienceStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeleteThenInsertAvatarFeatureConfig",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSContactDeleteThenInsertAvatarFeatureConfigStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(299).put({botId:a[0],isCreatedByViewer:a[1],description:a[4],tintColor:a[2],shortDescription:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure";a.__tables__=["bot_profile_info_v2"];e.exports=a}),null);
__d("LSDeleteThenInsertCmChannelList",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(167).put({communityId:a[0],threadId:a[1],categoryId:a[2],channelPrivacy:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmChannelListStoredProcedure";a.__tables__=["cm_channel_list"];e.exports=a}),null);
__d("LSDeleteThenInsertCmCommunityList",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(166).put({communityId:a[0]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmCommunityListStoredProcedure";a.__tables__=["cm_community_list"];e.exports=a}),null);
__d("LSDeleteThenInsertCommunityFolder",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.filter(b.db.table(162).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.folderId,a[0])&&b.i64.gt(b.i64.cast([0,80]),a[54])}).next().then(function(c){var d=c.done;c.value;return d?b.db.table(162).put({folderId:a[0],fbGroupId:a[1],name:a[2],memberCount:a[4],description:a[3],pictureUrl:a[5],pictureUrlFallback:a[6],pictureUrlExpirationTimestampMs:a[7],joiningChannelTaskId:a[8],afterJoiningOpenChannelId:a[10],capabilities:a[11],capabilities2:a[12],capabilities3:a[13],notificationSetting:a[14],notificationMutedUntil:a[15],sendsBlockedUntil:a[17],isHidden:a[18],hasSeenDisablingAlert:a[19],inviteLink:a[21],communityType:a[22],directInviteLink:a[23],enableState:a[24],takedownState:a[25],fbGroupType:a[28],threadCount:a[29],disableTimestamp:a[32],readTimestampMs:a[33],inviteStatus:a[37],blockedFromCommunityMemberCount:a[40],categoryCount:a[41],snippetText:a[42],coverPicUrl:a[43],coverPicUrlFallback:a[44],coverPicUrlExpirationTimestampMs:a[45],invitedThreadId:a[47],fbGroupUserParticipationApprovalStatus:a[48],ccAdminAssistRegistrationStatus:a[49],pauseStatus:a[50],isMember:a[51],latestThreadId:a[52],latestThreadActivityTimestampMs:a[53]}):0})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertCommunityFolderStoredProcedure";a.__tables__=["community_folders"];e.exports=a}),null);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[1]=a[12]==null?b.i64.cast([0,19]):a[12],c[2]="community",c[3]=b.i64.cast([0,0])==null?b.i64.cast([0,0]):b.i64.cast([0,0]),b.db.table(9).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[2],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:a[7],lastReadWatermarkTimestampMs:a[8],muteExpireTimeMs:c[3],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],joinRequestApprovalSetting:a[21],snippetText:a[24],hasPendingJoinRequest:a[25],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),capabilities4:b.i64.cast([0,0]),syncSource:a[26]}):(e=d.item,c[4]=e.lastActivityTimestampMs,c[6]=e.parentThreadKey,c[5]=e.disappearingThreadKey,c[7]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[6])?b.i64.gt(c[4],a[7])&&b.i64.neq(c[5],void 0)?(b.i64.eq(a[1],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[6],b.i64.cast([0,0]))?(f=[c[6],e.folderName],c[8]=f[0],c[9]=f[1],f):(d=[a[1],c[2]],c[8]=d[0],c[9]=d[1],d),b.db.table(9).put({threadKey:a[0],parentThreadKey:c[8],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[9],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:c[4],lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,muteExpireTimeMs:c[3],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],joinRequestApprovalSetting:a[21],snippetText:a[24],hasPendingJoinRequest:a[25],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),capabilities4:b.i64.cast([0,0]),syncSource:a[26],disappearingThreadKey:c[5],isDisappearingMode:c[7]})):b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[2],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:a[7],lastReadWatermarkTimestampMs:a[8],muteExpireTimeMs:c[3],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],joinRequestApprovalSetting:a[21],snippetText:a[24],hasPendingJoinRequest:a[25],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),capabilities4:b.i64.cast([0,0]),syncSource:a[26],disappearingThreadKey:c[5],isDisappearingMode:c[7]}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThenInsertCommunityUnjoinedThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSMinosVerifySingleEpoch.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WAGetSafeQPLError","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("EBMinosVerifySingleEpoch").__setRef("LSMinosVerifySingleEpoch.nop");a=function(a,e,f,g,k,l,m,n,o){if(!c("gkx")("14827"))return(i||(i=b("Promise"))).resolve([!1]);var p=d("EBMinosQplFlow").startMinosVerifySingleEpochQpl();p.addAnnotations({string:{calledBy:"Native Op"}});try{var q=(a=d("EBMinosInterfaceTypes")).unsafeCastToBase64StringIntToEpochNumber(f),r=a.unsafeCastToMailboxAuthPK(m),s=a.unsafeCastToMailboxEncryptionPK(l),t=a.unsafeCastToMailboxSigningPK(k),u=a.unsafeCastToUserFbId((h||(h=d("I64"))).to_string(g)),v=d("EBMinosInterfaceTypes").unsafeCastToEpochSelfSig(o),w=n!=null?d("EBMinosInterfaceTypes").unsafeCastToEpochHead(n):void 0;return j.load().then(function(a){return a.minosVerifySingleEpoch(q,u,t,s,r,w,v,p)})}catch(a){p.endFailWithError("runtime-error",d("WAGetSafeQPLError").getSafeQPLErrorMessage(a));return(i||(i=b("Promise"))).resolve([!1])}};a.__nop_name__="LSMinosVerifySingleEpoch";g["default"]=a}),98);
__d("LSSetThreadImageURL",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadPictureUrl:a[1]===""?void 0:a[1],threadPictureUrlFallback:a[2],threadPictureUrlExpirationTimestampMs:a[3],isCustomThreadPicture:a[4],shouldRoundThreadPicture:a[5]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetThreadImageURLStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSWriteMinosPublicKey.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WALongInt","WATimeUtils","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("EBWriteMinosMailboxKeysToCache").__setRef("LSWriteMinosPublicKey.nop");a=function(a,e,f,g,k,l,m,n,o,p,q,r){if(!c("gkx")("14827"))return(i||(i=b("Promise"))).resolve();var s=d("EBMinosQplFlow").startMinosWritePublicKeysQpl();s.addAnnotations({string:{calledBy:"Native Op"}});if(g==null||k==null||l==null||m==null||n==null){s.endFailWithError("missing_required_values");return(i||(i=b("Promise"))).resolve()}return j.load().then(function(a){return a.writeMinosMailboxKeysToCache({contactId:d("EBMinosInterfaceTypes").unsafeCastToUserFbId((h||(h=d("I64"))).to_string(f)),encryptionPublicKey:d("EBMinosInterfaceTypes").unsafeCastToMailboxEncryptionPK(l),epochAnonId:d("EBMinosInterfaceTypes").unsafeCastToBase64StringIntToEpochNumber(g),epochHead:d("EBMinosInterfaceTypes").unsafeCastToEpochHead(m),epochHeadCreationTime:d("EBMinosInterfaceTypes").unsafeCastToEpochCreationTime(d("WATimeUtils").castLongIntToUnixTime(d("WALongInt").decimalStringToLongInt(h.to_string(k)))),publicKeyFbid:d("EBMinosInterfaceTypes").unsafeCastToMailboxFbId(d("WALongInt").decimalStringToLongInt(h.to_string(n))),qplFlow:s})})};a.__nop_name__="LSWriteMinosPublicKey";g["default"]=a}),98);
__d("LSDeleteThenInsertContact",["LSBase64Decode.nop","LSMinosVerifySingleEpoch.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSSetThreadImageURL","LSWriteMinosPublicKey.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(f){return d.sequence([function(c){return a[50]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSBase64Decode.nop"),a[50]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return e[0]=e[19]}]):d.resolve(e[0]=void 0)},function(c){return a[52]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSBase64Decode.nop"),a[52]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return e[1]=e[19]}]):d.resolve(e[1]=void 0)},function(c){return a[53]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSBase64Decode.nop"),a[53]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return e[2]=e[19]}]):d.resolve(e[2]=void 0)},function(c){return a[55]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSBase64Decode.nop"),a[55]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return e[3]=e[19]}]):d.resolve(e[3]=void 0)},function(c){return a[56]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSBase64Decode.nop"),a[56]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return e[4]=e[19]}]):d.resolve(e[4]=void 0)},function(c){return a[57]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSBase64Decode.nop"),a[57]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return e[5]=e[19]}]):d.resolve(e[5]=void 0)},function(c){return a[58]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSBase64Decode.nop"),a[58]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return e[6]=e[19]}]):d.resolve(e[6]=void 0)},function(a){return e[18]="LSContactDeleteThenInsertContactStoredProcedure",e[7]=d.i64.random(),e[8]=d.i64.to_string(e[7]),e[8]!==void 0?d.nativeOperation(b("LSQplStartTrace.nop"),d.i64.cast([0,1021648240]),e[8],!0,void 0):d.resolve()},function(a){return e[8]!==void 0?e[18]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"MinosPublicKeyClientUtils",e[18]):d.resolve():d.resolve()},function(f){return c("gkx")("14857")&&c("gkx")("16269")||!1?d.sequence([function(c){return d.blobs.eq(e[2],void 0)&&d.blobs.eq(e[1],void 0)&&d.i64.eq(a[51],void 0)&&d.i64.eq(a[54],void 0)&&d.blobs.eq(e[3],void 0)&&d.blobs.eq(e[4],void 0)&&d.blobs.eq(e[5],void 0)&&d.blobs.eq(e[0],void 0)?d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplMarkPoint.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_minos_epoch_verify_minos_keys_null"):d.resolve()},function(b){return b=[e[0],e[2],e[1],a[51],a[54],e[3],e[4],e[5],e[6]],e[19]=b[0],e[20]=b[1],e[21]=b[2],e[22]=b[3],e[23]=b[4],e[24]=b[5],e[25]=b[6],e[26]=b[7],e[27]=b[8],b}]):d.sequence([function(c){return d.blobs.neq(e[2],void 0)?d.sequence([function(c){return d.blobs.neq(e[4],void 0)?d.sequence([function(c){return d.blobs.neq(e[3],void 0)?d.sequence([function(c){return d.blobs.neq(e[0],void 0)?d.sequence([function(c){return d.blobs.neq(e[5],void 0)?d.sequence([function(c){return d.nativeOperation(b("LSMinosVerifySingleEpoch.nop"),e[2],a[0],e[3],e[0],e[4],e[6],e[5]).then(function(a){return a=a,e[42]=a[0],a})},function(c){return e[42]?e[8]!==void 0?d.nativeOperation(b("LSQplMarkPoint.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_minos_epoch_verify_native_op_success"):d.resolve():d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplMarkPoint.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_minos_epoch_verify_native_op_failure"):d.resolve()},function(c){return e[43]=["dasm_minos_epoch_verify_",".",["Key verification failed for contact id: ","",d.i64.to_string(a[0])].join("")].join(""),e[8]!==void 0?e[43]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"error",e[43]):d.resolve():d.resolve()},function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,1021648240]),e[8],!1):d.resolve()}])},function(a){return e[41]=e[42]}]):d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Epoch Signature Self"):d.resolve()},function(a){return e[41]=!1}])},function(a){return e[40]=e[41]}]):d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Encryption Public Key"):d.resolve()},function(a){return e[40]=!1}])},function(a){return e[39]=e[40]}]):d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Signing Public Key"):d.resolve()},function(a){return e[39]=!1}])},function(a){return e[38]=e[39]}]):d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Auth Public Key"):d.resolve()},function(a){return e[38]=!1}])},function(a){return e[28]=e[38]}]):d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Epoch Anon ID"):d.resolve()},function(a){return e[28]=!1}])},function(c){return e[28]?d.resolve((c=[e[0],e[2],e[1],a[51],a[54],e[3],e[4],e[5],e[6]],e[29]=c[0],e[30]=c[1],e[31]=c[2],e[32]=c[3],e[33]=c[4],e[34]=c[5],e[35]=c[6],e[36]=c[7],e[37]=c[8],c)):d.sequence([function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplMarkPoint.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_minos_epoch_verify_epoch_verify_return_existing_contact_minos_keys_due_to_failure"):d.resolve()},function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,1021648240]),e[8],"dasm_error","MinosPublicKeyClientUtils: verification failed"):d.resolve()},function(b){return e[38]=d.createArray(),e[51]=(e[38].push(a[0]),e[38]),e[39]=new d.Map(),e[40]=e[39].get(a[0]),e[40]?e[41]=!1:e[41]=!0,e[41]?(b=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],e[42]=b[0],e[43]=b[1],e[44]=b[2],e[45]=b[3],e[46]=b[4],e[47]=b[5],e[48]=b[6],e[49]=b[7],e[50]=b[8],b):(e[51]=e[40].get("mailbox_encryption_public_key"),e[52]=e[40].get("epoch_anon_id"),e[53]=e[40].get("epoch_head"),e[54]=e[40].get("epoch_head_creation_time"),e[55]=e[40].get("minos_mailbox_public_keys_fbid"),b=[e[51],e[52],e[53],e[54],e[55],void 0,void 0,void 0,void 0],e[42]=b[0],e[43]=b[1],e[44]=b[2],e[45]=b[3],e[46]=b[4],e[47]=b[5],e[48]=b[6],e[49]=b[7],e[50]=b[8]),b=[e[42],e[43],e[44],e[45],e[46],e[47],e[48],e[49],e[50]],e[29]=b[0],e[30]=b[1],e[31]=b[2],e[32]=b[3],e[33]=b[4],e[34]=b[5],e[35]=b[6],e[36]=b[7],e[37]=b[8]}])},function(a){return a=[e[29],e[30],e[31],e[32],e[33],e[34],e[35],e[36],e[37]],e[19]=a[0],e[20]=a[1],e[21]=a[2],e[22]=a[3],e[23]=a[4],e[24]=a[5],e[25]=a[6],e[26]=a[7],e[27]=a[8],a}])},function(a){return a=[e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26],e[27]],e[9]=a[0],e[10]=a[1],e[11]=a[2],e[12]=a[3],e[13]=a[4],e[14]=a[5],e[15]=a[6],e[16]=a[7],e[17]=a[8],a}]):d.resolve((e[19]=d.createArray(),e[32]=(e[19].push(a[0]),e[19]),e[20]=new d.Map(),e[21]=e[20].get(a[0]),e[21]?e[22]=!1:e[22]=!0,e[22]?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],e[23]=f[0],e[24]=f[1],e[25]=f[2],e[26]=f[3],e[27]=f[4],e[28]=f[5],e[29]=f[6],e[30]=f[7],e[31]=f[8],f):(e[32]=e[21].get("mailbox_encryption_public_key"),e[33]=e[21].get("epoch_anon_id"),e[34]=e[21].get("epoch_head"),e[35]=e[21].get("epoch_head_creation_time"),e[36]=e[21].get("minos_mailbox_public_keys_fbid"),f=[e[32],e[33],e[34],e[35],e[36],void 0,void 0,void 0,void 0],e[23]=f[0],e[24]=f[1],e[25]=f[2],e[26]=f[3],e[27]=f[4],e[28]=f[5],e[29]=f[6],e[30]=f[7],e[31]=f[8]),f=[e[23],e[24],e[25],e[26],e[27],e[28],e[29],e[30],e[31]],e[9]=f[0],e[10]=f[1],e[11]=f[2],e[12]=f[3],e[13]=f[4],e[14]=f[5],e[15]=f[6],e[16]=f[7],e[17]=f[8]))},function(f){return c("gkx")("14857")&&c("gkx")("16269")||!1?0:0,c("gkx")("14857")&&c("gkx")("16269")||!1?d.nativeOperation(b("LSWriteMinosPublicKey.nop"),a[0],e[10],e[12],e[9],e[11],e[13],e[16],e[15],e[14],e[17]):d.resolve()},function(a){return e[8]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,1021648240]),e[8],!0):d.resolve()},function(b){return d.i64.eq(a[23],d.i64.cast([0,39423]))?e[19]=d.i64.cast([0,1]):(d.i64.eq(a[23],d.i64.cast([0,14342874]))?e[20]=d.i64.cast([0,2]):e[20]=void 0,e[19]=e[20]),d.filter(d.db.table(7).fetch([[[a[0]]]]),function(b){return d.i64.eq(b.id,a[0])&&d.i64.eq(d.i64.cast([0,1]),d.i64.cast([0,1]))&&d.i64.gt(b.authorityLevel,a[21])}).next().then(function(b){var c=b.done;b.value;return c?d.db.table(7).put({id:a[0],profilePictureUrl:a[2],profilePictureFallbackUrl:a[3],profilePictureUrlExpirationTimestampMs:a[4],profilePictureLargeUrl:a[5],profilePictureLargeFallbackUrl:a[6],profilePictureLargeUrlExpirationTimestampMs:a[7],name:a[9],secondaryName:a[41],normalizedNameForSearch:a[10],normalizedSearchTerms:a[33],isMessengerUser:a[11],isMemorialized:a[12],isManagedByViewer:a[35],blockedByViewerStatus:a[14],rank:a[17],firstName:a[18],contactType:a[19],contactTypeExact:a[20],authorityLevel:a[21],messengerCallLogThirdPartyId:a[22],profileRingColor:a[23],requiresMultiway:a[24],blockedSinceTimestampMs:a[25],fbUnblockedSinceTimestampMs:a[48],canViewerMessage:a[26],profileRingColorExpirationTimestampMs:a[27],phoneNumber:a[28],emailAddress:a[29],workCompanyId:a[30],workCompanyName:a[31],workJobTitle:a[32],deviceContactId:a[34],workForeignEntityType:a[36],capabilities:a[37],capabilities2:a[38],profileRingState:e[19],contactViewerRelationship:a[39],gender:a[40],username:a[43],contactReachabilityStatusType:a[44],friendshipStatus:a[45],restrictionType:a[46],waConnectStatus:a[47],isEmployee:!1,pageType:a[49]}):0})},function(c){return d.storedProcedure(b("LSSetThreadImageURL"),a[0],a[2],a[3],a[4],!1,!0)}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSContactDeleteThenInsertContactStoredProcedure";a.__tables__=["contacts"];d=a;g["default"]=d}),98);
__d("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(175).put({id:a[0],globalMuteUntil:a[1],showMessagePreview:a[4],isSoundOn:a[7],groupNotificationSetting:a[8],oneToOneNotificationSetting:a[9],replyReminderSetting:a[10],messageReminderDisabled:a[12],messageSound:a[13],ringtoneSound:a[14],newFriendBumpDisabledSetting:a[15],globalMuteMessageUntil:a[2],globalMuteCallUntil:a[3],includeInSwitchAccountBadges:a[11],dismissNfbThreadsCount:a[16],mutePageAccountMessageReminder:a[17]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertNotificationsSettingsGraphQLSnapshotStoredProcedure";a.__tables__=["notification_settings"];e.exports=a}),null);
__d("LSDeleteThenInsertThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(9).fetch([[[a[7]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[29],parentThreadKey:a[35],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:a[56],isDisappearingMode:a[57],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],readReceiptsDisabledV2:a[83],threadStatus:a[84],threadSubtype:a[85],pauseThreadTimestamp:a[86],metadata:a[87],syncSource:a[88]}):(e=d.item,c[1]=e.lastActivityTimestampMs,c[3]=e.parentThreadKey,c[2]=e.disappearingThreadKey,c[4]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[6])?b.i64.gt(c[1],a[0])&&b.i64.neq(c[2],void 0)?(b.i64.eq(a[35],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[3],b.i64.cast([0,0]))?(f=[c[3],e.folderName],c[5]=f[0],c[6]=f[1],f):(d=[a[35],a[10]],c[5]=d[0],c[6]=d[1],d),b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:c[6],ongoingCallState:a[29],parentThreadKey:c[5],lastActivityTimestampMs:c[1],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],readReceiptsDisabledV2:a[83],threadStatus:a[84],threadSubtype:a[85],pauseThreadTimestamp:a[86],metadata:a[87],syncSource:a[88]})):b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[29],parentThreadKey:a[35],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],readReceiptsDisabledV2:a[83],threadStatus:a[84],threadSubtype:a[85],pauseThreadTimestamp:a[86],metadata:a[87],syncSource:a[88]}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThenInsertThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("MAWDeanonDataCheck",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=b;c||(d=b+1);return a.length>=d}f.hasEnoughDeanonData=a}),66);
__d("MAWFetchEBDeanonMessagesMetadata",["DateConsts","EBFormatUtils","FBLogger","I64","MAWEBDeanonFetch","MAWMessagesDirection","MAWMessagesPaginationUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=100,j="timeout",k=10*d("DateConsts").MS_PER_SEC;async function a(a){var b=a.chatJid,e=a.direction,f=a.includeReferenceTimestamp,g=a.logger,l=a.range;a=a.sortFn;c("FBLogger")("messenger_web").info("EBMessageRangeDataSource: Issuing fetch request to EB Deanon API");g==null||g.markQPLPoint("eb_fetch_deanon_start");var m=d("MAWMessagesDirection").translateMwpDirectionToMawDirection(e),n=(h||(h=d("I64"))).to_float(d("EBFormatUtils").adjustTs(d("MAWMessagesDirection").getI64RangeTimestampForDirection(e,l),m));e=await d("MAWMessagesPaginationUtils").getRangeExternalIdForDirection(e,l);return Promise.race([d("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:b,count:i,direction:m,includeReferenceTimestamp:f,referenceExternalId:e,referenceTimestampMs:n,sortFn:a}),new Promise(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError(j))},k)})]).then(function(a){g==null||g.markQPLPoint("eb_fetch_deanon_end");return a})}g.fetchEBDeanonMessagesMetadata=a}),98);
__d("MAWFetchDeanonMetadataUsingCache",["I64","MAWDeanonDataCheck","MAWFetchEBDeanonMessagesMetadata","MAWMessagesCompare","MAWMessagesDirection","MAWSubscribeToLSTruncateMetadataThreads","WAJids","WAResultOrError","WATagsLogger","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("WATagsLogger").TAGS(["MAWFetchDeanonMetadataUsingCache"]),l=new Map(),m=c("justknobx")._("3763"),n=new Map(),o=null;async function a(a){var b=a.chatJid,c=a.db,e=a.direction,f=a.isFirstPage,g=a.logger,i=a.pageSize,j=a.range;a=a.sortFn;q(c);c=p(b,e,g,j);if(c!=null){g==null||g.addQPLAnnotations({bool:{is_first_page:f},int:{deanon_cached_data_size:c==null?void 0:c.length}});if(d("MAWDeanonDataCheck").hasEnoughDeanonData(c,i,f)){k.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Using cached Deanon messages metadata for comparison to local data"])));g==null||g.addQPLAnnotations({bool:{is_deanon_cached_data_used:!0}});return d("WAResultOrError").makeResult(c)}}i=await d("MAWFetchEBDeanonMessagesMetadata").fetchEBDeanonMessagesMetadata({chatJid:b,direction:e,includeReferenceTimestamp:!f,logger:g,range:j,sortFn:a});i.success===!0&&(g==null||g.addQPLAnnotations({bool:{is_deanon_data_fetched:!0}}),s(b,e,g,i.value,j));return i}function p(a,b,c,e){c==null||c.markQPLPoint("deanon_cache_fetch_start");t(a,b);a=(a=l.get(d("WAJids").threadIdForChatJid(a)))==null?void 0:a.get(b);if(a==null)return null;var f=d("MAWMessagesDirection").getI64RangeTimestampForDirection(b,e);e=(j||(j=d("I64"))).ge(f,a.minTimestampMs)&&(j||(j=d("I64"))).le(f,a.maxTimestampMs);if(!e)return null;e=d("MAWMessagesDirection").switchOnMWPMessagesDirection(b,{asc:a.msgsMetadata.findIndex(function(a){return(j||(j=d("I64"))).ge(j.of_float(a.sortOrderMs),f)}),desc:a.msgsMetadata.findIndex(function(a){return(j||(j=d("I64"))).le(j.of_float(a.sortOrderMs),f)})});b=a.msgsMetadata.slice(e);c==null||c.markQPLPoint("deanon_cache_fetch_end");return b}function q(a){if(o!=null)return;o=d("MAWSubscribeToLSTruncateMetadataThreads").subscribeToLSTruncateMetadataThreads(a,function(a,b){b=(j||(j=d("I64"))).to_string(a);l.delete(b);n.delete(b)})}function r(a,b,c,e){var f;a=d("WAJids").threadIdForChatJid(a);f=(f=l.get(a))!=null?f:new Map();f.set(b,{maxTimestampMs:e.max,minTimestampMs:e.min,msgsMetadata:c});l.set(a,f)}function s(a,b,c,e,f){if(e.length===0)return;c==null||c.markQPLPoint("deanon_cache_replace_start");var g=(j||(j=d("I64"))).of_float(e[e.length-1].sortOrderMs);f=d("MAWMessagesDirection").switchOnMWPMessagesDirection(b,{asc:{max:g,min:f.maxTimestampMs},desc:{max:f.minTimestampMs,min:g}});r(a,b,e,f);c==null||c.markQPLPoint("deanon_cache_replace_end")}function b(a,b){if(b.length===0)return;b=[].concat(b).sort(d("MAWMessagesCompare").getSortComparisonFunctionForDirection("desc"));var c=0,e=b.length-1;while(c<e&&b[c].sortOrderMs===b[c+1].sortOrderMs)c++;if(c===e)return;e=(j||(j=d("I64"))).of_float(b[e].sortOrderMs);n.set(j.to_string(a),{insertTime:Date.now(),minTimestampMs:e,msgsMetadata:b.slice(c)})}function t(a,b){var c=u(a,b);if(c==null)return;k.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Using init-sync deanon data for ",""])),a);r(a,b,c.msgsMetadata,{max:(j||(j=d("I64"))).max_int,min:c.minTimestampMs});n.delete(d("WAJids").threadIdForChatJid(a))}function u(a,b){if(b!=="desc")return;b=Date.now();a=n.get(d("WAJids").threadIdForChatJid(a));if(a!=null&&b-a.insertTime>m)return;return a}g.MAWFetchDeanonMetadataUsingCache=a;g.fetchDeanonDataFromCache=p;g.initDeanonCacheDescForThread=b}),98);
__d("LSFillDeanonCacheForE2EEThread.nop",["I64","LSShape","LSSynchronousPromise","LSVec","MAWFetchDeanonMetadataUsingCache","PromiseOrValue","ReQL","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,b,e,f){if(!c("gkx")("15959"))return d("LSSynchronousPromise").makeSynchronousPromise();var g=c("LSVec").toArray(f).map(function(a){a=d("LSShape").toRecord(a);var b=a.offline_threading_id;a=a.sort_order_ms;return{externalId:b,msgType:"unknown-deanon",sortOrderMs:(h||(h=d("I64"))).to_float(a)}});b=d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(e).iterator(new WeakMap());return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise((i||(i=d("PromiseOrValue"))).map(b.next(),function(a){var b;((b=a.value)==null?void 0:b[1].jid)!=null&&d("MAWFetchDeanonMetadataUsingCache").initDeanonCacheDescForThread(a.value[1].jid,g)}))};a.__nop_name__="LSFillDeanonCacheForE2EEThread";g["default"]=a}),98);
__d("LSFillDeanonCacheForE2EEThread",["LSFillDeanonCacheForE2EEThread.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.nativeOperation(b("LSFillDeanonCacheForE2EEThread.nop"),a[0],a[1])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxFillDeanonCacheForE2EEThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSShimHybridThreadDeleteByThreadKey.nop",[],(function(a,b,c,d,e,f){"use strict";a=async function(a,b,c){};a.__nop_name__="LSShimHybridThreadDeleteByThreadKey";f.default=a}),66);
__d("LSHybridThreadDelete",["LSShimHybridThreadDeleteByThreadKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.nativeOperation(b("LSShimHybridThreadDeleteByThreadKey.nop"),a[0])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxHybridThreadDeleteStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSInsertAttachmentCta",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(19).add({ctaId:a[0],attachmentFbid:a[1],attachmentIndex:a[2],threadKey:a[3],messageId:a[5],title:a[6],type_:a[7],platformToken:a[8],actionUrl:a[9],nativeUrl:a[10],urlWebviewType:a[11],actionContentBlob:a[12],enableExtensions:a[13],extensionHeightType:a[14],targetId:a[15]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure";a.__tables__=["attachment_ctas"];e.exports=a}),null);
__d("LSInsertBlobAttachment",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[27],a[32],a[34]]]]),function(c){return b.i64.eq(c.threadKey,a[27])&&b.i64.eq(b.i64.cast([0,0]),a[28])&&c.messageId===a[32]&&c.attachmentFbid===a[34]&&b.i64.lt(c.authorityLevel,a[48])&&(b.i64.eq(c.attachmentType,b.i64.cast([0,2]))||b.i64.eq(c.attachmentType,b.i64.cast([0,3]))||b.i64.eq(c.attachmentType,b.i64.cast([0,4]))||b.i64.eq(c.attachmentType,b.i64.cast([0,5]))||b.i64.eq(c.attachmentType,b.i64.cast([0,6]))||b.i64.eq(c.attachmentType,b.i64.cast([0,10]))||b.i64.eq(c.attachmentType,b.i64.cast([0,14]))||b.i64.eq(c.attachmentType,b.i64.cast([0,15])))&&b.i64.eq(c.ephemeralMediaState,void 0)&&c.isSharable===!1}),function(a){return a["delete"]()})},function(c){return b.db.table(16).add({threadKey:a[27],messageId:a[32],attachmentFbid:a[34],filename:a[0],filesize:a[1],hasMedia:a[2],isSharable:!1,playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],dashManifest:a[7],previewUrl:a[8],previewUrlFallback:a[9],previewUrlExpirationTimestampMs:a[10],previewUrlMimeType:a[11],miniPreview:a[13],previewWidth:a[14],previewHeight:a[15],attributionAppId:a[16],attributionAppName:a[17],attributionAppIcon:a[18],attributionAppIconFallback:a[19],attributionAppIconUrlExpirationTimestampMs:a[20],localPlayableUrl:a[21],playableDurationMs:a[22],attachmentIndex:a[23],accessibilitySummaryText:a[24],isPreviewImage:a[25],originalFileHash:a[26],attachmentType:a[29],timestampMs:a[31],offlineAttachmentId:a[33],hasXma:a[35],xmaLayoutType:a[36],xmasTemplateType:a[37],titleText:a[38],subtitleText:a[39],descriptionText:a[40],sourceText:a[41],faviconUrlExpirationTimestampMs:a[42],isBorderless:a[44],previewUrlLarge:a[45],samplingFrequencyHz:a[46],waveformData:a[47],authorityLevel:a[48]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertBlobAttachmentStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSIssueFetchThreadCapabilitiesTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSMailboxIssueFetchThreadCapabilitiesTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueInsertPersistentMenuItemsForThreadTask",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"insert_persistent_menu_items",c.i64.cast([0,117]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSOmnistoreSettingsIssueInsertPersistentMenuItemsForThreadTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSMarkThreadReadV2",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,0]):(b=a.item,d[0]=b.lastActivityTimestampMs)})},function(e){return c.i64.gt(d[0],a[1])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.count(c.filter(c.db.table(12).fetch([[[a[0],{gt:a[1]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.senderId,d[2])&&c.i64.gt(b.timestampMs,a[1])})).then(function(a){return d[3]=a})},function(b){return c.count(c.db.table(12).fetch([[[a[0],{gt:a[1]}]]])).then(function(a){return d[4]=a})},function(b){return c.i64.eq(d[3],d[4])&&c.i64.gt(d[4],c.i64.cast([0,0]))?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(a){var b=a.update;a=a.item;return b({lastReadWatermarkTimestampMs:a.lastActivityTimestampMs})}):c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.gt(a[1],b.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[1]})})}]):c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.gt(a[1],b.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[1]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkThreadReadV2StoredProcedure";a.__tables__=["threads","messages"];e.exports=a}),null);
__d("LSSetForwardScore",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(b){var c=b.update;b.item;return c({forwardScore:a[3]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetForwardScoreStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSGroupRoomTruncate",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(63).fetch(),function(a){return b.i64.neq(a.groupRoomType,void 0)&&b.i64.neq(a.groupRoomType,b.i64.cast([0,5]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSStoriesGroupRoomTruncateStoredProcedure";a.__tables__=["rooms"];e.exports=a}),null);
__d("LSUpdateOrInsertThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(9).fetch([[[a[7]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).add({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[32],parentThreadKey:a[38],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteMentionExpireTimeMs:a[15],muteCallsExpireTimeMs:a[16],groupNotificationSettings:a[19],isAdminSnippet:a[20],snippetSenderContactId:a[21],snippetText:a[23],snippetStringHash:a[24],snippetStringArgument1:a[25],snippetAttribution:a[26],snippetAttributionStringHash:a[27],disappearingSettingTtl:a[28],disappearingSettingUpdatedTs:a[29],disappearingSettingUpdatedBy:a[30],cannotReplyReason:a[33],customEmoji:a[34],customEmojiImageUrl:a[35],outgoingBubbleColor:a[36],themeFbid:a[37],nullstateDescriptionText1:a[39],nullstateDescriptionType1:a[40],nullstateDescriptionText2:a[41],nullstateDescriptionType2:a[42],nullstateDescriptionText3:a[43],nullstateDescriptionType3:a[44],snippetHasEmoji:a[45],hasPersistentMenu:a[46],disableComposerInput:a[47],cannotUnsendReason:a[48],viewedPluginKey:a[49],viewedPluginContext:a[50],clientThreadKey:a[51],capabilities:a[52],shouldRoundThreadPicture:a[53],proactiveWarningDismissTime:a[54],isCustomThreadPicture:a[55],otidOfFirstMessage:a[56],normalizedSearchTerms:a[57],additionalThreadContext:a[58],disappearingThreadKey:a[59],isDisappearingMode:a[60],disappearingModeInitiator:a[61],unreadDisappearingMessageCount:a[62],lastMessageCtaId:a[64],lastMessageCtaType:a[65],lastMessageCtaTimestampMs:a[66],consistentThreadFbid:a[67],threadDescription:a[69],unsendLimitMs:a[70],capabilities2:a[78],capabilities3:a[79],syncGroup:a[82],threadInvitesEnabled:a[83],threadInviteLink:a[84],isAllUnreadMessageMissedCallXma:a[85],numUnreadSubthreads:a[86],subthreadCount:a[87],lastNonMissedCallXmaMessageTimestampMs:a[88],isHidden:a[89],threadInvitesEnabledV2:a[90],joinRequestApprovalSetting:a[93],hasPendingInvitation:a[94],eventStartTimestampMs:a[95],eventEndTimestampMs:a[96],takedownState:a[97],secondaryParentThreadKey:a[98],igFolder:a[99],inviterId:a[100],threadTags:a[101],isReadReceiptsDisabled:a[102],readReceiptsDisabledV2:a[103],threadStatus:a[104],threadSubtype:a[105],pauseThreadTimestamp:a[106],metadata:a[107],capabilities4:a[108],syncSource:a[109],capabilities5:a[110],ongoingCallTimestampMs:a[111]}):(e=d.item,c[1]=e.lastActivityTimestampMs,c[3]=e.parentThreadKey,c[2]=e.disappearingThreadKey,c[4]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[6])?b.i64.gt(c[1],a[0])&&b.i64.neq(c[2],void 0)?(b.i64.eq(a[38],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[3],b.i64.cast([0,0]))?(f=[c[3],e.folderName],c[5]=f[0],c[6]=f[1],f):(d=[a[38],a[10]],c[5]=d[0],c[6]=d[1],d),b.forEach(b.db.table(9).fetch([[[a[7]]]]),function(b){var d=b.update;b.item;return d({lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:c[6],ongoingCallState:a[32],parentThreadKey:c[5],lastActivityTimestampMs:c[1],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteMentionExpireTimeMs:a[15],muteCallsExpireTimeMs:a[16],groupNotificationSettings:a[19],isAdminSnippet:a[20],snippetSenderContactId:a[21],snippetText:a[23],snippetStringHash:a[24],snippetStringArgument1:a[25],snippetAttribution:a[26],snippetAttributionStringHash:a[27],disappearingSettingTtl:a[28],disappearingSettingUpdatedTs:a[29],disappearingSettingUpdatedBy:a[30],cannotReplyReason:a[33],customEmoji:a[34],customEmojiImageUrl:a[35],outgoingBubbleColor:a[36],themeFbid:a[37],nullstateDescriptionText1:a[39],nullstateDescriptionType1:a[40],nullstateDescriptionText2:a[41],nullstateDescriptionType2:a[42],nullstateDescriptionText3:a[43],nullstateDescriptionType3:a[44],snippetHasEmoji:a[45],hasPersistentMenu:a[46],disableComposerInput:a[47],cannotUnsendReason:a[48],viewedPluginKey:a[49],viewedPluginContext:a[50],clientThreadKey:a[51],capabilities:a[52],shouldRoundThreadPicture:a[53],proactiveWarningDismissTime:a[54],isCustomThreadPicture:a[55],otidOfFirstMessage:a[56],normalizedSearchTerms:a[57],additionalThreadContext:a[58],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[61],unreadDisappearingMessageCount:a[62],lastMessageCtaId:a[64],lastMessageCtaType:a[65],lastMessageCtaTimestampMs:a[66],consistentThreadFbid:a[67],threadDescription:a[69],unsendLimitMs:a[70],capabilities2:a[78],capabilities3:a[79],syncGroup:a[82],threadInvitesEnabled:a[83],threadInviteLink:a[84],isAllUnreadMessageMissedCallXma:a[85],numUnreadSubthreads:a[86],subthreadCount:a[87],lastNonMissedCallXmaMessageTimestampMs:a[88],isHidden:a[89],threadInvitesEnabledV2:a[90],joinRequestApprovalSetting:a[93],hasPendingInvitation:a[94],eventStartTimestampMs:a[95],eventEndTimestampMs:a[96],takedownState:a[97],secondaryParentThreadKey:a[98],igFolder:a[99],inviterId:a[100],threadTags:a[101],isReadReceiptsDisabled:a[102],readReceiptsDisabledV2:a[103],threadStatus:a[104],threadSubtype:a[105],pauseThreadTimestamp:a[106],metadata:a[107],capabilities4:a[108],syncSource:a[109],capabilities5:a[110],ongoingCallTimestampMs:a[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})})):b.forEach(b.db.table(9).fetch([[[a[7]]]]),function(b){var d=b.update;b.item;return d({lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[32],parentThreadKey:a[38],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteMentionExpireTimeMs:a[15],muteCallsExpireTimeMs:a[16],groupNotificationSettings:a[19],isAdminSnippet:a[20],snippetSenderContactId:a[21],snippetText:a[23],snippetStringHash:a[24],snippetStringArgument1:a[25],snippetAttribution:a[26],snippetAttributionStringHash:a[27],disappearingSettingTtl:a[28],disappearingSettingUpdatedTs:a[29],disappearingSettingUpdatedBy:a[30],cannotReplyReason:a[33],customEmoji:a[34],customEmojiImageUrl:a[35],outgoingBubbleColor:a[36],themeFbid:a[37],nullstateDescriptionText1:a[39],nullstateDescriptionType1:a[40],nullstateDescriptionText2:a[41],nullstateDescriptionType2:a[42],nullstateDescriptionText3:a[43],nullstateDescriptionType3:a[44],snippetHasEmoji:a[45],hasPersistentMenu:a[46],disableComposerInput:a[47],cannotUnsendReason:a[48],viewedPluginKey:a[49],viewedPluginContext:a[50],clientThreadKey:a[51],capabilities:a[52],shouldRoundThreadPicture:a[53],proactiveWarningDismissTime:a[54],isCustomThreadPicture:a[55],otidOfFirstMessage:a[56],normalizedSearchTerms:a[57],additionalThreadContext:a[58],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[61],unreadDisappearingMessageCount:a[62],lastMessageCtaId:a[64],lastMessageCtaType:a[65],lastMessageCtaTimestampMs:a[66],consistentThreadFbid:a[67],threadDescription:a[69],unsendLimitMs:a[70],capabilities2:a[78],capabilities3:a[79],syncGroup:a[82],threadInvitesEnabled:a[83],threadInviteLink:a[84],isAllUnreadMessageMissedCallXma:a[85],numUnreadSubthreads:a[86],subthreadCount:a[87],lastNonMissedCallXmaMessageTimestampMs:a[88],isHidden:a[89],threadInvitesEnabledV2:a[90],joinRequestApprovalSetting:a[93],hasPendingInvitation:a[94],eventStartTimestampMs:a[95],eventEndTimestampMs:a[96],takedownState:a[97],secondaryParentThreadKey:a[98],igFolder:a[99],inviterId:a[100],threadTags:a[101],isReadReceiptsDisabled:a[102],readReceiptsDisabledV2:a[103],threadStatus:a[104],threadSubtype:a[105],pauseThreadTimestamp:a[106],metadata:a[107],capabilities4:a[108],syncSource:a[109],capabilities5:a[110],ongoingCallTimestampMs:a[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateOrInsertThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSPopulateCommunityFolderData",["LSDeleteThenInsertCommunityFolder","LSUpdateOrInsertThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(d){return c.storedProcedure(b("LSDeleteThenInsertCommunityFolder"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],void 0,void 0,void 0,a[11],a[12],a[13],a[14],a[15],void 0,a[16],a[17],a[18],void 0,a[19],a[20],a[21],a[22],a[23],void 0,void 0,a[24],a[26],void 0,void 0,a[25],a[37],void 0,void 0,c.i64.cast([0,0]),a[29],void 0,c.i64.cast([0,1]),a[28],a[27],a[30],a[31],a[32],a[33],void 0,a[34],a[35],a[36],a[38],a[39],void 0,void 0,c.i64.cast([0,80]))},function(d){return c.storedProcedure(b("LSUpdateOrInsertThread"),a[8],a[9],a[10],a[2],a[5],void 0,c.i64.cast([0,80]),a[0],c.i64.cast([0,0]),c.i64.cast([0,17]),"community",a[6],a[7],c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,c.i64.cast([-1,4294967282]),void 0,void 0,void 0,void 0,void 0,void 0,!1,!1,!1,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),void 0,void 0,!1,void 0,void 0,void 0,void 0,!1,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,void 0,c.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,!1,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,a[40],void 0,void 0,void 0,!1,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),void 0)}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxPopulateCommunityFolderDataStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSRoomTruncate",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(63).fetch(),function(a){return b.i64.eq(a.groupRoomType,void 0)||b.i64.eq(a.groupRoomType,b.i64.cast([0,5]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSStoriesRoomTruncateStoredProcedure";a.__tables__=["rooms"];e.exports=a}),null);
__d("LSTruncateCommunityListTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(166).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncateCommunityListTableStoredProcedure";a.__tables__=["cm_community_list"];e.exports=a}),null);
__d("LSTruncateNotificationSettings",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(175).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncateNotificationSettingsStoredProcedure";a.__tables__=["notification_settings"];e.exports=a}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.forEach(b.db.table(1).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({lastSyncCompletedTimestampMs:c[0]})})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreUpdateLastSyncCompletedTimestampMsToNowStoredProcedure";a.__tables__=["sync_groups"];e.exports=a}),null);
__d("LSUpsertSequenceId",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.i64.neq(a[1],void 0)?d[1]=a[1]:d[1]=d[0],c.db.table(25).put({id:d[1],lastAppliedMailboxSequenceId:a[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpsertSequenceIdStoredProcedure";a.__tables__=["mailbox_metadata"];e.exports=a}),null);
__d("LSStaticDependencies",["LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSPopulateCommunityFolderData","LSRemoveTask","LSRoomTruncate","LSSetRegionHint","LSTaskExists","LSTruncateCommunityListTable","LSTruncateNotificationSettings","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyContactRowExists"],(function(a,b,c,d,e,f,g){"use strict";a={deleteAllCommunityChannelCategories:c("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:c("LSDeleteAllCommunityFolders"),deleteThenInsertCmCommunityList:c("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:c("LSDeleteThenInsertContact"),deleteThenInsertMessageRequest:c("LSDeleteThenInsertMessageRequest"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:c("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertThread:c("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:c("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:c("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:c("LSGroupRoomTruncate"),populateCommunityFolderData:c("LSPopulateCommunityFolderData"),removeTask:c("LSRemoveTask"),roomTruncate:c("LSRoomTruncate"),setRegionHint:c("LSSetRegionHint"),taskExists:c("LSTaskExists"),truncateCommunityListTable:c("LSTruncateCommunityListTable"),truncateNotificationSettings:c("LSTruncateNotificationSettings"),updateLastSyncCompletedTimestampMsToNow:c("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertGradientColor:c("LSUpsertGradientColor"),upsertSequenceId:c("LSUpsertSequenceId"),upsertTheme:c("LSUpsertTheme"),verifyContactRowExists:c("LSVerifyContactRowExists")};b=a;g["default"]=b}),98);
__d("LSStoreProjectConfiguration",["LSBase64Decode.nop","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[4]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.blobs.neq(d[0],void 0)?c.db.table(307).put({configId:a[1],projectName:a[0],cipherSuite:a[5],publicKey:d[0],maxEvals:a[2],redemptionLimit:a[3],expirationTimestampMs:a[6],tokenPollFrequencyMs:a[7],maxClientTokenPoolSize:a[8]}):(function(a){c.logger(a).info(a)}("issuing retry for project configurations task since public key was null"),d[1]=new c.Map(),d[1].set("project_name",a[0]),d[2]=d[1].get("project_name"),d[3]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),["acs_credentials","_",d[2]].join(""),c.i64.cast([0,351]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsStoreProjectConfigurationStoredProcedure";a.__tables__=["secure_acs_configurations"];e.exports=a}),null);
__d("LSSyncBumpThreadDataToClient",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.ge(a[1],b.lastActivityTimestampMs)}).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(e){return c.i64.eq(f.parentThreadKey,c.i64.cast([-1,4294967286]))&&c.i64.eq(a[2],c.i64.cast([0,2]))?(d[0]=new c.Map(),d[0].set("thread_fbid",a[0]),d[0].set("force_upsert",!1),d[0].set("use_open_messenger_transport",!1),d[0].set("sync_group",c.i64.cast([0,95])),d[0].set("metadata_only",!1),d[0].set("preview_only",!1),d[1]=d[0].get("thread_fbid"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,209]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[1]})})},function(b){return c.i64.eq(a[2],c.i64.cast([0,1]))?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[1]})}):c.i64.eq(a[2],c.i64.cast([0,2]))?c.resolve(0):c.i64.eq(a[2],c.i64.cast([0,3]))?c.i64.ge(f.lastReadWatermarkTimestampMs,f.lastActivityTimestampMs)?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[1]})}):c.resolve():c.resolve(0)}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxSyncBumpThreadDataToClientStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSTransportHybridParticipantUpdateReceipts",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTransportHybridParticipantUpdateReceiptsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTriggerReenrollementFromOptOutDelta",["LSArrayGetObjectAt","LSDeleteAndReenrollDeviceState","LSIsEncryptionVersionSecure"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[0]=f[0],d[1]=f[1],d[2]=f[2],d[3]=f[3],d[4]=f[4],d[5]=f[5],d[6]=f[6],d[7]=f[7],d[8]=f[8],d[9]=f[9],d[10]=f[10],d[11]=f[11],d[12]=f[12],d[13]=f[13],d[14]=f[14],d[15]=f[15],d[16]=f[16],d[17]=f[17],f):(e=a.item,c.sequence([function(a){return d[26]=e.backupTenancy,d[25]=e.encryptionVersion,d[21]=void 0,c.i64.neq(d[21],void 0)?c.resolve(d[22]=d[21]):c.sequence([function(a){return d[27]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[28]?d[37]=(d[27].push(c.i64.cast([0,0])),d[27]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[37]=(d[27].push(c.i64.cast([0,2])),d[27]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[37]=(d[27].push(c.i64.cast([0,3])),d[27]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[31]?d[37]=(d[27].push(c.i64.cast([0,4])),d[27]):0,d[32]=c.createArray(),d[33]=c.i64.of_int32(d[27].length),c.i64.gt(d[33],c.i64.cast([0,0]))?c.loopAsync(d[33],function(a){return d[37]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[27],d[37]).then(function(a){return a=a,d[38]=a[0],d[39]=a[1],a})},function(a){return d[40]=(d[32].push(d[38]),d[32])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[37]=c.createArray(),d[38]=c.i64.of_int32(d[32].length),c.i64.gt(d[38],c.i64.cast([0,0]))?c.loopAsync(d[38],function(a){return d[40]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[32],d[40]).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return d[43]=(d[37].push(c.i64.to_string(d[41])),d[37])}])}):c.resolve()},function(a){return d[39]=d[37].join(","),d[34]=d[39]}])},function(a){return d[32].some(function(a){return c.i64.eq(d[25],a)})?d[35]=d[25]:d[35]=void 0,c.i64.neq(d[35],void 0)?d[36]=d[35]:d[36]=void 0,d[22]=d[36]}])},function(a){return c.i64.neq(d[22],void 0)?d[23]=d[22]:d[23]=c.i64.cast([0,0]),c.i64.neq(d[26],void 0)?d[24]=d[26]:d[24]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[23],d[24],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d[9]=a[9],d[10]=a[10],d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15],d[16]=a[16],d[17]=a[17]}]))})},function(e){return d[19]=!1,d[20]=c.i64.of_int32(a[1].length),c.i64.gt(d[20],c.i64.cast([0,0]))?c.loopAsync(d[20],function(e){return d[21]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[21]).then(function(a){return a=a,d[22]=a[0],d[23]=a[1],a})},function(a){return d[19]=d[19]||c.i64.eq(d[22],d[1])}])}):c.resolve()},function(e){return d[19]&&c.i64.eq(a[0],d[0])?c.i64.neq(d[1],void 0)?c.storedProcedure(b("LSDeleteAndReenrollDeviceState"),d[1],c.i64.cast([0,6])):c.resolve():c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTriggerReenrollementFromOptOutDeltaStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSTruncateMetadataThreads.nop",["I64","LSIntEnum","ReQL","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=async function(a,b){if(c("gkx")("9855")){b=a.mi_act_mapping_table.keys(new WeakMap());while(!0){var e,f=await b.next();if(f.done)break;await (e=a.mi_act_mapping_table).delete.apply(e,f.value)}e=d("ReQL").fromTableAscending(a.threads).filter(function(a){return a.syncGroup!=null&&(h||(h=d("I64"))).equal(a.syncGroup,(i||(i=d("LSIntEnum"))).ofNumber(95))}).iterator(new WeakMap());while(!0){f=await e.next();if(f.done)break;await (b=a.threads).delete.apply(b,f.value[0])}}return Promise.resolve()};a.__nop_name__="LSTruncateMetadataThreads";g.default=a}),98);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(a){return c.nativeOperation(b("LSTruncateMetadataThreads.nop"))},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTruncateThreadRangeTablesForSyncGroup",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.i64.eq(a[0],b.i64.cast([0,1]))?b.forEach(b.filter(b.db.table(10).fetch(),function(a){return b.i64.eq(b.i64.cast([0,1])==null?b.i64.cast([0,1]):b.i64.cast([0,1]),b.i64.cast([0,1]))}),function(a){return a["delete"]()}):b.i64.eq(a[0],b.i64.cast([0,95]))?b.forEach(b.filter(b.db.table(10).fetch([[[b.i64.cast([0,0])],[b.i64.cast([-1,4294967295])]]]),function(a){return b.i64.eq(b.i64.cast([0,1])==null?b.i64.cast([0,1]):b.i64.cast([0,1]),b.i64.cast([0,1]))&&(b.i64.eq(a.parentThreadKey,b.i64.cast([0,0]))||b.i64.eq(a.parentThreadKey,b.i64.cast([-1,4294967295])))}),function(a){return a["delete"]()}):b.resolve(0)},function(c){return b.i64.eq(a[0],b.i64.cast([0,1]))?b.forEach(b.filter(b.db.table(247).fetch(),function(a){return b.i64.eq(a.syncGroup==null?b.i64.cast([0,1]):a.syncGroup,b.i64.cast([0,1]))}),function(a){return a["delete"]()}):b.resolve()},function(c){return b.forEach(b.db.table(198).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(c){return b.forEach(b.db.table(220).fetch([[[a[0]]]]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxTruncateThreadRangeTablesForSyncGroupStoredProcedure";a.__tables__=["threads_ranges_v2__generated","filtered_threads_ranges_v3__generated","inbox_threads_ranges","sync_group_threads_ranges"];e.exports=a}),null);
__d("LSTruncateTablesForSyncGroup",["LSTruncateThreadRangeTablesForSyncGroup"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(b){return c.forEach(c.filter(c.db.table(9).fetch(),function(b){return(c.i64.eq(b.syncGroup,a[0])||c.i64.eq(b.syncGroup,void 0)&&c.i64.eq(c.i64.cast([0,1]),a[0]))&&![c.i64.cast([0,17]),c.i64.cast([0,18]),c.i64.cast([0,19]),c.i64.cast([0,20]),c.i64.cast([0,21]),c.i64.cast([0,22]),c.i64.cast([0,23]),c.i64.cast([0,24]),c.i64.cast([0,25]),c.i64.cast([0,26]),c.i64.cast([0,27]),c.i64.cast([0,28])].some(function(a){return c.i64.eq(b.threadType,a)})}),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSTruncateThreadRangeTablesForSyncGroup"),a[0])}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxTruncateTablesForSyncGroupStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[5],b.i64.cast([0,0]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({defaultCtaId:a[2],defaultCtaTitle:a[3],defaultCtaType:a[4]})}):b.i64.eq(a[5],b.i64.cast([0,1]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta1Id:a[2],cta1Title:a[3],cta1Type:a[4],cta1IconType:void 0})}):b.i64.eq(a[5],b.i64.cast([0,2]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta2Id:a[2],cta2Title:a[3],cta2Type:a[4],cta2IconType:void 0})}):b.i64.eq(a[5],b.i64.cast([0,3]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta3Id:a[2],cta3Title:a[3],cta3Type:a[4],cta3IconType:void 0})}):b.resolve(function(a){b.logger(a).warn(a)}("Unexpected CTA index"))},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure";a.__tables__=["attachment_items"];e.exports=a}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(253).put({surfaceType:a[0],communityKey:a[1],isLoadingAfter:!1,hasMoreAfter:a[2],nextPageCursor:a[4]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure";a.__tables__=["community_surface_ranges"];e.exports=a}),null);
__d("LSUpdateReadReceipt",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(14).fetch([[[a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.contactId,a[2])&&b.i64.lt(c.readWatermarkTimestampMs,a[0])}),function(c){var d=c.update;c=c.item;return d({readWatermarkTimestampMs:a[0],readActionTimestampMs:b.i64.gt(a[3],b.i64.cast([0,0]))?a[3]:c.readActionTimestampMs})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure";a.__tables__=["participants"];e.exports=a}),null);
__d("LSUpdateThreadActivityStatus",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(e){return d[2]=new c.Map(),d[2].set("thread_fbid",a[0]),d[2].set("force_upsert",!1),d[2].set("use_open_messenger_transport",!1),d[2].set("sync_group",c.i64.cast([0,104])),d[2].set("metadata_only",!1),d[2].set("preview_only",!1),d[3]=d[2].get("thread_fbid"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,209]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(e){return d[5]=c.createArray(),d[8]=(d[5].push(a[0]),d[5]),d[6]=new c.Map(),d[6].set("number_of_threads",c.i64.cast([0,1])),d[6].set("event_type","issue_tpq_for_verify_threads_activity_status"),d[6].set("thread_ids",d[5]),d[7]=c.toJSON(d[6]),c.storedProcedure(b("LSIssueNewTask"),"log_community_resnapshot_event",c.i64.cast([0,576]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[0]=c.i64.cast([0,2])}]):(f=e.item,c.sequence([function(b){return c.i64.lt(f.lastActivityTimestampMs,a[1])?c.sequence([function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[1],snippet:a[2]})})},function(a){return d[2]=c.i64.cast([0,1])}]):c.resolve(d[2]=c.i64.cast([0,0]))},function(a){return d[0]=d[2]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadActivityStatusStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSShimGetServerThreadKeyFromJIDV2.nop",["ReQL","RetUtil"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c){b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(c));return d("RetUtil").getNullableRetResult(b==null?void 0:b.serverThreadKey)};a.__nop_name__="LSShimGetServerThreadKeyFromJIDV2";g.default=a}),98);
__d("LSReplaceOptimisticThread",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1],d=[],e=[];return b.sequence([function(e){return b.db.table(9).fetch([[[a[1]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?b.forEach(b.filter(b.db.table(9).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.le(c.authorityLevel,b.i64.cast([0,20]))}),function(c){var d=c.update;c.item;return d({threadKey:a[1],authorityLevel:b.i64.cast([0,40])})}):(f=e.item,b.i64.le(f.authorityLevel,b.i64.cast([0,40]))?(c("gkx")("14697")?d[2]=!1:d[2]=!0,d[1]=d[2]):d[1]=!0,d[1]?b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()}):b.resolve())})},function(a){return b.resolve(e)}])}a.__sproc_name__="LSMailboxReplaceOptimisticThreadStoredProcedure";a.__tables__=["threads"];b=a;g["default"]=b}),98);
__d("LSUpdateOptimisticContextThreadKeys",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(32).fetch(),function(c){return b.i64.eq(c.threadKey,a[0])}),function(b){var c=b.update;b.item;return c({threadKey:a[1]})})},function(c){return b.forEach(b.filter(b.db.table(31).fetch(),function(c){return b.i64.eq(c.threadKey,a[0])}),function(b){var c=b.update;b.item;return c({threadKey:a[1]})})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreUpdateOptimisticContextThreadKeysStoredProcedure";a.__tables__=["threads_optimistic_context","messages_optimistic_context"];e.exports=a}),null);
__d("LSUpdateTaskQueueName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(b){var c=b.update;b.item;return c({queueName:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreUpdateTaskQueueNameStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSUpdateTaskValue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(b){var c=b.update;b=b.item;return c({taskValue:b.taskValue.split(a[1]).join(a[2])})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreUpdateTaskValueStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSUpdateThreadAuthorityAndMapping",["LSHybridThreadDelete","LSIssueNewTask","LSReplaceOptimisticThread","LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateOptimisticContextThreadKeys","LSUpdateTaskQueueName","LSUpdateTaskValue"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.nativeOperation(b("LSShimGetServerThreadKeyFromJIDV2.nop"),a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?d[1]=!1:(a.item,d[1]=!0)})},function(b){return c.filter(c.db.table(9).fetch(),function(b){return c.i64.eq(b.threadKey,a[2])}).next().then(function(a,b){b=a.done;a=a.value;return b?d[3]=!1:(a.item,d[3]=!0)})},function(e){return d[5]=c.i64.neq(d[0],void 0),d[7]=c.i64.eq(d[0],a[2])&&d[5],!d[7]&&!(c.i64.eq(d[0],a[1])&&d[5])&&d[5]?function(a){c.logger(a).mustfix(a)}("The mi_act_mapping row did not correspond to either the authoritative or optimistic thread key."):0,c.i64.neq(a[2],void 0)?d[6]=a[2]:d[6]=c.i64.cast([0,0]),d[5]?d[7]?c.sequence([function(e){return d[1]?c.sequence([function(b){return c.db.table(173).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[8]=void 0:(b=a.item,d[8]=b.jid)})},function(e){return d[10]=new c.Map(),d[10].set("authoritative_thread_key",a[1]),d[10].set("jid_authoritative_mapped",d[8]),d[10].set("jid_optimistic_mapped",a[0]),d[10].set("optimistic_thread_key",a[2]),d[11]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTask"),"e2ee_log_incorrect_occam_mapping",c.i64.cast([0,160033]),d[11],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(d){return c.storedProcedure(b("LSHybridThreadDelete"),a[1])}]):c.resolve()},function(a){return c.i64.neq(d[6],void 0)?c.forEach(c.db.table(9).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({clientThreadKey:d[6]})}):c.resolve()},function(e){return c.storedProcedure(b("LSReplaceOptimisticThread"),d[6],a[1])},function(e){return c.storedProcedure(b("LSUpdateOptimisticContextThreadKeys"),d[6],a[1])}]):d[3]?c.storedProcedure(b("LSHybridThreadDelete"),d[6]):c.resolve():d[3]?d[1]?c.storedProcedure(b("LSHybridThreadDelete"),d[6]):c.sequence([function(a){return c.i64.neq(d[6],void 0)?c.forEach(c.db.table(9).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({clientThreadKey:d[6]})}):c.resolve()},function(e){return c.storedProcedure(b("LSReplaceOptimisticThread"),d[6],a[1])},function(e){return c.storedProcedure(b("LSUpdateOptimisticContextThreadKeys"),d[6],a[1])}]):c.resolve()},function(e){return d[3]?c.sequence([function(e){return d[9]=c.i64.to_string(d[6]),d[8]=c.i64.to_string(a[1]),c.storedProcedure(b("LSUpdateTaskQueueName"),d[9],d[8])},function(a){return c.storedProcedure(b("LSUpdateTaskValue"),d[8],d[9],d[8])}]):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingStoredProcedure";a.__tables__=["threads","mi_act_mapping_table"];e.exports=a}),null);
__d("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID",["LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateThreadAuthorityAndMapping"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.nativeOperation(b("LSShimGetServerThreadKeyFromJIDV2.nop"),a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.i64.neq(d[0],a[1])?d[1]=d[0]:d[1]=void 0,c.storedProcedure(b("LSUpdateThreadAuthorityAndMapping"),a[0],a[1],d[1])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingWithOTIDFromJIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSOnSendMessageFailure.nop",["MWChatInteraction","Promise","err","justknobx","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("sendToSentQPLLogger").__setRef("LSOnSendMessageFailure.nop");function a(a,d,e,f){if(!c("justknobx")._("1414"))return(h||(h=b("Promise"))).resolve();if(e==null)return(h||(h=b("Promise"))).resolve();var g=j(e);if(g==null)return(h||(h=b("Promise"))).resolve();c("promiseDone")(i.load().then(function(a){return a.markSendToSentFail(g,"send_message_server_error",c("err")("send_message_server_error: %s",f))}));return(h||(h=b("Promise"))).resolve()}function j(a){a=d("MWChatInteraction").get(d("MWChatInteraction").s2sKey(a));return a==null?null:Number(a)}a.__nop_name__="LSOnSendMessageFailure";g["default"]=a}),98);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return a[2]===!0?d[0]=c.i64.cast([0,5]):d[0]=c.i64.cast([0,4]),a[2]===!0?d[1]=c.i64.cast([0,5]):d[1]=c.i64.cast([0,4]),a[2]===!0?d[2]=c.i64.cast([0,5]):d[2]=c.i64.cast([0,4]),c.nativeOperation(b("LSOnSendMessageFailure.nop"),a[0],a[1])},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0]]],"optimistic"]),function(b){return b.offlineThreadingId===a[0]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({sendStatus:d[0],sendStatusV2:d[1]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkOptimisticMessageFailedStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSMarkOptimisticMessageFailed"),e.optimisticMid,e.errorMessage,e.isRetryable);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWMarkMessageSendAsFailedLSDB",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,g){return(b=e==null?void 0:e.runInTransaction(async function(b){await c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(b),{errorMessage:d,isRetryable:g,optimisticMid:a})},"readwrite",void 0,void 0,f.id+":29"))!=null?b:Promise.resolve()}g.markMessageSendAsFailed=a}),98);
__d("MAWMessageSendReporter",["FBLogger","MAWMarkMessageSendAsFailedLSDB","MAWReportSendMessageSuccessResult","MAWSetupWorkerAuxStateForLogging","MWLogSendToSentFailedError","QPLUserFlow","WAGetSafeQPLError","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,e,f,g){var i=e.qplEventType;e=e.qplInstanceKey;try{b=await b;if(b==null)return;if(b.success)b.value!=null?d("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResultFn(b.value,g):c("QPLUserFlow").addPoint(i,"no-op",{instanceKey:e}),c("QPLUserFlow").endSuccess(i,{instanceKey:e});else{var j;g=b.error.isRetriable===!0;c("MWLogSendToSentFailedError")({qplEventType:i,qplInstanceKey:e},b.error.type,void 0,b.error.errorCode,b.error.applicationErrorCode);c("QPLUserFlow").endFailure(i,b.error.type,{annotations:{bool:{isRetriable:(j=b.error.isRetriable)!=null?j:!1,workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{errorCode:(j=b.error.errorCode)!=null?j:0},string:{details:(j=b.error.details)!=null?j:""},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});h(a,g,f)}}catch(k){c("MWLogSendToSentFailedError")({qplEventType:i,qplInstanceKey:e},"runtime-failure",k);c("QPLUserFlow").endFailure(i,"runtime-failure",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:d("WAGetSafeQPLError").getSafeQPLErrorMessage(k)},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});h(a,!1,f,k);c("FBLogger")("messenger_web").catching(k).mustfix("MAWMessageSendReporter");if(c("justknobx")._("4010")&&typeof k==="object"){b=String(k==null?void 0:k.message);j=String(k==null?void 0:k.messageParams);g=String(k==null?void 0:k.stack);c("FBLogger")("messenger_web").mustfix("Failed to send, e: %s. error params: %s. call stack: %s",b,j,g)}}}function h(a,b,e,f){if(a==null)return;var g=a.chatJid;a=a.externalId;c("promiseDone")(d("MAWMarkMessageSendAsFailedLSDB").markMessageSendAsFailed(a,g,d("WAGetSafeQPLError").getSafeQPLErrorMessage(f),e,b))}g.MAWMessageSendReporter=a}),98);
__d("LSUpdateDisappearingSettingInClientThreadsTable.nop",["I64","LSMessagingThreadAttributionType","MAWBridgeFireAndForget","MAWBridgeSendAndReceive","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","MAWJids","MAWMessageSendReporter","MAWMiActOnActThreadReady","ReQL","WATimeUtils","promiseDone","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;a=async function(a,b,e){var f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e));if(f!=null)return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSUpdateDisappearingSettingInClientThreadsTable.nop",function(a,b){var e={ephemeralExpirationInSec:(h||(h=d("I64"))).to_int32((a=f.disappearingSettingTtl)!=null?a:(h||(h=d("I64"))).zero),ephemeralLastUpdatedOrSetTimestamp:d("WATimeUtils").castMilliSecondsToUnixTime(h.to_float((a=f.disappearingSettingUpdatedTs)!=null?a:(h||(h=d("I64"))).zero))};d("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingCache",{jid:b,settings:e});if(f.disappearingSettingUpdatedBy!=null){a=(h||(h=d("I64"))).to_string(f.disappearingSettingUpdatedBy);var g=a===c("MAWEphemeralMsgAutoResetSystemId");if(a===d("MAWCurrentUser").getID()||g){var i=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","setEphemeralSettingsFromFrontend",{chatJid:b,ephemeralExpirationInSec:e.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:e.ephemeralLastUpdatedOrSetTimestamp,isEphemeralSettingReset:g,s2sInstanceKey:a})},j=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(f,{isEphemeralSetting:!0},c("LSMessagingThreadAttributionType").UNKNOWN);c("promiseDone")(d("MAWMessageSendReporter").MAWMessageSendReporter(null,i(j),{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:j}))}else d("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingsFromMI",{author:d("MAWJids").toUserJid(a),chatJid:b,ephemeralExpirationInSec:e.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:e.ephemeralLastUpdatedOrSetTimestamp,fromWAI:!1,isEphemeralSettingReset:!1,serverTs:e.ephemeralLastUpdatedOrSetTimestamp})}return Promise.resolve()})};a.__nop_name__="LSInsertAdminMessageInClientMessages";g.default=a}),98);
__d("LSUpdateThreadDisappearingSetting",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSUpdateDisappearingSettingInClientThreadsTable.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("ephemerality_type",void 0),d[0].set("ephemeral_options_duration_in_sec",a[1]),c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?d[1]=void 0:(e=a.item,c.sequence([function(a){return d[7]=e.metadata,d[7]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[7]).then(function(a){return a=a,d[8]=a[0],a})},function(a){return d[9]=new c.Map(),d[38]="theme_fbid",d[10]=d[8].get(d[38]),d[10]!==void 0?(d[10]!==void 0?d[59]=c.i64.from_string(d[10]):d[59]=void 0,d[9].set(d[38],d[59])):0,d[39]="cannot_reply_reason",d[11]=d[8].get(d[39]),d[11]!==void 0?d[9].set(d[39],d[11]):0,d[40]="message_sound",d[12]=d[8].get(d[40]),c.i64.neq(d[12],void 0)?d[9].set(d[40],d[12]):0,d[41]="magic_words",d[13]=d[8].get(d[41]),d[13]?d[14]=!1:d[14]=!0,d[14]?c.resolve():c.sequence([function(a){return d[13]?d[59]=!1:d[59]=!0,d[59]?c.resolve(d[60]=void 0):c.sequence([function(a){return d[61]=c.createArray(),d[62]=c.i64.of_int32(d[13].length),c.i64.gt(d[62],c.i64.cast([0,0]))?c.loopAsync(d[62],function(a){return d[63]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[13],d[63]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],a})},function(a){return d[66]=new c.Map(),d[71]="magic_word",d[67]=d[64].get(d[71]),d[67]!==void 0?d[66].set(d[71],d[67]):0,d[72]="creation_timestamp_ms",d[68]=d[64].get(d[72]),c.i64.neq(d[68],void 0)?d[66].set(d[72],d[68]):0,d[73]="emoji_string",d[69]=d[64].get(d[73]),d[69]!==void 0?d[66].set(d[73],d[69]):0,d[74]="selection_type",d[70]=d[64].get(d[74]),c.i64.neq(d[70],void 0)?d[66].set(d[74],d[70]):0,d[75]=(d[61].push(d[66]),d[61])}])}):c.resolve()},function(a){return d[60]=d[61]}])},function(a){return d[9].set(d[41],d[60])}])},function(a){return d[42]="is_typing_indicator_disabled",d[15]=d[8].get(d[42]),c.i64.neq(d[15],void 0)?d[9].set(d[42],d[15]):0,d[43]="pinned_messages",d[16]=d[8].get(d[43]),d[16]?d[17]=!1:d[17]=!0,d[17]?c.resolve():c.sequence([function(a){return d[16]?d[59]=!1:d[59]=!0,d[59]?c.resolve(d[60]=void 0):c.sequence([function(a){return d[61]=c.createArray(),d[62]=c.i64.of_int32(d[16].length),c.i64.gt(d[62],c.i64.cast([0,0]))?c.loopAsync(d[62],function(a){return d[63]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[16],d[63]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],a})},function(a){return d[66]=new c.Map(),d[70]="message_otid",d[67]=d[64].get(d[70]),d[67]!==void 0?d[66].set(d[70],d[67]):0,d[71]="actor_user_fbid",d[68]=d[64].get(d[71]),d[68]!==void 0?d[66].set(d[71],c.i64.from_string(d[68])):0,d[72]="creation_timestamp_ms",d[69]=d[64].get(d[72]),d[69]!==void 0?d[66].set(d[72],c.i64.from_string(d[69])):0,d[73]=(d[61].push(d[66]),d[61])}])}):c.resolve()},function(a){return d[60]=d[61]}])},function(a){return d[9].set(d[43],d[60])}])},function(a){return d[44]="ttlc_message_type",d[18]=d[8].get(d[44]),d[18]?d[19]=!1:d[19]=!0,d[19]?0:(d[18]?d[59]=!1:d[59]=!0,d[59]?d[60]=void 0:(d[61]=new c.Map(),d[65]="enabled_ttlc_message_type",d[62]=d[18].get(d[65]),d[62]?d[63]=!1:d[63]=!0,d[63]?0:(d[62]?d[67]=!1:d[67]=!0,d[67]?d[68]=void 0:(d[69]=new c.Map(),d[85]="text",d[70]=d[62].get(d[85]),d[70]!==void 0?d[69].set(d[85],d[70]):0,d[86]="clip",d[71]=d[62].get(d[86]),d[71]!==void 0?d[69].set(d[86],d[71]):0,d[87]="reel_share",d[72]=d[62].get(d[87]),d[72]!==void 0?d[69].set(d[87],d[72]):0,d[88]="media_share",d[73]=d[62].get(d[88]),d[73]!==void 0?d[69].set(d[88],d[73]):0,d[89]="story_share",d[74]=d[62].get(d[89]),d[74]!==void 0?d[69].set(d[89],d[74]):0,d[90]="link",d[75]=d[62].get(d[90]),d[75]!==void 0?d[69].set(d[90],d[75]):0,d[91]="generic_xma",d[76]=d[62].get(d[91]),d[76]!==void 0?d[69].set(d[91],d[76]):0,d[92]="profile",d[77]=d[62].get(d[92]),d[77]!==void 0?d[69].set(d[92],d[77]):0,d[93]="image",d[78]=d[62].get(d[93]),d[78]!==void 0?d[69].set(d[93],d[78]):0,d[94]="video",d[79]=d[62].get(d[94]),d[79]!==void 0?d[69].set(d[94],d[79]):0,d[95]="gif",d[80]=d[62].get(d[95]),d[80]!==void 0?d[69].set(d[95],d[80]):0,d[96]="raven",d[81]=d[62].get(d[96]),d[81]!==void 0?d[69].set(d[96],d[81]):0,d[97]="collection",d[82]=d[62].get(d[97]),d[82]!==void 0?d[69].set(d[97],d[82]):0,d[98]="calling",d[83]=d[62].get(d[98]),d[83]!==void 0?d[69].set(d[98],d[83]):0,d[99]="rest_of_msg_type",d[84]=d[62].get(d[99]),d[84]!==void 0?d[69].set(d[99],d[84]):0,d[68]=d[69]),d[61].set(d[65],d[68])),d[66]="is_ttlc_enabled",d[64]=d[18].get(d[66]),d[64]!==void 0?d[61].set(d[66],d[64]):0,d[60]=d[61]),d[9].set(d[44],d[60])),d[45]="call_link_id",d[20]=d[8].get(d[45]),d[20]!==void 0?(d[20]!==void 0?d[59]=c.i64.from_string(d[20]):d[59]=void 0,d[9].set(d[45],d[59])):0,d[46]="marketplace_trust_signal_data",d[21]=d[8].get(d[46]),d[21]?d[22]=!1:d[22]=!0,d[22]?0:(d[21]?d[59]=!1:d[59]=!0,d[59]?d[60]=void 0:(d[61]=new c.Map(),d[66]="ratings",d[62]=d[21].get(d[66]),d[62]?d[63]=!1:d[63]=!0,d[63]?0:(d[62]?d[68]=!1:d[68]=!0,d[68]?d[69]=void 0:(d[70]=new c.Map(),d[73]="rating_average",d[71]=d[62].get(d[73]),d[71]!==void 0?d[70].set(d[73],d[71]):0,d[74]="rating_count",d[72]=d[62].get(d[74]),c.i64.neq(d[72],void 0)?d[70].set(d[74],d[72]):0,d[69]=d[70]),d[61].set(d[66],d[69])),d[67]="responsiveness",d[64]=d[21].get(d[67]),d[64]?d[65]=!1:d[65]=!0,d[65]?0:(d[64]?d[68]=!1:d[68]=!0,d[68]?d[69]=void 0:(d[70]=new c.Map(),d[74]="buyer_avg_response_time",d[71]=d[64].get(d[74]),d[71]!==void 0?d[70].set(d[74],d[71]):0,d[75]="buyer_response_rate",d[72]=d[64].get(d[75]),d[72]!==void 0?d[70].set(d[75],d[72]):0,d[76]="buyer_responsiveness_level",d[73]=d[64].get(d[76]),c.i64.neq(d[73],void 0)?d[70].set(d[76],d[73]):0,d[69]=d[70]),d[61].set(d[67],d[69])),d[60]=d[61]),d[9].set(d[46],d[60])),d[47]="message_ephemerality_setting",d[23]=d[8].get(d[47]),d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[59]=!1:d[59]=!0,d[59]?d[60]=void 0:(d[61]=new c.Map(),d[64]="ephemerality_type",d[62]=d[23].get(d[64]),c.i64.neq(d[62],void 0)?d[61].set(d[64],d[62]):0,d[65]="ephemeral_options_duration_in_sec",d[63]=d[23].get(d[65]),d[63]!==void 0?(d[63]!==void 0?d[66]=c.i64.from_string(d[63]):d[66]=void 0,d[61].set(d[65],d[66])):0,d[60]=d[61]),d[9].set(d[47],d[60])),d[48]="is_ai_initiated_messaging_enabled",d[25]=d[8].get(d[48]),d[25]!==void 0?d[9].set(d[48],d[25]):0,d[49]="is_secret_conversation_for_deprecation",d[26]=d[8].get(d[49]),d[26]!==void 0?d[9].set(d[49],d[26]):0,d[50]="is_limit_sharing_enabled",d[27]=d[8].get(d[50]),d[27]!==void 0?d[9].set(d[50],d[27]):0,d[51]="first_eb_message_timestamp_ms",d[28]=d[8].get(d[51]),c.i64.neq(d[28],void 0)?d[9].set(d[51],d[28]):0,d[52]="eb_message_timestamp_type",d[29]=d[8].get(d[52]),d[29]?d[30]=!1:d[30]=!0,d[30]?c.resolve():c.sequence([function(a){return d[29]?d[59]=!1:d[59]=!0,d[59]?c.resolve(d[60]=void 0):c.sequence([function(a){return d[61]=c.createArray(),d[62]=c.i64.of_int32(d[29].length),c.i64.gt(d[62],c.i64.cast([0,0]))?c.loopAsync(d[62],function(a){return d[63]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],d[63]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],a})},function(a){return d[66]=new c.Map(),d[69]="first_eb_message_timestamp_ms_long",d[67]=d[64].get(d[69]),d[67]!==void 0?(d[67]!==void 0?d[71]=c.i64.from_string(d[67]):d[71]=void 0,d[66].set(d[69],d[71])):0,d[70]="timestamp_status",d[68]=d[64].get(d[70]),c.i64.neq(d[68],void 0)?d[66].set(d[70],d[68]):0,d[71]=(d[61].push(d[66]),d[61])}])}):c.resolve()},function(a){return d[60]=d[61]}])},function(a){return d[9].set(d[52],d[60])}])},function(a){return d[53]="thread_initiator_id",d[31]=d[8].get(d[53]),d[31]!==void 0?d[9].set(d[53],d[31]):0,d[54]="is_phone_connection",d[32]=d[8].get(d[54]),d[32]!==void 0?d[9].set(d[54],d[32]):0,d[55]="is_hidden_in_spam_folder",d[33]=d[8].get(d[55]),d[33]!==void 0?d[9].set(d[55],d[33]):0,d[56]="cc_deprecation_composer_block",d[34]=d[8].get(d[56]),d[34]?d[35]=!1:d[35]=!0,d[35]?0:(d[34]?d[59]=!1:d[59]=!0,d[59]?d[60]=void 0:(d[61]=new c.Map(),d[68]="title",d[62]=d[34].get(d[68]),d[62]!==void 0?d[61].set(d[68],d[62]):0,d[69]="pause_text",d[63]=d[34].get(d[69]),d[63]!==void 0?d[61].set(d[69],d[63]):0,d[70]="learn_more_text",d[64]=d[34].get(d[70]),d[64]!==void 0?d[61].set(d[70],d[64]):0,d[71]="learn_more_url",d[65]=d[34].get(d[71]),d[65]!==void 0?d[61].set(d[71],d[65]):0,d[72]="cta_url",d[66]=d[34].get(d[72]),d[66]!==void 0?d[61].set(d[72],d[66]):0,d[73]="cta_text",d[67]=d[34].get(d[73]),d[67]!==void 0?d[61].set(d[73],d[67]):0,d[60]=d[61]),d[9].set(d[56],d[60])),d[57]="dating_interest_type",d[36]=d[8].get(d[57]),d[36]!==void 0?d[9].set(d[57],d[36]):0,d[58]="created_from_fb_event",d[37]=d[8].get(d[58]),d[37]!==void 0?d[9].set(d[58],d[37]):0,d[6]=d[9]}]):c.resolve((d[8]=new c.Map(),d[6]=d[8]))},function(a){return d[1]=d[6]}]))})},function(a){return d[1]?d[3]=!1:d[3]=!0,d[3]?0:d[1].set("message_ephemerality_setting",d[0]),d[1]?d[4]=!1:d[4]=!0,d[4]?c.resolve(d[5]=void 0):c.sequence([function(a){return d[6]=new c.Map(),d[36]="theme_fbid",d[7]=d[1].get(d[36]),c.i64.neq(d[7],void 0)?(c.i64.neq(d[7],void 0)?d[57]=c.i64.to_string(d[7]):d[57]=void 0,d[6].set(d[36],d[57])):0,d[37]="cannot_reply_reason",d[8]=d[1].get(d[37]),d[8]!==void 0?d[6].set(d[37],d[8]):0,d[38]="message_sound",d[9]=d[1].get(d[38]),c.i64.neq(d[9],void 0)?d[6].set(d[38],d[9]):0,d[39]="magic_words",d[10]=d[1].get(d[39]),d[10]?d[11]=!1:d[11]=!0,d[11]?c.resolve():c.sequence([function(a){return d[10]?d[57]=!1:d[57]=!0,d[57]?c.resolve(d[58]=void 0):c.sequence([function(a){return d[60]=c.createArray(),d[61]=c.i64.of_int32(d[10].length),c.i64.gt(d[61],c.i64.cast([0,0]))?c.loopAsync(d[61],function(a){return d[62]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[10],d[62]).then(function(a){return a=a,d[63]=a[0],d[64]=a[1],a})},function(a){return d[65]=new c.Map(),d[70]="magic_word",d[66]=d[63].get(d[70]),d[66]!==void 0?d[65].set(d[70],d[66]):0,d[71]="creation_timestamp_ms",d[67]=d[63].get(d[71]),c.i64.neq(d[67],void 0)?d[65].set(d[71],d[67]):0,d[72]="emoji_string",d[68]=d[63].get(d[72]),d[68]!==void 0?d[65].set(d[72],d[68]):0,d[73]="selection_type",d[69]=d[63].get(d[73]),c.i64.neq(d[69],void 0)?d[65].set(d[73],d[69]):0,d[74]=(d[60].push(d[65]),d[60])}])}):c.resolve()},function(a){return d[58]=d[60]}])},function(a){return d[59]=c.i64.of_int32(d[58].length),c.i64.neq(d[59],c.i64.cast([0,0]))?d[6].set(d[39],d[58]):0}])},function(a){return d[40]="is_typing_indicator_disabled",d[12]=d[1].get(d[40]),c.i64.neq(d[12],void 0)?d[6].set(d[40],d[12]):0,d[41]="pinned_messages",d[13]=d[1].get(d[41]),d[13]?d[14]=!1:d[14]=!0,d[14]?c.resolve():c.sequence([function(a){return d[13]?d[57]=!1:d[57]=!0,d[57]?c.resolve(d[58]=void 0):c.sequence([function(a){return d[60]=c.createArray(),d[61]=c.i64.of_int32(d[13].length),c.i64.gt(d[61],c.i64.cast([0,0]))?c.loopAsync(d[61],function(a){return d[62]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[13],d[62]).then(function(a){return a=a,d[63]=a[0],d[64]=a[1],a})},function(a){return d[65]=new c.Map(),d[69]="message_otid",d[66]=d[63].get(d[69]),d[66]!==void 0?d[65].set(d[69],d[66]):0,d[70]="actor_user_fbid",d[67]=d[63].get(d[70]),c.i64.neq(d[67],void 0)?d[65].set(d[70],c.i64.to_string(d[67])):0,d[71]="creation_timestamp_ms",d[68]=d[63].get(d[71]),c.i64.neq(d[68],void 0)?d[65].set(d[71],c.i64.to_string(d[68])):0,d[72]=(d[60].push(d[65]),d[60])}])}):c.resolve()},function(a){return d[58]=d[60]}])},function(a){return d[59]=c.i64.of_int32(d[58].length),c.i64.neq(d[59],c.i64.cast([0,0]))?d[6].set(d[41],d[58]):0}])},function(a){return d[42]="ttlc_message_type",d[15]=d[1].get(d[42]),d[15]?d[16]=!1:d[16]=!0,d[16]?0:(d[15]?d[57]=!1:d[57]=!0,d[57]?d[58]=void 0:(d[61]=new c.Map(),d[65]="enabled_ttlc_message_type",d[62]=d[15].get(d[65]),d[62]?d[63]=!1:d[63]=!0,d[63]?0:(d[62]?d[67]=!1:d[67]=!0,d[67]?d[68]=void 0:(d[71]=new c.Map(),d[87]="text",d[72]=d[62].get(d[87]),d[72]!==void 0?d[71].set(d[87],d[72]):0,d[88]="clip",d[73]=d[62].get(d[88]),d[73]!==void 0?d[71].set(d[88],d[73]):0,d[89]="reel_share",d[74]=d[62].get(d[89]),d[74]!==void 0?d[71].set(d[89],d[74]):0,d[90]="media_share",d[75]=d[62].get(d[90]),d[75]!==void 0?d[71].set(d[90],d[75]):0,d[91]="story_share",d[76]=d[62].get(d[91]),d[76]!==void 0?d[71].set(d[91],d[76]):0,d[92]="link",d[77]=d[62].get(d[92]),d[77]!==void 0?d[71].set(d[92],d[77]):0,d[93]="generic_xma",d[78]=d[62].get(d[93]),d[78]!==void 0?d[71].set(d[93],d[78]):0,d[94]="profile",d[79]=d[62].get(d[94]),d[79]!==void 0?d[71].set(d[94],d[79]):0,d[95]="image",d[80]=d[62].get(d[95]),d[80]!==void 0?d[71].set(d[95],d[80]):0,d[96]="video",d[81]=d[62].get(d[96]),d[81]!==void 0?d[71].set(d[96],d[81]):0,d[97]="gif",d[82]=d[62].get(d[97]),d[82]!==void 0?d[71].set(d[97],d[82]):0,d[98]="raven",d[83]=d[62].get(d[98]),d[83]!==void 0?d[71].set(d[98],d[83]):0,d[99]="collection",d[84]=d[62].get(d[99]),d[84]!==void 0?d[71].set(d[99],d[84]):0,d[100]="calling",d[85]=d[62].get(d[100]),d[85]!==void 0?d[71].set(d[100],d[85]):0,d[101]="rest_of_msg_type",d[86]=d[62].get(d[101]),d[86]!==void 0?d[71].set(d[101],d[86]):0,d[68]=d[71]),d[69]=d[68].keys(),d[70]=c.i64.of_int32(d[69].length),c.i64.neq(d[70],c.i64.cast([0,0]))?d[61].set(d[65],d[68]):0),d[66]="is_ttlc_enabled",d[64]=d[15].get(d[66]),d[64]!==void 0?d[61].set(d[66],d[64]):0,d[58]=d[61]),d[59]=d[58].keys(),d[60]=c.i64.of_int32(d[59].length),c.i64.neq(d[60],c.i64.cast([0,0]))?d[6].set(d[42],d[58]):0),d[43]="call_link_id",d[17]=d[1].get(d[43]),c.i64.neq(d[17],void 0)?(c.i64.neq(d[17],void 0)?d[57]=c.i64.to_string(d[17]):d[57]=void 0,d[6].set(d[43],d[57])):0,d[44]="marketplace_trust_signal_data",d[18]=d[1].get(d[44]),d[18]?d[19]=!1:d[19]=!0,d[19]?0:(d[18]?d[57]=!1:d[57]=!0,d[57]?d[58]=void 0:(d[61]=new c.Map(),d[66]="ratings",d[62]=d[18].get(d[66]),d[62]?d[63]=!1:d[63]=!0,d[63]?0:(d[62]?d[68]=!1:d[68]=!0,d[68]?d[69]=void 0:(d[72]=new c.Map(),d[75]="rating_average",d[73]=d[62].get(d[75]),d[73]!==void 0?d[72].set(d[75],d[73]):0,d[76]="rating_count",d[74]=d[62].get(d[76]),c.i64.neq(d[74],void 0)?d[72].set(d[76],d[74]):0,d[69]=d[72]),d[70]=d[69].keys(),d[71]=c.i64.of_int32(d[70].length),c.i64.neq(d[71],c.i64.cast([0,0]))?d[61].set(d[66],d[69]):0),d[67]="responsiveness",d[64]=d[18].get(d[67]),d[64]?d[65]=!1:d[65]=!0,d[65]?0:(d[64]?d[68]=!1:d[68]=!0,d[68]?d[69]=void 0:(d[72]=new c.Map(),d[76]="buyer_avg_response_time",d[73]=d[64].get(d[76]),d[73]!==void 0?d[72].set(d[76],d[73]):0,d[77]="buyer_response_rate",d[74]=d[64].get(d[77]),d[74]!==void 0?d[72].set(d[77],d[74]):0,d[78]="buyer_responsiveness_level",d[75]=d[64].get(d[78]),c.i64.neq(d[75],void 0)?d[72].set(d[78],d[75]):0,d[69]=d[72]),d[70]=d[69].keys(),d[71]=c.i64.of_int32(d[70].length),c.i64.neq(d[71],c.i64.cast([0,0]))?d[61].set(d[67],d[69]):0),d[58]=d[61]),d[59]=d[58].keys(),d[60]=c.i64.of_int32(d[59].length),c.i64.neq(d[60],c.i64.cast([0,0]))?d[6].set(d[44],d[58]):0),d[45]="message_ephemerality_setting",d[20]=d[1].get(d[45]),d[20]?d[21]=!1:d[21]=!0,d[21]?0:(d[20]?d[57]=!1:d[57]=!0,d[57]?d[58]=void 0:(d[61]=new c.Map(),d[64]="ephemerality_type",d[62]=d[20].get(d[64]),c.i64.neq(d[62],void 0)?d[61].set(d[64],d[62]):0,d[65]="ephemeral_options_duration_in_sec",d[63]=d[20].get(d[65]),c.i64.neq(d[63],void 0)?(c.i64.neq(d[63],void 0)?d[66]=c.i64.to_string(d[63]):d[66]=void 0,d[61].set(d[65],d[66])):0,d[58]=d[61]),d[59]=d[58].keys(),d[60]=c.i64.of_int32(d[59].length),c.i64.neq(d[60],c.i64.cast([0,0]))?d[6].set(d[45],d[58]):0),d[46]="is_ai_initiated_messaging_enabled",d[22]=d[1].get(d[46]),d[22]!==void 0?d[6].set(d[46],d[22]):0,d[47]="is_secret_conversation_for_deprecation",d[23]=d[1].get(d[47]),d[23]!==void 0?d[6].set(d[47],d[23]):0,d[48]="is_limit_sharing_enabled",d[24]=d[1].get(d[48]),d[24]!==void 0?d[6].set(d[48],d[24]):0,d[49]="first_eb_message_timestamp_ms",d[25]=d[1].get(d[49]),c.i64.neq(d[25],void 0)?d[6].set(d[49],d[25]):0,d[50]="eb_message_timestamp_type",d[26]=d[1].get(d[50]),d[26]?d[27]=!1:d[27]=!0,d[27]?c.resolve():c.sequence([function(a){return d[26]?d[57]=!1:d[57]=!0,d[57]?c.resolve(d[58]=void 0):c.sequence([function(a){return d[60]=c.createArray(),d[61]=c.i64.of_int32(d[26].length),c.i64.gt(d[61],c.i64.cast([0,0]))?c.loopAsync(d[61],function(a){return d[62]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[26],d[62]).then(function(a){return a=a,d[63]=a[0],d[64]=a[1],a})},function(a){return d[65]=new c.Map(),d[68]="first_eb_message_timestamp_ms_long",d[66]=d[63].get(d[68]),c.i64.neq(d[66],void 0)?(c.i64.neq(d[66],void 0)?d[70]=c.i64.to_string(d[66]):d[70]=void 0,d[65].set(d[68],d[70])):0,d[69]="timestamp_status",d[67]=d[63].get(d[69]),c.i64.neq(d[67],void 0)?d[65].set(d[69],d[67]):0,d[70]=(d[60].push(d[65]),d[60])}])}):c.resolve()},function(a){return d[58]=d[60]}])},function(a){return d[59]=c.i64.of_int32(d[58].length),c.i64.neq(d[59],c.i64.cast([0,0]))?d[6].set(d[50],d[58]):0}])},function(a){return d[51]="thread_initiator_id",d[28]=d[1].get(d[51]),d[28]!==void 0?d[6].set(d[51],d[28]):0,d[52]="is_phone_connection",d[29]=d[1].get(d[52]),d[29]!==void 0?d[6].set(d[52],d[29]):0,d[53]="is_hidden_in_spam_folder",d[30]=d[1].get(d[53]),d[30]!==void 0?d[6].set(d[53],d[30]):0,d[54]="cc_deprecation_composer_block",d[31]=d[1].get(d[54]),d[31]?d[32]=!1:d[32]=!0,d[32]?0:(d[31]?d[57]=!1:d[57]=!0,d[57]?d[58]=void 0:(d[61]=new c.Map(),d[68]="title",d[62]=d[31].get(d[68]),d[62]!==void 0?d[61].set(d[68],d[62]):0,d[69]="pause_text",d[63]=d[31].get(d[69]),d[63]!==void 0?d[61].set(d[69],d[63]):0,d[70]="learn_more_text",d[64]=d[31].get(d[70]),d[64]!==void 0?d[61].set(d[70],d[64]):0,d[71]="learn_more_url",d[65]=d[31].get(d[71]),d[65]!==void 0?d[61].set(d[71],d[65]):0,d[72]="cta_url",d[66]=d[31].get(d[72]),d[66]!==void 0?d[61].set(d[72],d[66]):0,d[73]="cta_text",d[67]=d[31].get(d[73]),d[67]!==void 0?d[61].set(d[73],d[67]):0,d[58]=d[61]),d[59]=d[58].keys(),d[60]=c.i64.of_int32(d[59].length),c.i64.neq(d[60],c.i64.cast([0,0]))?d[6].set(d[54],d[58]):0),d[55]="dating_interest_type",d[33]=d[1].get(d[55]),d[33]!==void 0?d[6].set(d[55],d[33]):0,d[56]="created_from_fb_event",d[34]=d[1].get(d[56]),d[34]!==void 0?d[6].set(d[56],d[34]):0,d[35]=c.toJSON(d[6]),d[5]=d[35]}])},function(b){return c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.syncGroup,c.i64.cast([0,95]))}),function(b){var c=b.update;b.item;return c({disappearingSettingTtl:a[1],disappearingSettingUpdatedTs:a[2],disappearingSettingUpdatedBy:a[3],metadata:d[5]})})},function(d){return c.nativeOperation(b("LSUpdateDisappearingSettingInClientThreadsTable.nop"),a[0])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadDisappearingSettingStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateThreadsRangesV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(c){return b.forEach(b.db.table(10).fetch([[[a[1]]]]),function(a){return a["delete"]()})},function(d){return c[8]=b.i64.gt(a[2],b.i64.cast([0,1]))&&b.i64.gt(a[3],b.i64.cast([-2147483648,0])),a[0]==="inbox"&&b.i64.eq(a[1],b.i64.cast([0,0]))&&b.i64.eq(a[4],b.i64.cast([0,1]))?b.sequence([function(d){return c[9]=a[2],c[10]=a[3],c[11]=!1,c[12]=c[8],b.forEach(b.db.table(198).fetch(),function(a){a=a.item;return c[13]=a.minLastActivityTimestampMs,c[15]=a.minThreadKey,c[14]=b.i64.lt(c[9]==null?c[13]:c[9],c[13]),c[9]=c[14]?c[13]:c[9],c[10]=c[14]?c[15]:c[10],c[11]=c[11]||a.isLoadingBefore,c[12]=c[12]||b.i64.gt(c[13],b.i64.cast([0,1]))&&b.i64.gt(c[15],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[9],c[10],c[11],c[12]],c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],a}]):b.resolve((d=[a[2],a[3],!1,c[8]],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],d))},function(d){return b.i64.eq(a[4],b.i64.cast([0,1]))?b.sequence([function(d){return c[9]=c[0],c[10]=c[1],c[11]=c[2],c[12]=c[3],b.forEach(b.filter(b.db.table(220).fetch(),function(c){return b.i64.eq(c.parentThreadKey,a[1])}),function(a){a=a.item;return c[13]=a.minLastActivityTimestampMs,c[15]=a.minThreadKey,c[14]=b.i64.lt(c[9]==null?c[13]:c[9],c[13]),c[9]=c[14]?c[13]:c[9],c[10]=c[14]?c[15]:c[10],c[11]=c[11]||a.isLoadingBefore,c[12]=c[12]||b.i64.gt(c[13],b.i64.cast([0,1]))&&b.i64.gt(c[15],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[9],c[10],c[11],c[12]],c[4]=a[0],c[5]=a[1],c[6]=a[2],c[7]=a[3],a}]):b.resolve((d=[c[0],c[1],c[2],c[3]],c[4]=d[0],c[5]=d[1],c[6]=d[2],c[7]=d[3],d))},function(d){return b.db.table(10).add({parentThreadKey:a[1],minThreadKey:c[5]==null?b.i64.cast([-2147483648,0]):c[5],minLastActivityTimestampMs:c[4]==null?b.i64.cast([0,1]):c[4],maxLastActivityTimestampMs:b.i64.cast([0,1]),maxThreadKey:b.i64.cast([-2147483648,0]),isLoadingBefore:c[6],isLoadingAfter:!1,hasMoreBefore:c[7],hasMoreAfter:!1})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateThreadsRangesV2StoredProcedure";a.__tables__=["threads_ranges_v2__generated","inbox_threads_ranges","sync_group_threads_ranges"];e.exports=a}),null);
__d("LSUpsertContextualProfileV1",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.i64.eq(a[5],b.i64.cast([0,0]))?c[0]=void 0:c[0]=a[5],b.db.table(216).put({ownerId:a[0],associatedEntityId:a[1],profilePictureUrl:a[2],profilePictureFallbackUrl:a[4],profilePictureUrlExpirationTimestampMs:c[0],profileName:a[3]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSContactUpsertContextualProfileV1StoredProcedure";a.__tables__=["contextual_profile_v1"];e.exports=a}),null);
__d("LSUpsertFolderSeenTimestamp",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.gt(a[1],b.i64.cast([0,0]))?b.db.table(35).fetch([[[a[0]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(35).add({parentThreadKey:a[0],lastSeenRequestTimestampMs:a[1]}):(d=c.item,b.i64.lt(d.lastSeenRequestTimestampMs,a[1])?b.forEach(b.db.table(35).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastSeenRequestTimestampMs:a[1]})}):b.resolve())}):b.resolve()},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertFolderSeenTimestampStoredProcedure";a.__tables__=["folder_metadata"];e.exports=a}),null);
__d("LSUpsertMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[9]]],"optimistic"]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(12).add({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:a[6],senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:a[7],stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],sendAttributionXmd:a[58],replySourceTimestampMs:a[59],ephemeralDurationInSec:a[60],msUntilExpirationTs:a[61],ephemeralExpirationTs:a[62],takedownState:a[63],isCollapsed:a[64],subthreadKey:a[65],botResponseId:a[66],metadataDataclass:a[67],editCount:a[68],isPaidPartnership:a[69],adminSignatureName:a[70],adminSignatureProfileUrl:a[71],adminSignatureCreatorType:a[72],translatedText:a[73],textDialect:a[74],translatedTextDialect:a[75],scheduledTimestamp:a[76],isVideoQuickSend:a[77]}):(d=c.item,b.i64.le(d.authorityLevel,a[2])?b.db.table(12).put({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:d.primarySortKey,senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:d.secondarySortKey,stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],sendAttributionXmd:a[58],replySourceTimestampMs:a[59],ephemeralDurationInSec:a[60],msUntilExpirationTs:a[61],ephemeralExpirationTs:a[62],takedownState:a[63],isCollapsed:a[64],subthreadKey:a[65],botResponseId:a[66],metadataDataclass:a[67],editCount:a[68],isPaidPartnership:a[69],adminSignatureName:a[70],adminSignatureProfileUrl:a[71],adminSignatureCreatorType:a[72],translatedText:a[73],textDialect:a[74],translatedTextDialect:a[75],scheduledTimestamp:a[76],isVideoQuickSend:a[77]}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertMessageStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSVoprfComputeSharedSecret.nop",["XPlatReactVoprf"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e){a=await d("XPlatReactVoprf").loadXPlatReactVoprf();b=a.voprfInstance;a=b.voprfInfo;var f=b.voprfWasm;try{f=f.clientFinalize(a,new Uint8Array(c),new Uint8Array(e));return Promise.resolve([f.finalEvaluation.buffer])}catch(a){throw a}finally{d("XPlatReactVoprf").freeVoprfInstance(b)}};a.__nop_name__="LSVoprfComputeSharedSecret";g.default=a}),98);
__d("LSVoprfUnblind.nop",["XPlatReactVoprf"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e,f,g,h,i){a=await d("XPlatReactVoprf").loadXPlatReactVoprf();b=a.voprfInstance;a=b.voprfInfo;var j=b.voprfWasm;try{j=j.verifiableUnblind(a,new Uint8Array(h),new Uint8Array(i),new Uint8Array(e),new Uint8Array(g),new Uint8Array(f),new Uint8Array(c),!0);return Promise.resolve([j.unblindedElement.buffer])}catch(a){throw a}finally{d("XPlatReactVoprf").freeVoprfInstance(b)}};a.__nop_name__="LSVoprfUnblind";g.default=a}),98);
__d("LSVerifyAndSaveNewCredentials",["LSArrayGetObjectAt","LSBase64Decode.nop","LSRemoveBlindedTokens","LSVoprfComputeSharedSecret.nop","LSVoprfUnblind.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(307).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[1]=c.createArray(),d[2]=(d[1].push("No valid config found when saving signed credentials for project: "),d[1]),d[3]=(d[1].push("unknown"),d[1]),d[4]=c.toJSON(d[1]),function(a){c.logger(a).mustfix(a)}(d[4])):(f=e.item,c.sequence([function(e){return d[1]=c.i64.of_int32(a[1].length),c.i64.gt(d[1],c.i64.cast([0,0]))?c.loopAsync(d[1],function(e){return d[2]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[2]).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(a){return d[5]=d[3].get("token_id"),c.db.table(308).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.blob(""),c.blob(""),c.blob("")],d[6]=a[0],d[7]=a[1],d[8]=a[2],a):(e=b.item,a=[e.nonce,e.blindedNonce,e.blindingFactor],d[6]=a[0],d[7]=a[1],d[8]=a[2])})},function(a){return c.forEach(c.db.table(308).fetch([[[d[5]]]]),function(a){return a["delete"]()})},function(a){return d[10]=d[3].get("signed_nonce"),c.nativeOperation(b("LSBase64Decode.nop"),d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[12]=d[3].get("proof_c"),c.nativeOperation(b("LSBase64Decode.nop"),d[12]).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[14]=d[3].get("proof_s"),c.nativeOperation(b("LSBase64Decode.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSVoprfUnblind.nop"),f.publicKey,d[8],d[7],d[11]==null?c.blob(""):d[11],d[13]==null?c.blob(""):d[13],d[15]==null?c.blob(""):d[15]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSVoprfComputeSharedSecret.nop"),d[6],d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(b){return c.blobs.neq(d[17],void 0)?c.db.table(309).add({tokenId:d[5],configId:a[0],nonce:d[6],redeemLimit:f.redemptionLimit,sharedSecret:d[17]}):c.resolve()}]):c.resolve()}])}):c.resolve()},function(d){return c.storedProcedure(b("LSRemoveBlindedTokens"),a[0])}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsVerifyAndSaveNewCredentialsStoredProcedure";a.__tables__=["secure_acs_configurations","secure_acs_blinded_tokens","secure_acs_tokens"];e.exports=a}),null);
__d("LSVerifyCommunityFolderExistsV2",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return a[1]?c.resolve(d[0]=a[1]):c.sequence([function(b){return c.db.table(162).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[1]=!0:(b=a.item,c.sequence([function(a){return c.db.table(9).fetch([[[b.folderId]]]).next().then(function(a,b){b=a.done;a=a.value;return b?d[3]=!0:(a.item,d[3]=!1)})},function(a){return d[1]=d[3]}]))})},function(a){return d[0]=d[1]}])},function(e){return d[0]?(d[1]=new c.Map(),d[1].set("folder_id",a[0]),d[2]=d[1].get("folder_id"),d[3]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),c.i64.to_string(d[2]),c.i64.cast([0,813]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyCommunityFolderExistsV2StoredProcedure";a.__tables__=["community_folders","threads"];e.exports=a}),null);
__d("LSWriteThreadCapabilities",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(d,e){e=d.done;d=d.value;return e?0:(d.item,c[0]=b.i64.of_float(Date.now()),b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({capabilities:a[1],capabilities2:a[2],capabilities3:a[3],capabilities4:a[4],capabilities5:a[5]})}))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxWriteThreadCapabilitiesStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSExpandedStaticDependencies",["LSAddParticipantIdToGroupThread","LSCheckAuthoritativeMessageExists","LSClearPinnedMessages","LSCompleteThreadCutover","LSDeleteBanner","LSDeleteBannersByIds","LSDeleteExistingMessageRanges","LSDeleteRowRichStatusCustomAudience","LSDeleteThenInsertAvatarFeatureConfig","LSDeleteThenInsertBotProfileInfoV2","LSDeleteThenInsertCmChannelList","LSDeleteThenInsertCommunityUnjoinedThread","LSDeleteThenInsertRankingRequest","LSDeleteThenInsertRankingScore","LSFillDeanonCacheForE2EEThread","LSGetFirstAvailableAttachmentCTAID","LSHybridThreadDelete","LSInsertAttachmentCta","LSInsertAttachmentItem","LSInsertBlobAttachment","LSInsertNewMessageRange","LSIssueFetchThreadCapabilitiesTask","LSIssueInsertPersistentMenuItemsForThreadTask","LSIssueNextSync","LSMailboxTaskCompletionApiOnTaskCompletion","LSMarkThreadReadV2","LSSetForwardScore","LSSetMessageDisplayedContentTypes","LSStaticDependencies","LSStoreProjectConfiguration","LSSyncBumpThreadDataToClient","LSTransportHybridParticipantUpdateReceipts","LSTriggerReenrollementFromOptOutDelta","LSTruncateMetadataThreads","LSTruncateTablesForSyncGroup","LSUpdateAttachmentItemCtaAtIndex","LSUpdateCommunityThreadStaleState","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertOhaiGatewayKeyConfigs","LSUpdateOrInsertThread","LSUpdateReadReceipt","LSUpdateThreadActivityStatus","LSUpdateThreadAuthorityAndMappingWithOTIDFromJID","LSUpdateThreadDisappearingSetting","LSUpdateThreadNullState","LSUpdateThreadsRangesV2","LSUpsertContextualProfileV1","LSUpsertFolderSeenTimestamp","LSUpsertInboxThreadsRange","LSUpsertMessage","LSUpsertReaction","LSUpsertSyncGroupThreadsRange","LSVerifyAndSaveNewCredentials","LSVerifyCommunityFolderExistsV2","LSVerifyE2EEMetadataThreadExistsV2","LSWriteThreadCapabilities"],(function(a,b,c,d,e,f,g){"use strict";a=babelHelpers["extends"]({},c("LSStaticDependencies"),{LSVerifyCommunityFolderExistsV2:c("LSVerifyCommunityFolderExistsV2"),addParticipantIdToGroupThread:c("LSAddParticipantIdToGroupThread"),checkAuthoritativeMessageExists:c("LSCheckAuthoritativeMessageExists"),clearPinnedMessages:c("LSClearPinnedMessages"),completeThreadCutover:c("LSCompleteThreadCutover"),deleteBanner:c("LSDeleteBanner"),deleteBannersByIds:c("LSDeleteBannersByIds"),deleteExistingMessageRanges:c("LSDeleteExistingMessageRanges"),deleteRowRichStatusCustomAudience:c("LSDeleteRowRichStatusCustomAudience"),deleteThenInsertAvatarFeatureConfig:c("LSDeleteThenInsertAvatarFeatureConfig"),deleteThenInsertBotProfileInfoV2:c("LSDeleteThenInsertBotProfileInfoV2"),deleteThenInsertCmChannelList:c("LSDeleteThenInsertCmChannelList"),deleteThenInsertCommunityUnjoinedThread:c("LSDeleteThenInsertCommunityUnjoinedThread"),deleteThenInsertRankingRequest:c("LSDeleteThenInsertRankingRequest"),deleteThenInsertRankingScore:c("LSDeleteThenInsertRankingScore"),fillDeanonCacheForE2EEThread:c("LSFillDeanonCacheForE2EEThread"),getFirstAvailableAttachmentCTAID:c("LSGetFirstAvailableAttachmentCTAID"),hybridThreadDelete:c("LSHybridThreadDelete"),insertAttachmentCta:c("LSInsertAttachmentCta"),insertAttachmentItem:c("LSInsertAttachmentItem"),insertBlobAttachment:c("LSInsertBlobAttachment"),insertNewMessageRange:c("LSInsertNewMessageRange"),issueFetchThreadCapabilitiesTask:c("LSIssueFetchThreadCapabilitiesTask"),issueInsertPersistentMenuItemsForThreadTask:c("LSIssueInsertPersistentMenuItemsForThreadTask"),issueNextSync:c("LSIssueNextSync"),mailboxTaskCompletionApiOnTaskCompletion:c("LSMailboxTaskCompletionApiOnTaskCompletion"),markThreadReadV2:c("LSMarkThreadReadV2"),setForwardScore:c("LSSetForwardScore"),setMessageDisplayedContentTypes:c("LSSetMessageDisplayedContentTypes"),storeProjectConfiguration:c("LSStoreProjectConfiguration"),syncBumpThreadDataToClient:c("LSSyncBumpThreadDataToClient"),transportHybridParticipantUpdateReceipts:c("LSTransportHybridParticipantUpdateReceipts"),triggerReenrollementFromOptOutDelta:c("LSTriggerReenrollementFromOptOutDelta"),truncateMetadataThreads:c("LSTruncateMetadataThreads"),truncateTablesForSyncGroup:c("LSTruncateTablesForSyncGroup"),updateAttachmentItemCtaAtIndex:c("LSUpdateAttachmentItemCtaAtIndex"),updateCommunityThreadStaleState:c("LSUpdateCommunityThreadStaleState"),updateOrInsertCommunitySurfaceRange:c("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertOhaiGatewayKeyConfigs:c("LSUpdateOrInsertOhaiGatewayKeyConfigs"),updateOrInsertThread:c("LSUpdateOrInsertThread"),updateReadReceipt:c("LSUpdateReadReceipt"),updateThreadActivityStatus:c("LSUpdateThreadActivityStatus"),updateThreadAuthorityAndMappingWithOTIDFromJID:c("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID"),updateThreadDisappearingSetting:c("LSUpdateThreadDisappearingSetting"),updateThreadNullState:c("LSUpdateThreadNullState"),updateThreadsRangesV2:c("LSUpdateThreadsRangesV2"),upsertContextualProfileV1:c("LSUpsertContextualProfileV1"),upsertFolderSeenTimestamp:c("LSUpsertFolderSeenTimestamp"),upsertInboxThreadsRange:c("LSUpsertInboxThreadsRange"),upsertMessage:c("LSUpsertMessage"),upsertReaction:c("LSUpsertReaction"),upsertSyncGroupThreadsRange:c("LSUpsertSyncGroupThreadsRange"),verifyAndSaveNewCredentials:c("LSVerifyAndSaveNewCredentials"),verifyE2EEMetadataThreadExistsV2:c("LSVerifyE2EEMetadataThreadExistsV2"),writeThreadCapabilities:c("LSWriteThreadCapabilities")});b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("BaseCalloutImpl.react",["BaseContextualLayer.react","BaseContextualLayerAnchorRootContext","BasePopoverReflowSheet.react","LayoutAnimationBoundaryContext","react","react-compiler-runtime","useCometDisplayTimingTrackerForInteraction","useMatchViewport"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(18),e=a.anchorRef,f=a.anchorRefOverride,g=a.anchorRootRefContext,h=a.animationContext,l=a.children,m=a.contextualLayerProps,n=a.imperativeRef,o=a.scrollableAreaContext;a=f===void 0?!1:f;f=c("useCometDisplayTimingTrackerForInteraction")("FDSCalloutManager");var p=c("useMatchViewport")("max","width",600)?c("BasePopoverReflowSheet.react"):i.Fragment,q,r;b[0]!==n||b[1]!==o?(q=function(){var a=o.map(k).filter(Boolean),b=function(){var a;return(a=n.current)==null?void 0:a.reposition()};if(a.length>0){a.forEach(function(a){return a.addEventListener("scroll",b,{passive:!0})});return function(){a.forEach(function(a){return a.removeEventListener("scroll",b,{passive:!0})})}}},r=[n,o],b[0]=n,b[1]=o,b[2]=q,b[3]=r):(q=b[2],r=b[3]);j(q,r);if(m==null||e==null)return null;b[4]!==p||b[5]!==e||b[6]!==a||b[7]!==l||b[8]!==m||b[9]!==n||b[10]!==f?(q=m!=null?i.jsx(p,{children:i.jsx(c("BaseContextualLayer.react"),{align:m.align,anchorRef:a?e:void 0,contextRef:e,disableAutoAlign:m.disableAutoAlign,disableAutoFlip:m.disableAutoFlip,imperativeRef:n,position:m.position,ref:f,reflowToPosition:p!==i.Fragment,children:l})}):null,b[4]=p,b[5]=e,b[6]=a,b[7]=l,b[8]=m,b[9]=n,b[10]=f,b[11]=q):q=b[11];b[12]!==g||b[13]!==q?(r=i.jsx(c("BaseContextualLayerAnchorRootContext").Provider,{value:g,children:q}),b[12]=g,b[13]=q,b[14]=r):r=b[14];b[15]!==h||b[16]!==r?(p=i.jsx(c("LayoutAnimationBoundaryContext").Provider,{value:h,children:r}),b[15]=h,b[16]=r,b[17]=p):p=b[17];return p}function k(a){return a.getDOMNode()}g["default"]=a}),98);
__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"10004682126249141",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometNotificationsBadgeCount.react",["fbt","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometPlaceholder.react","CometRelay","FDSNumberedBadge.react","hero-tracing","react","react-compiler-runtime","setupNotificationsLiveQuery","unrecoverableViolation","updateWidgetServiceWorker","useMaybeZeroNotificationsBadgeCount"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useEffect;function a(a){var e=d("react-compiler-runtime").c(14),f=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"});f=f.viewer;if(f==null)throw c("unrecoverableViolation")("The viewer recieving these notifications cannot be null","comet_feed");f=d("CometRelay").useFragment(j!==void 0?j:j=b("CometNotificationsBadgeCountFragment_viewer.graphql"),f);var g=c("useMaybeZeroNotificationsBadgeCount")(f==null?void 0:f.notifications_unseen_count);f=a.isBadgeHidden;var k=a.overflow,n=a.setBadgeCount,o=d("CometRelay").useRelayEnvironment(),p;e[0]!==o?(a=function(){var a=c("setupNotificationsLiveQuery")(o);return function(){return a.dispose()}},p=[o],e[0]=o,e[1]=a,e[2]=p):(a=e[1],p=e[2]);m(a,p);e[3]!==g||e[4]!==n?(a=function(){n&&n(g),c("updateWidgetServiceWorker")()},p=[g,n],e[3]=g,e[4]=n,e[5]=a,e[6]=p):(a=e[5],p=e[6]);m(a,p);e[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx("span",{}),e[7]=a):a=e[7];e[8]!==g||e[9]!==f||e[10]!==k?(p=f!==!0&&g>0?l.jsx(d("hero-tracing").HeroPagelet,{name:"NotificationsBadge",children:function(a,b){return l.jsxs(l.Fragment,{children:[l.jsx(c("FDSNumberedBadge.react"),{accessibilityText:h._(/*BTDS*/"Number of unread notifications"),overflow:k,ref:a,testid:void 0,value:g}),l.jsx(b,{})]})}}):null,e[8]=g,e[9]=f,e[10]=k,e[11]=p):p=e[11];e[12]!==p?(f=l.jsx(c("CometPlaceholder.react"),{fallback:a,children:p}),e[12]=p,e[13]=f):f=e[13];return f}g["default"]=a}),226);
__d("CometRouterUIComponentsDefaultErrorRoot.react",["cr:12338","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:12338")}),98);
__d("CometTopNavTabBadge.react",["fbt","FDSNumberedBadge.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useEffect;function a(a){var b=d("react-compiler-runtime").c(12),e=a.testid,f=a.value,g=a.isBadgeHidden,i=a.isTab,l=a.overflow,m=a.setBadgeCount,n;b[0]!==m||b[1]!==f?(a=function(){m==null||m(f)},n=[f,m],b[0]=m,b[1]=f,b[2]=a,b[3]=n):(a=b[2],n=b[3]);k(a,n);if(g===!0||f===0)return null;a=i===!0?"red":void 0;b[4]!==f?(n=h._(/*BTDS*/"_j{\"*\":\"{number} items\",\"_1\":\"1 item\"}",[h._plural(f,"number")]),b[4]=f,b[5]=n):n=b[5];b[6]!==a||b[7]!==l||b[8]!==n||b[9]!==e||b[10]!==f?(g=j.jsx(c("FDSNumberedBadge.react"),{accessibilityText:n,color:a,overflow:l,testid:void 0,value:f}),b[6]=a,b[7]=l,b[8]=n,b[9]=e,b[10]=f,b[11]=g):g=b[11];return g}g["default"]=a}),226);
__d("FDSCalloutEdgeArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","xstyle"],i,j,k=j||d("react");function a(a){var b=a.children,d=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return k.jsxs("svg",babelHelpers["extends"]({"aria-hidden":!0,className:(i||(i=c("stylex")))(d),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&k.jsx("title",{children:a.title}),b!=null&&k.jsx("defs",{children:b}),k.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("FDSCalloutEdge.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometHideLayerOnEscape.react","FDSCalloutEdgeArrow.svg.react","FocusRegionStrictMode.react","Locale","focusScopeQueries","react","react-compiler-runtime","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","disableAutoFocus","id","onClose","onOutsideClick","type","xstyle"],i,j=i||(i=d("react")),k=i.useContext,l={arrow:{position:"x10l6tqk",$$css:!0},container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxShadow:"xofhs1l",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0}},m={accent:{backgroundColor:"xdk9wry",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},n={end:{borderEndEndRadius:"x16uus16",marginBottom:"xieb3on",$$css:!0},middle:{marginBottom:"x12nagc",$$css:!0},start:{borderEndStartRadius:"xbiv7yw",marginBottom:"xieb3on",$$css:!0}},o={end:{borderStartEndRadius:"x1ga7v0g",marginTop:"x1sy10c2",$$css:!0},middle:{marginTop:"x1gslohp",$$css:!0},start:{borderStartStartRadius:"x15mokao",marginTop:"x1sy10c2",$$css:!0}},p={end:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,transform:"xpk2tj9",$$css:!0},middle:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,$$css:!0},start:{bottom:"x7ofzsv",insetInlineStart:"x1o0tod",left:null,right:null,$$css:!0}},q={end:{$$css:!0},middle:{$$css:!0},start:{$$css:!0}},r={end:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,transform:"xpk2tj9",$$css:!0},middle:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,$$css:!0},start:{bottom:"x7ofzsv",insetInlineStart:"x1o0tod",left:null,right:null,$$css:!0}},s={end:{$$css:!0},middle:{$$css:!0},start:{$$css:!0}},t={end:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x19jd1h0",$$css:!0},middle:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0},start:{insetInlineStart:"x1o0tod",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0}},u={end:{transform:"x19jd1h0",$$css:!0},middle:{transform:"x1oihik5",$$css:!0},start:{transform:"x1oihik5",$$css:!0}},v={end:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x19jd1h0",$$css:!0},middle:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0},start:{insetInlineStart:"x1o0tod",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0}},w={end:{transform:"x19jd1h0",$$css:!0},middle:{transform:"x1oihik5",$$css:!0},start:{transform:"x1oihik5",$$css:!0}};function x(a){if(a==="start")return"end";return a==="end"?"start":a}function a(a){var b,e=d("react-compiler-runtime").c(41),f,g,i,p,q,r,s,t;e[0]!==a?(g=a.children,r=a.disableAutoFocus,i=a.id,p=a.onClose,q=a.onOutsideClick,s=a.type,t=a.xstyle,f=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g,e[3]=i,e[4]=p,e[5]=q,e[6]=r,e[7]=s,e[8]=t):(f=e[1],g=e[2],i=e[3],p=e[4],q=e[5],r=e[6],s=e[7],t=e[8]);a=r===void 0?!1:r;r=s===void 0?"default":s;s=k(c("BaseContextualLayerOrientationContext"));var u=s.align;s=s.position;u=u==="stretch"?"start":u;s=s==="start"?"above":s==="end"?"below":s;var v=k(c("BaseContextualLayerContextSizeContext"));b=(b=k(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;var w;e[9]!==u||e[10]!==b?(w=b!==0?x(u):u,e[9]=u,e[10]=b,e[11]=w):w=e[11];u=w;v=(w=v==null?void 0:v.width)!=null?w:0;e[12]!==u||e[13]!==b||e[14]!==v?(w=A(u,v,b),e[12]=u,e[13]=b,e[14]=v,e[15]=w):w=e[15];b=w;v=c("useOnOutsideClick")(q);w=i!=null?i:void 0;q=a?void 0:d("focusScopeQueries").tabbableScopeQuery;i=m[r];a=s==="above"&&n[u];var y=s==="below"&&o[u],B;e[16]!==y||e[17]!==i||e[18]!==a||e[19]!==t?(B=[l.content,i,a,y,t],e[16]=y,e[17]=i,e[18]=a,e[19]=t,e[20]=B):B=e[20];e[21]!==g||e[22]!==v||e[23]!==B?(y=j.jsx(c("BaseRow.react"),{ref:v,xstyle:B,children:g}),e[21]=g,e[22]=v,e[23]=B,e[24]=y):y=e[24];e[25]!==u||e[26]!==s||e[27]!==r?(i=j.jsx(z,{align:u,position:s,type:r}),e[25]=u,e[26]=s,e[27]=r,e[28]=i):i=e[28];e[29]!==p||e[30]!==y||e[31]!==i?(a=j.jsxs(c("CometHideLayerOnEscape.react"),{onHide:p,children:[y,i]}),e[29]=p,e[30]=y,e[31]=i,e[32]=a):a=e[32];e[33]!==a||e[34]!==q?(t=j.jsx(d("FocusRegionStrictMode.react").FocusRegion,{autoFocusQuery:q,children:a}),e[33]=a,e[34]=q,e[35]=t):t=e[35];e[36]!==f||e[37]!==b||e[38]!==t||e[39]!==w?(g=j.jsx(c("BaseView.react"),babelHelpers["extends"]({},f,{id:w,role:"dialog",style:b,xstyle:l.container,children:t})),e[36]=f,e[37]=b,e[38]=t,e[39]=w,e[40]=g):g=e[40];return g}var y=c("Locale").isRTL();function z(a){var b=d("react-compiler-runtime").c(8),e=a.align,f=a.position;a=a.type;var g=a==="default"?"var(--popover-background)":"var(--callout-background-color-accent, var(--accent))",h=f==="above"&&a==="default"&&(y?q[e]:p[e]),i=f==="above"&&a==="accent"&&(y?s[e]:r[e]),k=f==="below"&&a==="default"&&(y?u[e]:t[e]);f=f==="below"&&a==="accent"&&(y?w[e]:v[e]);b[0]!==h||b[1]!==i||b[2]!==k||b[3]!==f?(a=[l.arrow,h,i,k,f],b[0]=h,b[1]=i,b[2]=k,b[3]=f,b[4]=a):a=b[4];b[5]!==g||b[6]!==a?(e=j.jsx(c("FDSCalloutEdgeArrow.svg.react"),{fill:g,xstyle:a}),b[5]=g,b[6]=a,b[7]=e):e=b[7];return e}function A(a,b,c){c=c===0?b/2:0;if(c===0)return void 0;if(a==="start")return{transform:"translateX("+(y?-1*c:c)+"px)"};return a==="end"?{transform:"translateX("+(y?c:-1*c)+"px)"}:void 0}g["default"]=a}),98);
__d("FDSCalloutInsetArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","xstyle"],i,j,k=j||d("react");function a(a){var b=a.children,d=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return k.jsxs("svg",babelHelpers["extends"]({"aria-hidden":!0,className:(i||(i=c("stylex")))(d),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&k.jsx("title",{children:a.title}),b!=null&&k.jsx("defs",{children:b}),k.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("FDSCalloutInset.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometHideLayerOnEscape.react","FDSCalloutInsetArrow.svg.react","FocusRegionStrictMode.react","Locale","focusScopeQueries","react","react-compiler-runtime","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","disableAutoFocus","id","onClose","onOutsideClick","type","xstyle"],i,j=i||(i=d("react")),k=i.useContext,l={arrow:{position:"x10l6tqk",$$css:!0},container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxShadow:"xofhs1l",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0}},m={accent:{backgroundColor:"xdk9wry",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},n={above:{marginBottom:"x1yztbdb",$$css:!0},below:{marginTop:"xw7yly9",$$css:!0},end:{marginInlineStart:"xyqm7xq",$$css:!0}},o={above:{bottom:"x1wa3icf",$$css:!0},below:{top:"x1jzctok",transform:"x1oihik5",$$css:!0},end:{$$css:!0}},p={above:{bottom:"x1wa3icf",$$css:!0},below:{top:"x1jzctok",transform:"x1oihik5",$$css:!0},end:{$$css:!0}};function a(a){var b,e=d("react-compiler-runtime").c(38),f,g,i,o,p,r,t,u;e[0]!==a?(g=a.children,r=a.disableAutoFocus,i=a.id,o=a.onClose,p=a.onOutsideClick,t=a.type,u=a.xstyle,f=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g,e[3]=i,e[4]=o,e[5]=p,e[6]=r,e[7]=t,e[8]=u):(f=e[1],g=e[2],i=e[3],o=e[4],p=e[5],r=e[6],t=e[7],u=e[8]);a=r===void 0?!1:r;r=t===void 0?"default":t;t=k(c("BaseContextualLayerOrientationContext"));var v=t.align;t=t.position;v=v==="stretch"?"start":v;t=t==="start"?"above":t==="end"?"below":t;var w=k(c("BaseContextualLayerContextSizeContext"));b=(b=k(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;w=(w=w==null?void 0:w.width)!=null?w:0;var x;e[9]!==v||e[10]!==b||e[11]!==t||e[12]!==w?(x=s(v,t,w,b),e[9]=v,e[10]=b,e[11]=t,e[12]=w,e[13]=x):x=e[13];v=x;b=v[0];w=v[1];x=c("useOnOutsideClick")(p);v=i!=null?i:void 0;p=a?void 0:d("focusScopeQueries").tabbableScopeQuery;i=m[r];a=n[t];var y;e[14]!==i||e[15]!==a||e[16]!==u?(y=[l.content,i,a,u],e[14]=i,e[15]=a,e[16]=u,e[17]=y):y=e[17];e[18]!==g||e[19]!==x||e[20]!==y?(i=j.jsx(c("BaseRow.react"),{ref:x,xstyle:y,children:g}),e[18]=g,e[19]=x,e[20]=y,e[21]=i):i=e[21];e[22]!==w||e[23]!==t||e[24]!==r?(a=j.jsx(q,{arrowStyles:w,position:t,type:r}),e[22]=w,e[23]=t,e[24]=r,e[25]=a):a=e[25];e[26]!==o||e[27]!==i||e[28]!==a?(u=j.jsxs(c("CometHideLayerOnEscape.react"),{onHide:o,children:[i,a]}),e[26]=o,e[27]=i,e[28]=a,e[29]=u):u=e[29];e[30]!==u||e[31]!==p?(g=j.jsx(d("FocusRegionStrictMode.react").FocusRegion,{autoFocusQuery:p,children:u}),e[30]=u,e[31]=p,e[32]=g):g=e[32];e[33]!==f||e[34]!==b||e[35]!==g||e[36]!==v?(x=j.jsx(c("BaseView.react"),babelHelpers["extends"]({},f,{id:v,role:"dialog",style:b,xstyle:l.container,children:g})),e[33]=f,e[34]=b,e[35]=g,e[36]=v,e[37]=x):x=e[37];return x}function q(a){var b=d("react-compiler-runtime").c(7),e=a.arrowStyles,f=a.position;a=a.type;var g=a==="default"?"var(--popover-background)":"var(--callout-background-color-accent, var(--accent))",h=o[f];a=a==="accent"&&p[f];b[0]!==h||b[1]!==a?(f=[l.arrow,h,a],b[0]=h,b[1]=a,b[2]=f):f=b[2];b[3]!==e||b[4]!==g||b[5]!==f?(h=j.jsx(c("FDSCalloutInsetArrow.svg.react"),{fill:g,style:e,xstyle:f}),b[3]=e,b[4]=g,b[5]=f,b[6]=h):h=b[6];return h}var r=c("Locale").isRTL();function s(a,b,c,d){var e=Math.max(c/2-8,16)+Math.abs(d),f=c/2-8<16;c=24-c/2;if(b==="above")if(a==="start"){var g;b=r?"right":"left";return[f?{transform:"translateX("+(r?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){b=r?"left":"right";return[f?{transform:"translateX("+(r?-c:c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else{var h;b=r?"left":"right";g=(r?-d:d)-8;return[void 0,(h={},h[b]="calc(50% + "+g+"px)",h)]}else if(a==="start"){b=r?"right":"left";return[f?{transform:"translateX("+(r?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){h=r?"left":"right";return[f?{transform:"translateX("+(r?-c:c)+"px)"}:void 0,(b={},b[h]="min(calc(100% - 32px), "+e+"px)",b)]}else{g=r?"left":"right";a=(r?-d:d)-8;return[void 0,(f={},f[g]="calc(50% + "+a+"px)",f)]}}g["default"]=a}),98);
__d("FDSCallout.react",["fbt","ix","BaseContextualLayerOrientationContext","BasePopoverReflowSheetContext","BaseRow.react","BaseRowItem.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometHideLayerOnEscape.react","FDSCalloutEdge.react","FDSCalloutInset.react","FDSIcon.react","FDSTextPairing.react","FocusRegionStrictMode.react","fbicon","focusScopeQueries","react","react-compiler-runtime","unrecoverableViolation","useOnOutsideClick","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;var l=b.useContext;b.useMemo;var m={container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxShadow:"xofhs1l",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},crossoutButton:{marginInlineEnd:"x1lxpwgx",marginTop:"x9otpla",$$css:!0},fitContent:{width:"xeq5yr9",$$css:!0},item:{paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,$$css:!0}},n={accent:{backgroundColor:"xdk9wry",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},o={above:{marginBottom:"x12nagc",$$css:!0},below:{marginTop:"x1gslohp",$$css:!0},end:{marginInlineStart:"xdwrcjd",$$css:!0},start:{$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(66),e=a.arrowStyle,f=a.calloutID,g=a.content,j=a.contentID,q=a.disableAutoFocus,r=a.onClose,s=a.onHide,t=a.onOutsideClick,u=a.onShow,v=a.titleID,w=a.type,x=a.xstyle,y=a.addOn,z=a["aria-label"],A=a.hasCloseButton;a=a.title;e=e===void 0?"none":e;q=q===void 0?!1:q;w=w===void 0?"default":w;A=A===void 0?!0:A;var B=l(c("BaseContextualLayerOrientationContext"));B=B.position;var C=c("useOnOutsideClick")(t),D=l(c("BasePopoverReflowSheetContext"));D=D.isReflowSheet;var E;b[0]!==s||b[1]!==u?(E={onHidden:s,onVisible:u},b[0]=s,b[1]=u,b[2]=E):E=b[2];s=c("useVisibilityObserver")(E);u=w==="default"?"primary":"white";if(B==="end"&&(e==="inset"||e==="edge"))throw c("unrecoverableViolation")('"end" position with arrow is not supported yet',"comet_ui");b[3]!==z||b[4]!==j||b[5]!==a||b[6]!==v?(E=a!=null?{"aria-describedby":j,"aria-labelledby":v}:{"aria-describedby":j,"aria-label":z},b[3]=z,b[4]=j,b[5]=a,b[6]=v,b[7]=E):E=b[7];z=E;E=z;b[8]!==u||b[9]!==g||b[10]!==j||b[11]!==a||b[12]!==v?(z=k.jsx(c("FDSTextPairing.react"),{body:g,bodyColor:u,bodyId:j,headline:a,headlineColor:u,headlineId:v,isSemanticHeading:!0,level:3}),b[8]=u,b[9]=g,b[10]=j,b[11]=a,b[12]=v,b[13]=z):z=b[13];b[14]!==z||b[15]!==s?(u=k.jsx(c("BaseRowItem.react"),{expanding:!0,ref:s,verticalAlign:"center",xstyle:m.item,children:z}),b[14]=z,b[15]=s,b[16]=u):u=b[16];b[17]!==A||b[18]!==r||b[19]!==w?(g=A&&k.jsx(c("BaseRowItem.react"),{xstyle:[m.crossoutButton,m.item],children:k.jsx(c("FDSIcon.react"),{"aria-label":h._(/*BTDS*/"Close"),color:w==="default"?"secondary":"white",focusable:!0,icon:d("fbicon")._(i("478232"),16),onPress:r,size:16})}),b[17]=A,b[18]=r,b[19]=w,b[20]=g):g=b[20];b[21]!==g||b[22]!==u?(j=k.jsx(c("CometColumnItem.react"),{children:k.jsxs(c("BaseRow.react"),{children:[u,g]})}),b[21]=g,b[22]=u,b[23]=j):j=b[23];b[24]!==y?(a=y!=null&&k.jsx(c("CometColumnItem.react"),{paddingTop:12,children:k.jsx(c("BaseRow.react"),{children:k.jsx(c("BaseRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:m.item,children:y})})}),b[24]=y,b[25]=a):a=b[25];b[26]!==j||b[27]!==a?(v=k.jsxs(c("CometColumn.react"),{children:[j,a]}),b[26]=j,b[27]=a,b[28]=v):v=b[28];z=v;if(!D&&e==="inset"){b[29]!==E||b[30]!==f||b[31]!==z||b[32]!==q||b[33]!==r||b[34]!==t||b[35]!==w||b[36]!==x?(s=k.jsx(c("FDSCalloutInset.react"),babelHelpers["extends"]({},E,{disableAutoFocus:q,id:f,onClose:r,onOutsideClick:t,type:w,xstyle:x,children:z})),b[29]=E,b[30]=f,b[31]=z,b[32]=q,b[33]=r,b[34]=t,b[35]=w,b[36]=x,b[37]=s):s=b[37];return s}if(!D&&e==="edge"){b[38]!==E||b[39]!==f||b[40]!==z||b[41]!==q||b[42]!==r||b[43]!==t||b[44]!==w||b[45]!==x?(A=k.jsx(c("FDSCalloutEdge.react"),babelHelpers["extends"]({},E,{disableAutoFocus:q,id:f,onClose:r,onOutsideClick:t,type:w,xstyle:x,children:z})),b[38]=E,b[39]=f,b[40]=z,b[41]=q,b[42]=r,b[43]=t,b[44]=w,b[45]=x,b[46]=A):A=b[46];return A}g=f!=null?f:void 0;u=q?void 0:d("focusScopeQueries").tabbableScopeQuery;y=n[w];j=e==="none"&&o[B];a=D&&m.fitContent;b[47]!==y||b[48]!==j||b[49]!==a||b[50]!==x?(v=[m.content,y,j,x,a],b[47]=y,b[48]=j,b[49]=a,b[50]=x,b[51]=v):v=b[51];b[52]!==z||b[53]!==C||b[54]!==v?(s=k.jsx(c("BaseRow.react"),{ref:C,xstyle:v,children:z}),b[52]=z,b[53]=C,b[54]=v,b[55]=s):s=b[55];b[56]!==r||b[57]!==s?(t=k.jsx(c("CometHideLayerOnEscape.react"),{onHide:r,children:s}),b[56]=r,b[57]=s,b[58]=t):t=b[58];b[59]!==u||b[60]!==t?(A=k.jsx(d("FocusRegionStrictMode.react").FocusRegion,{autoFocusQuery:u,children:t}),b[59]=u,b[60]=t,b[61]=A):A=b[61];b[62]!==E||b[63]!==g||b[64]!==A?(f=k.jsx(c("CometErrorBoundary.react"),{fallback:p,children:k.jsx(c("BaseView.react"),babelHelpers["extends"]({},E,{id:g,role:"dialog",xstyle:m.container,children:A}))}),b[62]=E,b[63]=g,b[64]=A,b[65]=f):f=b[65];return f}function p(){return k.jsx("div",{})}p.displayName=p.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("FDSCalloutImpl.react",["BaseCalloutImpl.react","FDSCallout.react","FDSCalloutContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["disableOutsideClick","onClose"],i,j=i||(i=d("react")),k=i.useContext;function a(a){var b=d("react-compiler-runtime").c(23),e=a.calloutID,f=a.calloutProps,g=a.contentID,i=a.titleID,l=k(c("FDSCalloutContext"));if(l==null||f==null)return null;var m,n,o;b[0]!==f?(n=f.disableOutsideClick,o=f.onClose,m=babelHelpers.objectWithoutPropertiesLoose(f,h),b[0]=f,b[1]=m,b[2]=n,b[3]=o):(m=b[1],n=b[2],o=b[3]);b[4]!==l||b[5]!==e||b[6]!==o?(f=function(){l.removeCallout(e),o==null||o()},b[4]=l,b[5]=e,b[6]=o,b[7]=f):f=b[7];var p;b[8]!==l||b[9]!==e||b[10]!==n||b[11]!==o?(p=function(){n!==!0&&(l.removeCallout(e),o==null||o())},b[8]=l,b[9]=e,b[10]=n,b[11]=o,b[12]=p):p=b[12];var q;b[13]!==e||b[14]!==m||b[15]!==g||b[16]!==f||b[17]!==p||b[18]!==i?(q=j.jsx(c("FDSCallout.react"),babelHelpers["extends"]({},m,{calloutID:e,contentID:g,onClose:f,onOutsideClick:p,titleID:i})),b[13]=e,b[14]=m,b[15]=g,b[16]=f,b[17]=p,b[18]=i,b[19]=q):q=b[19];b[20]!==a||b[21]!==q?(m=j.jsx(c("BaseCalloutImpl.react"),babelHelpers["extends"]({},a,{children:q})),b[20]=a,b[21]=q,b[22]=m):m=b[22];return m}g["default"]=a}),98);
__d("GlobalVideoPortsManager",["addToMap","emptyFunction","gkx","removeFromMap"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var d=a.get(b);d!=null&&(d.portablePlaceContainer=null);return c("removeFromMap")(a,b)}a=c("emptyFunction");function i(a){return a.unlinkedAtTimestampMs!==null}var j=1e4;b=function(){function a(a){var b=this;this.$1=function(c){var d=function(a){return c(b.$2(a))};a(d)}}var b=a.prototype;b.addOrUpdatePlace=function(a){var b=this,d=a.coreVideoPlayerMetaData,e=a.fullscreenController,f=a.implementations,g=a.injectCoreVideoStatesRef,j=a.isFullscreen,k=a.portablePlaceContainer,l=a.portablePlaceID,m=a.portablePlaceMetaData,n=a.portableVideoID,o=a.renderComponents,p=a.renderPlaceholder,q=a.trackingDataEncrypted,r=a.trackingNodes,s=a.viewportMarginsForViewability;this.$1(function(a){var t,u=b.getPortableVideoState(a,n),v=(t=a.places.get(l))!=null?t:null;t=v!=null&&!i(v)?v.sequenceNumber:a.placesSequenceNumberNext;var w=t===a.placesSequenceNumberNext?a.placesSequenceNumberNext+1:a.placesSequenceNumberNext,x=m||{},y=a.places;if(n!=null){var z=b.getPlacesBorrowingThisVideo(y,n);z.forEach(function(a){i(a)&&a.portablePlaceID!==(v==null?void 0:v.portablePlaceID)&&(y=h(y,a.portablePlaceID))})}y=c("addToMap")(y,l,babelHelpers["extends"]({},v,{coreVideoPlayerMetaData:d,currentVideoID:n,fullscreenController:e,implementations:f,injectCoreVideoStatesRef:g,isFullscreen:j,portablePlaceContainer:k,portablePlaceID:l,portablePlaceMetaData:x,renderComponents:o,renderPlaceholder:p!=null?p:null,sequenceNumber:t,trackingDataEncrypted:q,trackingNodes:r,unlinkedAtTimestampMs:null,viewportMarginsForViewability:s}));z=v!==null&&n===null?v.currentVideoID:null;x=a.videos;if(z!==null){t=b.getPlacesBorrowingThisVideo(y,z);t=0===t.length;t&&(x=c("removeFromMap")(a.videos,z))}if(n!==null){t=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:u,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:y,videoID:n});z=t.nextPreviousPlaceMetaData;x=c("addToMap")(x,n,u?babelHelpers["extends"]({},u,{portableVideoID:n,previousPlaceMetaData:z}):{portableVideoID:n,preferredPlaceID:null,previousPlaceMetaData:z})}return y===a.places&&w===a.placesSequenceNumberNext&&x===a.videos?a:babelHelpers["extends"]({},a,{places:y,placesSequenceNumberNext:w,videos:x})})};b.removePlace=function(a){var b=this,d=a.portablePlaceID,e=Date.now();this.$1(function(a){var f;f=(f=a.places.get(d))!=null?f:null;var g=f!==null?f.currentVideoID:null;if(f===null)return a;var i=a.places,j=g!==null?b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(i,g)).filter(function(a){return a.portablePlaceID!==d}):[];g!==null&&j.length===0?i=c("addToMap")(i,d,babelHelpers["extends"]({},f,{unlinkedAtTimestampMs:e})):i=h(i,d);j=a.videos;if(g!==null){f=b.getPlacesBorrowingThisVideo(i,g);f=0===f.length;if(f)j=c("removeFromMap")(j,g);else{f=b.getPortableVideoState(a,g);var k=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:f,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:i,videoID:g}),l=k.nextPreviousPlaceMetaData;k=k.shouldUpdatePreviousPlaceMetaDataForVideo;f!=null&&k&&(j=c("addToMap")(j,g,babelHelpers["extends"]({},f,{portableVideoID:g,previousPlaceMetaData:l})))}}return i===a.places&&j===a.videos?a:babelHelpers["extends"]({},a,{places:i,videos:j})})};b.setPreferredPlaceForVideo=function(a){var b=this,d=a.portablePlaceID,e=a.portableVideoID;this.$1(function(a){var f=b.getPortableVideoState(a,e),g=d!=null?a.places.get(d):null,h=b.updatePreviousPlaceMetaDataInfoForVideo({existingPlaceStateForSetPreferredPlaceForVideo:g,existingVideoState:f,places:a.places,preferredPlaceID:d,setPreferredPlaceForVideo:!0,updatedPlaces:a.places,videoID:e});h=h.nextPreviousPlaceMetaData;f=f!=null?c("addToMap")(a.videos,e,babelHelpers["extends"]({},f,{preferredPlaceID:g!=null&&d!=null?d:null,previousPlaceMetaData:h})):a.videos;return f===a.videos?a:babelHelpers["extends"]({},a,{videos:f})})};b.getPlacesBorrowingThisVideo=function(a,b){var c=[];a.forEach(function(a){a.currentVideoID===b&&c.push(a)});return c};b.skipUnlinkedPlaces=function(a){return a.filter(function(a){return!i(a)})};b.selectCurrentPlaceFromThesePlaces=function(a,b){var c;a=a.slice().sort(function(a,b){return a.sequenceNumber-b.sequenceNumber});c=(c=a.find(function(a){return a.portablePlaceID===b}))!=null?c:null;a=a.length>0?a[a.length-1]:null;return(c=c!=null?c:a)!=null?c:null};b.getCurrentPlaceStateForVideo=function(a,b){var c=this.getPortableVideoState(a,b);if(c!=null&&b!=null){a=this.selectCurrentPlaceFromThesePlaces(this.skipUnlinkedPlaces(this.getPlacesBorrowingThisVideo(a.places,b)),c.preferredPlaceID);return a!=null?a:null}else return null};b.getPortableVideoState=function(a,b){if(b!=null){a=a.videos.get(b);return a!=null?a:null}return null};b.updatePreviousPlaceMetaDataInfoForVideo=function(a){var b=this,c=a.existingPlaceStateForSetPreferredPlaceForVideo,d=a.existingVideoState,e=a.places,f=a.preferredPlaceID,g=a.setPreferredPlaceForVideo,h=a.updatedPlaces,i=a.videoID;a=function(a,c){return b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(a,i)),c!=null?c:null)};var j=a(e,d==null?void 0:d.preferredPlaceID);g?g=c!=null?a(e,f):null:g=a(h,d==null?void 0:d.preferredPlaceID);e=j!=null&&(j==null?void 0:j.portablePlaceID)!==((c=g)==null?void 0:c.portablePlaceID);return{nextPreviousPlaceMetaData:e&&j!=null?j.portablePlaceMetaData:(f=d==null?void 0:d.previousPlaceMetaData)!=null?f:null,shouldUpdatePreviousPlaceMetaDataForVideo:e}};b.collectGarbage=function(){this.$1(function(a){return a})};b.$2=function(a){var b=Date.now(),d=new Set(),e=a.places;a.places.forEach(function(a){a.unlinkedAtTimestampMs!==null&&b-a.unlinkedAtTimestampMs>=j?e=h(e,a.portablePlaceID):a.currentVideoID!==null&&d.add(a.currentVideoID)});var f=a.videos;a.videos.forEach(function(a){d.has(a.portableVideoID)||(f=c("removeFromMap")(f,a.portableVideoID))});return e===a.places&&f===a.videos?a:babelHelpers["extends"]({},a,{places:e,videos:f})};return a}();g.isUnlinkedGlobalVideoPortsPlace=i;g.UNLINKED_PLACE_TIMEOUT_MS=j;g.GlobalVideoPortsManager=b}),98);
__d("GlobalVideoPortsPortalerErrorBoundary.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.state={errorRaw:null},b.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);b.getDerivedStateFromError=function(a){return{errorRaw:a}};var c=b.prototype;c.componentDidCatch=function(a,b){b=this.props.onError;b!=null&&b(a)};c.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.errorRaw;return c!=null?typeof a==="function"?a(b):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("GlobalVideoPortsPortaler.react",["CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsPortalerErrorBoundary.react","GlobalVideoPortsRenderers.react","ReactDOM","equalsSet","react","react-compiler-runtime","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m=b.useState;function n(a,b,e,f,g){var h=d("react-compiler-runtime").c(6),i=l(null),j;h[0]!==b||h[1]!==e||h[2]!==f||h[3]!==g||h[4]!==a?(j=function(){var d,h=i.current;d=new Set((d=a.map(o))!=null?d:[]);if(h==null||!c("equalsSet")(h,d)){i.current=d;h=b.current;d=e.current;h!=null&&f(h);d!=null&&g(d)}},h[0]=b,h[1]=e,h[2]=f,h[3]=g,h[4]=a,h[5]=j):j=h[5];k(j,void 0)}function o(a){return a.portablePlaceID}function a(a){var b=a.globalVideoPortsManager,e=a.globalVideoPortsState,f=a.thisVideoID;a=m(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var g=a[0],i=l(null),k=(h||(h=c("useUnsafeRef_DEPRECATED")))(null),o=(a=e.videos.get(f))!=null?a:null,p=b.getPlacesBorrowingThisVideo(e.places,f);a=p.length<=0;e=a?null:b.selectCurrentPlaceFromThesePlaces(p,o?o.preferredPlaceID:null);var q=a?null:b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(p),o?o.preferredPlaceID:null);b=function(a){k.current=a,p.forEach(function(b){b=b.injectCoreVideoStatesRef.current;b&&b(i.current,a)})};var r=function(){return null},s=function(a){i.current=a,p.forEach(function(a){a=a.injectCoreVideoStatesRef.current;a&&a(i.current,k.current)})};n(p,k,i,b,s);return a?null:j.jsxs(j.Fragment,{children:[d("ReactDOM").createPortal(e?j.jsx(c("GlobalVideoPortsPortalerErrorBoundary.react"),{description:"GlobalVideoPortsPortaler",fallback:r,onError:s,children:j.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlayerRenderer,{coreVideoPlayerMetaData:e.coreVideoPlayerMetaData,currentPlaceID:e.portablePlaceID,currentVideoID:f,fullscreenController:e.fullscreenController,implementations:e.implementations,isFullscreen:e.isFullscreen,onCoreVideoStatesChanged:b,previousPlaceMetaData:(a=o==null?void 0:o.previousPlaceMetaData)!=null?a:null,trackingDataEncrypted:e.trackingDataEncrypted,trackingNodes:e.trackingNodes,viewportMarginsForViewability:e.viewportMarginsForViewability})}):null,g),p.map(function(a){var b;return d("ReactDOM").createPortal(a.portablePlaceID===(q==null?void 0:q.portablePlaceID)?j.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:g}):j.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:(b=q==null?void 0:q.portablePlaceID)!=null?b:null,currentVideoID:f,previousPlaceMetaData:(b=o==null?void 0:o.previousPlaceMetaData)!=null?b:null,renderPlaceholder:a.renderPlaceholder,thisPlaceID:a.portablePlaceID,videoPixelsAspectRatio:(b=a.coreVideoPlayerMetaData.videoPixelsAspectRatio)!=null?b:null}),a.portablePlaceContainer)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("GlobalVideoPortsImpl.react",["CometErrorBoundary.react","GlobalVideoPortsContexts","GlobalVideoPortsManager","GlobalVideoPortsPortaler.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(3),e=a.setGlobalVideoPortsManager,f;b[0]!==e?(a=function(){var a=k;e(a)},f=[e],b[0]=e,b[1]=a,b[2]=f):(a=b[1],f=b[2]);j(a,f);var g=[],h=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),l=d("GlobalVideoPortsContexts").useGlobalVideoPortsState();h&&l&&l.videos.forEach(function(a,b){g.push(i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(c("GlobalVideoPortsPortaler.react"),{globalVideoPortsManager:h,globalVideoPortsState:l,thisVideoID:b})},b))});return i.jsx(i.Fragment,{children:g})}function k(a){return new(d("GlobalVideoPortsManager").GlobalVideoPortsManager)(a)}g["default"]=a}),98);
__d("LSDatascriptEvaluatorDeferredForDisplay",["requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferredForDisplay")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferredForDisplay");function a(){return h.load()}g["default"]=a}),98);
__d("LSPlatformClientSingleton",[],(function(a,b,c,d,e,f){"use strict";var g={contents:void 0};function a(a){g.contents=a}f.saveInstance=a}),66);
__d("maybeSetupMAWMainThreadLogger",["MessengerLogHistory","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("client_init"),i=(a=b("cr:6999"))!=null?a:b("cr:7350");e=function(){i!=null&&(c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")())&&(h.debug("Starting MAW main thread logger setup..."),i.setupMainWaLogger(),h.debug("Starting MAW main thread logger setup success"))};g.maybeSetupMAWMainThreadLogger=e}),98);
__d("LSPlatformClientInstances",["ExecutionEnvironment","FBLogger","LSLocalize","LSPlatformArmadilloUtils","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWLoggerUtils","MAWMIC","MessengerLogHistory","PromiseAnnotate","cr:19622","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b("LSLocalize");d("MAWLoggerUtils").initMessengerWebLogging();var k=d("MessengerLogHistory").getInstance("client_init"),l=(j||(j=c("LSSuspense"))).makeCollection(),m=!1;function a(a,e,f){d("MAWMIC").startMAWMICFlow();m||(k.debug("[Occamadillo] Beginning hardcoded init sync"),m=!0,d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger());d("LSPlatformArmadilloUtils").reportInitStart();var g=function(a){a=c("getErrorSafe")(a);k.debug("Initializing LSPlatformClient failed");d("LSPlatformLsInitLog").fail("client_setup_failure",a);d("MAWMIC").fail("client_setup_failure",a);c("FBLogger")("messenger_web").catching(a).warn("[LS] LSPlatformClient initialization failure");throw a};return(j||(j=c("LSSuspense"))).getFromCollection(l,a,function(){return(h||(h=d("PromiseAnnotate"))).setDisplayName(async function(){d("LSPlatformLsInitLog").addAnnotations({bool:{canUseDOM:(i||(i=c("ExecutionEnvironment"))).canUseDOM,fromReact:f==null?void 0:f.fromReact},string:{configAppId:a.appId,configPlatformName:a.platformName}});k.debug("Messenger loading UI suspending");try{var h=b("cr:19622")!=null?await b("cr:19622").maybeEvaluateInitSyncEagerly(a):!1;if(!(i||(i=c("ExecutionEnvironment"))).isInBrowser)return await a.getDb();h=e(a,{didEvaluateInitSyncEagerly:h}).then(function(a){d("LSPlatformLsInitLog").addPoint("start_client");return a.start().then(function(){k.debug("Initializing LSPlatformClient success");d("LSPlatformClientSingleton").saveInstance(a);d("LSPlatformArmadilloUtils").reportInitEnd();return a.db})});return await h}catch(a){g(a)}finally{k.debug("Messenger loading UI unsuspending")}}(),"InitLSPlatformClient")})}e={getOrInit:a};g.default=e}),98);
__d("LSPlatformClientMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("LSPlatformClient").__setRef("LSPlatformClientMaybeEagerly");b=d("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(a);g["default"]=b}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","react-compiler-runtime","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useRef,l=c("justknobx")._("1134"),m=c("justknobx")._("1135"),n=c("gkx")("24156");function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e=k(null),f=k(!1),g;a[0]!==b.tables.pending_tasks?(g=function(){var a=b.tables.pending_tasks.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.pending_tasks).take(l)),function(a){var b=a.length;if(b===l){if(e.current!=null)return;e.current=c("setTimeout")(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),f.current=!0,n&&c("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",b,m)},m)}else c("clearTimeout")(e.current),f.current&&n&&c("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),f.current=!1})});return function(){a()}},a[0]=b.tables.pending_tasks,a[1]=g):g=a[1];var i;a[2]!==b?(i=[b],a[2]=b,a[3]=i):i=a[3];j(g,i);return null}g["default"]=a}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","LSPlatformLogTooManyPendingTasksForS337085.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:c("LSPlatformLogTooManyPendingTasksForS337085.react")!=null&&i.jsx(c("LSPlatformLogTooManyPendingTasksForS337085.react"),{})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");f=c("gkx")("20836")?a.Fragment:(e=b("cr:3921"))!=null?e:a.Fragment;d=f;g["default"]=d}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("MAWCondSetup.react"),{}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("MAWSetupWrapperOnce.react"),{setupComponent:e,children:a}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("LSPlatformClientProvider.react",["CometDOMOnlyBoundary.react","CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformErrorsCatcher.react","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function l(a,b){var e=d("react-compiler-runtime").c(3);if(e[0]!==a||e[1]!==b){var f=(h||(h=c("LSSuspense"))).getOrSuspend(a);f=c("LSPlatformClientInstances").getOrInit(f,b,{fromReact:!0});e[0]=a;e[1]=b;e[2]=f}else f=e[2];return f}function m(a){var b=d("react-compiler-runtime").c(3),c=a.children,e=a.config;a=a.loadLSPlatformClient;e=l(e,a);b[0]!==c||b[1]!==e?(a=e!=null?k.jsx((i||(i=d("ReStoreProvider.react"))).ReStoreProvider,{db:e,children:c}):c,b[0]=c,b[1]=e,b[2]=a):a=b[2];return a}function a(a){var b=d("react-compiler-runtime").c(16),e=a.children,f=a.config,g=a.errorFallback,h=a.loadLSPlatformClient;a=a.placeholder;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=k.jsx(c("LSPlatformClientProviderAddons.react"),{}),b[0]=i):i=b[0];var j;b[1]!==e||b[2]!==a?(j=k.jsx(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.UISuspense",children:e}),b[1]=e,b[2]=a,b[3]=j):j=b[3];b[4]!==f||b[5]!==h||b[6]!==j?(e=k.jsxs(m,{config:f,loadLSPlatformClient:h,children:[i,j]}),b[4]=f,b[5]=h,b[6]=j,b[7]=e):e=b[7];b[8]!==a||b[9]!==e?(i=k.jsx(c("MAWCondWrapper.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.ClientProvider",children:e})}),b[8]=a,b[9]=e,b[10]=i):i=b[10];b[11]!==g||b[12]!==i?(f=k.jsx(c("LSPlatformErrorsCatcher.react"),{fallback:g,children:i}),b[11]=g,b[12]=i,b[13]=f):f=b[13];h=f;b[14]!==h?(j=c("gkx")("12254")?k.jsx(c("CometDOMOnlyBoundary.react"),{children:h}):h,b[14]=h,b[15]=j):j=b[15];return j}g["default"]=a}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientMaybeEagerly","LSPlatformClientProvider.react","LSPlatformLsInitLog","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");async function j(a,b){d("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var e=await c("LSPlatformClientMaybeEagerly").load();d("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded");return e.make(a,b)}function a(a){var b=d("react-compiler-runtime").c(5),e=a.children,f=a.config,g=a.errorFallback;a=a.placeholder;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=i.jsx(c("LSPlatformClientProvider.react"),{config:f,errorFallback:g,loadLSPlatformClient:j,placeholder:a,children:e}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g.default=a}),98);
__d("LSPlatformCometTransportMaybeEagerly",["CurrentMessengerUser","LSEagerlyLoadOnMessenger","Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDedicatedMqttChannel").__setRef("LSPlatformCometTransportMaybeEagerly"),j=c("requireDeferred")("LSPlatformDGWTransport").__setRef("LSPlatformCometTransportMaybeEagerly"),k=c("requireDeferred")("LSPlatformMqttRealtimeTransport").__setRef("LSPlatformCometTransportMaybeEagerly");function a(){return(h||(h=b("Promise"))).all([d("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(k).load(),d("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(j).load(),d("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(i).load()]).then(function(a){var b=a[0],c=a[1].LSPlatformDGWTransport,e=a[2];return{dgw:c,mqtt:function(a,c){return b(a,c,{getInstance:e.getInstance(d("CurrentMessengerUser").isLoggedInNow),shutdownAndClear:e.shutdownAndClear})}}})}g["default"]=a}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestQuery.graphql");g.query=a}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),d("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:a,requestId:b,requestPayload:c,requestType:e}).toPromise().then(function(a){var b;a=a==null||(b=a.viewer)==null?void 0:b.lightspeed_web_request;if(a!=null)return babelHelpers["extends"]({dependencies:void 0},a)})}g["default"]=a}),98);
__d("LSPlatformMessengerConfig",["LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSPlatformCometTransportMaybeEagerly","LSPlatformGraphQLLightspeedRequest","LSPlatformMessengerSyncParams","LSSuspense","LSVersion","ServerAppID","cr:3239","cr:7358","getMWLSRegion","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;h=(h=b("cr:3239"))!=null?h:c("LSPlatformGraphQLLightspeedRequest");function a(){return(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton}function e(){return c("LSPlatformCometTransportMaybeEagerly")().then(function(a){return function(b,d){return 3===b?a.dgw(c("LSVersion"),d):a.mqtt(c("LSVersion"),d)}})}function f(){return c("LSDatascriptEvaluatorMaybeDeferred")()}b={appId:c("ServerAppID").app_id,eagerEvaluatorForInitSync:b("cr:7358"),executeGraphQLLightSpeedRequest:c("gkx")("3889")?h:c("LSPlatformGraphQLLightspeedRequest"),getDb:a,getEval:f,platformName:"Messenger",realtimeUnderylingTransport:e,region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!0,syncParams:c("LSPlatformMessengerSyncParams")};h=(i||(i=c("LSSuspense"))).makeWithValue(b);g.config=b;g.configEagerlyLoaded=h}),98);
__d("LSPlatformCometClientStartEagerly",["LSPlatformClientInstances","LSPlatformClientMaybeEagerly","LSPlatformLsInitLog","LSPlatformMessengerConfig"],(function(a,b,c,d,e,f,g){"use strict";async function h(a,b){d("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var e=await c("LSPlatformClientMaybeEagerly").load();d("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded");return e.make(a,b)}function a(){try{c("LSPlatformClientInstances").getOrInit(d("LSPlatformMessengerConfig").config,h)}catch(a){return}}g.start=a}),98);
__d("LSPlatformEvaluateInitSyncEagerly",["ExecutionEnvironment","FBLogger","LSClearEpochBeforeResumeSync","LSDatabaseProviderType","LSPlatformDeviceId","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","cr:3411"],(function(a,b,c,d,e,f,g){"use strict";var h,i=async function(a,e){d("LSPlatformLsInitLog").addPoint("ds_eval_registration");e=await e();var f;try{f=b("cr:3411")!=null?b("cr:3411").registerEval(e)()(a):e()(a)}catch(b){c("FBLogger")("ls_web_init").catching(b).mustfix("fail to register datascriptEvaluator"),f=e()(a)}d("LSPlatformLsInitLog").addPoint("ds_eval_registration_end");return f};async function a(a){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM)return!1;if(!a.sendHardcodedInitSync)return!1;var b=a.eagerEvaluatorForInitSync;if(b==null)return!1;var e=await a.getDb();if(d("LSDatabaseProviderType").isProviderPersisted(e))return!1;d("LSPlatformLsInitLog").addPoint("evaluate_init_sync_start");var f=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");b=await i(e,b);await d("LSClearEpochBeforeResumeSync").call(e);await d("LSPlatformHardcodedInitSync").sendHardcodedInitSync(a,b,e,f);d("LSPlatformLsInitLog").addPoint("evaluate_init_sync_end");return!0}g.getDatascriptEvaluator=i;g.maybeEvaluateInitSyncEagerly=a}),98);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recent_unread_count_with_e2ee",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatBadgeCountQuery",selections:b},params:{id:"9649973961748511",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useMWJewelStopLoadingLogger",["QPLEvent","interaction-tracing","qpl","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect,k=c("qpl")._(30616158,"2565");function a(a,b,e){var f=d("react-compiler-runtime").c(5),g,h;f[0]!==b||f[1]!==a||f[2]!==e?(g=function(){e||c("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(c){var e=c.getTrace();if(((e=e==null?void 0:e.completed)!=null?e:0)>0)return;c.getQPLEventMarkerId()===(i||(i=d("QPLEvent"))).getMarkerId(k)&&(c.addAnnotationInt("badgeCount",a),c.addAnnotationInt("badgeUnreadCount",b),a===0&&c.forceCompleteTrace())})},h=[e,a,b],f[0]=b,f[1]=a,f[2]=e,f[3]=g,f[4]=h):(g=f[3],h=f[4]);j(g,h)}g["default"]=a}),98);
__d("MWChatBadgeCount.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometRelay","FDSNumberedBadge.react","HeroInteractionIgnoreWithDiv.react","MWChatBadgeCountQuery.graphql","MWChatBadgeCountUpdates.react","cr:2290","hero-tracing","react","react-compiler-runtime","useMWJewelStopLoadingLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));f=j;var l=f.useEffect,m=f.useRef;function a(){return null}var n=(f=b("cr:2290"))!=null?f:a;function o(a){var e,f=d("react-compiler-runtime").c(12),g=a.overflow,j=a.setBadgeCount;a=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("MWChatBadgeCountQuery.graphql"),{suppress_xac_groups:!1},{fetchPolicy:"store-or-network"});e=((e=a.viewer)==null||(e=e.message_threads)==null?void 0:e.is_loading_client_threads)!==!1;a=(a=a.viewer)==null?void 0:a.message_threads;var n=a!=null&&a.unseen_count!=null&&a.unseen_count>0?Math.min(d("MWChatBadgeCountUpdates.react").minSyncedThreads,a.unseen_count):0;a=a!=null&&a.recent_unread_count_with_e2ee!=null&&a.recent_unread_count_with_e2ee>0?Math.min(d("MWChatBadgeCountUpdates.react").minSyncedThreads,a.recent_unread_count_with_e2ee):0;var o=m(null),p,q;f[0]!==n||f[1]!==j?(p=function(){j&&o.current!==n&&(o.current=n,j(n))},q=[n,j],f[0]=n,f[1]=j,f[2]=p,f[3]=q):(p=f[2],q=f[3]);l(p,q);c("useMWJewelStopLoadingLogger")(n,a,e);f[4]!==n||f[5]!==g?(p=n>0?k.jsx(c("FDSNumberedBadge.react"),{accessibilityText:h._(/*BTDS*/"{count} unread chats",[h._param("count",n)]),overflow:g,testid:void 0,value:n,vcIgnore:!0}):null,f[4]=n,f[5]=g,f[6]=p):p=f[6];f[7]!==e?(q=k.jsx(c("CometHeroHoldTrigger.react"),{description:"MessengerBadgeLoadingHold",hold:e}),f[7]=e,f[8]=q):q=f[8];f[9]!==p||f[10]!==q?(a=k.jsxs(k.Fragment,{children:[p,q]}),f[9]=p,f[10]=q,f[11]=a):a=f[11];return a}function e(a){var b=d("react-compiler-runtime").c(7),e=a.overflow;a=a.setBadgeCount;var f=n(),g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx("span",{}),b[0]=g):g=b[0];b[1]!==e||b[2]!==a?(g=k.jsx(c("CometPlaceholder.react"),{fallback:g,name:"MWChatBadgeCount",children:k.jsx(o,{overflow:e,setBadgeCount:a})}),b[1]=e,b[2]=a,b[3]=g):g=b[3];b[4]!==f||b[5]!==g?(e=k.jsx(c("HeroInteractionIgnoreWithDiv.react"),{children:k.jsx(d("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MSGR_JEWEL_BADGE",interactionUUID:f,pageletName:"MessengerJewelBadge",children:g})}),b[4]=f,b[5]=g,b[6]=e):e=b[6];return e}g["default"]=e}),226);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","ExecutionEnvironment","FBLogger","cr:4562","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a){var b=c("FBLogger")("messenger_web_entrypoints");a!=null&&(b=b.catching(a));b.debug("Error loading MWChatBadgeCountUpdater")}function a(){var a=d("react-compiler-runtime").c(1),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=c("ExecutionEnvironment"))).canUseDOM?j.jsx(c("CometErrorBoundary.react"),{onError:k,children:b("cr:4562")&&j.jsx(b("cr:4562"),{})}):null,a[0]=e):e=a[0];return e}g["default"]=a}),98);
__d("MWChatHeadError.react",["fbt","CometHeroFailTrigger.react","CometHeroInteractionWithDiv.react","FDSCautionTriangleFilled24Icon","MWChatInteraction","MWXIcon_DEPRECATED.react","MWXPressable.react","MWXTooltip.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",$$css:!0},dropShadow:{boxShadow:"x1qeybcx",":hover_boxShadow":"x19xcq9t",$$css:!0}},l=h._(/*BTDS*/"Something went wrong while loading chat");function a(a){var b=d("react-compiler-runtime").c(7),e=a.contextRef;a=a.onPress;var f,g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("MWChatInteraction").get(d("MWChatInteraction").MW_CHATHEADS_LOAD),g=j.jsx(c("CometHeroFailTrigger.react"),{description:"Error while loading chatheads",fail:!0}),b[0]=f,b[1]=g):(f=b[0],g=b[1]);var h=a==null,i;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("MWXIcon_DEPRECATED.react"),{icon:c("FDSCautionTriangleFilled24Icon")}),b[2]=i):i=b[2];b[3]!==e||b[4]!==a||b[5]!==h?(f=j.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load to chatheads VC",interactionUUID:f,children:[g,j.jsx(c("MWXTooltip.react"),{align:"end",position:"above",tooltip:l,children:j.jsx(c("MWXPressable.react"),{"aria-label":l,disabled:h,display:"inline",onPress:a,ref:e,xstyle:m,children:i})})]}),b[3]=e,b[4]=a,b[5]=h,b[6]=f):f=b[6];return f}function m(a){return[k.compose,k.dropShadow]}g["default"]=a}),226);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","react-compiler-runtime","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e=a.contextRef;a=a.onPress;var f=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g;b[0]!==e||b[1]!==a||b[2]!==f?(g=f?i.jsx("div",babelHelpers["extends"]({className:"x1ey2m1c xtijo5x xixxii4"},{children:i.jsx("div",babelHelpers["extends"]({className:"x191j7n5 xdg88n9 x10l6tqk"},{children:i.jsx(c("MWChatHeadError.react"),{contextRef:e,onPress:a})}))})):null,b[0]=e,b[1]=a,b[2]=f,b[3]=g):g=b[3];return g}g["default"]=a}),98);
__d("MWV2Chat.react",["CometErrorBoundary.react","FBLogger","JSResourceForInteraction","LSDatabaseAfterInitSyncSingleton","LSDatabaseSingleton","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformMessengerConfig","MWChatDisabled.react","MWChatInteraction","MWXLazyPopoverTrigger.react","cr:8083","gkx","react","react-compiler-runtime","shouldHideChatOnAppsSubdomain"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.useEffect,l=e.useLayoutEffect;function m(a){var b=c("FBLogger")("messenger_web");a!=null&&(b=b.catching(a));b.warn("Error loading MWV2Chat")}var n=c("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),o=function(a){return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{error:a},popoverResource:n,position:"above",visibleOnLoad:!0,children:function(a,b){return j.jsx(c("MWChatDisabled.react"),{contextRef:a,onPress:b})}})},p=!c("gkx")("22788")||c("shouldHideChatOnAppsSubdomain")();function a(){var a=d("react-compiler-runtime").c(3),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],a[0]=e):e=a[0];l(r,e);a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],a[1]=e):e=a[1];k(q,e);a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("CometErrorBoundary.react"),{fallback:o,onError:m,children:p?j.jsx(c("MWChatDisabled.react"),{}):b("cr:8083")&&j.jsx(c("LSPlatformClientProviderWithDeferredLoadingStrategy.react"),{config:d("LSPlatformMessengerConfig").configEagerlyLoaded,errorFallback:o,children:j.jsx(b("cr:8083"),{})})}),a[2]=e):e=a[2];return e}function q(){(p||b("cr:8083")==null)&&d("LSDatabaseAfterInitSyncSingleton").resolveInitSync((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton)}function r(){d("MWChatInteraction").addAutoChatTabMarkerPoint("mwv2_chat_rendered")}g["default"]=a}),98);
__d("MWV2ChatContainerGatingControl.react",["cr:11569"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:11569")}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","react-compiler-runtime","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","onChange"],i,j=i||(i=d("react"));e=i;var k=e.useEffect,l=e.useRef;function a(a){var e=d("react-compiler-runtime").c(14),f,g,i;e[0]!==a?(i=a.ref,f=a.onChange,g=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g,e[3]=i):(f=e[1],g=e[2],i=e[3]);a=(a=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?a:{};var m=a.subscribeToGlobalTypeaheadFocus,n;e[4]!==f||e[5]!==m?(a=function(a){return m==null?void 0:m(function(){if(a==null)return;a.value="";a.focus();f("")})},n=[f,m],e[4]=f,e[5]=m,e[6]=a,e[7]=n):(a=e[6],n=e[7]);a=c("useRefEffect")(a,n);var o=l(null),p=l(!1),q;e[8]===Symbol["for"]("react.memo_cache_sentinel")?(n=function(){var a=o.current;if(b("cr:2012305")!=null&&a!=null&&p.current===!1){b("cr:2012305").trackTypingPerf(a,"top_tab_serp_typeahead");p.current=!0;return function(){b("cr:2012305").unregisterTypingPerf(a),p.current=!1}}},q=[],e[8]=n,e[9]=q):(n=e[8],q=e[9]);k(n,q);n=c("useMergeRefs")(a,o);q=c("useMergeRefs")(n,i);e[10]!==q||e[11]!==f||e[12]!==g?(a=j.jsx(c("CometTypeaheadInputRoundedStrategy.react"),babelHelpers["extends"]({},g,{onChange:f,ref:q})),e[10]=q,e[11]=f,e[12]=g,e[13]=a):a=e[13];return a}g["default"]=a}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b){var c=a?a.getInteractionUUID():null,d=a?a.getVCTrackerRef():null,e=c!=null&&a!=null&&!a.isResolved();return i(function(){var f=function(c,d){a&&d!=null&&a.setEventStartTime(d.timeStamp),b(c,d)};return{interactionUUID:c,onTracedChange:f,shouldHoldHeroTracing:e,vcTrackerRef:d}},[c,b,e,a,d])}g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(a,b,c,d,e,f,g){"use strict";var h=["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","onLeftArrow","onRightArrow","viewRole","inputRef","xstyles"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(74),e,f,g,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;b[0]!==a?(z=a.extraLayoutProps,f=a.helperText,g=a.label,i=a.onAbandonTypeahead_DO_NOT_USE,k=a.onBlur,l=a.onChange,m=a.onClick,n=a.onDownArrow,o=a.onEnter,p=a.onEscape,q=a.onHighlightEntry,s=a.onOutsideClick,t=a.onPressEntry,v=a.onShiftTab,w=a.onTab,x=a.onUpArrow,A=a.traceProvider,r=a.onLeftArrow,u=a.onRightArrow,B=a.viewRole,e=a.inputRef,C=a.xstyles,y=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q,b[12]=r,b[13]=s,b[14]=t,b[15]=u,b[16]=v,b[17]=w,b[18]=x,b[19]=y,b[20]=z,b[21]=A,b[22]=B,b[23]=C):(e=b[1],f=b[2],g=b[3],i=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],r=b[12],s=b[13],t=b[14],u=b[15],v=b[16],w=b[17],x=b[18],y=b[19],z=b[20],A=b[21],B=b[22],C=b[23]);b[24]!==z?(a=z===void 0?{}:z,b[24]=z,b[25]=a):a=b[25];z=a;a=z.afterViewContent;z=z.beforeViewContent;var D=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();D=D.isOpened;var E=c("useCometInternalTypeaheadState")(),F=E.activeEntries,G=E.highlightedEntry;E=E.secondaryActionHighlighted;var H=c("useCometInternalTypeaheadFetch")();H=H.isLoading;e=c("useCometTypeaheadInputRefs")(e);var I=e.composedRef;e=e.inputRef;var J=c("useSearchCometGlobalTypeaheadStyles")();C=C!=null?C:J;J=c("useCometInternalTypeaheadHeroTracing")(A,l);A=J.interactionUUID;l=J.onTracedChange;var K=J.shouldHoldHeroTracing;J=J.vcTrackerRef;var L;b[26]!==i||b[27]!==k||b[28]!==m||b[29]!==n||b[30]!==o||b[31]!==p||b[32]!==q||b[33]!==r||b[34]!==s||b[35]!==t||b[36]!==u||b[37]!==v||b[38]!==w||b[39]!==l||b[40]!==x?(L={onAbandonTypeahead_DO_NOT_USE:i,onBlur:k,onChange:l,onClick:m,onDownArrow:n,onEnter:o,onEscape:p,onHighlightEntry:q,onLeftArrow:r,onOutsideClick:s,onPressEntry:t,onRightArrow:u,onShiftTab:v,onTab:w,onUpArrow:x},b[26]=i,b[27]=k,b[28]=m,b[29]=n,b[30]=o,b[31]=p,b[32]=q,b[33]=r,b[34]=s,b[35]=t,b[36]=u,b[37]=v,b[38]=w,b[39]=l,b[40]=x,b[41]=L):L=b[41];b[42]!==e||b[43]!==L?(i={handlers:L,inputRef:e},b[42]=e,b[43]=L,b[44]=i):i=b[44];k=c("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(i);b[45]!==F||b[46]!==f||b[47]!==G||b[48]!==D||b[49]!==g||b[50]!==E||b[51]!==B?(m={activeEntries:F,helperText:f,highlightedEntry:G,inputLabel:g,isOpened:D,secondaryActionHighlighted:E,viewRole:B},b[45]=F,b[46]=f,b[47]=G,b[48]=D,b[49]=g,b[50]=E,b[51]=B,b[52]=m):m=b[52];n=c("useCometTypeaheadLayoutContextualStrategyARIAProps")(m);b[53]!==K?(o=j.jsx(c("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:K}),b[53]=K,b[54]=o):o=b[54];b[55]!==a||b[56]!==n||b[57]!==z||b[58]!==H||b[59]!==D?(p={afterViewContent:a,ariaProps:n,beforeViewContent:z,helperTextComponent:null,isLoading:H,isOpened:D},b[55]=a,b[56]=n,b[57]=z,b[58]=H,b[59]=D,b[60]=p):p=b[60];b[61]!==I||b[62]!==k||b[63]!==g||b[64]!==y||b[65]!==p||b[66]!==B||b[67]!==C?(q=j.jsx(c("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},y,k,{extraLayoutProps:p,inputRef:I,label:g,viewRole:B,xstyles:C})),b[61]=I,b[62]=k,b[63]=g,b[64]=y,b[65]=p,b[66]=B,b[67]=C,b[68]=q):q=b[68];b[69]!==A||b[70]!==o||b[71]!==q||b[72]!==J?(r=j.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:A,ref:J,children:[o,q]}),b[69]=A,b[70]=o,b[71]=q,b[72]=J,b[73]=r):r=b[73];return r}g["default"]=a}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("24247")}g.hasTypeaheadRedirection=a}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","XCometSearchResultsControllerRouteBuilder","react-compiler-runtime","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface","useSearchCometResultsURLBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("react-compiler-runtime").c(5),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={routeBuilder:c("XCometSearchResultsControllerRouteBuilder")},a[0]=b):b=a[0];var e=c("useSearchCometResultsURLBuilder")(b),f=c("useSearchCometHashtagRouteUrlBuilder")(),g=c("useSearchCometResultsEntryPointSurface")();a[1]!==f||a[2]!==g||a[3]!==e?(b=function(a){var b=a.entry,h=a.queryString;a=a.typeaheadSessionID;var i=b.label.toLowerCase(),j=b.metaData;j=j==null?void 0:j.markers;var k=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(i);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&k!=null&&!j.has("see_all"))return f({entryPointAction:"SEARCH_BOX",exploreEntryPoint:h===""?3:4,hashtag:k,typeaheadSessionID:a});else{h=b.rawData;k=(k=c("searchCometTypeaheadGetStsDisambiguation")(b))!=null?k:void 0;if(b.subtype==="keyword"&&j.has("disambiguation")){j=(h=(j=h.structuredInfo)==null||(j=j.disambiguation_result)==null?void 0:j.disambiguation_info_list[0])!=null?h:{};h=j.link_url;if(h!=null){j=d("ConstUriUtils").getUri(h);if(j!=null){h=new Map();g!=null&&h.set("__eps__",g);k!==void 0&&h.set("__stsd__",c("Base64").encode(JSON.stringify(k)));var l=new Map();for(h of h){var m=h[0],n=h[1];l.set(m,n)}m=j.addQueryParams(l);if(m!=null)return m.toString()}}}return e({entryPointAction:"SEARCH_BOX",highConfidenceResult:c("searchCometTypeaheadGetHighConfidenceResult")(b),query:i,stsDisambiguation:k,typeaheadSessionID:a})}},a[1]=f,a[2]=g,a[3]=e,a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["react","react-compiler-runtime","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(10),e=a.entry;a=a.queryString;var f=c("useCometRouterDispatcher")(),g=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),h;b[0]!==g||b[1]!==e||b[2]!==a?(h=g({entry:e,queryString:a}),b[0]=g,b[1]=e,b[2]=a,b[3]=h):h=b[3];g=h;var j=g;b[4]!==f||b[5]!==j?(e=function(){f!=null&&f.preloadRouteCode(j)},a=[f,j],b[4]=f,b[5]=j,b[6]=e,b[7]=a):(e=b[6],a=b[7]);i(e,a);b[8]!==j?(h={preloadCodeOnMount:!0,preventLocalNavigation:!0,url:j},b[8]=j,b[9]=h):h=b[9];g=h;return g}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo,l={view:{backgroundColor:"x1jx94hy",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}};function a(a){a=a.onHeaderActionPress;var b=k(function(){return[l.view]},[]),d=k(function(){return j.jsx(c("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return c("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:c("searchCometTypeaheadSTSMappings"),emptyStateContent:d,getLinkProps:c("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:a,seeAllLabelBuilder:m,xstyle:b})}function m(a){return h._(/*BTDS*/"Search for {=m1}",[h._implicitParam("=m1",j.jsx("strong",{children:h._(/*BTDS*/"{query}",[h._param("query",a)])}))])}m.displayName=m.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9365993650171871"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c},params:{id:b("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","filterNulls","react","react-compiler-runtime","recoverableViolation","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a){var e=d("react-compiler-runtime").c(3),f=a.bootstrapDatasource,g=d("CometRelay").useRelayEnvironment();e[0]!==f||e[1]!==g?(a={validate:function(a){a=c("filterNulls")(a.map(k));d("CometRelay").fetchQuery(g,h!==void 0?h:h=b("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:a}}).subscribe({error:j,next:function(a){a=a.search_client_cache_policy_check;for(a of(a=a==null?void 0:a.policy_decision)!=null?a:[]){var b=a.cache_type,c=a.force_cache_refresh,d=a.ids_to_remove;if(b==="KEYWORD_BOOTSTRAP"){for(b of d)f.removeEntriesByEntID(b);c===!0&&(f.clear(),f.bootstrap())}}}})}},e[0]=f,e[1]=g,e[2]=a):a=e[2];e=a;return e}function j(a){d("CometRelayErrorHandling").markErrorAsHandled(a)}function k(a){if(a.subtype!=="bootstrap")return null;a=(a=a.rawData.structuredInfo)!=null?a:{};a=a.direct_nav_result;if(a==null)return null;var b=a.ent_id;a=a.title;if(b==null||a==null){c("recoverableViolation")("Unexpected missing ent_id or title on direct_nav_result","search");return null}return{id:b,keyword:a}}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"],i,j=i||(i=d("react"));i.useCallback;function a(a){function b(b){var c=d("react-compiler-runtime").c(15),e,f,g,i,k;c[0]!==b?(e=b.inputRef,f=b.onChange,g=b.onPressEntry,k=b.shouldQueryStringUpdateFromSelectedEntryOnClick,i=babelHelpers.objectWithoutPropertiesLoose(b,h),c[0]=b,c[1]=e,c[2]=f,c[3]=g,c[4]=i,c[5]=k):(e=c[1],f=c[2],g=c[3],i=c[4],k=c[5]);b=k===void 0?!1:k;c[6]!==f||c[7]!==g?(k=function(b,c){var a=b.metaData,d=b.subtype;a=a.markers;d=d==="recent"&&a.has("entity")||a.has("direct_nav");f(d?"":b.label);g==null||g(b,c)},c[6]=f,c[7]=g,c[8]=k):k=c[8];k=k;var l;c[9]!==e||c[10]!==k||c[11]!==f||c[12]!==i||c[13]!==b?(l=j.jsx(a,babelHelpers["extends"]({},i,{inputRef:e,onChange:f,onPressEntry:k,shouldQueryStringUpdateFromSelectedEntryOnClick:b})),c[9]=e,c[10]=k,c[11]=f,c[12]=i,c[13]=b,c[14]=l):l=c[14];return l}return b}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g){"use strict";var h=["inputRef"],i,j=i||(i=d("react"));b=i;b.useCallback;b.useMemo;function a(a){function b(b){var e=d("react-compiler-runtime").c(13),f,g;e[0]!==b?(f=b.inputRef,g=babelHelpers.objectWithoutPropertiesLoose(b,h),e[0]=b,e[1]=f,e[2]=g):(f=e[1],g=e[2]);b=c("useCometTypeaheadInputRefs")(f);f=b.composedRef;var i=b.inputRef;b=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();var k=b.dispatchIsOpened;e[3]!==k||e[4]!==i?(b=function(){i.current!=null&&(i.current.focus(),k(!0))},e[3]=k,e[4]=i,e[5]=b):b=e[5];b=b;var l;e[6]!==b?(l=d("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",b),e[6]=b,e[7]=l):l=e[7];e[8]!==l?(b=[l],e[8]=l,e[9]=b):b=e[9];l=b;b=l;c("useGlobalKeyCommands")(b);e[10]!==f||e[11]!==g?(l=j.jsx(a,babelHelpers["extends"]({},g,{inputRef:f})),e[10]=f,e[11]=g,e[12]=l):l=e[12];return l}return b}g["default"]=a}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["inputRef","onPressEntry","traceProvider"],i,j=i||(i=d("react"));i.useCallback;function a(a){function b(b){var c=d("react-compiler-runtime").c(13),e,f,g,i;c[0]!==b?(e=b.inputRef,f=b.onPressEntry,i=b.traceProvider,g=babelHelpers.objectWithoutPropertiesLoose(b,h),c[0]=b,c[1]=e,c[2]=f,c[3]=g,c[4]=i):(e=c[1],f=c[2],g=c[3],i=c[4]);c[5]!==f||c[6]!==i?(b=function(a,b){i&&i.setEndReason("successful_user_action"),f==null||f(a,b)},c[5]=f,c[6]=i,c[7]=b):b=c[7];b=b;var k;c[8]!==e||c[9]!==b||c[10]!==g||c[11]!==i?(k=j.jsx(a,babelHelpers["extends"]({},g,{inputRef:e,onPressEntry:b,traceProvider:i})),c[8]=e,c[9]=b,c[10]=g,c[11]=i,c[12]=k):k=c[12];return k}return b}g["default"]=a}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometTypeaheadErrorFallback.react","FBLogger","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","SearchCometTypeaheadLoggingContextProvider","XCometSearchResultsControllerRouteBuilder","emptyFunction","qex","react","react-compiler-runtime","requireDeferred","searchCometGlobalTypeahead.config","unrecoverableViolation","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadNullStateDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsURLBuilder","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadLoggingProvider","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadSERPWarmCallDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["autoOpen","inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"],j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useContext,m=b.useEffect;b.useMemo;var n=b.useRef,o=c("requireDeferred")("ODS").__setRef("SearchCometGlobalTypeahead.react"),p=(e=c("qex")._("7"))!=null?e:!1;function a(a){var b=d("react-compiler-runtime").c(77),e,f,g,j,u,v,w,x,y,z;b[0]!==a?(z=a.autoOpen,e=a.inputXStyle,g=a.onClose,j=a.onEscape,u=a.onFocus,v=a.onHeaderActionPress,w=a.onPressEntry,x=a.onSelectFreeformQuery,f=a.queryString,y=babelHelpers.objectWithoutPropertiesLoose(a,i),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=j,b[5]=u,b[6]=v,b[7]=w,b[8]=x,b[9]=y,b[10]=z):(e=b[1],f=b[2],g=b[3],j=b[4],u=b[5],v=b[6],w=b[7],x=b[8],y=b[9],z=b[10]);a=z===void 0?!1:z;z=c("useCometTypeaheadStateQueryString")(f);var A=z[0];f=z[1];var B=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")();b[11]===Symbol["for"]("react.memo_cache_sentinel")?(z={routeBuilder:c("XCometSearchResultsControllerRouteBuilder")},b[11]=z):z=b[11];var C=c("useSearchCometResultsURLBuilder")(z),D=c("useSearchCometHashtagRouteUrlBuilder")();b[12]===Symbol["for"]("react.memo_cache_sentinel")?(z={tapPoint:"tap_search_bar"},b[12]=z):z=b[12];var E=c("useCometTypeaheadNavigate")(z),F=n(!1);z=c("useSearchCometGlobalTypeaheadNullStateDataSource")();var G;b[13]!==z?(G={config:c("searchCometGlobalTypeahead.config"),recentDataSource:z},b[13]=z,b[14]=G):G=b[14];var H=c("useSearchCometGlobalTypeaheadCompositeDataSource")(G);b[15]!==H?(z=H.getBootstrapKeywordsDataSource(),b[15]=H,b[16]=z):z=b[16];G=z;if(G==null)throw c("unrecoverableViolation")("Bootstrap datasource is missing","search");b[17]!==G?(z={bootstrapDatasource:G},b[17]=G,b[18]=z):z=b[18];G=c("useSearchCometTypeaheadBootstrapValidation")(z);var I=G.validate;b[19]!==I?(z=function(a){a=a.shownEntries;I(a)},b[19]=I,b[20]=z):z=b[20];var J=z;G=l(d("SearchCometTypeaheadLoggingContextProvider").CometLoggingProviderContext);z=G.logger;var K=G.onSessionStart,L=G.setSessionEndCallback;G=G.traceProvider;var M=z;G=G;var N;b[21]!==J?(N={context:"search_global",onSessionEnd:J},b[21]=J,b[22]=N):N=b[22];N=c("useSearchCometTypeaheadLoggingProvider")(N);c("useCometSearchTypeaheadTraceProvider")(z||N);var O;b[23]!==J||b[24]!==L?(z=function(){L(J)},O=[L,J],b[23]=J,b[24]=L,b[25]=O,b[26]=z):(O=b[25],z=b[26]);m(z,O);if(M==null){M=N;o.onReady(s);throw c("FBLogger")("search").mustfix("Typeahead used without logger in context")}if(G==null)throw c("FBLogger")("search").mustfix("Typeahead used without traceProvider in context");z=c("useSearchCometTypeaheadRecentDataSourceContextDecorator")(H,!1);b[27]===Symbol["for"]("react.memo_cache_sentinel")?(O={decorate:c("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")},b[27]=O):O=b[27];b[28]!==z?(N=[z,O].filter(Boolean),b[28]=z,b[29]=N):N=b[29];O=N;z=O;b[30]!==H?(N=function(){H.bootstrap()},O=[H],b[30]=H,b[31]=N,b[32]=O):(N=b[31],O=b[32]);m(N,O);b[33]!==u||b[34]!==K?(N=function(){F.current=!0,K(),u&&u()},b[33]=u,b[34]=K,b[35]=N):N=b[35];O=N;b[36]!==M||b[37]!==E||b[38]!==w||b[39]!==A||b[40]!==B?(N=function(a,b){var c;if(b===!0)return;b=a.metaData;b=b==null?void 0:b.markers;var d=b!=null&&b.has("entity");b=b!=null&&b.has("direct_nav");c=B({entry:a,queryString:A,typeaheadSessionID:(c=M)==null?void 0:c.getSessionID()});c=t(a,c,d,b);E(c);w==null||w(a)},b[36]=M,b[37]=E,b[38]=w,b[39]=A,b[40]=B,b[41]=N):N=b[41];M;N=N;var P;b[42]!==D||b[43]!==M||b[44]!==E||b[45]!==x||b[46]!==A||b[47]!==C?(P=function(a){var b=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(a);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&b!=null){b=D({entryPointAction:"SEARCH_BOX",exploreEntryPoint:A===""?3:4,hashtag:b,typeaheadSessionID:(b=M)==null?void 0:b.getSessionID()})}else{var c;b=C({entryPointAction:"SEARCH_BOX",query:a,typeaheadSessionID:(c=M)==null?void 0:c.getSessionID()})}E(b);x==null||x(a)},b[42]=D,b[43]=M,b[44]=E,b[45]=x,b[46]=A,b[47]=C,b[48]=P):P=b[48];M;P=P;var Q;b[49]!==H||b[50]!==g?(Q=function(){H.clearQueryCache(),g&&g()},b[49]=H,b[50]=g,b[51]=Q):Q=b[51];Q=Q;var R=c("useStable")(r),S;b[52]===Symbol["for"]("react.memo_cache_sentinel")?(S=h._(/*BTDS*/"Search Facebook"),b[52]=S):S=b[52];S=S;var T=A==="";T=T?"grid":"listbox";var U;b[53]===Symbol["for"]("react.memo_cache_sentinel")?(U={bypassCacheRenderLimitCheck:p},b[53]=U):U=b[53];var V=y.inputEndContent,W;b[54]!==e?(W={hideIconOnFocus:!0,size:"large",xstyle:e},b[54]=e,b[55]=W):W=b[55];e=y.inputStartContent;var X;b[56]===Symbol["for"]("react.memo_cache_sentinel")?(X=h._(/*BTDS*/"Search Facebook"),b[56]=X):X=b[56];var Y=M,Z;b[57]!==v?(Z={onHeaderActionPress:v},b[57]=v,b[58]=Z):Z=b[58];v=c("useSearchCometGlobalTypeaheadViewStrategy")(Z);b[59]!==R||b[60]!==a||b[61]!==H||b[62]!==Q||b[63]!==O||b[64]!==N||b[65]!==P||b[66]!==M||b[67]!==j||b[68]!==y||b[69]!==A||b[70]!==f||b[71]!==z||b[72]!==W||b[73]!==v||b[74]!==G||b[75]!==T?(Z=k.jsx(c("CometErrorBoundary.react"),{fallback:q,children:k.jsx(R,babelHelpers["extends"]({},y,{autoOpen:a,dataSource:H,dataSourceFetchConfigParams:U,decorators:z,inputEndContent:V,inputExtraProps:W,inputStartContent:e,inputStrategyRenderer:c("SearchCometGlobalTypeaheadInputStrategy.react"),label:X,layoutStrategyRenderer:c("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:Y,onChange:f,onClose:Q,onEscape:j,onFocus:O,onPressEntry:N,onSelectFreeformQuery:P,placeholder:S,queryString:A,testid:void 0,traceProvider:G,viewRole:T,viewStrategyRenderer:v}))}),b[59]=R,b[60]=a,b[61]=H,b[62]=Q,b[63]=O,b[64]=N,b[65]=P,b[66]=M,b[67]=j,b[68]=y,b[69]=A,b[70]=f,b[71]=z,b[72]=W,b[73]=v,b[74]=G,b[75]=T,b[76]=Z):Z=b[76];return Z}function q(){return k.jsx(c("CometTypeaheadErrorFallback.react"),{})}q.displayName=q.name+" [from "+f.id+"]";function r(){return(c("withSearchCometTypeaheadSERPWarmCallDecorator")!=null?c("withSearchCometTypeaheadSERPWarmCallDecorator"):c("emptyFunction").thatReturnsArgument)(c("withSearchCometTypeaheadTraceEndReasonDecorator")(c("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(c("withSearchCometTypeaheadBaseNavigationDecorator")(c("BaseTypeahead.react")))))}function s(a){a.bumpEntityKey(354,"typeahead.missing_logger_context","focused")}function t(a,b,c,d){var e=a.rawData,f;if(e!=null&&a.subtype==="recent"&&c){var g;f=e==null||(g=e.profile)==null?void 0:g.url}if(e!=null&&(a.subtype==="keyword"||a.subtype==="bootstrap"||a.subtype==="recent")&&d){var h;f=e==null||(h=e.structuredInfo)==null||(h=h.direct_nav_result)==null?void 0:h.link_url}return f!=null?f:b}g["default"]=a}),226);